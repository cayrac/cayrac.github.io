"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[417],{3417:function(I,E,a){a.d(E,{b:function(){return B}});var f=a(5671),M=a(3144),e=a(5542),h=a(4942),O=a(311),P=a(7355),p=a(2107),x=a(7106),D=a(2473),T=a(8223),A=a(6702),b=a(9808),Z=a(7423);function u(o,s){if(1&o){var r=e.EpF();e.TgZ(0,"div",6),e.NdJ("click",function(){var S=e.CHM(r).$implicit;return e.oxw().selectedClass=S}),e._UZ(1,"img",7),e.TgZ(2,"div",8),e._uU(3),e.qZA(),e.qZA()}if(2&o){var t=s.$implicit,m=e.oxw();e.ekj("selected",m.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH),e.xp6(2),e.Oqu(m.getLevel(t))}}var g=function(){var o=function(){function s(r,t,m,_,y){(0,f.Z)(this,s),this.messageService=r,this.buildStorageService=t,this.buildService=m,this.slormancerSaveParserService=_,this.slormancerCharacterBuilderService=y,this.HERO_CLASSES=[p.i.Warrior,p.i.Huntress,p.i.Mage],this.created=new e.vpe,this.name="Default name",this.characters=null,this.selectedClass=null}return(0,M.Z)(s,[{key:"parseGameSave",value:function(t){try{var m,_=this.slormancerSaveParserService.parseSaveFile(t);this.characters=((0,h.Z)(m={},p.i.Warrior,this.slormancerCharacterBuilderService.getCharacterFromSave(_,p.i.Warrior)),(0,h.Z)(m,p.i.Huntress,this.slormancerCharacterBuilderService.getCharacterFromSave(_,p.i.Huntress)),(0,h.Z)(m,p.i.Mage,this.slormancerCharacterBuilderService.getCharacterFromSave(_,p.i.Mage)),m),this.selectedClass=null}catch(y){console.error(y),this.messageService.error("An error occured while parsing this save file")}}},{key:"getLevel",value:function(t){var m="";return null!==this.characters&&(m=this.characters[t].level.toString()),m}},{key:"createBuild",value:function(){if(null!==this.selectedClass&&null!==this.characters){var t=this.buildService.createBuildWithCharacter(this.name,"New layer",this.characters[this.selectedClass]);this.buildStorageService.addBuild(t),this.created.emit()}}}]),s}();return o.\u0275fac=function(r){return new(r||o)(e.Y36(T.e),e.Y36(O.x),e.Y36(P.d),e.Y36(x.X),e.Y36(D.o))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-build-from-game"]],inputs:{name:"name"},outputs:{created:"created"},decls:9,vars:6,consts:[[1,"import-game"],["label","Upload a Slormancer save file","help","Save files are located in :\n        C:\\Users\\[User]\\AppData\\Local\\The_Slormancer",3,"upload"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"head",3,"click"],[3,"src"],[1,"level"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"app-file-upload-button",1),e.NdJ("upload",function(_){return t.parseGameSave(_)}),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"p"),e._uU(4,"Choose which character you want to upload"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,u,4,4,"div",4),e.qZA(),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return t.createBuild()}),e._uU(8,"Create build"),e.qZA(),e.qZA()),2&r&&(e.xp6(2),e.ekj("disabled",null===t.characters),e.xp6(1),e.ekj("disabled",null===t.characters),e.xp6(3),e.Q6J("ngForOf",t.HERO_CLASSES),e.xp6(1),e.Q6J("disabled",null===t.characters||null===t.selectedClass))},directives:[A.Q,b.sg,Z.lW],styles:[".import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;grid-gap:4px;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:4px;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:24px;height:24px;line-height:8px;font-size:12px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.1}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{border-color:#b7b7b7}"]}),o}(),d=a(2846),C=function(){var o=function(){function s(r,t){(0,f.Z)(this,s),this.buildStorageService=r,this.buildService=t,this.created=new e.vpe,this.name="Default name"}return(0,M.Z)(s,[{key:"createBuild",value:function(t){if(null!==t.character){var m=this.buildService.createBuildWithCharacter(this.name,"Imported layer",t.character);this.buildStorageService.addBuild(m),this.created.emit()}else if(null!==t.layer){var _=this.buildService.createBuildWithCharacter(this.name,t.layer.name,t.layer.character);this.buildStorageService.addBuild(_),this.created.emit()}else null!==t.planner&&(this.buildStorageService.addBuild(t.planner),this.created.emit())}}]),s}();return o.\u0275fac=function(r){return new(r||o)(e.Y36(O.x),e.Y36(P.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-build-from-export"]],inputs:{name:"name"},outputs:{created:"created"},decls:2,vars:0,consts:[[1,"import-game"],["uploadLabel","Upload an exported file","importLabel","Create build",3,"import"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"app-import-data",1),e.NdJ("import",function(_){return t.createBuild(_)}),e.qZA(),e.qZA())},directives:[d.M],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}"]}),o}();function l(o,s){if(1&o){var r=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){var S=e.CHM(r).$implicit;return e.oxw().selectedClass=S}),e._UZ(1,"img",6),e.qZA()}if(2&o){var t=s.$implicit,m=e.oxw();e.ekj("selected",m.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH)}}var c=function(){var o=function(){function s(r,t){(0,f.Z)(this,s),this.buildService=r,this.buildStorageService=t,this.HERO_CLASSES=[p.i.Warrior,p.i.Huntress,p.i.Mage],this.created=new e.vpe,this.name="Default name",this.selectedClass=null}return(0,M.Z)(s,[{key:"createBuild",value:function(){if(null!==this.selectedClass){var t=this.buildService.createBuild(this.selectedClass,this.name);this.buildService.addLayer(t,this.name),this.buildStorageService.addBuild(t),this.created.emit()}}}]),s}();return o.\u0275fac=function(r){return new(r||o)(e.Y36(P.d),e.Y36(O.x))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-build-empty"]],inputs:{name:"name"},outputs:{created:"created"},decls:8,vars:2,consts:[[1,"import-game"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"head",3,"click"],[3,"src"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"p"),e._uU(3,"Choose which character you want to build"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,l,2,3,"div",3),e.qZA(),e.qZA(),e.TgZ(6,"button",4),e.NdJ("click",function(){return t.createBuild()}),e._uU(7,"Create build"),e.qZA(),e.qZA()),2&r&&(e.xp6(5),e.Q6J("ngForOf",t.HERO_CLASSES),e.xp6(1),e.Q6J("disabled",null===t.selectedClass))},directives:[b.sg,Z.lW],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;grid-gap:4px;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:4px;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:16px;height:16px;line-height:14px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]{border-color:#b7b7b7}"]}),o}(),i=a(7322),n=a(7531),v=a(3075),B=function(){var o=function(){function s(){(0,f.Z)(this,s),this.created=new e.vpe,this.buildName="My build"}return(0,M.Z)(s,[{key:"passCreatedEvent",value:function(){this.created.emit()}}]),s}();return o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-build"]],outputs:{created:"created"},decls:16,vars:4,consts:[[3,"name","created"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","text",3,"ngModel","ngModelChange"]],template:function(r,t){1&r&&(e.TgZ(0,"h3"),e._uU(1,"Create build from a Slormancer save file"),e.qZA(),e.TgZ(2,"app-create-build-from-game",0),e.NdJ("created",function(){return t.passCreatedEvent()}),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"h3"),e._uU(5,"Create build from exported data"),e.qZA(),e.TgZ(6,"app-create-build-from-export",0),e.NdJ("created",function(){return t.passCreatedEvent()}),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"h3"),e._uU(9,"Create empty build"),e.qZA(),e.TgZ(10,"app-create-build-empty",0),e.NdJ("created",function(){return t.passCreatedEvent()}),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"mat-form-field",1),e.TgZ(13,"mat-label"),e._uU(14,"Build name"),e.qZA(),e.TgZ(15,"input",2),e.NdJ("ngModelChange",function(_){return t.buildName=_}),e.qZA(),e.qZA()),2&r&&(e.xp6(2),e.Q6J("name",t.buildName),e.xp6(4),e.Q6J("name",t.buildName),e.xp6(4),e.Q6J("name",t.buildName),e.xp6(5),e.Q6J("ngModel",t.buildName))},directives:[g,C,c,i.KE,i.hX,n.Nt,v.Fj,v.JJ,v.On],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}"]}),o}()},6702:function(I,E,a){a.d(E,{Q:function(){return Z}});var f=a(5671),M=a(3144),e=a(5542),h=a(5581),O=a(8223),P=a(7423),p=a(9808),x=a(3874),D=a(7238);function T(u,g){if(1&u&&(e.TgZ(0,"mat-icon",5),e._uU(1,"help_outline"),e.qZA()),2&u){var d=e.oxw(2);e.Q6J("matTooltip",d.help)}}function A(u,g){if(1&u&&(e.ynx(0),e.TgZ(1,"mat-icon"),e._uU(2,"file_upload"),e.qZA(),e._uU(3),e.YNc(4,T,2,1,"mat-icon",4),e.BQk()),2&u){var d=e.oxw();e.xp6(3),e.hij("",d.label," "),e.xp6(1),e.Q6J("ngIf",null!==d.help)}}function b(u,g){1&u&&(e.ynx(0),e.TgZ(1,"mat-icon",6),e._uU(2,"sync"),e.qZA(),e._uU(3,"Uploading..."),e.BQk())}var Z=function(){var u=function(){function g(d){(0,f.Z)(this,g),this.messageService=d,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.label=null,this.help=null,this.upload=new e.vpe,this.busy=!1,this.parsing=!1}return(0,M.Z)(g,[{key:"uploadFile",value:function(C){return new Promise(function(l,c){var i=new FileReader;i.onerror=function(){i=null,c()},i.onloadend=function(){null!==i&&null!==i.result&&(l(i.result.toString()),i=null)},i.readAsText(C)})}},{key:"startUpload",value:function(C){var l=this,c=C.target;if(null!==c&&!this.busy){var i=c.files,n=null===i?null:(0,h.lA)(i[0]);null!==n&&(n.size<=this.MAX_UPLOAD_FILE_SIZE?(this.busy=!0,this.uploadFile(n).then(function(v){l.upload.emit(v),c.value="",l.busy=!1},function(){c.value="",l.messageService.error("Failed to upload this file"),l.busy=!1})):this.messageService.error("Cannot upload files bigger than "+this.MAX_UPLOAD_FILE_SIZE_MO+"Mo"))}}}]),g}();return u.\u0275fac=function(d){return new(d||u)(e.Y36(O.e))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-file-upload-button"]],inputs:{label:"label",help:"help"},outputs:{upload:"upload"},decls:5,vars:2,consts:[["type","file",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"animation-rotation"]],template:function(d,C){if(1&d){var l=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(i){return C.startUpload(i)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return e.CHM(l),e.MAs(1).click()}),e.YNc(3,A,5,2,"ng-container",3),e.YNc(4,b,4,0,"ng-container",3),e.qZA()}2&d&&(e.xp6(3),e.Q6J("ngIf",!C.busy),e.xp6(1),e.Q6J("ngIf",C.busy))},directives:[P.lW,p.O5,x.Hw,D.gM],styles:["input[type=file][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{width:100%}"]}),u}()},2846:function(I,E,a){a.d(E,{M:function(){return C}});var f=a(5671),M=a(3144),e=a(5542),h=a(3075),O=a(8271),P=a(6702),p=a(7322),x=a(7531),D=a(9808),T=a(7423);function A(l,c){1&l&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a save, build, layer or link"),e.qZA())}function b(l,c){1&l&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a build, layer or link"),e.qZA())}function Z(l,c){1&l&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Character found"),e.qZA())}function u(l,c){1&l&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Layer found"),e.qZA())}function g(l,c){1&l&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Build found"),e.qZA())}function d(l,c){1&l&&(e.TgZ(0,"mat-hint",10),e._uU(1,"No valid data found"),e.qZA())}var C=function(){var l=function(){function c(i){var n=this;(0,f.Z)(this,c),this.importExportService=i,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.uploadLabel=null,this.importLabel=null,this.heroClass=null,this.import=new e.vpe,this.sharedData=null,this.importContent=new h.NI(null,h.kI.maxLength(this.MAX_UPLOAD_FILE_SIZE)),this.importContent.valueChanges.subscribe(function(v){null===v||0===v.length?n.sharedData=null:n.parseExportedData(v)})}return(0,M.Z)(c,[{key:"parseExportedData",value:function(n){this.sharedData=this.importExportService.import(n,this.heroClass),console.log("parse exported data : ",this.sharedData)}},{key:"hasValidSharedData",value:function(){return null!==this.sharedData&&(null!==this.sharedData.character&&(null===this.heroClass||this.sharedData.character.heroClass===this.heroClass)||null!==this.sharedData.layer&&(null===this.heroClass||this.sharedData.layer.character.heroClass===this.heroClass)||null!==this.sharedData.planner&&(null===this.heroClass||this.sharedData.planner.heroClass===this.heroClass))}},{key:"upload",value:function(n){this.importContent.setValue(n)}},{key:"importData",value:function(){null!==this.sharedData&&(this.import.emit(this.sharedData),this.importContent.setValue(""),this.sharedData=null)}}]),c}();return l.\u0275fac=function(i){return new(i||l)(e.Y36(O.s))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-import-data"]],inputs:{uploadLabel:"uploadLabel",importLabel:"importLabel",heroClass:"heroClass"},outputs:{import:"import"},decls:16,vars:11,consts:[[1,"import"],[3,"label","upload"],["appearance","outline","color","primary","floatLabel","never"],["matInput","",3,"formControl"],["align","end",4,"ngIf"],["align","end","class","success",4,"ngIf"],["align","end","class","error",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["align","end"],["align","end",1,"success"],["align","end",1,"error"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"app-file-upload-button",1),e.NdJ("upload",function(B){return n.upload(B)}),e.qZA(),e.TgZ(2,"mat-form-field",2),e.TgZ(3,"mat-label"),e._uU(4,"Import content..."),e.qZA(),e._UZ(5,"textarea",3),e.YNc(6,A,2,0,"mat-hint",4),e.YNc(7,b,2,0,"mat-hint",4),e.YNc(8,Z,2,0,"mat-hint",5),e.YNc(9,u,2,0,"mat-hint",5),e.YNc(10,g,2,0,"mat-hint",5),e.YNc(11,d,2,0,"mat-hint",6),e.TgZ(12,"mat-error"),e._uU(13),e.qZA(),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return n.importData()}),e._uU(15),e.qZA(),e.qZA()),2&i&&(e.xp6(1),e.Q6J("label",n.uploadLabel),e.xp6(4),e.Q6J("formControl",n.importContent),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null!==n.heroClass),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null===n.heroClass),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.character),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.layer),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.planner),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&!n.hasValidSharedData()),e.xp6(2),e.hij("Cannot parse files bigger than ",n.MAX_UPLOAD_FILE_SIZE_MO,"Mo"),e.xp6(1),e.Q6J("disabled",!n.hasValidSharedData()),e.xp6(1),e.Oqu(n.importLabel))},directives:[P.Q,p.KE,p.hX,x.Nt,h.Fj,h.JJ,h.oH,D.O5,p.TO,T.lW,p.bx],styles:[".import[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;width:100%}.import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px;max-height:60px}"]}),l}()}}]);