"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[181],{3069:function(y,h,e){e.r(h),e.d(h,{CreateModule:function(){return t}});var _=e(3144),m=e(5671),p=e(9776),v=e(9808),C=e(2271),u=e(1083),n=e(5542),s=e(9224),d=e(3417),l=[{path:"",component:function(){var r=function(){function a(i){(0,m.Z)(this,a),this.router=i,this.created=new n.vpe}return(0,_.Z)(a,[{key:"redirectToBuild",value:function(){this.router.navigate(["/build"])}}]),a}();return r.\u0275fac=function(i){return new(i||r)(n.Y36(u.F0))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-create-first-build"]],decls:4,vars:0,consts:[[3,"created"]],template:function(i,f){1&i&&(n.TgZ(0,"main"),n.TgZ(1,"mat-card"),n.TgZ(2,"mat-card-content"),n.TgZ(3,"app-create-build",0),n.NdJ("created",function(){return f.redirectToBuild()}),n.qZA(),n.qZA(),n.qZA(),n.qZA())},directives:[s.a8,s.dn,d.b],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;grid-gap:20px;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),r}()}],o=function(){var r=(0,_.Z)(function a(){(0,m.Z)(this,a)});return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({providers:[],imports:[[u.Bz.forChild(l)],u.Bz]}),r}(),t=function(){var r=(0,_.Z)(function a(){(0,m.Z)(this,a)});return r.\u0275fac=function(i){return new(i||r)},r.\u0275mod=n.oAB({type:r}),r.\u0275inj=n.cJS({providers:[],imports:[[v.ez,C.m,o,p.U8]]}),r}()},7355:function(y,h,e){e.d(h,{d:function(){return n}});var _=e(5671),m=e(3144),p=e(2340),v=e(1093),C=e(2473),u=e(5542),n=function(){var s=function(){function d(c){(0,_.Z)(this,d),this.slormancerCharacterBuilderService=c}return(0,m.Z)(d,[{key:"createBuild",value:function(l,o){return{version:p.N.version,name:o,heroClass:l,layers:[],configuration:v.g}}},{key:"createBuildWithCharacter",value:function(l,o,t){var r={version:p.N.version,name:l,heroClass:t.heroClass,layers:[],configuration:v.g};return this.addLayer(r,o,this.slormancerCharacterBuilderService.getCharacterClone(t)),r}},{key:"addLayer",value:function(l,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={name:o,character:null!==t?t:this.slormancerCharacterBuilderService.getCharacter(l.heroClass)};return l.layers.push(r),r}},{key:"duplicateLayer",value:function(l,o,t){return this.addLayer(l,t,this.slormancerCharacterBuilderService.getCharacterClone(o.character))}},{key:"deleteLayer",value:function(l,o){var t=l.layers.indexOf(o);-1!==t&&l.layers.splice(t,1)}}]),d}();return s.\u0275fac=function(c){return new(c||s)(u.LFG(C.o))},s.\u0275prov=u.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s}()},8271:function(y,h,e){e.d(h,{s:function(){return d}});var _=e(5671),m=e(3144),p=e(7106),v=e(5458),C=e(2473),u=e(5581),n=e(3390),s=e(5542),d=function(){var c=function(){function l(o,t,r,a){(0,_.Z)(this,l),this.slormancerCharacterBuilderService=o,this.slormancerSaveParserService=t,this.slormancerShortDataService=r,this.jsonConverterService=a;var i=document.getElementsByTagName("base")[0],f="/";if(void 0!==i){var g=i.getAttribute("href");null!==g&&(f=g)}this.VIEW_BUILD_PATH=window.origin+f+"view/build/"}return(0,m.Z)(l,[{key:"parseSaveData",value:function(t,r){var a=this.slormancerSaveParserService.parseSaveFile(t);return this.slormancerCharacterBuilderService.getCharacterFromSave(a,r)}},{key:"parseUrlData",value:function(t){var r={character:null,layer:null,planner:null},a=null;try{var f=new URL(t).pathname.split("/");a=(0,u.lA)(f[f.length-1]),console.log("parse url fragment : ",a)}catch(g){}return null!==a&&(r=this.importFromShortData(a),console.log("parsed from url : ",r)),r}},{key:"parseJsonData",value:function(t){var r=JSON.parse(t);return this.jsonConverterService.jsonToSharedData(r)}},{key:"import",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a={character:null,layer:null,planner:null};if(null!==r)try{return a.character=this.parseSaveData(t,r),a}catch(i){console.error("Error when parsing save file : ",i)}try{return this.parseJsonData(atob(t))}catch(i){}try{return this.parseJsonData(t)}catch(i){}return null===(a=this.importFromShortData(t)).character&&(a=this.parseUrlData(t)),console.log("data parsed : ",a),a}},{key:"exportCharacter",value:function(t){return btoa(JSON.stringify(this.jsonConverterService.characterToJson(t)))}},{key:"exportLayer",value:function(t){return btoa(JSON.stringify(this.jsonConverterService.layerToJson(t)))}},{key:"exportBuild",value:function(t){return btoa(JSON.stringify(this.jsonConverterService.buildToJson(t)))}},{key:"exportCharacterAsLink",value:function(t){var r=this.slormancerShortDataService.characterToShortData(t);return this.VIEW_BUILD_PATH+r}},{key:"importFromShortData",value:function(t){return{character:this.slormancerShortDataService.shortDataToCharacter(t),layer:null,planner:null}}}]),l}();return c.\u0275fac=function(o){return new(o||c)(s.LFG(C.o),s.LFG(p.X),s.LFG(v.q),s.LFG(n.D))},c.\u0275prov=s.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c}()},2271:function(y,h,e){e.d(h,{m:function(){return u}});var _=e(3144),m=e(5671),p=e(9808),v=e(9881),C=e(5542),u=function(){var n=(0,_.Z)(function s(){(0,m.Z)(this,s)});return n.\u0275fac=function(d){return new(d||n)},n.\u0275mod=C.oAB({type:n}),n.\u0275inj=C.cJS({providers:[],imports:[[p.ez,v.q],v.q]}),n}()}}]);