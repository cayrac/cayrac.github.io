"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[58],{5058:function(ta,ne,p){p.r(ne),p.d(ne,{BuildModule:function(){return na}});var _=p(3144),v=p(5671),h=p(9808),g=p(3075),de=p(2271),q=p(1083),M=p(136),Z=p(7777),x=p(2722),O=p(6446),te=p(7469),e=p(5542),I=p(3874),L=p(3251),V=p(2638),G=p(2340),C=p(8966),U=p(7423),ge=function(){var a=(0,_.Z)(function l(){(0,v.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-planner-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(n,i){1&n&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Creating a new build will delete the current one\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions"),e.TgZ(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Delete"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[C.xY,C.H8,U.lW,C.ZT],styles:[""]}),a}(),T=p(7322),$=p(7531);function me(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions"),e.TgZ(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Submit"),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Oqu(i.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var F=function(){var a=function(){function l(n,i){(0,v.Z)(this,l),this.dialog=n,this.title=i.title,this.form=new g.cw({name:new g.NI(i.name,g.kI.required)})}return(0,_.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(C.so),e.Y36(C.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,i){1&n&&e.YNc(0,me,16,3,"form",0),2&n&&e.Q6J("ngIf",null!==i.form)},directives:[h.O5,g._Y,g.JL,g.sg,C.uh,C.xY,T.KE,T.hX,$.Nt,g.Fj,g.JJ,g.u,T.TO,C.H8,U.lW,C.ZT],styles:[""]}),a}(),fe=function(){var a=(0,_.Z)(function l(){(0,v.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-replace-planner-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(n,i){1&n&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Are you sure you to replace your current build ?\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions"),e.TgZ(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Replace"),e.qZA(),e.qZA()),2&n&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[C.xY,C.H8,U.lW,C.ZT],styles:[""]}),a}(),_e=p(7757),ae=p.n(_e);var be=function(){var a=function(){function l(){(0,v.Z)(this,l)}return(0,_.Z)(l,[{key:"copyToClipboard",value:function(i){var o=null;try{return(o=document.createElement("textarea")).style.position="fixed",o.style.left="0",o.style.top="0",o.style.opacity="0",o.value=i,document.body.appendChild(o),o.focus(),o.select(),document.execCommand("copy"),document.body.removeChild(o),!0}catch(t){null!==o&&document.body.contains(o)&&document.body.removeChild(o)}return!1}},{key:"getClipboardText",value:function(){return function(a,l,n,i){return new(n||(n=Promise))(function(t,r){function c(d){try{u(i.next(d))}catch(m){r(m)}}function s(d){try{u(i.throw(d))}catch(m){r(m)}}function u(d){d.done?t(d.value):function(t){return t instanceof n?t:new n(function(r){r(t)})}(d.value).then(c,s)}u((i=i.apply(a,l||[])).next())})}(this,void 0,void 0,ae().mark(function i(){var o;return ae().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=null,!navigator.clipboard){r.next=10;break}return r.prev=2,r.next=5,navigator.clipboard.readText();case 5:o=r.sent,r.next=10;break;case 8:r.prev=8,r.t0=r.catch(2);case 10:return r.abrupt("return",o);case 11:case"end":return r.stop()}},i,null,[[2,8]])}))}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Ce=p(8271),P=p(4917),f=p(2107),z=p(8223),ke=function(){var a=function(){function l(){(0,v.Z)(this,l)}return(0,_.Z)(l,[{key:"downloadFile",value:function(i,o){var t=document.createElement("a"),r=new Blob([i],{type:"text/plain"}),c=window.URL.createObjectURL(r);t.href=c,t.download=o,t.click(),window.URL.revokeObjectURL(c),t.remove()}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Se=p(2846),H=p(7238),xe=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t,r,c,s,u,d){var m;return(0,v.Z)(this,i),(m=n.call(this)).messageService=o,m.downloadService=t,m.clipboardService=r,m.importExportService=c,m.plannerService=s,m.router=u,m.dialog=d,m.VERSION=G.N.version,m.GITHUB_LINK=G.N.githublink,m.GAME_LINK=G.N.gameLink,m.sidenav=null,m.busy=!1,m}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"closeSideNav",value:function(){null!==this.sidenav&&this.sidenav.close()}},{key:"getHeroClass",value:function(){var t=f.i.Warrior,r=this.plannerService.getPlanner();return null!==r&&(t=r.heroClass),t}},{key:"import",value:function(t){var r=this;null!==t&&(null!==t.character?this.dialog.open(F,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(function(s){s&&(r.plannerService.addLayer(s,t.character),r.closeSideNav())}):null!==t.layer?(this.plannerService.addLayer(t.layer.name,t.layer.character),this.closeSideNav()):null!==t.planner&&this.dialog.open(fe).afterClosed().subscribe(function(s){!0===s&&(r.plannerService.setPlanner(t.planner),r.closeSideNav())}))}},{key:"downloadLayer",value:function(){var t=this.plannerService.getSelectedLayer();if(null!==t){var r=this.importExportService.exportLayer(t);this.downloadService.downloadFile(r,t.name)}}},{key:"copyLayer",value:function(){var t=this.plannerService.getSelectedLayer();if(null!==t){var r=this.importExportService.exportLayer(t);this.clipboardService.copyToClipboard(r)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}},{key:"downloadPlanner",value:function(){var t=this.plannerService.getPlanner();if(null!==t){var r=this.importExportService.exportPlanner(t);this.downloadService.downloadFile(r,"build.sav")}}},{key:"copyPlanner",value:function(){var t=this.plannerService.getPlanner();if(null!==t){var r=this.importExportService.exportPlanner(t);this.clipboardService.copyToClipboard(r)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}},{key:"copyExternalLink",value:function(){var t=this.plannerService.getSelectedLayer();if(null!==t){var r=this.importExportService.exportCharacterAsLink(t.character);this.clipboardService.copyToClipboard(r)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}},{key:"createNewBuild",value:function(){var t=this;this.dialog.open(ge).afterClosed().subscribe(function(r){!0===r&&(t.plannerService.deletePlanner(),t.router.navigate(["/create"]))})}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(z.e),e.Y36(ke),e.Y36(be),e.Y36(Ce.s),e.Y36(P.q),e.Y36(q.F0),e.Y36(C.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:44,vars:4,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"build"],["mat-flat-button","","color","primary",3,"click"],[1,"info"],["target","blank",3,"href"]],template:function(n,i){1&n&&(e._UZ(0,"input",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4,"Import"),e.qZA(),e.TgZ(5,"app-import-data",3),e.NdJ("import",function(t){return i.import(t)}),e.qZA(),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",4),e.TgZ(8,"h3"),e._uU(9,"Export"),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"p"),e._uU(12,"Current layer"),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"button",7),e.NdJ("click",function(){return!i.busy&&i.downloadLayer()}),e.TgZ(15,"mat-icon"),e._uU(16,"file_download"),e.qZA(),e.qZA(),e.TgZ(17,"button",8),e.NdJ("click",function(){return!i.busy&&i.copyLayer()}),e.TgZ(18,"mat-icon"),e._uU(19,"content_copy"),e.qZA(),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return!i.busy&&i.copyExternalLink()}),e.TgZ(21,"mat-icon"),e._uU(22,"share"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",5),e.TgZ(24,"p"),e._uU(25,"Current build"),e.qZA(),e.TgZ(26,"div",6),e.TgZ(27,"button",7),e.NdJ("click",function(){return!i.busy&&i.downloadPlanner()}),e.TgZ(28,"mat-icon"),e._uU(29,"file_download"),e.qZA(),e.qZA(),e.TgZ(30,"button",8),e.NdJ("click",function(){return!i.busy&&i.copyPlanner()}),e.TgZ(31,"mat-icon"),e._uU(32,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"div",10),e.TgZ(35,"button",11),e.NdJ("click",function(){return i.createNewBuild()}),e._uU(36,"New build"),e.qZA(),e.qZA(),e.TgZ(37,"div",12),e._uU(38),e.TgZ(39,"a",13),e._uU(40,"Github"),e.qZA(),e._uU(41," - "),e.TgZ(42,"a",13),e._uU(43,"The Slormancer"),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.Q6J("heroClass",i.getHeroClass()),e.xp6(33),e.hij(" Slorm Planner ",i.VERSION," - "),e.xp6(1),e.Q6J("href",i.GITHUB_LINK,e.LSH),e.xp6(3),e.Q6J("href",i.GAME_LINK,e.LSH))},directives:[Se.M,U.lW,H.gM,I.Hw],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80%;background-color:#353535}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:16px;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:16px;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),a}(),Me=function(){var a=(0,_.Z)(function l(n){(0,v.Z)(this,l),this.name=n.name});return a.\u0275fac=function(n){return new(n||a)(e.Y36(C.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-layer-modal"]],decls:11,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(n,i){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3," You're about to delete layer "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-actions"),e.TgZ(7,"button",1),e._uU(8,"Cancel"),e.qZA(),e.TgZ(9,"button",2),e._uU(10,"Delete"),e.qZA(),e.qZA()),2&n&&(e.xp6(5),e.Oqu(i.name),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[C.uh,C.xY,C.H8,U.lW,C.ZT],styles:[""]}),a}(),Ze=p(2424),k=p(5581),S=p(9224),Y=p(4102),B=p(508);function Oe(a,l){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.label," ")}}function Te(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeSearch()}),e._uU(1,"close"),e.qZA()}}var Pe=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t,r){var c;return(0,v.Z)(this,i),(c=n.call(this)).plannerService=o,c.searchService=t,c.dialog=r,c.searchControl=new g.NI(""),c.layerControl=new g.NI(null),c.layerOptions=[],c}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.selectedLayerIndexChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){return t.layerControl.setValue(r,{emitEvent:!1})}),this.plannerService.layersChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){t.layerOptions=r.map(function(c,s){return{label:c.name,value:s}})}),this.searchService.searchChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){return t.searchControl.setValue(r,{emitEvent:!1})}),this.layerControl.setValue(this.plannerService.getSelectedLayerIndex(),{emitEvent:!1}),this.layerControl.valueChanges.subscribe(function(r){return t.plannerService.setLayerIndex(r)}),this.searchControl.valueChanges.subscribe(function(r){return t.searchService.setSearch(r)})}},{key:"hasSearch",value:function(){return this.searchService.hasSearch()}},{key:"removeSearch",value:function(){this.searchService.setSearch(null)}},{key:"editLayer",value:function(){var t=this,r=(0,k.lA)(this.plannerService.getLayers()[this.plannerService.getSelectedLayerIndex()]);null!==r&&this.dialog.open(F,{data:{title:"Edit layer name",name:r.name}}).afterClosed().subscribe(function(s){s&&t.plannerService.setLayerName(t.plannerService.getSelectedLayerIndex(),s)})}},{key:"addLayer",value:function(){var t=this;this.dialog.open(F,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(c){c&&t.plannerService.addLayer(c)})}},{key:"copyLayer",value:function(){var t=this;this.dialog.open(F,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(c){c&&t.plannerService.copyLayer(t.plannerService.getSelectedLayerIndex(),c)})}},{key:"removeLayer",value:function(){var t=this,r=(0,k.lA)(this.plannerService.getLayers()[this.plannerService.getSelectedLayerIndex()]);null!==r&&this.dialog.open(Me,{data:{name:r.name}}).afterClosed().subscribe(function(s){s&&t.plannerService.removeLayer(t.plannerService.getSelectedLayerIndex())})}},{key:"hasRoomForMoreLayer",value:function(){return this.plannerService.hasRoomForMoreLayers()}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(Ze.o),e.Y36(C.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer name",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Copy this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(n,i){1&n&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"div",1),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,Oe,2,2,"mat-option",4),e.qZA(),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA(),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return i.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA(),e.qZA(),e.TgZ(15,"button",7),e.NdJ("click",function(){return i.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.qZA(),e.TgZ(18,"button",8),e.NdJ("click",function(){return i.copyLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"mat-form-field",2),e.TgZ(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Te,2,0,"mat-icon",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(7),e.Q6J("formControl",i.layerControl),e.xp6(1),e.Q6J("ngForOf",i.layerOptions),e.xp6(4),e.Q6J("disabled",i.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!i.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!i.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",i.searchControl),e.xp6(1),e.Q6J("ngIf",i.hasSearch()))},directives:[S.a8,S.dn,T.KE,T.hX,Y.gD,g.JJ,g.oH,h.sg,U.lW,H.gM,I.Hw,$.Nt,g.Fj,h.O5,B.ey,T.R9],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:8px;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),a}(),Ae=["dragImage"],we=["dragBackground"];function qe(a,l){if(1&a&&(e.TgZ(0,"a",11,12),e.TgZ(2,"span",13),e._uU(3),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.MAs(1);e.Q6J("routerLink",n.route)("active",i.isActive),e.xp6(3),e.Oqu(n.name)}}var Ie=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o){var t;return(0,v.Z)(this,i),(t=n.call(this)).itemMoveService=o,t.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],t.isDragging=!1,t.dragImage=null,t.dragBackground=null,t.itemMoveService.draggingItem.pipe((0,x.R)(t.unsubscribe)).subscribe(function(r){t.isDragging=r;var c=t.itemMoveService.getHoldItem();null!==c&&t.dragImage&&t.dragBackground&&(t.dragImage.nativeElement.src=c.icon,t.dragBackground.nativeElement.src=c.itemIconBackground)}),t}return(0,_.Z)(i,[{key:"onMouseMove",value:function(t){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){var r=t.clientY-this.dragImage.nativeElement.height/2+"px",c=t.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=r,this.dragImage.nativeElement.style.left=c,this.dragBackground.nativeElement.style.top=r,this.dragBackground.nativeElement.style.left=c}}},{key:"onMouseUp",value:function(){this.itemMoveService.releaseHoldItem()}},{key:"onMouseContextMenu",value:function(){this.itemMoveService.releaseHoldItem()}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(te.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build"]],viewQuery:function(n,i){var o;1&n&&(e.Gf(Ae,5),e.Gf(we,5)),2&n&&(e.iGM(o=e.CRH())&&(i.dragImage=o.first),e.iGM(o=e.CRH())&&(i.dragBackground=o.first))},hostBindings:function(n,i){1&n&&e.NdJ("mousemove",function(t){return i.onMouseMove(t)})("mouseup",function(){return i.onMouseUp()})("contextmenu",function(){return i.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(n,i){if(1&n){var o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-icon",2),e.NdJ("click",function(){return e.CHM(o),e.MAs(8).toggle()}),e._uU(3,"menu"),e.qZA(),e.qZA(),e.TgZ(4,"nav",3),e.YNc(5,qe,4,3,"a",4),e.qZA(),e.qZA(),e.TgZ(6,"mat-sidenav-container"),e.TgZ(7,"mat-sidenav",null,5),e._UZ(9,"app-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header"),e._UZ(12,"router-outlet"),e._UZ(13,"img",7,8),e._UZ(15,"img",9,10),e.qZA(),e.qZA()}if(2&n){var t=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",i.ROUTES),e.xp6(4),e.Q6J("sidenav",t),e.xp6(4),e.ekj("dragging",i.isDragging),e.xp6(2),e.ekj("dragging",i.isDragging)}},directives:[I.Hw,L.BU,h.sg,V.TM,V.JX,xe,V.Rh,Pe,q.lC,q.yS,L.Nj,q.Od],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),a}(),le=p(7762),W=p(4373),Ue=p(9184),y=p(4713),A=p(4902),j=p(7201),ce=p(7438),Ne=p(7795),Le=p(9713);function Je(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(c){return e.CHM(n),e.oxw(2).selectAncestralLegacy(c)}),e._uU(1,"> "),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw().$implicit,t=e.oxw();e.Akn(o.iconStyle),e.Q6J("ancestralLegacy",t.getAncestralLegacy(i))("equipped",t.isAncestralLegacyEquipped(i))("selected",t.isNodeSelected(i))}}function Ee(a,l){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"div",10),e.YNc(2,Je,2,5,"app-ancestral-legacy-slot",11),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.oxw();e.Akn(n.style),e.Gre("zone absolute color-",n.color,""),e.ekj("large",n.large)("active",i.isRealmActive(n.realmId)),e.xp6(2),e.Q6J("ngForOf",n.ancestralLegacies)}}function Fe(a,l){1&a&&e._UZ(0,"div",13),2&a&&e.Akn(l.$implicit.style)}function Qe(a,l){1&a&&e._UZ(0,"div",14),2&a&&e.Akn(l.$implicit.style)}function He(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw().toggleNode(c.nodeId)}),e._UZ(1,"div",16),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw();e.Akn(i.style),e.ekj("active",o.isNodeActive(i.nodeId))("available",o.isNodeAvailable(i.nodeId))}}var Ye=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t,r){var c;return(0,v.Z)(this,i),(c=n.call(this)).plannerService=o,c.slormancerDataService=t,c.slormancerCharacterModifierService=r,c.selectedAncestralLegacy=null,c.selectedAncestralLegacyChange=new e.vpe,c.BOUNDS_X={min:-200,max:200},c.BOUNDS_Y={min:-200,max:200},c.availableNodes=[],c.activeRealms=[],c.weldingShapes=[],c.lineShapes=[],c.zoneShapes=[],c.nodeShapes=[],c.character=null,c.position={x:0,y:0},c.scale=2,c.grabbed=!1,c.drawMap(),c}return(0,_.Z)(i,[{key:"onWheelUp",value:function(t){return this.scale=Math.max(1,Math.min(2,this.scale+(t.deltaY>0?-.2:.2))),!1}},{key:"onMouseDown",value:function(){this.grabbed=!0}},{key:"onMouseUp",value:function(){this.grabbed=!1}},{key:"onMouseMouve",value:function(t){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+t.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+t.movementY)))}},{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){t.character=r,t.updateMap()})}},{key:"drawMap",value:function(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,y.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,y.pb)(0,9),-72,52),this.addNodeShapes((0,y.pb)(0,9).map(function(t){return 10+2*t}),-82.8,92),this.addNodeShapes((0,y.pb)(0,9).map(function(t){return 11+2*t}),-61.2,92),this.addZoneShapes((0,y.pb)(10,19),-54,112),this.addZoneShapes((0,y.pb)(20,29),-72,150,!0),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,y.pb)(0,9).map(function(t){return 31+3*t}),-72,120),this.addNodeShapes((0,y.pb)(10,19).map(function(t){return 3*t}),-81,127),this.addNodeShapes((0,y.pb)(10,19).map(function(t){return 2+3*t}),-63,127),this.addZoneShapes((0,y.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,y.pb)(0,4).map(function(t){return 61+5*t}),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,42,45,46,49,50,53,54,57,58],-72,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181)}},{key:"updateMap",value:function(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){var t=null!==this.character?this.character.ancestralLegacies.activeNodes:[],r=ce.R.filter(function(c){return void 0!==c.nodes.find(function(s){return-1!==t.indexOf(s)})});this.character.ancestralLegacies.activeNodes.length<W.sD&&(this.availableNodes=[].concat((0,A.Z)(ce.m),(0,A.Z)(r.map(function(c){return c.nodes}).flat())).filter(k.mr)),this.activeRealms=r.map(function(c){return c.realm})}}},{key:"isNodeActive",value:function(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(t)}},{key:"isRealmActive",value:function(t){return-1!==this.activeRealms.indexOf(t)}},{key:"isNodeAvailable",value:function(t){return-1!==this.availableNodes.indexOf(t)}},{key:"isNodeSelected",value:function(t){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===t}},{key:"isAncestralLegacyEquipped",value:function(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(t)}},{key:"getAncestralLegacy",value:function(t){var r=null;return null!==this.character&&(r=(0,k.lA)(this.character.ancestralLegacies.ancestralLegacies.find(function(c){return c.id==t}))),r}},{key:"toggleNode",value:function(t){if(null!==this.character){var r;r=this.isNodeActive(t)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,t):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,t),this.plannerService.updateCurrentCharacter(),r&&this.updateMap()}return!1}},{key:"selectAncestralLegacy",value:function(t){console.log(t),this.selectedAncestralLegacyChange.emit(t)}},{key:"addLineShapes",value:function(t,r,c,s){var u,d=360/t;(u=this.lineShapes).push.apply(u,(0,A.Z)((0,y.pb)(t).map(function(m){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(r+m*d)+"deg) translateX("+c+"px)"}}})))}},{key:"addWeldinghapes",value:function(t,r,c,s){var u,d=360/t;(u=this.weldingShapes).push.apply(u,(0,A.Z)((0,y.pb)(t).map(function(m){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(r+m*d)+"deg) translateX("+c+"px)"}}})))}},{key:"addZoneShapes",value:function(t,r,c){var s,u=this,d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],m=360/t.length;(s=this.zoneShapes).push.apply(s,(0,A.Z)(t.map(function(b,w){var E=u.slormancerDataService.getAncestralRealmColor(b),ee=u.slormancerDataService.getAncestralLegacyIdsFromRealm(b),pe=r+w*m;return{style:{transform:"translate(-50%, -50%) rotate("+pe+"deg) translateX("+c+"px)"},iconStyle:{transform:"rotate("+-pe+"deg)"},large:d,realmId:b,ancestralLegacies:ee,color:E}})))}},{key:"addNodeShapes",value:function(t,r,c){var s,u=t.length,d=360/u;(s=this.nodeShapes).push.apply(s,(0,A.Z)((0,y.pb)(u).map(function(m){return{style:{transform:"translate(-50%, -50%) rotate("+(r+m*d)+"deg) translateX("+c+"px)"},nodeId:(0,k.Be)(t[m],0)}})))}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(Ne.o),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(n,i){1&n&&e.NdJ("wheel",function(t){return i.onWheelUp(t)})("mousedown",function(){return i.onMouseDown()})("mouseup",function(){return i.onMouseUp()})("mouseleave",function(){return i.onMouseUp()})("mousemove",function(t){return i.onMouseMouve(t)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","large","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,Ee,3,10,"div",6),e.YNc(7,Fe,1,2,"div",7),e.YNc(8,Qe,1,2,"div",8),e.YNc(9,He,2,6,"div",9),e.qZA(),e.qZA()),2&n&&(e.ekj("grabbed",i.grabbed),e.xp6(1),e.Udp("top",i.position.y+"px")("left",i.position.x+"px")("transform","scale("+i.scale+")"),e.xp6(5),e.Q6J("ngForOf",i.zoneShapes),e.xp6(1),e.Q6J("ngForOf",i.lineShapes),e.xp6(1),e.Q6J("ngForOf",i.weldingShapes),e.xp6(1),e.Q6J("ngForOf",i.nodeShapes))},directives:[h.sg,Le.y],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid #d5ad48;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;grid-gap:4px;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),a}(),Be=p(9065);function je(a,l){if(1&a&&e._UZ(0,"div",9),2&a){var n=l.$implicit,i=e.oxw();e.ekj("unlocked",i.isPointUnlock(n))}}var Re=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t,r){var c;return(0,v.Z)(this,i),(c=n.call(this)).plannerService=o,c.slormancerAncestralLegacyService=t,c.messageService=r,c.ANCESTRAL_LEGACY_POINTS=(0,y.pb)(W.JY),c.character=null,c.selectedAncestralLegacy=null,c}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){t.character=r,t.selectDefaultAncestralLegacy()})}},{key:"selectDefaultAncestralLegacy",value:function(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){var t=(0,k.lA)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===t?null:(0,k.lA)(this.character.ancestralLegacies.ancestralLegacies[t])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,k.lA)(this.character.ancestralLegacies.ancestralLegacies[0]))}}},{key:"isPointUnlock",value:function(t){return t<W.sD}},{key:"optimizeAncestralLegacies",value:function(){if(null!==this.character){var r,t=(0,le.Z)(this.character.ancestralLegacies.ancestralLegacies);try{for(t.s();!(r=t.n()).done;){var c=r.value;c.baseRank=c.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(c,c.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(c)}}catch(s){t.e(s)}finally{t.f()}this.plannerService.updateCurrentCharacter(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(Ue.O),e.Y36(z.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(n,i){1&n&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",0),e.TgZ(3,"div",1),e.YNc(4,je,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return i.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"div",5),e.TgZ(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(t){return i.selectedAncestralLegacy=t}),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.Q6J("ngForOf",i.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",i.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",i.selectedAncestralLegacy))},directives:[S.a8,S.dn,h.sg,I.Hw,H.gM,Ye,Be.q],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:8px;gap:8px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;grid-gap:20px;gap:20px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;flex-grow:1}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:500px}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),a}(),R=p(7399),De=p(3729);function Ve(a,l){if(1&a&&e._UZ(0,"app-attribute-line",2),2&a){var n=l.$implicit,i=e.oxw(2);e.Q6J("iconShift",n%2==0)("attribute",i.attributes.allocated[n])("remainingPoints",i.attributes.remainingPoints)}}function Ge(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Ve,1,3,"app-attribute-line",1),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(3),e.AsE("",n.attributes.remainingPoints,"/",n.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",n.ALL_ATTRIBUTES)}}var $e=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o){var t;return(0,v.Z)(this,i),(t=n.call(this)).plannerService=o,t.ALL_ATTRIBUTES=R.A,t.attributes=null,t}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){return t.attributes=null===r?null:r.attributes})}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(n,i){1&n&&e.YNc(0,Ge,5,3,"mat-card",0),2&n&&e.Q6J("ngIf",null!==i.attributes)},directives:[h.O5,S.a8,S.dn,h.sg,De.g],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),a}(),Xe=function(){var a=(0,_.Z)(function l(){(0,v.Z)(this,l),this.character=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(n,i){1&n&&e._uU(0,"TODO")},styles:[""]}),a}(),ze=function(){var a=(0,_.Z)(function l(){(0,v.Z)(this,l),this.character=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(n,i){1&n&&e._uU(0,"TODO TURRET")},styles:[""]}),a}();function We(a,l){if(1&a&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.label)}}function Ke(a,l){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function en(a,l){if(1&a&&e._UZ(0,"app-defense-calc",6),2&a){var n=e.oxw(2);e.Q6J("character",n.character)}}function nn(a,l){if(1&a&&e._UZ(0,"app-turret-syndrome-calc",6),2&a){var n=e.oxw(2);e.Q6J("character",n.character)}}function tn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"mat-form-field",1),e.TgZ(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(t){return e.CHM(n),e.oxw().currentCalc=t}),e.YNc(7,We,2,2,"mat-option",3),e.qZA(),e.qZA(),e.YNc(8,Ke,2,0,"p",0),e.YNc(9,en,1,1,"app-defense-calc",4),e.YNc(10,nn,1,1,"app-turret-syndrome-calc",4),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(6),e.Q6J("ngModel",i.currentCalc),e.xp6(1),e.Q6J("ngForOf",i.options),e.xp6(1),e.Q6J("ngIf",null===i.currentCalc),e.xp6(1),e.Q6J("ngIf",i.currentCalc===i.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",i.currentCalc===i.CalcPage.TurretSyndrome)}}var N=function(){return(a=N||(N={}))[a.Defense=0]="Defense",a[a.TurretSyndrome=1]="TurretSyndrome",N;var a}(),an=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o){var t;return(0,v.Z)(this,i),(t=n.call(this)).plannerService=o,t.CalcPage=N,t.character=null,t.options=[{value:N.Defense,label:"Defenses"},{value:N.TurretSyndrome,label:"Turret"}],t.currentCalc=null,t.plannerService.characterChanged.pipe((0,x.R)(t.unsubscribe)).subscribe(function(r){return t.character=r}),t}return(0,_.Z)(i)}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(n,i){1&n&&e.YNc(0,tn,11,5,"main",0),2&n&&e.Q6J("ngIf",null!==i.character)},directives:[h.O5,S.a8,S.dn,T.KE,T.hX,Y.gD,g.JJ,g.On,h.sg,B.ey,Xe,ze],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),a}(),on=p(9635),se=p(4440),rn=p(4425);function ln(a,l){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function cn(a,l){if(1&a&&e._UZ(0,"app-compare-view",9),2&a){var n=e.oxw(2);e.Q6J("differences",n.differences)}}function sn(a,l){if(1&a&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n.name," ")}}function un(a,l){if(1&a&&e._UZ(0,"app-main-stats",2),2&a){var n=e.oxw(2);e.Q6J("stats",n.layerControl.value.character.stats)}}function pn(a,l){if(1&a&&(e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA(),e.qZA(),e.TgZ(6,"mat-card",3),e.TgZ(7,"mat-card-content"),e.YNc(8,ln,2,0,"p",0),e.YNc(9,cn,1,1,"app-compare-view",4),e.qZA(),e.qZA(),e.TgZ(10,"mat-card",1),e.TgZ(11,"mat-card-content"),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,sn,2,2,"mat-option",7),e.qZA(),e.qZA(),e.YNc(17,un,1,1,"app-main-stats",8),e.qZA(),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(4),e.Oqu(n.currentLayer.name),e.xp6(1),e.Q6J("stats",n.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===n.differences),e.xp6(1),e.Q6J("ngIf",null!==n.differences),e.xp6(6),e.Q6J("formControl",n.layerControl),e.xp6(1),e.Q6J("ngForOf",n.layers),e.xp6(1),e.Q6J("ngIf",n.layerControl.value)}}var dn=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t){var r;return(0,v.Z)(this,i),(r=n.call(this)).plannerService=o,r.slormancerCharacterComparatorService=t,r.differences=null,r.currentLayer=null,r.layers=[],r.config=null,r.layerControl=new g.NI(0),r.plannerService.layersChanged.pipe((0,x.R)(r.unsubscribe)).subscribe(function(c){r.layers=c,r.layerControl.setValue(r.layers[0])}),r.plannerService.selectedLayerIndexChanged.pipe((0,x.R)(r.unsubscribe)).subscribe(function(c){var s=r.plannerService.getLayers(),u=0===c&&s.length>1?1:0;r.currentLayer=s[c],r.layerControl.setValue(s[u]),r.updateDifferences()}),r.layerControl.valueChanges.subscribe(function(){return r.updateDifferences()}),r}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"updateDifferences",value:function(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(on.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(n,i){1&n&&e.YNc(0,pn,18,7,"main",0),2&n&&e.Q6J("ngIf",null!==i.currentLayer&&i.layers.length>0)},directives:[h.O5,S.a8,S.dn,se.w,T.KE,T.hX,Y.gD,g.JJ,g.oH,h.sg,rn.$,B.ey],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}"]}),a}(),gn=p(1093),mn=p(648),K=p(2469),fn=p(7446);function _n(a,l){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.config.info)}}function vn(a,l){if(1&a&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,_n,2,1,"mat-icon",5),e.qZA()),2&a){var n=e.oxw(2);e.xp6(2),e.Oqu(n.config.label),e.xp6(1),e.Q6J("formControl",n.control),e.xp6(1),e.Q6J("ngIf",n.config.info)}}function hn(a,l){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.label)}}function yn(a,l){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.config.info)}}function bn(a,l){if(1&a&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,hn,2,2,"mat-option",8),e.qZA(),e.YNc(5,yn,2,1,"mat-icon",5),e.qZA()),2&a){var n=e.oxw(2);e.xp6(2),e.Oqu(n.config.label),e.xp6(1),e.Q6J("formControl",n.control),e.xp6(1),e.Q6J("ngForOf",n.config.values),e.xp6(1),e.Q6J("ngIf",n.config.info)}}function Cn(a,l){if(1&a&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.config.info)}}function kn(a,l){if(1&a&&(e.TgZ(0,"mat-checkbox",10),e.TgZ(1,"label"),e._uU(2),e.YNc(3,Cn,2,1,"mat-icon",11),e.qZA(),e.qZA()),2&a){var n=e.oxw(2);e.Q6J("formControl",n.control)("checked",n.control.value),e.xp6(2),e.hij(" ",n.config.label," "),e.xp6(1),e.Q6J("ngIf",n.config.info)}}function Sn(a,l){if(1&a&&(e.ynx(0),e.YNc(1,vn,5,3,"mat-form-field",1),e.YNc(2,bn,6,4,"mat-form-field",1),e.YNc(3,kn,4,4,"mat-checkbox",2),e.BQk()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isNumber(n.config)),e.xp6(1),e.Q6J("ngIf",n.isEnum(n.config)),e.xp6(1),e.Q6J("ngIf",n.isBoolean(n.config))}}var xn=function(){var a=function(){function l(){(0,v.Z)(this,l),this.control=null,this.config=null}return(0,_.Z)(l,[{key:"isNumber",value:function(i){return"number"===i.type}},{key:"isEnum",value:function(i){return"enum"===i.type}},{key:"isBoolean",value:function(i){return"boolean"===i.type}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(n,i){1&n&&e.YNc(0,Sn,4,3,"ng-container",0),2&n&&e.Q6J("ngIf",null!==i.config&&null!==i.control)},directives:[h.O5,T.KE,T.hX,$.Nt,g.wV,g.Fj,g.JJ,g.oH,I.Hw,T.R9,H.gM,Y.gD,h.sg,B.ey,fn.oG],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),a}();function Mn(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var n=l.$implicit,i=e.oxw(3);e.Q6J("control",i.getControl(n))("config",n)}}function Zn(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Mn,1,2,"app-config-entry",3),e.BQk()),2&a){var n=l.$implicit;e.xp6(2),e.Oqu(n.title),e.xp6(1),e.Q6J("ngForOf",n.configurations)}}function On(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,Zn,4,2,"ng-container",1),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.GENERAL_CONFIG_GROUPS)}}function Tn(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var n=l.$implicit,i=e.oxw(4);e.Q6J("control",i.getControl(n))("config",n)}}function Pn(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Tn,1,2,"app-config-entry",3),e.BQk()),2&a){var n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.title),e.xp6(1),e.Q6J("ngForOf",n.configurations)}}function An(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Pn,4,2,"ng-container",0),e.BQk()),2&a){var n=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isGroupValid(n))}}function wn(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,An,2,1,"ng-container",1),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.CLASS_CONFIG_GROUPS)}}function qn(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var n=l.$implicit,i=e.oxw(4);e.Q6J("control",i.getControl(n))("config",n)}}function In(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,qn,1,2,"app-config-entry",3),e.BQk()),2&a){var n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.title),e.xp6(1),e.Q6J("ngForOf",n.configurations)}}function Un(a,l){if(1&a&&(e.ynx(0),e.YNc(1,In,4,2,"ng-container",0),e.BQk()),2&a){var n=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isGroupValid(n))}}function Nn(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,Un,2,1,"ng-container",1),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.EQUIPMENT_CONFIG_GROUPS)}}var Ln=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o){var t;return(0,v.Z)(this,i),(t=n.call(this)).plannerService=o,t.EXTRA_VALIDATORS={percent_missing_health:[g.kI.max(100)],percent_missing_mana:[g.kI.max(100)],enemy_percent_missing_health:[g.kI.max(100)],block_stacks:[g.kI.max(100)],nimble_champion_stacks:[g.kI.max(200)],nimble_chaserenitympion_stacks:[g.kI.max(12)]},t.GENERAL_CONFIG_GROUPS=[{title:"General",condition:function(){return!0},configurations:[{type:"number",key:"all_characters_level",label:"Sum of all your character's level"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"boolean",key:"idle",label:"Are you idle ?"}]},{title:"When in Combat",condition:function(){return!0},configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Actives inner fire"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"}]},{title:"Enemy",condition:function(){return!0},configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"}]}],t.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:function(c){return 2===c.reaper.id},configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:function(c){return 105===c.reaper.id},configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:function(c){return 73===c.reaper.id},configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:function(c){return 74===c.reaper.id},configurations:[{type:"number",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:function(c){return 75===c.reaper.id},configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:function(c){return 79===c.reaper.id||80===c.reaper.id},configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:function(c){return 82===c.reaper.id||83===c.reaper.id},configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:function(c){return 111===c.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:function(c){return 112===c.reaper.id},configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:function(c){return 113===c.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Gold Armor",condition:function(c){return t.hasActivable(c,0)},configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:function(c){return t.hasActivable(c,3)},configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:function(c){return t.hasActivable(c,6)},configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Willpower",condition:function(c){return t.isAttributeAllocated(c,R.a.Willpower)},configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:function(c){return t.isAttributeAllocated(c,R.a.Dexterity)},configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:function(c){return t.isAttributeAllocated(c,R.a.Bravery)},configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:function(c){return t.isAncestralLegacyEquipped(c,80)},configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:function(c){return t.isAncestralLegacyEquipped(c,85)},configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:function(c){return t.isAncestralLegacyEquipped(c,33)},configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:function(c){return t.isAncestralLegacyEquipped(c,106)},configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:function(c){return t.isAncestralLegacyEquipped(c,82)},configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Faith of the Ancients",condition:function(c){return t.hasLegendaryEffect(c,31)},configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:function(c){return t.hasLegendaryEffect(c,29)},configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:function(c){return t.hasLegendaryEffect(c,75)},configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:function(c){return t.hasLegendaryEffect(c,77)},configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:function(c){return t.hasLegendaryEffect(c,26)},configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:function(c){return t.hasLegendaryEffect(c,63)},configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:function(c){return t.hasLegendaryEffect(c,16)},configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:function(c){return t.hasLegendaryEffect(c,16)},configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:function(c){return t.hasLegendaryEffect(c,76)},configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"A Path to the First",condition:function(c){return t.hasLegendaryEffect(c,32)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:function(c){return t.hasLegendaryEffect(c,33)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:function(c){return t.hasLegendaryEffect(c,74)},configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]}],t.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:function(c){return c.heroClass===f.i.Warrior},configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,0)},configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,2)},configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,3)},configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,4)},configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,5)},configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,6)},configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,7)},configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,9)},configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:function(c){return t.isSkillEquipped(c,f.i.Warrior,10)},configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:function(c){return c.heroClass===f.i.Huntress},configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,0)},configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,1)},configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,2)},configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,3)},configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,4)},configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,5)},configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,7)},configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,8)},configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:function(c){return t.isSkillEquipped(c,f.i.Huntress,9)},configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:function(c){return c.heroClass===f.i.Mage},configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,0)},configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,2)},configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,4)},configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,6)},configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,7)},configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,8)},configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:K.H.Arcanic,label:"Arcanic"},{value:K.H.Temporal,label:"Temporal"},{value:K.H.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:function(c){return t.isSkillEquipped(c,f.i.Mage,9)},configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],t.character=null,t.config=null,t.plannerService.characterChanged.pipe((0,x.R)(t.unsubscribe)).subscribe(function(r){return t.character=r}),t}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.config=this.generateConfigurationForm(),console.log(this.plannerService.getConfiguration()),this.config.valueChanges.subscribe(function(){return t.updateConfiguration()})}},{key:"generateConfigurationForm",value:function(){for(var t={},c=0,s=Object.entries((0,k.Be)(this.plannerService.getConfiguration(),gn.g));c<s.length;c++){var u=s[c],d=[g.kI.required].concat((0,A.Z)((0,k.Be)(this.EXTRA_VALIDATORS[u[0]],[])));"number"===u[1]&&d.push(g.kI.min(0)),t[u[0]]=new g.NI(u[1],d)}return new g.cw(t)}},{key:"updateConfiguration",value:function(){null!==this.config&&this.config.valid&&this.plannerService.setConfiguration(this.config.value)}},{key:"getControl",value:function(t){return null===this.config?null:this.config.get(t.key)}},{key:"isGroupValid",value:function(t){return null!==this.character&&t.condition(this.character)}},{key:"hasActivable",value:function(t,r){return[t.activable1,t.activable2,t.activable3,t.activable4].filter(k.BX).some(function(c){return!("element"in c)&&c.id===r})}},{key:"isSkillEquipped",value:function(t,r,c){return t.heroClass===r&&[t.primarySkill,t.secondarySkill,t.supportSkill].filter(k.BX).some(function(s){return s.id===c})}},{key:"isAttributeAllocated",value:function(t,r){var c=t.attributes.allocated[r];return c.rank>0||c.bonusRank>0}},{key:"isAncestralLegacyEquipped",value:function(t,r){return t.ancestralLegacies.activeAncestralLegacies.includes(r)}},{key:"hasLegendaryEffect",value:function(t,r){return mn.PL.map(function(c){var s;return null===(s=t.gear[c])||void 0===s?void 0:s.legendaryEffect}).filter(k.BX).some(function(c){return c.id===r})}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(n,i){1&n&&(e.TgZ(0,"main"),e.YNc(1,On,3,1,"mat-card",0),e.YNc(2,wn,3,1,"mat-card",0),e.YNc(3,Nn,3,1,"mat-card",0),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",null!==i.config),e.xp6(1),e.Q6J("ngIf",null!==i.config),e.xp6(1),e.Q6J("ngIf",null!==i.config))},directives:[h.O5,S.a8,S.dn,h.sg,xn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}"]}),a}(),Jn=p(4322),En=p(916),Fn=p(4591),Qn=p(3662),Hn=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t){var r;return(0,v.Z)(this,i),(r=n.call(this)).plannerService=o,r.slormancerCharacterModifierService=t,r.character=null,r}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){return t.character=r})}},{key:"updatePrimarySkill",value:function(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t),this.plannerService.updateCurrentCharacter())}},{key:"updateSecondarySkill",value:function(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t),this.plannerService.updateCurrentCharacter())}},{key:"updateSupportSkill",value:function(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t),this.plannerService.updateCurrentCharacter())}},{key:"updateActivable1",value:function(t){null!==this.character&&this.character.activable1!==t&&(null!==t&&(this.character.activable2===t?this.character.activable2=this.character.activable1:this.character.activable3===t?this.character.activable3=this.character.activable1:this.character.activable4===t&&(this.character.activable4=this.character.activable1)),this.character.activable1=t,this.plannerService.updateCurrentCharacter())}},{key:"updateActivable2",value:function(t){null!==this.character&&this.character.activable2!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable2:this.character.activable3===t?this.character.activable3=this.character.activable2:this.character.activable4===t&&(this.character.activable4=this.character.activable2)),this.character.activable2=t,this.plannerService.updateCurrentCharacter())}},{key:"updateActivable3",value:function(t){null!==this.character&&this.character.activable3!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable3:this.character.activable2===t?this.character.activable2=this.character.activable3:this.character.activable4===t&&(this.character.activable4=this.character.activable3)),this.character.activable3=t,this.plannerService.updateCurrentCharacter())}},{key:"updateActivable4",value:function(t){null!==this.character&&this.character.activable4!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable4:this.character.activable3===t?this.character.activable3=this.character.activable4:this.character.activable2===t&&(this.character.activable2=this.character.activable4)),this.character.activable4=t,this.plannerService.updateCurrentCharacter())}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-bar"]],features:[e.qOj],decls:15,vars:8,consts:[[1,"skill-bar"],[1,"skill-slot-border"],[3,"skill","changed"],[3,"skill","support","changed"],[3,"activable","changed"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"app-skill-slot",2),e.NdJ("changed",function(t){return i.updatePrimarySkill(t)}),e.qZA(),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"app-skill-slot",2),e.NdJ("changed",function(t){return i.updateSecondarySkill(t)}),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"app-skill-slot",3),e.NdJ("changed",function(t){return i.updateSupportSkill(t)}),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e.TgZ(8,"app-activable-slot",4),e.NdJ("changed",function(t){return i.updateActivable1(t)}),e.qZA(),e.qZA(),e.TgZ(9,"div",1),e.TgZ(10,"app-activable-slot",4),e.NdJ("changed",function(t){return i.updateActivable2(t)}),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"app-activable-slot",4),e.NdJ("changed",function(t){return i.updateActivable3(t)}),e.qZA(),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"app-activable-slot",4),e.NdJ("changed",function(t){return i.updateActivable4(t)}),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Q6J("skill",null===i.character?null:i.character.primarySkill),e.xp6(2),e.Q6J("skill",null===i.character?null:i.character.secondarySkill),e.xp6(2),e.Q6J("skill",null===i.character?null:i.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable1),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable2),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable3),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable4))},directives:[Fn.X,Qn.Z],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:4px;gap:4px;border:3px solid #3c3c3c;padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid #3c3c3c}"]}),a}(),Yn=p(6538);function Bn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(n);var t=e.oxw(2);return t.dragInItemsGroup(t.character.inventory)})("mouseleave",function(){return e.CHM(n),e.oxw(2).dragOutItemsGroup()})("mouseup",function(){e.CHM(n);var t=e.oxw(2);return t.dragDrop(t.character.inventory)}),e._uU(1,"Bag"),e.qZA()}if(2&a){var i=e.oxw(2);e.ekj("drag-on",i.isDragging&&i.itemGroupBeingDraggedOn===i.character.inventory)("drag-possible",i.itemGroupDragDropPossible)("drag-impossible",!i.itemGroupDragDropPossible)}}function jn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(r){var s=e.CHM(n).index;return e.oxw(2).updateIventoryItem(s,r)}),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw(2);e.Q6J("item",i)("character",o.character)}}function Rn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(n);var s=e.oxw().$implicit;return e.oxw(2).dragInItemsGroup(s)})("mouseleave",function(){return e.CHM(n),e.oxw(3).dragOutItemsGroup()})("mouseup",function(){e.CHM(n);var s=e.oxw().$implicit;return e.oxw(2).dragDrop(s)}),e._uU(1),e.qZA()}if(2&a){var i=e.oxw(),o=i.$implicit,t=i.index,r=e.oxw(2);e.ekj("drag-on",r.isDragging&&r.itemGroupBeingDraggedOn===o)("drag-possible",r.itemGroupDragDropPossible)("drag-impossible",!r.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",t+1,"")}}function Dn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(r){var s=e.CHM(n).index,u=e.oxw().index;return e.oxw(2).updateSharedInventoryItem(u,s,r)}),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw(3);e.Q6J("item",i)("character",o.character)}}function Vn(a,l){if(1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,Rn,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,Dn,1,2,"app-item-slot",9),e.qZA(),e.qZA()),2&a){var n=l.$implicit;e.xp6(3),e.Q6J("ngForOf",n)}}function Gn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content"),e.TgZ(5,"app-character-equipment",2),e.NdJ("changed",function(){return e.CHM(n),e.oxw().gearChanged()}),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3),e.TgZ(8,"app-reaper-slot",2),e.NdJ("changed",function(t){return e.CHM(n),e.oxw().updateReaper(t)}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-card",5),e.TgZ(12,"mat-card-content"),e.TgZ(13,"mat-tab-group",6),e.TgZ(14,"mat-tab"),e.YNc(15,Bn,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,jn,1,2,"app-item-slot",9),e.qZA(),e.qZA(),e.YNc(18,Vn,4,1,"mat-tab",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Oqu(i.character.fullName),e.xp6(2),e.Q6J("character",i.character),e.xp6(3),e.Q6J("character",i.character),e.xp6(9),e.Q6J("ngForOf",i.character.inventory),e.xp6(1),e.Q6J("ngForOf",i.character.sharedInventory)}}var $n=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t){var r;return(0,v.Z)(this,i),(r=n.call(this)).plannerService=o,r.itemMoveService=t,r.character=null,r.isDragging=!1,r.itemGroupBeingDraggedOn=null,r.itemGroupDragDropPossible=!1,r.itemMoveService.draggingItem.pipe((0,x.R)(r.unsubscribe)).subscribe(function(c){return r.isDragging=c}),r}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){return t.character=r})}},{key:"updateCharacter",value:function(){}},{key:"dragInItemsGroup",value:function(t){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==t.find(function(r){return null===r}),this.itemGroupBeingDraggedOn=t)}},{key:"dragOutItemsGroup",value:function(){this.itemGroupBeingDraggedOn=null}},{key:"dragDrop",value:function(t){this.itemMoveService.moveDraggedItemToItemGroup(t)}},{key:"gearChanged",value:function(){this.plannerService.updateCurrentCharacter()}},{key:"updateReaper",value:function(t){null!==this.character&&(this.character.reaper=t,this.plannerService.updateCurrentCharacter())}},{key:"updateIventoryItem",value:function(t,r){null!==this.character&&(this.character.inventory[t]=r,this.plannerService.updateCurrentCharacter())}},{key:"updateSharedInventoryItem",value:function(t,r,c){if(null!==this.character){var s=this.character.sharedInventory[t];s&&(s[r]=c,this.plannerService.savePlanner())}}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(te.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(n,i){1&n&&e.YNc(0,Gn,19,5,"main",0),2&n&&e.Q6J("ngIf",null!==i.character)},directives:[h.O5,S.a8,S.dn,Jn.q,En.R,Hn,L.SP,L.uX,L.uD,h.sg,Yn.y],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:12px;background-color:#161412;border:3px solid #3c3c3c}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),a}(),D=p(7255),ue=p(5016),J=p(2525);function Xn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.maximize(o.selectedSkill)}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function zn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.equipSupport(o.selectedSkill)}),e._uU(1," Equip as Support skill "),e.qZA()}}function Wn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.equipPrimary(o.selectedSkill)}),e._uU(1," Equip as Primary skill "),e.qZA()}}function Kn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.equipSecondary(o.selectedSkill)}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function et(a,l){if(1&a&&(e.YNc(0,Xn,2,0,"button",4),e.YNc(1,zn,2,0,"button",4),e.YNc(2,Wn,2,0,"button",4),e.YNc(3,Kn,2,0,"button",4)),2&a){var n=e.oxw();e.Q6J("ngIf",null!==n.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill&&!n.isEquippedSupportSkill(n.selectedSkill)&&n.isSupport(n.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill&&!n.isEquippedPrimarySkill(n.selectedSkill)&&!n.isSupport(n.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill&&!n.isEquippedSecondarySkill(n.selectedSkill)&&!n.isSupport(n.selectedSkill))}}var nt=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t,r,c){var s;return(0,v.Z)(this,i),(s=n.call(this)).plannerService=o,s.messageService=t,s.slormancerSkillService=r,s.slormancerCharacterModifierService=c,s.selectedSkill=null,s.character=null,s.menu=null,s}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){return t.character=r})}},{key:"openSettings",value:function(){return null!==this.menu&&this.menu.openMenu(),!1}},{key:"isSupport",value:function(t){return t.skill.type===D.W.Support}},{key:"maximize",value:function(t){if(null!==this.character){t.skill.baseLevel=t.skill.maxLevel,this.slormancerSkillService.updateSkillModel(t.skill);var c,r=(0,le.Z)(t.upgrades);try{for(r.s();!(c=r.n()).done;){var s=c.value;s.baseRank=s.maxRank,this.slormancerSkillService.updateUpgrade(s)}}catch(u){r.e(u)}finally{r.f()}this.plannerService.updateCurrentCharacter(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name)}}},{key:"equipSupport",value:function(t){null!==this.character&&this.slormancerCharacterModifierService.setSupportSkill(this.character,t.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.plannerService.updateCurrentCharacter())}},{key:"equipPrimary",value:function(t){null!==this.character&&this.slormancerCharacterModifierService.setPrimarySkill(this.character,t.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.plannerService.updateCurrentCharacter())}},{key:"equipSecondary",value:function(t){null!==this.character&&this.slormancerCharacterModifierService.setSecondarySkill(this.character,t.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.plannerService.updateCurrentCharacter())}},{key:"isEquippedSupportSkill",value:function(t){return null!==this.character&&this.character.supportSkill===t.skill}},{key:"isEquippedPrimarySkill",value:function(t){return null!==this.character&&this.character.primarySkill===t.skill}},{key:"isEquippedSecondarySkill",value:function(t){return null!==this.character&&this.character.secondarySkill===t.skill}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(z.e),e.Y36(ue.A),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-settings-skills"]],viewQuery:function(n,i){var o;1&n&&e.Gf(J.p6,7),2&n&&e.iGM(o=e.CRH())&&(i.menu=o.first)},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(n,i){if(1&n&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return i.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,et,4,4,"ng-template",3),e.qZA()),2&n){var o=e.MAs(3);e.Q6J("matMenuTriggerFor",o),e.xp6(2),e.Q6J("overlapTrigger",!0)}},directives:[I.Hw,J.p6,J.VK,J.KA,h.O5,J.OP],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),a}(),tt=p(411),at=p(8849),it=p(9536);function ot(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",5),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(2).incrementSkill(c)})("contextmenu",function(){var c=e.CHM(n).$implicit;return e.oxw(2).decrementSkill(c)}),e.qZA(),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw(2);e.ekj("selected",o.isSkillSelected(i)),e.xp6(1),e.ekj("equipped",o.isSkillEquipped(i)),e.Q6J("src","assets/img/icon/"+i.skill.iconLarge+".png",e.LSH)}}function rt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",6),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(2).incrementSkill(c)})("contextmenu",function(){var c=e.CHM(n).$implicit;return e.oxw(2).decrementSkill(c)}),e.qZA(),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw(2);e.ekj("selected",o.isSkillSelected(i)),e.xp6(1),e.ekj("equipped",o.isSkillEquipped(i)),e.Q6J("src","assets/img/icon/"+i.skill.icon+".png",e.LSH)}}function lt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(4).incrementUpgrade(c)})("contextmenu",function(){var c=e.CHM(n).$implicit;return e.oxw(4).decrementUpgrade(c)}),e.qZA()}if(2&a){var i=l.$implicit,o=e.oxw(4);e.Q6J("upgrade",i)("equipped",o.isUpgradeEquipped(i))}}function ct(a,l){if(1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,lt,1,2,"app-upgrade-slot",19),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",n," "),e.xp6(2),e.Q6J("ngForOf",i.getLineUpgrades(n))}}function st(a,l){if(1&a&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._UZ(2,"app-settings-skills",9),e._UZ(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11),e.TgZ(5,"div",12),e.YNc(6,ct,5,2,"div",13),e.qZA(),e.qZA(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA(),e.qZA()),2&a){var n=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",n.selectedSkill),e.xp6(1),e.Q6J("skill",n.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",n.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",n.selectedUpgrade)}}function ut(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",1),e.YNc(3,ot,2,5,"div",2),e.YNc(4,rt,2,5,"div",2),e.qZA(),e.YNc(5,st,9,4,"div",3),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.getSupportSkills(n.character)),e.xp6(1),e.Q6J("ngForOf",n.getActiveSkills(n.character)),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill)}}var pt=function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o,t,r){var c;return(0,v.Z)(this,i),(c=n.call(this)).plannerService=o,c.slormancerSkillService=t,c.slormancerCharacterModifierService=r,c.character=null,c.selectedSkill=null,c.selectedUpgrade=null,c.selectedSkillLines=[],c}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){t.character=r,t.updateSelectedSkill()})}},{key:"updateSelectedSkill",value:function(){var t=this.character,r=this.selectedSkill,c=null;null===t?c=null:null===r?c=(0,k.lA)(null!==t.supportSkill?t.skills.find(function(s){return s.skill===t.supportSkill}):t.skills[0]):null===(c=(0,k.lA)(t.skills.find(function(s){return s.skill.id===r.skill.id})))&&(c=(0,k.lA)(t.skills[0])),this.selectSkill(c)}},{key:"getSupportSkills",value:function(t){return t.skills.filter(function(r){return r.skill.type===D.W.Support})}},{key:"getActiveSkills",value:function(t){return t.skills.filter(function(r){return r.skill.type===D.W.Active})}},{key:"isSkillEquipped",value:function(t){return null!==this.character&&(this.character.primarySkill===t.skill||this.character.secondarySkill===t.skill||this.character.supportSkill===t.skill)}},{key:"isEquippedSupportSkill",value:function(t){return null!==this.character&&this.character.supportSkill===t.skill}},{key:"isEquippedPrimarySkill",value:function(t){return null!==this.character&&this.character.primarySkill===t.skill}},{key:"isEquippedSecondarySkill",value:function(t){return null!==this.character&&this.character.secondarySkill===t.skill}},{key:"isSkillSelected",value:function(t){return this.selectedSkill===t}},{key:"selectSkill",value:function(t){this.selectedSkill!==t&&(this.selectedSkill=t,this.selectedSkillLines=null===t?[]:t.upgrades.map(function(r){return r.line}).filter(k.mr).sort(),this.selectedUpgrade=null===t?null:(0,k.lA)(t.upgrades[0]))}},{key:"incrementSkill",value:function(t){return this.selectedSkill===t?t.skill.baseLevel<t.skill.maxLevel&&(t.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(t.skill),this.plannerService.updateCurrentCharacter(),console.log(t)):this.selectSkill(t),!1}},{key:"decrementSkill",value:function(t){return this.selectedSkill===t?t.skill.baseLevel>1&&(t.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(t.skill),this.plannerService.updateCurrentCharacter(),console.log(t)):this.selectSkill(t),!1}},{key:"getLineUpgrades",value:function(t){var r=[];return null!==this.selectedSkill&&(r=this.selectedSkill.upgrades.filter(function(c){return c.line===t})),r}},{key:"isUpgradeEquipped",value:function(t){var r=!1;return null!==this.selectedSkill&&(r=void 0!==this.selectedSkill.selectedUpgrades.find(function(c){return t.id===c})),r}},{key:"incrementUpgrade",value:function(t){if(null!==this.selectedSkill&&null!==this.character){var r=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,r=!0),this.isUpgradeEquipped(t)?!r&&t.baseRank<t.maxRank&&(t.baseRank++,this.slormancerSkillService.updateUpgrade(t),this.plannerService.updateCurrentCharacter()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),0===t.baseRank&&(t.baseRank=1,this.slormancerSkillService.updateUpgrade(t)),this.plannerService.updateCurrentCharacter()),console.log(t)}return!1}},{key:"decrementUpgrade",value:function(t){if(null!==this.selectedSkill&&null!==this.character){var r=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,r=!0),this.isUpgradeEquipped(t)?!r&&t.baseRank>1&&(t.baseRank--,this.slormancerSkillService.updateUpgrade(t),this.plannerService.updateCurrentCharacter()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),this.plannerService.updateCurrentCharacter()),console.log(t)}return!1}},{key:"isSupport",value:function(t){return t.skill.type===D.W.Support}},{key:"equipSupport",value:function(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t.skill),this.plannerService.updateCurrentCharacter())}},{key:"equipPrimary",value:function(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t.skill),this.plannerService.updateCurrentCharacter())}},{key:"equipSecondary",value:function(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t.skill),this.plannerService.updateCurrentCharacter())}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q),e.Y36(ue.A),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(n,i){1&n&&e.YNc(0,ut,6,3,"mat-card",0),2&n&&e.Q6J("ngIf",null!==i.character)},directives:[h.O5,S.a8,S.dn,h.sg,nt,tt.O,at.B,it.A],styles:['.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:8px;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;grid-gap:20px;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:12px;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),a}(),dt=p(8376),gt=p(8313);function mt(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function ft(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function _t(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(n.value,i.mergedStat.suffix,"+")," ")}}function vt(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,_t,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=e.oxw().$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(n.value,i.mergedStat.suffix,"+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function ht(a,l){if(1&a&&(e.ynx(0),e.YNc(1,vt,10,4,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",!n.extra)}}function yt(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=e.oxw().$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(n.value,i.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function bt(a,l){if(1&a&&(e.ynx(0),e.YNc(1,yt,10,3,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",!n.extra)}}function Ct(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.getTotalFlat(n.mergedStat),n.mergedStat.suffix)," ")}}function kt(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,mt,2,0,"span",2),e.qZA(),e.YNc(9,ft,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,ht,2,1,"ng-container",12),e.YNc(15,bt,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Ct,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.max),e.xp6(5),e.hij(" ",n.minValueToString(n.getTotalFlat(n.mergedStat),n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function St(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function xt(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function Mt(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(n.value,"%","+")," ")}}function Zt(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Mt,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(n.value,"%","+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function Ot(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(n.value,"%")," "),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function Tt(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.getTotalPercent(n.mergedStat),"%","+")," ")}}function Pt(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,St,2,0,"span",2),e.qZA(),e.YNc(9,xt,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Zt,10,4,"div",15),e.YNc(15,Ot,10,3,"div",15),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Tt,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",n.minValueToString(n.getTotalPercent(n.mergedStat),"%","+")," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function At(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function wt(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function qt(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(n.value,"%","+")," ")}}function It(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,qt,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(n.value,"%","+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function Ut(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=l.$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",n.value,"% "),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function Nt(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,At,2,0,"span",2),e.qZA(),e.YNc(9,wt,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,It,10,4,"div",15),e.YNc(15,Ut,10,3,"div",15),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.maxMultiplier)}}function Lt(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Jt(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function Et(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(n.value,i.mergedStat.suffix,"+")," ")}}function Ft(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Et,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=e.oxw().$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(n.value,i.mergedStat.suffix,"+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function Qt(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ft,10,4,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",n.extra)}}function Ht(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var n=e.oxw().$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(n.value,i.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",i.getSource(n.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(n.source)," ")}}function Yt(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ht,10,3,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",n.extra)}}function Bt(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.getTotalFlatExtra(n.mergedStat),n.mergedStat.suffix)," ")}}function jt(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Lt,2,0,"span",2),e.qZA(),e.YNc(9,Jt,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Qt,2,1,"ng-container",12),e.YNc(15,Yt,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Bt,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.max),e.xp6(5),e.hij(" ",n.minValueToString(n.getTotalFlatExtra(n.mergedStat),n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function Rt(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function Dt(a,l){if(1&a&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula"),e.YNc(3,Rt,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.qZA()),2&a){var n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",n.totalHasMinMax(n.mergedStat)),e.xp6(2),e.hij(" ",n.getMinFormula(n.mergedStat)," ")}}function Vt(a,l){if(1&a&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA(),e.qZA()),2&a){var n=e.oxw(2);e.xp6(4),e.hij(" ",n.getMaxFormula(n.mergedStat)," ")}}function Gt(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.hij(" ",n.maxValueToString(n.mergedStat.total,n.mergedStat.suffix)," ")}}function $t(a,l){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,kt,24,7,"ng-container",2),e.YNc(2,Pt,24,7,"ng-container",2),e.YNc(3,Nt,16,5,"ng-container",2),e.YNc(4,jt,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,Dt,6,2,"div",4),e.YNc(8,Vt,5,1,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e._uU(11,"Total (rounded)"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,Gt,2,1,"div",8),e._UZ(15,"div",9),e._UZ(16,"div",10),e.qZA(),e.qZA()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.hasFlatValues(n.mergedStat)),e.xp6(1),e.Q6J("ngIf",n.mergedStat.values.percent.length>0||n.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",n.mergedStat.values.multiplier.length>0||n.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",n.hasFlatExtraValues(n.mergedStat)),e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",n.showFormula(n.mergedStat)),e.xp6(1),e.Q6J("ngIf",n.showFormula(n.mergedStat)&&n.totalHasMinMax(n.mergedStat)),e.xp6(5),e.hij(" ",n.minValueToString(n.mergedStat.total,n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}var Xt=function(){var a=function(){function l(n,i){(0,v.Z)(this,l),this.slormancerTranslateService=n,this.slormancerStatUpdaterService=i,this.mergedStat=null,this.percent=!1}return(0,_.Z)(l,[{key:"translate",value:function(i){return this.slormancerTranslateService.translate(i)}},{key:"getSource",value:function(i){var o="";return"synergy"in i?o="Synergy":"character"in i?o="Character":"skill"in i?o="Skill":"upgrade"in i?o="Upgrade":"item"in i?o="Item":"ancestralLegacy"in i?o="Ancestral Legacy":"attribute"in i?o="Attribute":"reaper"in i?o="Reaper":"activable"in i?o="Activable":"mechanic"in i?o="Mechanic":"classMechanic"in i?o="Class Mechanic":"ultimatum"in i&&(o="Ultimatum"),o}},{key:"getSourceName",value:function(i){var o="";return"synergy"in i?o=i.synergy:"skill"in i?o=i.skill.nameLabel:"upgrade"in i?o=i.upgrade.name:"item"in i?o=i.item.name:"ancestralLegacy"in i?o=i.ancestralLegacy.name:"attribute"in i?o=i.attribute.attributeName:"reaper"in i?o=i.reaper.name:"activable"in i?o=i.activable.name:"mechanic"in i?o=i.mechanic.name:"classMechanic"in i?o=i.classMechanic.name:"ultimatum"in i&&(o=i.ultimatum.title),o}},{key:"valueToString",value:function(i,o){return"number"==typeof i?(0,y.NM)(i,5)+o:(0,y.NM)(i.min,5)+o+"-"+(0,y.NM)(i.max,5)+o}},{key:"minValueToString",value:function(i,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"number"==typeof i?t+((0,y.NM)(i,5)+o):t+(0,y.NM)(i.min,5)+o}},{key:"maxValueToString",value:function(i,o){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"number"==typeof i?"":t+(0,y.NM)(i.max,5)+o}},{key:"getTotalFlat",value:function(i){return this.slormancerStatUpdaterService.getTotalFlat(i)}},{key:"getTotalFlatExtra",value:function(i){return this.slormancerStatUpdaterService.getTotalFlatExtra(i)}},{key:"getTotalPercent",value:function(i){var o=this.slormancerStatUpdaterService.addNumberValues(i.values.percent.map(function(r){return r.value})),t=o+this.slormancerStatUpdaterService.addNumberValues(i.values.maxPercent.map(function(r){return r.value}));return o!==t?{min:o,max:t}:o}},{key:"getTotalFlatPercent",value:function(i){var o=this.slormancerStatUpdaterService.getTotalFlatAndPercent(i);return this.valueToString(o,i.suffix)}},{key:"getTotal",value:function(i){var o=this.slormancerStatUpdaterService.getTotal(i);return this.valueToString(o,i.suffix)}},{key:"hasFlatValues",value:function(i){return i.values.flat.filter(function(o){return!o.extra}).length>0||i.values.max.filter(function(o){return!o.extra}).length>0}},{key:"hasFlatExtraValues",value:function(i){return i.values.flat.filter(function(o){return o.extra}).length>0||i.values.max.filter(function(o){return o.extra}).length>0}},{key:"hasPercentValues",value:function(i){return i.values.percent.length>0||i.values.maxPercent.length>0}},{key:"hasMultiplierValues",value:function(i){return i.values.multiplier.length>0||i.values.maxMultiplier.length>0}},{key:"showFormula",value:function(i){return(i.values.flat.filter(function(u){return!u.extra}).length>0||i.values.max.filter(function(u){return!u.extra}).length>0?1:0)+(i.values.percent.length>0||i.values.maxPercent.length>0?1:0)+(i.values.multiplier.length>0||i.values.maxMultiplier.length>0?1:0)+(i.values.flat.filter(function(u){return u.extra}).length>0||i.values.max.filter(function(u){return u.extra}).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(i.stat)?1:0)>=2}},{key:"totalHasMinMax",value:function(i){return"number"!=typeof i.total}},{key:"getMinFormula",value:function(i){var o=this.slormancerStatUpdaterService.getTotal(i),t=this.slormancerStatUpdaterService.getTotalFlat(i),r=this.slormancerStatUpdaterService.getTotalPercent(i),c=i.values.multiplier.map(function(d){return d.value}),s=this.slormancerStatUpdaterService.getTotalFlatExtra(i);t="number"==typeof t?t:t.min,r="number"==typeof r?r:r.min,s="number"==typeof s?s:s.min;var u=(0,y.NM)("number"==typeof o?o:o.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(i.stat)?u+="(1 - "+[t,r].concat((0,A.Z)(c)).filter(function(d){return 0!==d}).map(function(d){return Math.max(0,100-d)/100}).join(" * ")+") * 100":(u+=this.valueToString(t,i.suffix)+[r].concat((0,A.Z)(c)).filter(function(d){return 0!==d}).map(function(d){return" * "+(d+100)/100}).join(""),0!==s&&(u+=" + "+s)),u}},{key:"getMaxFormula",value:function(i){var o=this.slormancerStatUpdaterService.getTotal(i),t=this.slormancerStatUpdaterService.getTotalFlat(i),r=this.slormancerStatUpdaterService.getTotalPercent(i),c=this.slormancerStatUpdaterService.getTotalFlatExtra(i),s=i.values.multiplier.map(function(d){return d.value});t="number"==typeof t?t:t.max,r="number"==typeof r?r:r.max,c="number"==typeof c?c:c.max;var u=(0,y.NM)("number"==typeof o?o:o.max,5)+" = ";return u+=this.valueToString(t,i.suffix)+[r].concat((0,A.Z)(s)).filter(function(d){return 0!==d}).map(function(d){return" * "+(d+100)/100}).join(""),0!==c&&(u+=" + "+c),u}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(gt.n),e.Y36(dt.C))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(n,i){1&n&&e.YNc(0,$t,17,9,"div",0),2&n&&e.Q6J("ngIf",null!==i.mergedStat)},directives:[h.O5,h.sg],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),a}();function zt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"app-main-stats",2),e.NdJ("selected",function(t){return e.CHM(n),e.oxw().selectMergedStat(t)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"mat-card"),e.TgZ(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Q6J("stats",i.stats),e.xp6(3),e.Q6J("mergedStat",i.selectedMergedStat)}}var Kt=[{path:"",component:Ie,children:[{path:"inventory",component:$n},{path:"skills",component:pt},{path:"ancestral-legacies",component:Re},{path:"attributes",component:$e},{path:"stats",component:function(){var a=function(l){(0,M.Z)(i,l);var n=(0,Z.Z)(i);function i(o){var t;return(0,v.Z)(this,i),(t=n.call(this)).plannerService=o,t.stats=null,t.selectedMergedStat=null,t}return(0,_.Z)(i,[{key:"ngOnInit",value:function(){var t=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(r){t.stats=null===r?null:r.stats})}},{key:"selectMergedStat",value:function(t){this.selectedMergedStat=t}}]),i}(O.B);return a.\u0275fac=function(n){return new(n||a)(e.Y36(P.q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(n,i){1&n&&e.YNc(0,zt,7,2,"main",0),2&n&&e.Q6J("ngIf",null!==i.stats)},directives:[h.O5,S.a8,S.dn,se.w,Xt],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a}()},{path:"config",component:Ln},{path:"compare",component:dn},{path:"calcs",component:an},{path:"**",redirectTo:"inventory"}]}],ea=function(){var a=(0,_.Z)(function l(){(0,v.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[q.Bz.forChild(Kt)],q.Bz]}),a}(),na=function(){var a=(0,_.Z)(function l(){(0,v.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[h.ez,de.m,ea,g.u5]]}),a}()}}]);