"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[91],{9091:function(Dt,X,u){u.r(X),u.d(X,{BuildModule:function(){return Yt}});var f=u(3144),_=u(5671),v=u(9808),d=u(3075),ae=u(2271),A=u(1083),S=u(136),M=u(7777),x=u(2722),Z=u(6446),W=u(7469),e=u(5542),w=u(3874),U=u(3251),B=u(2638),R=u(2340),C=u(8966),q=u(7423),ie=function(){var i=(0,f.Z)(function c(){(0,_.Z)(this,c)});return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-delete-planner-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Creating a new build will delete the current one\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions"),e.TgZ(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Delete"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[C.xY,C.H8,q.lW,C.ZT],styles:[""]}),i}(),O=u(7322),j=u(7531);function oe(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions"),e.TgZ(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Submit"),e.qZA(),e.qZA(),e.qZA()}if(2&i){var a=e.oxw();e.Q6J("formGroup",a.form),e.xp6(2),e.Oqu(a.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var L=function(){var i=function(){function c(t,a){(0,_.Z)(this,c),this.dialog=t,this.title=a.title,this.form=new d.cw({name:new d.NI(a.name,d.kI.required)})}return(0,f.Z)(c,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),c}();return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.so),e.Y36(C.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,a){1&t&&e.YNc(0,oe,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==a.form)},directives:[v.O5,d._Y,d.JL,d.sg,C.uh,C.xY,O.KE,O.hX,j.Nt,d.Fj,d.JJ,d.u,O.TO,C.H8,q.lW,C.ZT],styles:[""]}),i}(),re=function(){var i=(0,f.Z)(function c(){(0,_.Z)(this,c)});return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-replace-planner-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Are you sure you to replace your current build ?\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions"),e.TgZ(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Replace"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[C.xY,C.H8,q.lW,C.ZT],styles:[""]}),i}(),le=u(3947),ce=u(8271),T=u(4917),m=u(2107),D=u(8223),se=function(){var i=function(){function c(){(0,_.Z)(this,c)}return(0,f.Z)(c,[{key:"downloadFile",value:function(a,l){var n=document.createElement("a"),o=new Blob([a],{type:"text/plain"}),r=window.URL.createObjectURL(o);n.href=r,n.download=l,n.click(),window.URL.revokeObjectURL(r),n.remove()}}]),c}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i}(),ue=u(2846),J=u(7238),pe=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n,o,r,s,p,g){var y;return(0,_.Z)(this,a),(y=t.call(this)).messageService=l,y.downloadService=n,y.clipboardService=o,y.importExportService=r,y.plannerService=s,y.router=p,y.dialog=g,y.VERSION=R.N.version,y.GITHUB_LINK=R.N.githublink,y.GAME_LINK=R.N.gameLink,y.sidenav=null,y.busy=!1,y}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){}},{key:"closeSideNav",value:function(){null!==this.sidenav&&this.sidenav.close()}},{key:"getHeroClass",value:function(){var n=m.i.Warrior,o=this.plannerService.getPlanner();return null!==o&&(n=o.heroClass),n}},{key:"import",value:function(n){var o=this;null!==n&&(null!==n.character?this.dialog.open(L,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(function(s){s&&(o.plannerService.addLayer(s,n.character),o.closeSideNav())}):null!==n.layer?(this.plannerService.addLayer(n.layer.name,n.layer.character),this.closeSideNav()):null!==n.planner&&this.dialog.open(re).afterClosed().subscribe(function(s){!0===s&&(o.plannerService.setPlanner(n.planner),o.closeSideNav())}))}},{key:"downloadLayer",value:function(){var n=this.plannerService.getSelectedLayer();if(null!==n){var o=this.importExportService.exportLayer(n);this.downloadService.downloadFile(o,n.name)}}},{key:"copyLayer",value:function(){var n=this.plannerService.getSelectedLayer();if(null!==n){var o=this.importExportService.exportLayer(n);this.clipboardService.copyToClipboard(o)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}},{key:"downloadPlanner",value:function(){var n=this.plannerService.getPlanner();if(null!==n){var o=this.importExportService.exportPlanner(n);this.downloadService.downloadFile(o,"build.sav")}}},{key:"copyPlanner",value:function(){var n=this.plannerService.getPlanner();if(null!==n){var o=this.importExportService.exportPlanner(n);this.clipboardService.copyToClipboard(o)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}},{key:"copyExternalLink",value:function(){var n=this.plannerService.getSelectedLayer();if(null!==n){var o=this.importExportService.exportCharacterAsLink(n.character);this.clipboardService.copyToClipboard(o)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}},{key:"createNewBuild",value:function(){var n=this;this.dialog.open(ie).afterClosed().subscribe(function(o){!0===o&&(n.plannerService.deletePlanner(),n.router.navigate(["/create"]))})}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(D.e),e.Y36(se),e.Y36(le.Y),e.Y36(ce.s),e.Y36(T.q),e.Y36(A.F0),e.Y36(C.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:44,vars:4,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"build"],["mat-flat-button","","color","primary",3,"click"],[1,"info"],["target","blank",3,"href"]],template:function(t,a){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4,"Import"),e.qZA(),e.TgZ(5,"app-import-data",3),e.NdJ("import",function(n){return a.import(n)}),e.qZA(),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",4),e.TgZ(8,"h3"),e._uU(9,"Export"),e.qZA(),e.TgZ(10,"div",5),e.TgZ(11,"p"),e._uU(12,"Current layer"),e.qZA(),e.TgZ(13,"div",6),e.TgZ(14,"button",7),e.NdJ("click",function(){return!a.busy&&a.downloadLayer()}),e.TgZ(15,"mat-icon"),e._uU(16,"file_download"),e.qZA(),e.qZA(),e.TgZ(17,"button",8),e.NdJ("click",function(){return!a.busy&&a.copyLayer()}),e.TgZ(18,"mat-icon"),e._uU(19,"content_copy"),e.qZA(),e.qZA(),e.TgZ(20,"button",9),e.NdJ("click",function(){return!a.busy&&a.copyExternalLink()}),e.TgZ(21,"mat-icon"),e._uU(22,"share"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"div",5),e.TgZ(24,"p"),e._uU(25,"Current build"),e.qZA(),e.TgZ(26,"div",6),e.TgZ(27,"button",7),e.NdJ("click",function(){return!a.busy&&a.downloadPlanner()}),e.TgZ(28,"mat-icon"),e._uU(29,"file_download"),e.qZA(),e.qZA(),e.TgZ(30,"button",8),e.NdJ("click",function(){return!a.busy&&a.copyPlanner()}),e.TgZ(31,"mat-icon"),e._uU(32,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(33,"hr"),e.TgZ(34,"div",10),e.TgZ(35,"button",11),e.NdJ("click",function(){return a.createNewBuild()}),e._uU(36,"New build"),e.qZA(),e.qZA(),e.TgZ(37,"div",12),e._uU(38),e.TgZ(39,"a",13),e._uU(40,"Github"),e.qZA(),e._uU(41," - "),e.TgZ(42,"a",13),e._uU(43,"The Slormancer"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Q6J("heroClass",a.getHeroClass()),e.xp6(33),e.hij(" Slorm Planner ",a.VERSION," - "),e.xp6(1),e.Q6J("href",a.GITHUB_LINK,e.LSH),e.xp6(3),e.Q6J("href",a.GAME_LINK,e.LSH))},directives:[ue.M,q.lW,J.gM,w.Hw],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{width:80%;background-color:#353535}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:16px;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:16px;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),i}(),de=function(){var i=(0,f.Z)(function c(t){(0,_.Z)(this,c),this.name=t.name});return i.\u0275fac=function(t){return new(t||i)(e.Y36(C.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-delete-layer-modal"]],decls:11,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,a){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3," You're about to delete layer "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"mat-dialog-actions"),e.TgZ(7,"button",1),e._uU(8,"Cancel"),e.qZA(),e.TgZ(9,"button",2),e._uU(10,"Delete"),e.qZA(),e.qZA()),2&t&&(e.xp6(5),e.Oqu(a.name),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[C.uh,C.xY,C.H8,q.lW,C.ZT],styles:[""]}),i}(),ge=u(2424),b=u(5581),k=u(9224),F=u(4102),E=u(508);function me(i,c){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){var t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function fe(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeSearch()}),e._uU(1,"close"),e.qZA()}}var _e=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n,o){var r;return(0,_.Z)(this,a),(r=t.call(this)).plannerService=l,r.searchService=n,r.dialog=o,r.searchControl=new d.NI(""),r.layerControl=new d.NI(null),r.layerOptions=[],r}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.selectedLayerIndexChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.layerControl.setValue(o,{emitEvent:!1})}),this.plannerService.layersChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.layerOptions=o.map(function(r,s){return{label:r.name,value:s}})}),this.searchService.searchChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.searchControl.setValue(o,{emitEvent:!1})}),this.layerControl.setValue(this.plannerService.getSelectedLayerIndex(),{emitEvent:!1}),this.layerControl.valueChanges.subscribe(function(o){return n.plannerService.setLayerIndex(o)}),this.searchControl.valueChanges.subscribe(function(o){return n.searchService.setSearch(o)})}},{key:"hasSearch",value:function(){return this.searchService.hasSearch()}},{key:"removeSearch",value:function(){this.searchService.setSearch(null)}},{key:"editLayer",value:function(){var n=this,o=(0,b.lA)(this.plannerService.getLayers()[this.plannerService.getSelectedLayerIndex()]);null!==o&&this.dialog.open(L,{data:{title:"Edit layer name",name:o.name}}).afterClosed().subscribe(function(s){s&&n.plannerService.setLayerName(n.plannerService.getSelectedLayerIndex(),s)})}},{key:"addLayer",value:function(){var n=this;this.dialog.open(L,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(r){r&&n.plannerService.addLayer(r)})}},{key:"copyLayer",value:function(){var n=this;this.dialog.open(L,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(r){r&&n.plannerService.copyLayer(n.plannerService.getSelectedLayerIndex(),r)})}},{key:"removeLayer",value:function(){var n=this,o=(0,b.lA)(this.plannerService.getLayers()[this.plannerService.getSelectedLayerIndex()]);null!==o&&this.dialog.open(de,{data:{name:o.name}}).afterClosed().subscribe(function(s){s&&n.plannerService.removeLayer(n.plannerService.getSelectedLayerIndex())})}},{key:"hasRoomForMoreLayer",value:function(){return this.plannerService.hasRoomForMoreLayers()}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(ge.o),e.Y36(C.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer name",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Copy this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(t,a){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"div",1),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,me,2,2,"mat-option",4),e.qZA(),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return a.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA(),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return a.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA(),e.qZA(),e.TgZ(15,"button",7),e.NdJ("click",function(){return a.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.qZA(),e.TgZ(18,"button",8),e.NdJ("click",function(){return a.copyLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"mat-form-field",2),e.TgZ(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,fe,2,0,"mat-icon",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formControl",a.layerControl),e.xp6(1),e.Q6J("ngForOf",a.layerOptions),e.xp6(4),e.Q6J("disabled",a.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!a.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!a.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",a.searchControl),e.xp6(1),e.Q6J("ngIf",a.hasSearch()))},directives:[k.a8,k.dn,O.KE,O.hX,F.gD,d.JJ,d.oH,v.sg,q.lW,J.gM,w.Hw,j.Nt,d.Fj,v.O5,E.ey,O.R9],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:8px;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),i}(),ve=["dragImage"],he=["dragBackground"];function ye(i,c){if(1&i&&(e.TgZ(0,"a",11,12),e.TgZ(2,"span",13),e._uU(3),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.MAs(1);e.Q6J("routerLink",t.route)("active",a.isActive),e.xp6(3),e.Oqu(t.name)}}var Ce=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l){var n;return(0,_.Z)(this,a),(n=t.call(this)).itemMoveService=l,n.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],n.isDragging=!1,n.dragImage=null,n.dragBackground=null,n.itemMoveService.draggingItem.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){n.isDragging=o;var r=n.itemMoveService.getHoldItem();null!==r&&n.dragImage&&n.dragBackground&&(n.dragImage.nativeElement.src=r.icon,n.dragBackground.nativeElement.src=r.itemIconBackground)}),n}return(0,f.Z)(a,[{key:"onMouseMove",value:function(n){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){var o=n.clientY-this.dragImage.nativeElement.height/2+"px",r=n.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=o,this.dragImage.nativeElement.style.left=r,this.dragBackground.nativeElement.style.top=o,this.dragBackground.nativeElement.style.left=r}}},{key:"onMouseUp",value:function(){this.itemMoveService.releaseHoldItem()}},{key:"onMouseContextMenu",value:function(){this.itemMoveService.releaseHoldItem()}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(W.v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-build"]],viewQuery:function(t,a){var l;1&t&&(e.Gf(ve,5),e.Gf(he,5)),2&t&&(e.iGM(l=e.CRH())&&(a.dragImage=l.first),e.iGM(l=e.CRH())&&(a.dragBackground=l.first))},hostBindings:function(t,a){1&t&&e.NdJ("mousemove",function(n){return a.onMouseMove(n)})("mouseup",function(){return a.onMouseUp()})("contextmenu",function(){return a.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(t,a){if(1&t){var l=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-icon",2),e.NdJ("click",function(){return e.CHM(l),e.MAs(8).toggle()}),e._uU(3,"menu"),e.qZA(),e.qZA(),e.TgZ(4,"nav",3),e.YNc(5,ye,4,3,"a",4),e.qZA(),e.qZA(),e.TgZ(6,"mat-sidenav-container"),e.TgZ(7,"mat-sidenav",null,5),e._UZ(9,"app-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header"),e._UZ(12,"router-outlet"),e._UZ(13,"img",7,8),e._UZ(15,"img",9,10),e.qZA(),e.qZA()}if(2&t){var n=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",a.ROUTES),e.xp6(4),e.Q6J("sidenav",n),e.xp6(4),e.ekj("dragging",a.isDragging),e.xp6(2),e.ekj("dragging",a.isDragging)}},directives:[w.Hw,U.BU,v.sg,B.TM,B.JX,pe,B.Rh,_e,A.lC,A.yS,U.Nj,A.Od],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),i}(),z=u(7762),V=u(4373),be=u(9184),h=u(4713),P=u(4902),Q=u(7201),K=u(7438),ke=u(7795),xe=u(9713);function Se(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(r){return e.CHM(t),e.oxw(2).selectAncestralLegacy(r)}),e._uU(1,"> "),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw().$implicit,n=e.oxw();e.Akn(l.iconStyle),e.Q6J("ancestralLegacy",n.getAncestralLegacy(a))("equipped",n.isAncestralLegacyEquipped(a))("selected",n.isNodeSelected(a))}}function Me(i,c){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"div",10),e.YNc(2,Se,2,5,"app-ancestral-legacy-slot",11),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.oxw();e.Akn(t.style),e.Gre("zone absolute color-",t.color,""),e.ekj("large",t.large)("active",a.isRealmActive(t.realmId)),e.xp6(2),e.Q6J("ngForOf",t.ancestralLegacies)}}function Ze(i,c){1&i&&e._UZ(0,"div",13),2&i&&e.Akn(c.$implicit.style)}function Oe(i,c){1&i&&e._UZ(0,"div",14),2&i&&e.Akn(c.$implicit.style)}function Te(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw().toggleNode(r.nodeId)}),e._UZ(1,"div",16),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw();e.Akn(a.style),e.ekj("active",l.isNodeActive(a.nodeId))("available",l.isNodeAvailable(a.nodeId))}}var Pe=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n,o){var r;return(0,_.Z)(this,a),(r=t.call(this)).plannerService=l,r.slormancerDataService=n,r.slormancerCharacterModifierService=o,r.selectedAncestralLegacy=null,r.selectedAncestralLegacyChange=new e.vpe,r.BOUNDS_X={min:-200,max:200},r.BOUNDS_Y={min:-200,max:200},r.availableNodes=[],r.activeRealms=[],r.weldingShapes=[],r.lineShapes=[],r.zoneShapes=[],r.nodeShapes=[],r.character=null,r.position={x:0,y:0},r.scale=2,r.grabbed=!1,r.drawMap(),r}return(0,f.Z)(a,[{key:"onWheelUp",value:function(n){return this.scale=Math.max(1,Math.min(2,this.scale+(n.deltaY>0?-.2:.2))),!1}},{key:"onMouseDown",value:function(){this.grabbed=!0}},{key:"onMouseUp",value:function(){this.grabbed=!1}},{key:"onMouseMouve",value:function(n){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+n.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+n.movementY)))}},{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=o,n.updateMap()})}},{key:"drawMap",value:function(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,h.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,h.pb)(0,9),-72,52),this.addNodeShapes((0,h.pb)(0,9).map(function(n){return 10+2*n}),-82.8,92),this.addNodeShapes((0,h.pb)(0,9).map(function(n){return 11+2*n}),-61.2,92),this.addZoneShapes((0,h.pb)(10,19),-54,112),this.addZoneShapes((0,h.pb)(20,29),-72,150,!0),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,h.pb)(0,9).map(function(n){return 31+3*n}),-72,120),this.addNodeShapes((0,h.pb)(10,19).map(function(n){return 3*n}),-81,127),this.addNodeShapes((0,h.pb)(10,19).map(function(n){return 2+3*n}),-63,127),this.addZoneShapes((0,h.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,h.pb)(0,4).map(function(n){return 61+5*n}),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,42,45,46,49,50,53,54,57,58],-72,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181)}},{key:"updateMap",value:function(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){var n=null!==this.character?this.character.ancestralLegacies.activeNodes:[],o=K.R.filter(function(r){return void 0!==r.nodes.find(function(s){return-1!==n.indexOf(s)})});this.character.ancestralLegacies.activeNodes.length<V.sD&&(this.availableNodes=[].concat((0,P.Z)(K.m),(0,P.Z)(o.map(function(r){return r.nodes}).flat())).filter(b.mr)),this.activeRealms=o.map(function(r){return r.realm})}}},{key:"isNodeActive",value:function(n){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(n)}},{key:"isRealmActive",value:function(n){return-1!==this.activeRealms.indexOf(n)}},{key:"isNodeAvailable",value:function(n){return-1!==this.availableNodes.indexOf(n)}},{key:"isNodeSelected",value:function(n){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===n}},{key:"isAncestralLegacyEquipped",value:function(n){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(n)}},{key:"getAncestralLegacy",value:function(n){var o=null;return null!==this.character&&(o=(0,b.lA)(this.character.ancestralLegacies.ancestralLegacies.find(function(r){return r.id==n}))),o}},{key:"toggleNode",value:function(n){if(null!==this.character){var o;o=this.isNodeActive(n)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,n):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,n),this.plannerService.updateCurrentCharacter(),o&&this.updateMap()}return!1}},{key:"selectAncestralLegacy",value:function(n){console.log(n),this.selectedAncestralLegacyChange.emit(n)}},{key:"addLineShapes",value:function(n,o,r,s){var p,g=360/n;(p=this.lineShapes).push.apply(p,(0,P.Z)((0,h.pb)(n).map(function(y){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(o+y*g)+"deg) translateX("+r+"px)"}}})))}},{key:"addWeldinghapes",value:function(n,o,r,s){var p,g=360/n;(p=this.weldingShapes).push.apply(p,(0,P.Z)((0,h.pb)(n).map(function(y){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(o+y*g)+"deg) translateX("+r+"px)"}}})))}},{key:"addZoneShapes",value:function(n,o,r){var s,p=this,g=arguments.length>3&&void 0!==arguments[3]&&arguments[3],y=360/n.length;(s=this.zoneShapes).push.apply(s,(0,P.Z)(n.map(function($,Bt){var Rt=p.slormancerDataService.getAncestralRealmColor($),jt=p.slormancerDataService.getAncestralLegacyIdsFromRealm($),te=o+Bt*y;return{style:{transform:"translate(-50%, -50%) rotate("+te+"deg) translateX("+r+"px)"},iconStyle:{transform:"rotate("+-te+"deg)"},large:g,realmId:$,ancestralLegacies:jt,color:Rt}})))}},{key:"addNodeShapes",value:function(n,o,r){var s,p=n.length,g=360/p;(s=this.nodeShapes).push.apply(s,(0,P.Z)((0,h.pb)(p).map(function(y){return{style:{transform:"translate(-50%, -50%) rotate("+(o+y*g)+"deg) translateX("+r+"px)"},nodeId:(0,b.Be)(n[y],0)}})))}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(ke.o),e.Y36(Q.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(t,a){1&t&&e.NdJ("wheel",function(n){return a.onWheelUp(n)})("mousedown",function(){return a.onMouseDown()})("mouseup",function(){return a.onMouseUp()})("mouseleave",function(){return a.onMouseUp()})("mousemove",function(n){return a.onMouseMouve(n)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","large","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,Me,3,10,"div",6),e.YNc(7,Ze,1,2,"div",7),e.YNc(8,Oe,1,2,"div",8),e.YNc(9,Te,2,6,"div",9),e.qZA(),e.qZA()),2&t&&(e.ekj("grabbed",a.grabbed),e.xp6(1),e.Udp("top",a.position.y+"px")("left",a.position.x+"px")("transform","scale("+a.scale+")"),e.xp6(5),e.Q6J("ngForOf",a.zoneShapes),e.xp6(1),e.Q6J("ngForOf",a.lineShapes),e.xp6(1),e.Q6J("ngForOf",a.weldingShapes),e.xp6(1),e.Q6J("ngForOf",a.nodeShapes))},directives:[v.sg,xe.y],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid #d5ad48;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;grid-gap:4px;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),i}(),Ae=u(9065);function we(i,c){if(1&i&&e._UZ(0,"div",9),2&i){var t=c.$implicit,a=e.oxw();e.ekj("unlocked",a.isPointUnlock(t))}}var qe=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n,o){var r;return(0,_.Z)(this,a),(r=t.call(this)).plannerService=l,r.slormancerAncestralLegacyService=n,r.messageService=o,r.ANCESTRAL_LEGACY_POINTS=(0,h.pb)(V.JY),r.character=null,r.selectedAncestralLegacy=null,r}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=o,n.selectDefaultAncestralLegacy()})}},{key:"selectDefaultAncestralLegacy",value:function(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){var n=(0,b.lA)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===n?null:(0,b.lA)(this.character.ancestralLegacies.ancestralLegacies[n])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,b.lA)(this.character.ancestralLegacies.ancestralLegacies[0]))}}},{key:"isPointUnlock",value:function(n){return n<V.sD}},{key:"optimizeAncestralLegacies",value:function(){if(null!==this.character){var o,n=(0,z.Z)(this.character.ancestralLegacies.ancestralLegacies);try{for(n.s();!(o=n.n()).done;){var r=o.value;r.baseRank=r.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(r,r.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(r)}}catch(s){n.e(s)}finally{n.f()}this.plannerService.updateCurrentCharacter(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(be.O),e.Y36(D.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",0),e.TgZ(3,"div",1),e.YNc(4,we,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return a.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"div",5),e.TgZ(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(n){return a.selectedAncestralLegacy=n}),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",a.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",a.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",a.selectedAncestralLegacy))},directives:[k.a8,k.dn,v.sg,w.Hw,J.gM,Pe,Ae.q],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:8px;gap:8px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;grid-gap:20px;gap:20px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;flex-grow:1}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:500px}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),i}(),H=u(7399),Ie=u(3729);function Ue(i,c){if(1&i&&e._UZ(0,"app-attribute-line",2),2&i){var t=c.$implicit,a=e.oxw(2);e.Q6J("iconShift",t%2==0)("attribute",a.attributes.allocated[t])("remainingPoints",a.attributes.remainingPoints)}}function Ne(i,c){if(1&i&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Ue,1,3,"app-attribute-line",1),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(3),e.AsE("",t.attributes.remainingPoints,"/",t.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}var Le=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l){var n;return(0,_.Z)(this,a),(n=t.call(this)).plannerService=l,n.ALL_ATTRIBUTES=H.A,n.attributes=null,n}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.attributes=null===o?null:o.attributes})}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(t,a){1&t&&e.YNc(0,Ne,5,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==a.attributes)},directives:[v.O5,k.a8,k.dn,v.sg,Ie.g],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),i}(),Je=function(){var i=(0,f.Z)(function c(){(0,_.Z)(this,c),this.character=null});return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,a){1&t&&e._uU(0,"TODO")},styles:[""]}),i}(),Fe=function(){var i=(0,f.Z)(function c(){(0,_.Z)(this,c),this.character=null});return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,a){1&t&&e._uU(0,"TODO TURRET")},styles:[""]}),i}();function Ee(i,c){if(1&i&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&i){var t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function Qe(i,c){1&i&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function He(i,c){if(1&i&&e._UZ(0,"app-defense-calc",6),2&i){var t=e.oxw(2);e.Q6J("character",t.character)}}function Ye(i,c){if(1&i&&e._UZ(0,"app-turret-syndrome-calc",6),2&i){var t=e.oxw(2);e.Q6J("character",t.character)}}function Be(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"mat-form-field",1),e.TgZ(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().currentCalc=n}),e.YNc(7,Ee,2,2,"mat-option",3),e.qZA(),e.qZA(),e.YNc(8,Qe,2,0,"p",0),e.YNc(9,He,1,1,"app-defense-calc",4),e.YNc(10,Ye,1,1,"app-turret-syndrome-calc",4),e.qZA(),e.qZA(),e.qZA()}if(2&i){var a=e.oxw();e.xp6(6),e.Q6J("ngModel",a.currentCalc),e.xp6(1),e.Q6J("ngForOf",a.options),e.xp6(1),e.Q6J("ngIf",null===a.currentCalc),e.xp6(1),e.Q6J("ngIf",a.currentCalc===a.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",a.currentCalc===a.CalcPage.TurretSyndrome)}}var I=function(){return(i=I||(I={}))[i.Defense=0]="Defense",i[i.TurretSyndrome=1]="TurretSyndrome",I;var i}(),Re=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l){var n;return(0,_.Z)(this,a),(n=t.call(this)).plannerService=l,n.CalcPage=I,n.character=null,n.options=[{value:I.Defense,label:"Defenses"},{value:I.TurretSyndrome,label:"Turret"}],n.currentCalc=null,n.plannerService.characterChanged.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){return n.character=o}),n}return(0,f.Z)(a)}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(t,a){1&t&&e.YNc(0,Be,11,5,"main",0),2&t&&e.Q6J("ngIf",null!==a.character)},directives:[v.O5,k.a8,k.dn,O.KE,O.hX,F.gD,d.JJ,d.On,v.sg,E.ey,Je,Fe],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),i}(),je=u(9635),ee=u(4440),De=u(4425);function Ve(i,c){1&i&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function Ge(i,c){if(1&i&&e._UZ(0,"app-compare-view",9),2&i){var t=e.oxw(2);e.Q6J("differences",t.differences)}}function $e(i,c){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&i){var t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Xe(i,c){if(1&i&&e._UZ(0,"app-main-stats",2),2&i){var t=e.oxw(2);e.Q6J("stats",t.layerControl.value.character.stats)}}function We(i,c){if(1&i&&(e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA(),e.qZA(),e.TgZ(6,"mat-card",3),e.TgZ(7,"mat-card-content"),e.YNc(8,Ve,2,0,"p",0),e.YNc(9,Ge,1,1,"app-compare-view",4),e.qZA(),e.qZA(),e.TgZ(10,"mat-card",1),e.TgZ(11,"mat-card-content"),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,$e,2,2,"mat-option",7),e.qZA(),e.qZA(),e.YNc(17,Xe,1,1,"app-main-stats",8),e.qZA(),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(4),e.Oqu(t.currentLayer.name),e.xp6(1),e.Q6J("stats",t.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===t.differences),e.xp6(1),e.Q6J("ngIf",null!==t.differences),e.xp6(6),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layers),e.xp6(1),e.Q6J("ngIf",t.layerControl.value)}}var ze=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n){var o;return(0,_.Z)(this,a),(o=t.call(this)).plannerService=l,o.slormancerCharacterComparatorService=n,o.differences=null,o.currentLayer=null,o.layers=[],o.config=null,o.layerControl=new d.NI(0),o.plannerService.layersChanged.pipe((0,x.R)(o.unsubscribe)).subscribe(function(r){o.layers=r,o.layerControl.setValue(o.layers[0])}),o.plannerService.selectedLayerIndexChanged.pipe((0,x.R)(o.unsubscribe)).subscribe(function(r){var s=o.plannerService.getLayers(),p=0===r&&s.length>1?1:0;o.currentLayer=s[r],o.layerControl.setValue(s[p]),o.updateDifferences()}),o.layerControl.valueChanges.subscribe(function(){return o.updateDifferences()}),o}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){}},{key:"updateDifferences",value:function(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(je.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(t,a){1&t&&e.YNc(0,We,18,7,"main",0),2&t&&e.Q6J("ngIf",null!==a.currentLayer&&a.layers.length>0)},directives:[v.O5,k.a8,k.dn,ee.w,O.KE,O.hX,F.gD,d.JJ,d.oH,v.sg,De.$,E.ey],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}"]}),i}(),Ke=u(1093),en=u(648),G=u(2469),nn=u(7446);function tn(i,c){if(1&i&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&i){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function an(i,c){if(1&i&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,tn,2,1,"mat-icon",5),e.qZA()),2&i){var t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function on(i,c){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&i){var t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function rn(i,c){if(1&i&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&i){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function ln(i,c){if(1&i&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,on,2,2,"mat-option",8),e.qZA(),e.YNc(5,rn,2,1,"mat-icon",5),e.qZA()),2&i){var t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.config.values),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function cn(i,c){if(1&i&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&i){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function sn(i,c){if(1&i&&(e.TgZ(0,"mat-checkbox",10),e.TgZ(1,"label"),e._uU(2),e.YNc(3,cn,2,1,"mat-icon",11),e.qZA(),e.qZA()),2&i){var t=e.oxw(2);e.Q6J("formControl",t.control)("checked",t.control.value),e.xp6(2),e.hij(" ",t.config.label," "),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function un(i,c){if(1&i&&(e.ynx(0),e.YNc(1,an,5,3,"mat-form-field",1),e.YNc(2,ln,6,4,"mat-form-field",1),e.YNc(3,sn,4,4,"mat-checkbox",2),e.BQk()),2&i){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNumber(t.config)),e.xp6(1),e.Q6J("ngIf",t.isEnum(t.config)),e.xp6(1),e.Q6J("ngIf",t.isBoolean(t.config))}}var pn=function(){var i=function(){function c(){(0,_.Z)(this,c),this.control=null,this.config=null}return(0,f.Z)(c,[{key:"isNumber",value:function(a){return"number"===a.type}},{key:"isEnum",value:function(a){return"enum"===a.type}},{key:"isBoolean",value:function(a){return"boolean"===a.type}}]),c}();return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(t,a){1&t&&e.YNc(0,un,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",null!==a.config&&null!==a.control)},directives:[v.O5,O.KE,O.hX,j.Nt,d.wV,d.Fj,d.JJ,d.oH,w.Hw,O.R9,J.gM,F.gD,v.sg,E.ey,nn.oG],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),i}();function dn(i,c){if(1&i&&e._UZ(0,"app-config-entry",4),2&i){var t=c.$implicit,a=e.oxw(3);e.Q6J("control",a.getControl(t))("config",t)}}function gn(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,dn,1,2,"app-config-entry",3),e.BQk()),2&i){var t=c.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function mn(i,c){if(1&i&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,gn,4,2,"ng-container",1),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.GENERAL_CONFIG_GROUPS)}}function fn(i,c){if(1&i&&e._UZ(0,"app-config-entry",4),2&i){var t=c.$implicit,a=e.oxw(4);e.Q6J("control",a.getControl(t))("config",t)}}function _n(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,fn,1,2,"app-config-entry",3),e.BQk()),2&i){var t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function vn(i,c){if(1&i&&(e.ynx(0),e.YNc(1,_n,4,2,"ng-container",0),e.BQk()),2&i){var t=c.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.isGroupValid(t))}}function hn(i,c){if(1&i&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,vn,2,1,"ng-container",1),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.CLASS_CONFIG_GROUPS)}}function yn(i,c){if(1&i&&e._UZ(0,"app-config-entry",4),2&i){var t=c.$implicit,a=e.oxw(4);e.Q6J("control",a.getControl(t))("config",t)}}function Cn(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,yn,1,2,"app-config-entry",3),e.BQk()),2&i){var t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function bn(i,c){if(1&i&&(e.ynx(0),e.YNc(1,Cn,4,2,"ng-container",0),e.BQk()),2&i){var t=c.$implicit,a=e.oxw(2);e.xp6(1),e.Q6J("ngIf",a.isGroupValid(t))}}function kn(i,c){if(1&i&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,bn,2,1,"ng-container",1),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.EQUIPMENT_CONFIG_GROUPS)}}var xn=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l){var n;return(0,_.Z)(this,a),(n=t.call(this)).plannerService=l,n.EXTRA_VALIDATORS={percent_missing_health:[d.kI.max(100)],percent_missing_mana:[d.kI.max(100)],enemy_percent_missing_health:[d.kI.max(100)],block_stacks:[d.kI.max(100)],nimble_champion_stacks:[d.kI.max(200)],nimble_chaserenitympion_stacks:[d.kI.max(12)]},n.GENERAL_CONFIG_GROUPS=[{title:"General",condition:function(){return!0},configurations:[{type:"number",key:"all_characters_level",label:"Sum of all your character's level"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"boolean",key:"idle",label:"Are you idle ?"}]},{title:"When in Combat",condition:function(){return!0},configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Actives inner fire"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"}]},{title:"Enemy",condition:function(){return!0},configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"}]}],n.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:function(r){return 2===r.reaper.id},configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:function(r){return 105===r.reaper.id},configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:function(r){return 73===r.reaper.id},configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:function(r){return 74===r.reaper.id},configurations:[{type:"number",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:function(r){return 75===r.reaper.id},configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:function(r){return 79===r.reaper.id||80===r.reaper.id},configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:function(r){return 82===r.reaper.id||83===r.reaper.id},configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:function(r){return 111===r.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:function(r){return 112===r.reaper.id},configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:function(r){return 113===r.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Gold Armor",condition:function(r){return n.hasActivable(r,0)},configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:function(r){return n.hasActivable(r,3)},configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:function(r){return n.hasActivable(r,6)},configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Willpower",condition:function(r){return n.isAttributeAllocated(r,H.a.Willpower)},configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:function(r){return n.isAttributeAllocated(r,H.a.Dexterity)},configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:function(r){return n.isAttributeAllocated(r,H.a.Bravery)},configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:function(r){return n.isAncestralLegacyEquipped(r,80)},configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:function(r){return n.isAncestralLegacyEquipped(r,85)},configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:function(r){return n.isAncestralLegacyEquipped(r,33)},configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:function(r){return n.isAncestralLegacyEquipped(r,106)},configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:function(r){return n.isAncestralLegacyEquipped(r,82)},configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Faith of the Ancients",condition:function(r){return n.hasLegendaryEffect(r,31)},configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:function(r){return n.hasLegendaryEffect(r,29)},configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:function(r){return n.hasLegendaryEffect(r,75)},configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:function(r){return n.hasLegendaryEffect(r,77)},configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:function(r){return n.hasLegendaryEffect(r,26)},configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:function(r){return n.hasLegendaryEffect(r,63)},configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:function(r){return n.hasLegendaryEffect(r,16)},configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:function(r){return n.hasLegendaryEffect(r,16)},configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:function(r){return n.hasLegendaryEffect(r,76)},configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"A Path to the First",condition:function(r){return n.hasLegendaryEffect(r,32)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:function(r){return n.hasLegendaryEffect(r,33)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:function(r){return n.hasLegendaryEffect(r,74)},configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]}],n.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:function(r){return r.heroClass===m.i.Warrior},configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,0)},configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,2)},configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,3)},configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,4)},configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,5)},configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,6)},configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,7)},configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,9)},configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:function(r){return n.isSkillEquipped(r,m.i.Warrior,10)},configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:function(r){return r.heroClass===m.i.Huntress},configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,0)},configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,1)},configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,2)},configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,3)},configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,4)},configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,5)},configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,7)},configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,8)},configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:function(r){return n.isSkillEquipped(r,m.i.Huntress,9)},configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:function(r){return r.heroClass===m.i.Mage},configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,0)},configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,2)},configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,4)},configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,6)},configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,7)},configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,8)},configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:G.H.Arcanic,label:"Arcanic"},{value:G.H.Temporal,label:"Temporal"},{value:G.H.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:function(r){return n.isSkillEquipped(r,m.i.Mage,9)},configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],n.character=null,n.config=null,n.plannerService.characterChanged.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){return n.character=o}),n}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.config=this.generateConfigurationForm(),console.log(this.plannerService.getConfiguration()),this.config.valueChanges.subscribe(function(){return n.updateConfiguration()})}},{key:"generateConfigurationForm",value:function(){for(var n={},r=0,s=Object.entries((0,b.Be)(this.plannerService.getConfiguration(),Ke.g));r<s.length;r++){var p=s[r],g=[d.kI.required].concat((0,P.Z)((0,b.Be)(this.EXTRA_VALIDATORS[p[0]],[])));"number"===p[1]&&g.push(d.kI.min(0)),n[p[0]]=new d.NI(p[1],g)}return new d.cw(n)}},{key:"updateConfiguration",value:function(){null!==this.config&&this.config.valid&&this.plannerService.setConfiguration(this.config.value)}},{key:"getControl",value:function(n){return null===this.config?null:this.config.get(n.key)}},{key:"isGroupValid",value:function(n){return null!==this.character&&n.condition(this.character)}},{key:"hasActivable",value:function(n,o){return[n.activable1,n.activable2,n.activable3,n.activable4].filter(b.BX).some(function(r){return!("element"in r)&&r.id===o})}},{key:"isSkillEquipped",value:function(n,o,r){return n.heroClass===o&&[n.primarySkill,n.secondarySkill,n.supportSkill].filter(b.BX).some(function(s){return s.id===r})}},{key:"isAttributeAllocated",value:function(n,o){var r=n.attributes.allocated[o];return r.rank>0||r.bonusRank>0}},{key:"isAncestralLegacyEquipped",value:function(n,o){return n.ancestralLegacies.activeAncestralLegacies.includes(o)}},{key:"hasLegendaryEffect",value:function(n,o){return en.PL.map(function(r){var s;return null===(s=n.gear[r])||void 0===s?void 0:s.legendaryEffect}).filter(b.BX).some(function(r){return r.id===o})}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(t,a){1&t&&(e.TgZ(0,"main"),e.YNc(1,mn,3,1,"mat-card",0),e.YNc(2,hn,3,1,"mat-card",0),e.YNc(3,kn,3,1,"mat-card",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==a.config),e.xp6(1),e.Q6J("ngIf",null!==a.config),e.xp6(1),e.Q6J("ngIf",null!==a.config))},directives:[v.O5,k.a8,k.dn,v.sg,pn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}"]}),i}(),Sn=u(4322),Mn=u(916),Zn=u(4591),On=u(3662),Tn=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n){var o;return(0,_.Z)(this,a),(o=t.call(this)).plannerService=l,o.slormancerCharacterModifierService=n,o.character=null,o}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=o})}},{key:"updatePrimarySkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,n),this.plannerService.updateCurrentCharacter())}},{key:"updateSecondarySkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,n),this.plannerService.updateCurrentCharacter())}},{key:"updateSupportSkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,n),this.plannerService.updateCurrentCharacter())}},{key:"updateActivable1",value:function(n){null!==this.character&&this.character.activable1!==n&&(null!==n&&(this.character.activable2===n?this.character.activable2=this.character.activable1:this.character.activable3===n?this.character.activable3=this.character.activable1:this.character.activable4===n&&(this.character.activable4=this.character.activable1)),this.character.activable1=n,this.plannerService.updateCurrentCharacter())}},{key:"updateActivable2",value:function(n){null!==this.character&&this.character.activable2!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable2:this.character.activable3===n?this.character.activable3=this.character.activable2:this.character.activable4===n&&(this.character.activable4=this.character.activable2)),this.character.activable2=n,this.plannerService.updateCurrentCharacter())}},{key:"updateActivable3",value:function(n){null!==this.character&&this.character.activable3!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable3:this.character.activable2===n?this.character.activable2=this.character.activable3:this.character.activable4===n&&(this.character.activable4=this.character.activable3)),this.character.activable3=n,this.plannerService.updateCurrentCharacter())}},{key:"updateActivable4",value:function(n){null!==this.character&&this.character.activable4!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable4:this.character.activable3===n?this.character.activable3=this.character.activable4:this.character.activable2===n&&(this.character.activable2=this.character.activable4)),this.character.activable4=n,this.plannerService.updateCurrentCharacter())}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(Q.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skill-bar"]],features:[e.qOj],decls:15,vars:8,consts:[[1,"skill-bar"],[1,"skill-slot-border"],[3,"skill","changed"],[3,"skill","support","changed"],[3,"activable","changed"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"app-skill-slot",2),e.NdJ("changed",function(n){return a.updatePrimarySkill(n)}),e.qZA(),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"app-skill-slot",2),e.NdJ("changed",function(n){return a.updateSecondarySkill(n)}),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"app-skill-slot",3),e.NdJ("changed",function(n){return a.updateSupportSkill(n)}),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e.TgZ(8,"app-activable-slot",4),e.NdJ("changed",function(n){return a.updateActivable1(n)}),e.qZA(),e.qZA(),e.TgZ(9,"div",1),e.TgZ(10,"app-activable-slot",4),e.NdJ("changed",function(n){return a.updateActivable2(n)}),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"app-activable-slot",4),e.NdJ("changed",function(n){return a.updateActivable3(n)}),e.qZA(),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"app-activable-slot",4),e.NdJ("changed",function(n){return a.updateActivable4(n)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("skill",null===a.character?null:a.character.primarySkill),e.xp6(2),e.Q6J("skill",null===a.character?null:a.character.secondarySkill),e.xp6(2),e.Q6J("skill",null===a.character?null:a.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("activable",null===a.character?null:a.character.activable1),e.xp6(2),e.Q6J("activable",null===a.character?null:a.character.activable2),e.xp6(2),e.Q6J("activable",null===a.character?null:a.character.activable3),e.xp6(2),e.Q6J("activable",null===a.character?null:a.character.activable4))},directives:[Zn.X,On.Z],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:4px;gap:4px;border:3px solid #3c3c3c;padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid #3c3c3c}"]}),i}(),Pn=u(7375);function An(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);var n=e.oxw(2);return n.dragInItemsGroup(n.character.inventory)})("mouseleave",function(){return e.CHM(t),e.oxw(2).dragOutItemsGroup()})("mouseup",function(){e.CHM(t);var n=e.oxw(2);return n.dragDrop(n.character.inventory)}),e._uU(1,"Bag"),e.qZA()}if(2&i){var a=e.oxw(2);e.ekj("drag-on",a.isDragging&&a.itemGroupBeingDraggedOn===a.character.inventory)("drag-possible",a.itemGroupDragDropPossible)("drag-impossible",!a.itemGroupDragDropPossible)}}function wn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(o){var s=e.CHM(t).index;return e.oxw(2).updateIventoryItem(s,o)}),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw(2);e.Q6J("item",a)("character",l.character)}}function qn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);var s=e.oxw().$implicit;return e.oxw(2).dragInItemsGroup(s)})("mouseleave",function(){return e.CHM(t),e.oxw(3).dragOutItemsGroup()})("mouseup",function(){e.CHM(t);var s=e.oxw().$implicit;return e.oxw(2).dragDrop(s)}),e._uU(1),e.qZA()}if(2&i){var a=e.oxw(),l=a.$implicit,n=a.index,o=e.oxw(2);e.ekj("drag-on",o.isDragging&&o.itemGroupBeingDraggedOn===l)("drag-possible",o.itemGroupDragDropPossible)("drag-impossible",!o.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",n+1,"")}}function In(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(o){var s=e.CHM(t).index,p=e.oxw().index;return e.oxw(2).updateSharedInventoryItem(p,s,o)}),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw(3);e.Q6J("item",a)("character",l.character)}}function Un(i,c){if(1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,qn,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,In,1,2,"app-item-slot",9),e.qZA(),e.qZA()),2&i){var t=c.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function Nn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content"),e.TgZ(5,"app-character-equipment",2),e.NdJ("changed",function(){return e.CHM(t),e.oxw().gearChanged()}),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3),e.TgZ(8,"app-reaper-slot",2),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateReaper(n)}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-card",5),e.TgZ(12,"mat-card-content"),e.TgZ(13,"mat-tab-group",6),e.TgZ(14,"mat-tab"),e.YNc(15,An,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,wn,1,2,"app-item-slot",9),e.qZA(),e.qZA(),e.YNc(18,Un,4,1,"mat-tab",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&i){var a=e.oxw();e.xp6(3),e.Oqu(a.character.fullName),e.xp6(2),e.Q6J("character",a.character),e.xp6(3),e.Q6J("character",a.character),e.xp6(9),e.Q6J("ngForOf",a.character.inventory),e.xp6(1),e.Q6J("ngForOf",a.character.sharedInventory)}}var Ln=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n){var o;return(0,_.Z)(this,a),(o=t.call(this)).plannerService=l,o.itemMoveService=n,o.character=null,o.isDragging=!1,o.itemGroupBeingDraggedOn=null,o.itemGroupDragDropPossible=!1,o.itemMoveService.draggingItem.pipe((0,x.R)(o.unsubscribe)).subscribe(function(r){return o.isDragging=r}),o}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=o})}},{key:"updateCharacter",value:function(){}},{key:"dragInItemsGroup",value:function(n){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==n.find(function(o){return null===o}),this.itemGroupBeingDraggedOn=n)}},{key:"dragOutItemsGroup",value:function(){this.itemGroupBeingDraggedOn=null}},{key:"dragDrop",value:function(n){this.itemMoveService.moveDraggedItemToItemGroup(n)}},{key:"gearChanged",value:function(){this.plannerService.updateCurrentCharacter()}},{key:"updateReaper",value:function(n){null!==this.character&&(this.character.reaper=n,this.plannerService.updateCurrentCharacter())}},{key:"updateIventoryItem",value:function(n,o){null!==this.character&&(this.character.inventory[n]=o,this.plannerService.updateCurrentCharacter())}},{key:"updateSharedInventoryItem",value:function(n,o,r){if(null!==this.character){var s=this.character.sharedInventory[n];s&&(s[o]=r,this.plannerService.savePlanner())}}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(W.v))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(t,a){1&t&&e.YNc(0,Nn,19,5,"main",0),2&t&&e.Q6J("ngIf",null!==a.character)},directives:[v.O5,k.a8,k.dn,Sn.q,Mn.R,Tn,U.SP,U.uX,U.uD,v.sg,Pn.y],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:12px;background-color:#161412;border:3px solid #3c3c3c}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),i}(),Y=u(7255),ne=u(5016),N=u(2525);function Jn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.maximize(l.selectedSkill)}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function Fn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.equipSupport(l.selectedSkill)}),e._uU(1," Equip as Support skill "),e.qZA()}}function En(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.equipPrimary(l.selectedSkill)}),e._uU(1," Equip as Primary skill "),e.qZA()}}function Qn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.equipSecondary(l.selectedSkill)}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function Hn(i,c){if(1&i&&(e.YNc(0,Jn,2,0,"button",4),e.YNc(1,Fn,2,0,"button",4),e.YNc(2,En,2,0,"button",4),e.YNc(3,Qn,2,0,"button",4)),2&i){var t=e.oxw();e.Q6J("ngIf",null!==t.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSupportSkill(t.selectedSkill)&&t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedPrimarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSecondarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill))}}var Yn=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n,o,r){var s;return(0,_.Z)(this,a),(s=t.call(this)).plannerService=l,s.messageService=n,s.slormancerSkillService=o,s.slormancerCharacterModifierService=r,s.selectedSkill=null,s.character=null,s.menu=null,s}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=o})}},{key:"openSettings",value:function(){return null!==this.menu&&this.menu.openMenu(),!1}},{key:"isSupport",value:function(n){return n.skill.type===Y.W.Support}},{key:"maximize",value:function(n){if(null!==this.character){n.skill.baseLevel=n.skill.maxLevel,this.slormancerSkillService.updateSkillModel(n.skill);var r,o=(0,z.Z)(n.upgrades);try{for(o.s();!(r=o.n()).done;){var s=r.value;s.baseRank=s.maxRank,this.slormancerSkillService.updateUpgrade(s)}}catch(p){o.e(p)}finally{o.f()}this.plannerService.updateCurrentCharacter(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name)}}},{key:"equipSupport",value:function(n){null!==this.character&&this.slormancerCharacterModifierService.setSupportSkill(this.character,n.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.plannerService.updateCurrentCharacter())}},{key:"equipPrimary",value:function(n){null!==this.character&&this.slormancerCharacterModifierService.setPrimarySkill(this.character,n.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.plannerService.updateCurrentCharacter())}},{key:"equipSecondary",value:function(n){null!==this.character&&this.slormancerCharacterModifierService.setSecondarySkill(this.character,n.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.plannerService.updateCurrentCharacter())}},{key:"isEquippedSupportSkill",value:function(n){return null!==this.character&&this.character.supportSkill===n.skill}},{key:"isEquippedPrimarySkill",value:function(n){return null!==this.character&&this.character.primarySkill===n.skill}},{key:"isEquippedSecondarySkill",value:function(n){return null!==this.character&&this.character.secondarySkill===n.skill}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(D.e),e.Y36(ne.A),e.Y36(Q.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings-skills"]],viewQuery:function(t,a){var l;1&t&&e.Gf(N.p6,7),2&t&&e.iGM(l=e.CRH())&&(a.menu=l.first)},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(t,a){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return a.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,Hn,4,4,"ng-template",3),e.qZA()),2&t){var l=e.MAs(3);e.Q6J("matMenuTriggerFor",l),e.xp6(2),e.Q6J("overlapTrigger",!0)}},directives:[w.Hw,N.p6,N.VK,N.KA,v.O5,N.OP],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),i}(),Bn=u(411),Rn=u(8849),jn=u(9536);function Dn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",5),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw(2).incrementSkill(r)})("contextmenu",function(){var r=e.CHM(t).$implicit;return e.oxw(2).decrementSkill(r)}),e.qZA(),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw(2);e.ekj("selected",l.isSkillSelected(a)),e.xp6(1),e.ekj("equipped",l.isSkillEquipped(a)),e.Q6J("src","assets/img/icon/"+a.skill.iconLarge+".png",e.LSH)}}function Vn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",6),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw(2).incrementSkill(r)})("contextmenu",function(){var r=e.CHM(t).$implicit;return e.oxw(2).decrementSkill(r)}),e.qZA(),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw(2);e.ekj("selected",l.isSkillSelected(a)),e.xp6(1),e.ekj("equipped",l.isSkillEquipped(a)),e.Q6J("src","assets/img/icon/"+a.skill.icon+".png",e.LSH)}}function Gn(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw(4).incrementUpgrade(r)})("contextmenu",function(){var r=e.CHM(t).$implicit;return e.oxw(4).decrementUpgrade(r)}),e.qZA()}if(2&i){var a=c.$implicit,l=e.oxw(4);e.Q6J("upgrade",a)("equipped",l.isUpgradeEquipped(a))}}function $n(i,c){if(1&i&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,Gn,1,2,"app-upgrade-slot",19),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.oxw(3);e.xp6(2),e.hij(" ",t," "),e.xp6(2),e.Q6J("ngForOf",a.getLineUpgrades(t))}}function Xn(i,c){if(1&i&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._UZ(2,"app-settings-skills",9),e._UZ(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11),e.TgZ(5,"div",12),e.YNc(6,$n,5,2,"div",13),e.qZA(),e.qZA(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA(),e.qZA()),2&i){var t=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",t.selectedSkill),e.xp6(1),e.Q6J("skill",t.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",t.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",t.selectedUpgrade)}}function Wn(i,c){if(1&i&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",1),e.YNc(3,Dn,2,5,"div",2),e.YNc(4,Vn,2,5,"div",2),e.qZA(),e.YNc(5,Xn,9,4,"div",3),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.getSupportSkills(t.character)),e.xp6(1),e.Q6J("ngForOf",t.getActiveSkills(t.character)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill)}}var zn=function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l,n,o){var r;return(0,_.Z)(this,a),(r=t.call(this)).plannerService=l,r.slormancerSkillService=n,r.slormancerCharacterModifierService=o,r.character=null,r.selectedSkill=null,r.selectedUpgrade=null,r.selectedSkillLines=[],r}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=o,n.updateSelectedSkill()})}},{key:"updateSelectedSkill",value:function(){var n=this.character,o=this.selectedSkill,r=null;null===n?r=null:null===o?r=(0,b.lA)(null!==n.supportSkill?n.skills.find(function(s){return s.skill===n.supportSkill}):n.skills[0]):null===(r=(0,b.lA)(n.skills.find(function(s){return s.skill.id===o.skill.id})))&&(r=(0,b.lA)(n.skills[0])),this.selectSkill(r)}},{key:"getSupportSkills",value:function(n){return n.skills.filter(function(o){return o.skill.type===Y.W.Support})}},{key:"getActiveSkills",value:function(n){return n.skills.filter(function(o){return o.skill.type===Y.W.Active})}},{key:"isSkillEquipped",value:function(n){return null!==this.character&&(this.character.primarySkill===n.skill||this.character.secondarySkill===n.skill||this.character.supportSkill===n.skill)}},{key:"isEquippedSupportSkill",value:function(n){return null!==this.character&&this.character.supportSkill===n.skill}},{key:"isEquippedPrimarySkill",value:function(n){return null!==this.character&&this.character.primarySkill===n.skill}},{key:"isEquippedSecondarySkill",value:function(n){return null!==this.character&&this.character.secondarySkill===n.skill}},{key:"isSkillSelected",value:function(n){return this.selectedSkill===n}},{key:"selectSkill",value:function(n){this.selectedSkill!==n&&(this.selectedSkill=n,this.selectedSkillLines=null===n?[]:n.upgrades.map(function(o){return o.line}).filter(b.mr).sort(),this.selectedUpgrade=null===n?null:(0,b.lA)(n.upgrades[0]))}},{key:"incrementSkill",value:function(n){return this.selectedSkill===n?n.skill.baseLevel<n.skill.maxLevel&&(n.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(n.skill),this.plannerService.updateCurrentCharacter(),console.log(n)):this.selectSkill(n),!1}},{key:"decrementSkill",value:function(n){return this.selectedSkill===n?n.skill.baseLevel>1&&(n.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(n.skill),this.plannerService.updateCurrentCharacter(),console.log(n)):this.selectSkill(n),!1}},{key:"getLineUpgrades",value:function(n){var o=[];return null!==this.selectedSkill&&(o=this.selectedSkill.upgrades.filter(function(r){return r.line===n})),o}},{key:"isUpgradeEquipped",value:function(n){var o=!1;return null!==this.selectedSkill&&(o=void 0!==this.selectedSkill.selectedUpgrades.find(function(r){return n.id===r})),o}},{key:"incrementUpgrade",value:function(n){if(null!==this.selectedSkill&&null!==this.character){var o=!1;this.selectedUpgrade!==n&&(this.selectedUpgrade=n,o=!0),this.isUpgradeEquipped(n)?!o&&n.baseRank<n.maxRank&&(n.baseRank++,this.slormancerSkillService.updateUpgrade(n),this.plannerService.updateCurrentCharacter()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,n),0===n.baseRank&&(n.baseRank=1,this.slormancerSkillService.updateUpgrade(n)),this.plannerService.updateCurrentCharacter()),console.log(n)}return!1}},{key:"decrementUpgrade",value:function(n){if(null!==this.selectedSkill&&null!==this.character){var o=!1;this.selectedUpgrade!==n&&(this.selectedUpgrade=n,o=!0),this.isUpgradeEquipped(n)?!o&&n.baseRank>1&&(n.baseRank--,this.slormancerSkillService.updateUpgrade(n),this.plannerService.updateCurrentCharacter()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,n),this.plannerService.updateCurrentCharacter()),console.log(n)}return!1}},{key:"isSupport",value:function(n){return n.skill.type===Y.W.Support}},{key:"equipSupport",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,n.skill),this.plannerService.updateCurrentCharacter())}},{key:"equipPrimary",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,n.skill),this.plannerService.updateCurrentCharacter())}},{key:"equipSecondary",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,n.skill),this.plannerService.updateCurrentCharacter())}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q),e.Y36(ne.A),e.Y36(Q.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(t,a){1&t&&e.YNc(0,Wn,6,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==a.character)},directives:[v.O5,k.a8,k.dn,v.sg,Yn,Bn.O,Rn.B,jn.A],styles:['.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:8px;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;grid-gap:20px;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:12px;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),i}(),Kn=u(8376),et=u(8313);function nt(i,c){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function tt(i,c){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function at(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw(2).$implicit,a=e.oxw(3);e.xp6(1),e.hij(" ",a.maxValueToString(t.value,a.mergedStat.suffix,"+")," ")}}function it(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,at,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=e.oxw().$implicit,a=e.oxw(3);e.xp6(4),e.hij(" ",a.minValueToString(t.value,a.mergedStat.suffix,"+")," "),e.xp6(1),e.Q6J("ngIf",a.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function ot(i,c){if(1&i&&(e.ynx(0),e.YNc(1,it,10,4,"div",13),e.BQk()),2&i){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function rt(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=e.oxw().$implicit,a=e.oxw(3);e.xp6(5),e.hij(" +",a.valueToString(t.value,a.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function lt(i,c){if(1&i&&(e.ynx(0),e.YNc(1,rt,10,3,"div",13),e.BQk()),2&i){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function ct(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," ")}}function st(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,nt,2,0,"span",2),e.qZA(),e.YNc(9,tt,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,ot,2,1,"ng-container",12),e.YNc(15,lt,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,ct,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&i){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function ut(i,c){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function pt(i,c){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function dt(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.hij(" ",a.maxValueToString(t.value,"%","+")," ")}}function gt(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,dt,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.oxw(3);e.xp6(4),e.hij(" ",a.minValueToString(t.value,"%","+")," "),e.xp6(1),e.Q6J("ngIf",a.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function mt(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.oxw(3);e.xp6(5),e.hij(" +",a.valueToString(t.value,"%")," "),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function ft(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalPercent(t.mergedStat),"%","+")," ")}}function _t(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,ut,2,0,"span",2),e.qZA(),e.YNc(9,pt,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,gt,10,4,"div",15),e.YNc(15,mt,10,3,"div",15),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,ft,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&i){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalPercent(t.mergedStat),"%","+")," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function vt(i,c){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function ht(i,c){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function yt(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw().$implicit,a=e.oxw(3);e.xp6(1),e.hij(" ",a.maxValueToString(t.value,"%","+")," ")}}function Ct(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,yt,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.oxw(3);e.xp6(4),e.hij(" ",a.minValueToString(t.value,"%","+")," "),e.xp6(1),e.Q6J("ngIf",a.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function bt(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=c.$implicit,a=e.oxw(3);e.xp6(5),e.hij(" +",t.value,"% "),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function kt(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,vt,2,0,"span",2),e.qZA(),e.YNc(9,ht,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Ct,10,4,"div",15),e.YNc(15,bt,10,3,"div",15),e.BQk()),2&i){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function xt(i,c){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function St(i,c){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function Mt(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw(2).$implicit,a=e.oxw(3);e.xp6(1),e.hij(" ",a.maxValueToString(t.value,a.mergedStat.suffix,"+")," ")}}function Zt(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Mt,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=e.oxw().$implicit,a=e.oxw(3);e.xp6(4),e.hij(" ",a.minValueToString(t.value,a.mergedStat.suffix,"+")," "),e.xp6(1),e.Q6J("ngIf",a.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function Ot(i,c){if(1&i&&(e.ynx(0),e.YNc(1,Zt,10,4,"div",13),e.BQk()),2&i){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function Tt(i,c){if(1&i&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&i){var t=e.oxw().$implicit,a=e.oxw(3);e.xp6(5),e.hij(" +",a.valueToString(t.value,a.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",a.getSource(t.source)," "),e.xp6(2),e.hij(" ",a.getSourceName(t.source)," ")}}function Pt(i,c){if(1&i&&(e.ynx(0),e.YNc(1,Tt,10,3,"div",13),e.BQk()),2&i){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function At(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," ")}}function wt(i,c){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,xt,2,0,"span",2),e.qZA(),e.YNc(9,St,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Ot,2,1,"ng-container",12),e.YNc(15,Pt,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,At,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&i){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function qt(i,c){1&i&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function It(i,c){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula"),e.YNc(3,qt,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.qZA()),2&i){var t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.totalHasMinMax(t.mergedStat)),e.xp6(2),e.hij(" ",t.getMinFormula(t.mergedStat)," ")}}function Ut(i,c){if(1&i&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA(),e.qZA()),2&i){var t=e.oxw(2);e.xp6(4),e.hij(" ",t.getMaxFormula(t.mergedStat)," ")}}function Nt(i,c){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){var t=e.oxw(2);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.total,t.mergedStat.suffix)," ")}}function Lt(i,c){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,st,24,7,"ng-container",2),e.YNc(2,_t,24,7,"ng-container",2),e.YNc(3,kt,16,5,"ng-container",2),e.YNc(4,wt,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,It,6,2,"div",4),e.YNc(8,Ut,5,1,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e._uU(11,"Total (rounded)"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,Nt,2,1,"div",8),e._UZ(15,"div",9),e._UZ(16,"div",10),e.qZA(),e.qZA()),2&i){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasFlatValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.percent.length>0||t.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.multiplier.length>0||t.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",t.hasFlatExtraValues(t.mergedStat)),e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)&&t.totalHasMinMax(t.mergedStat)),e.xp6(5),e.hij(" ",t.minValueToString(t.mergedStat.total,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}var Jt=function(){var i=function(){function c(t,a){(0,_.Z)(this,c),this.slormancerTranslateService=t,this.slormancerStatUpdaterService=a,this.mergedStat=null,this.percent=!1}return(0,f.Z)(c,[{key:"translate",value:function(a){return this.slormancerTranslateService.translate(a)}},{key:"getSource",value:function(a){var l="";return"synergy"in a?l="Synergy":"character"in a?l="Character":"skill"in a?l="Skill":"upgrade"in a?l="Upgrade":"item"in a?l="Item":"ancestralLegacy"in a?l="Ancestral Legacy":"attribute"in a?l="Attribute":"reaper"in a?l="Reaper":"activable"in a?l="Activable":"mechanic"in a?l="Mechanic":"classMechanic"in a?l="Class Mechanic":"ultimatum"in a&&(l="Ultimatum"),l}},{key:"getSourceName",value:function(a){var l="";return"synergy"in a?l=a.synergy:"skill"in a?l=a.skill.nameLabel:"upgrade"in a?l=a.upgrade.name:"item"in a?l=a.item.name:"ancestralLegacy"in a?l=a.ancestralLegacy.name:"attribute"in a?l=a.attribute.attributeName:"reaper"in a?l=a.reaper.name:"activable"in a?l=a.activable.name:"mechanic"in a?l=a.mechanic.name:"classMechanic"in a?l=a.classMechanic.name:"ultimatum"in a&&(l=a.ultimatum.title),l}},{key:"valueToString",value:function(a,l){return"number"==typeof a?(0,h.NM)(a,5)+l:(0,h.NM)(a.min,5)+l+"-"+(0,h.NM)(a.max,5)+l}},{key:"minValueToString",value:function(a,l){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"number"==typeof a?n+((0,h.NM)(a,5)+l):n+(0,h.NM)(a.min,5)+l}},{key:"maxValueToString",value:function(a,l){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"number"==typeof a?"":n+(0,h.NM)(a.max,5)+l}},{key:"getTotalFlat",value:function(a){return this.slormancerStatUpdaterService.getTotalFlat(a)}},{key:"getTotalFlatExtra",value:function(a){return this.slormancerStatUpdaterService.getTotalFlatExtra(a)}},{key:"getTotalPercent",value:function(a){var l=this.slormancerStatUpdaterService.addNumberValues(a.values.percent.map(function(o){return o.value})),n=l+this.slormancerStatUpdaterService.addNumberValues(a.values.maxPercent.map(function(o){return o.value}));return l!==n?{min:l,max:n}:l}},{key:"getTotalFlatPercent",value:function(a){var l=this.slormancerStatUpdaterService.getTotalFlatAndPercent(a);return this.valueToString(l,a.suffix)}},{key:"getTotal",value:function(a){var l=this.slormancerStatUpdaterService.getTotal(a);return this.valueToString(l,a.suffix)}},{key:"hasFlatValues",value:function(a){return a.values.flat.filter(function(l){return!l.extra}).length>0||a.values.max.filter(function(l){return!l.extra}).length>0}},{key:"hasFlatExtraValues",value:function(a){return a.values.flat.filter(function(l){return l.extra}).length>0||a.values.max.filter(function(l){return l.extra}).length>0}},{key:"hasPercentValues",value:function(a){return a.values.percent.length>0||a.values.maxPercent.length>0}},{key:"hasMultiplierValues",value:function(a){return a.values.multiplier.length>0||a.values.maxMultiplier.length>0}},{key:"showFormula",value:function(a){return(a.values.flat.filter(function(p){return!p.extra}).length>0||a.values.max.filter(function(p){return!p.extra}).length>0?1:0)+(a.values.percent.length>0||a.values.maxPercent.length>0?1:0)+(a.values.multiplier.length>0||a.values.maxMultiplier.length>0?1:0)+(a.values.flat.filter(function(p){return p.extra}).length>0||a.values.max.filter(function(p){return p.extra}).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(a.stat)?1:0)>=2}},{key:"totalHasMinMax",value:function(a){return"number"!=typeof a.total}},{key:"getMinFormula",value:function(a){var l=this.slormancerStatUpdaterService.getTotal(a),n=this.slormancerStatUpdaterService.getTotalFlat(a),o=this.slormancerStatUpdaterService.getTotalPercent(a),r=a.values.multiplier.map(function(g){return g.value}),s=this.slormancerStatUpdaterService.getTotalFlatExtra(a);n="number"==typeof n?n:n.min,o="number"==typeof o?o:o.min,s="number"==typeof s?s:s.min;var p=(0,h.NM)("number"==typeof l?l:l.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(a.stat)?p+="(1 - "+[n,o].concat((0,P.Z)(r)).filter(function(g){return 0!==g}).map(function(g){return Math.max(0,100-g)/100}).join(" * ")+") * 100":(p+=this.valueToString(n,a.suffix)+[o].concat((0,P.Z)(r)).filter(function(g){return 0!==g}).map(function(g){return" * "+(g+100)/100}).join(""),0!==s&&(p+=" + "+s)),p}},{key:"getMaxFormula",value:function(a){var l=this.slormancerStatUpdaterService.getTotal(a),n=this.slormancerStatUpdaterService.getTotalFlat(a),o=this.slormancerStatUpdaterService.getTotalPercent(a),r=this.slormancerStatUpdaterService.getTotalFlatExtra(a),s=a.values.multiplier.map(function(g){return g.value});n="number"==typeof n?n:n.max,o="number"==typeof o?o:o.max,r="number"==typeof r?r:r.max;var p=(0,h.NM)("number"==typeof l?l:l.max,5)+" = ";return p+=this.valueToString(n,a.suffix)+[o].concat((0,P.Z)(s)).filter(function(g){return 0!==g}).map(function(g){return" * "+(g+100)/100}).join(""),0!==r&&(p+=" + "+r),p}}]),c}();return i.\u0275fac=function(t){return new(t||i)(e.Y36(et.n),e.Y36(Kn.C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(t,a){1&t&&e.YNc(0,Lt,17,9,"div",0),2&t&&e.Q6J("ngIf",null!==a.mergedStat)},directives:[v.O5,v.sg],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),i}();function Ft(i,c){if(1&i){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"app-main-stats",2),e.NdJ("selected",function(n){return e.CHM(t),e.oxw().selectMergedStat(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"mat-card"),e.TgZ(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA(),e.qZA(),e.qZA()}if(2&i){var a=e.oxw();e.xp6(3),e.Q6J("stats",a.stats),e.xp6(3),e.Q6J("mergedStat",a.selectedMergedStat)}}var Qt=[{path:"",component:Ce,children:[{path:"inventory",component:Ln},{path:"skills",component:zn},{path:"ancestral-legacies",component:qe},{path:"attributes",component:Le},{path:"stats",component:function(){var i=function(c){(0,S.Z)(a,c);var t=(0,M.Z)(a);function a(l){var n;return(0,_.Z)(this,a),(n=t.call(this)).plannerService=l,n.stats=null,n.selectedMergedStat=null,n}return(0,f.Z)(a,[{key:"ngOnInit",value:function(){var n=this;this.plannerService.characterChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.stats=null===o?null:o.stats})}},{key:"selectMergedStat",value:function(n){this.selectedMergedStat=n}}]),a}(Z.B);return i.\u0275fac=function(t){return new(t||i)(e.Y36(T.q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(t,a){1&t&&e.YNc(0,Ft,7,2,"main",0),2&t&&e.Q6J("ngIf",null!==a.stats)},directives:[v.O5,k.a8,k.dn,ee.w,Jt],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),i}()},{path:"config",component:xn},{path:"compare",component:ze},{path:"calcs",component:Re},{path:"**",redirectTo:"inventory"}]}],Ht=function(){var i=(0,f.Z)(function c(){(0,_.Z)(this,c)});return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[A.Bz.forChild(Qt)],A.Bz]}),i}(),Yt=function(){var i=(0,f.Z)(function c(){(0,_.Z)(this,c)});return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[v.ez,ae.m,Ht,d.u5]]}),i}()}}]);