"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[245],{1245:function(ca,ne,d){d.r(ne),d.d(ne,{BuildModule:function(){return la}});var v=d(3144),h=d(5671),_=d(9808),ge=d(2271),L=d(1083),Z=d(136),O=d(7777),x=d(2722),T=d(6446),ae=d(7469),e=d(5542),U=d(3874),E=d(3251),$=d(2638),X=d(7762),m=d(3075),W=d(2340),y=d(8966),me=d(3417),fe=function(){var a=function(){function l(t){(0,h.Z)(this,l),this.dialog=t}return(0,v.Z)(l,[{key:"created",value:function(){console.log("CreateBuildModalComponent created"),this.dialog.close()}}]),l}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-modal"]],decls:2,vars:0,consts:[[3,"created"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-dialog-content"),e.TgZ(1,"app-create-build",0),e.NdJ("created",function(){return i.created()}),e.qZA(),e.qZA())},directives:[y.xY,me.b],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;grid-gap:20px;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a}(),I=d(7423),_e=function(){var a=(0,v.Z)(function l(t){(0,h.Z)(this,l),this.name=t.name});return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-build-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a build"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions"),e.TgZ(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" You're about to delete the build ",i.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[y.uh,y.xY,y.H8,I.lW,y.ZT],styles:[""]}),a}(),S=d(7322),Y=d(7531);function ve(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Build name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A build name is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions"),e.TgZ(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Submit"),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Oqu(i.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var he=function(){var a=function(){function l(t,i){(0,h.Z)(this,l),this.dialog=t,this.title=i.title,this.form=new m.cw({name:new m.NI(i.name,m.kI.required)})}return(0,v.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),l}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.so),e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-build-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,i){1&t&&e.YNc(0,ve,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==i.form)},directives:[_.O5,m._Y,m.JL,m.sg,y.uh,y.xY,S.KE,S.hX,Y.Nt,m.Fj,m.JJ,m.u,S.TO,y.H8,I.lW,y.ZT],styles:[""]}),a}();function ye(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions"),e.TgZ(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Submit"),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Oqu(i.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var H=function(){var a=function(){function l(t,i){(0,h.Z)(this,l),this.dialog=t,this.title=i.title,this.form=new m.cw({name:new m.NI(i.name,m.kI.required)})}return(0,v.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),l}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.so),e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,i){1&t&&e.YNc(0,ye,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==i.form)},directives:[_.O5,m._Y,m.JL,m.sg,y.uh,y.xY,S.KE,S.hX,Y.Nt,m.Fj,m.JJ,m.u,S.TO,y.H8,I.lW,y.ZT],styles:[""]}),a}(),P=d(311),ie=d(7355),be=d(7757),oe=d.n(be);var xe=function(){var a=function(){function l(){(0,h.Z)(this,l)}return(0,v.Z)(l,[{key:"copyToClipboard",value:function(i){var r=null;try{return(r=document.createElement("textarea")).style.position="fixed",r.style.left="0",r.style.top="0",r.style.opacity="0",r.value=i,document.body.appendChild(r),r.focus(),r.select(),document.execCommand("copy"),document.body.removeChild(r),!0}catch(n){null!==r&&document.body.contains(r)&&document.body.removeChild(r)}return!1}},{key:"getClipboardText",value:function(){return function(a,l,t,i){return new(t||(t=Promise))(function(n,o){function c(p){try{u(i.next(p))}catch(b){o(b)}}function s(p){try{u(i.throw(p))}catch(b){o(b)}}function u(p){p.done?n(p.value):function(n){return n instanceof t?n:new t(function(o){o(n)})}(p.value).then(c,s)}u((i=i.apply(a,l||[])).next())})}(this,void 0,void 0,oe().mark(function i(){var r;return oe().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=null,!navigator.clipboard){o.next=10;break}return o.prev=2,o.next=5,navigator.clipboard.readText();case 5:r=o.sent,o.next=10;break;case 8:o.prev=8,o.t0=o.catch(2);case 10:return o.abrupt("return",r);case 11:case"end":return o.stop()}},i,null,[[2,8]])}))}}]),l}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),Me=d(8271),f=d(2107),K=d(8223),Ze=function(){var a=function(){function l(){(0,h.Z)(this,l)}return(0,v.Z)(l,[{key:"downloadFile",value:function(i,r){var n=document.createElement("a"),o=new Blob([i],{type:"text/plain"}),c=window.URL.createObjectURL(o);n.href=c,n.download=r,n.click(),window.URL.revokeObjectURL(c),n.remove()}}]),l}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),N=d(4102),D=d(7238),Oe=d(2846),F=d(508);function Te(a,l){if(1&a&&(e.TgZ(0,"mat-select-trigger"),e._UZ(1,"img",21),e._uU(2),e.qZA()),2&a){var t=e.oxw();e.xp6(1),e.MGl("src","assets/img/character/icon/",t.buildControl.value.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.buildControl.value.name," ")}}function Pe(a,l){if(1&a&&(e.TgZ(0,"mat-option",22),e._UZ(1,"img",21),e._uU(2),e.qZA()),2&a){var t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.name," ")}}var Ae=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n,o,c,s,u,p,b){var g;return(0,h.Z)(this,i),(g=t.call(this)).messageService=r,g.downloadService=n,g.clipboardService=o,g.importExportService=c,g.buildStorageService=s,g.buildService=u,g.router=p,g.dialog=b,g.VERSION=W.N.version,g.GITHUB_LINK=W.N.githublink,g.GAME_LINK=W.N.gameLink,g.sidenav=null,g.busy=!1,g.buildControl=new m.NI(g.buildStorageService.getBuildPreview()),g.buildControl.valueChanges.pipe((0,x.R)(g.unsubscribe)).subscribe(function(A){return g.buildStorageService.loadBuild(A)}),g.buildStorageService.buildChanged.pipe((0,x.R)(g.unsubscribe)).subscribe(function(){g.buildControl.setValue(g.buildStorageService.getBuildPreview(),{emitEvent:!1})}),g}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"closeSideNav",value:function(){null!==this.sidenav&&this.sidenav.close()}},{key:"getBuilds",value:function(){return this.buildStorageService.getBuilds()}},{key:"getHeroClass",value:function(){var n=f.i.Warrior,o=this.buildStorageService.getBuild();return null!==o&&(n=o.heroClass),n}},{key:"import",value:function(n){var o=this,c=this.buildStorageService.getBuild();if(null!==n&&null!==c)if(null!==n.character)this.dialog.open(H,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(function(q){if(q){var Q=o.buildService.addLayer(c,q,n.character);o.buildStorageService.loadLayer(Q),o.closeSideNav()}});else if(null!==n.layer){var u=this.buildService.addLayer(c,n.layer.name,n.layer.character);this.buildStorageService.loadLayer(u),this.closeSideNav()}else if(null!==n.planner){var g,p=null,b=(0,X.Z)(n.planner.layers);try{for(b.s();!(g=b.n()).done;){var A=g.value;p=this.buildService.addLayer(c,A.name,A.character)}}catch(q){b.e(q)}finally{b.f()}null!==p&&this.buildStorageService.loadLayer(p),this.closeSideNav()}}},{key:"downloadLayer",value:function(){var n=this.buildStorageService.getLayer();if(null!==n){var o=this.importExportService.exportLayer(n);this.downloadService.downloadFile(o,n.name)}}},{key:"copyLayer",value:function(){var n=this.buildStorageService.getLayer();if(null!==n){var o=this.importExportService.exportLayer(n);this.clipboardService.copyToClipboard(o)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}},{key:"downloadBuild",value:function(){var n=this.buildStorageService.getBuild();if(null!==n){var o=this.importExportService.exportBuild(n);this.downloadService.downloadFile(o,"build.sav")}}},{key:"copyBuild",value:function(){var n=this.buildStorageService.getBuild();if(null!==n){var o=this.importExportService.exportBuild(n);this.clipboardService.copyToClipboard(o)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}},{key:"copyExternalLink",value:function(){var n=this.buildStorageService.getLayer();if(null!==n){var o=this.importExportService.exportCharacterAsLink(n.character);this.clipboardService.copyToClipboard(o)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}},{key:"deleteBuild",value:function(){var n=this,o=this.buildStorageService.getBuild();null!==o&&this.dialog.open(_e,{data:{name:o.name}}).afterClosed().subscribe(function(s){s&&(n.buildStorageService.deleteBuild(),console.log(n.buildStorageService.getBuilds()),0===n.buildStorageService.getBuilds().length&&(console.log("navigate"),n.router.navigate(["/create"])))})}},{key:"editBuild",value:function(){var n=this,o=this.buildStorageService.getBuild();null!==o&&this.dialog.open(he,{data:{title:"Edit build name",name:o.name}}).afterClosed().subscribe(function(s){s&&(o.name=s,n.buildStorageService.saveBuild())})}},{key:"createNewBuild",value:function(){this.dialog.open(fe)}},{key:"trackbyBuildPreview",value:function(n,o){return console.log("trackbyBuildPreview : ",n,o),o.storageKey}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(K.e),e.Y36(Ze),e.Y36(xe),e.Y36(Me.s),e.Y36(P.x),e.Y36(ie.d),e.Y36(L.F0),e.Y36(y.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:59,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"build"],[1,"build-selection"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit build name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete build",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"info"],["target","blank",3,"href"],[1,"hero-icon",3,"src"],[3,"value"]],template:function(t,i){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4,"Builds"),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"mat-form-field",4),e.TgZ(7,"mat-label"),e._uU(8,"Current build"),e.qZA(),e.TgZ(9,"mat-select",5),e.YNc(10,Te,3,2,"mat-select-trigger",6),e.YNc(11,Pe,3,3,"mat-option",7),e.qZA(),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return i.editBuild()}),e.TgZ(13,"mat-icon"),e._uU(14,"edit"),e.qZA(),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return i.deleteBuild()}),e.TgZ(16,"mat-icon"),e._uU(17,"delete"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){return i.createNewBuild()}),e._uU(19,"New build"),e.qZA(),e.qZA(),e._UZ(20,"hr"),e.TgZ(21,"div",11),e.TgZ(22,"h3"),e._uU(23,"Import"),e.qZA(),e.TgZ(24,"app-import-data",12),e.NdJ("import",function(n){return i.import(n)}),e.qZA(),e.qZA(),e._UZ(25,"hr"),e.TgZ(26,"div",13),e.TgZ(27,"h3"),e._uU(28,"Export"),e.qZA(),e.TgZ(29,"div",14),e.TgZ(30,"p"),e._uU(31,"Current layer"),e.qZA(),e.TgZ(32,"div",15),e.TgZ(33,"button",16),e.NdJ("click",function(){return!i.busy&&i.downloadLayer()}),e.TgZ(34,"mat-icon"),e._uU(35,"file_download"),e.qZA(),e.qZA(),e.TgZ(36,"button",17),e.NdJ("click",function(){return!i.busy&&i.copyLayer()}),e.TgZ(37,"mat-icon"),e._uU(38,"content_copy"),e.qZA(),e.qZA(),e.TgZ(39,"button",18),e.NdJ("click",function(){return!i.busy&&i.copyExternalLink()}),e.TgZ(40,"mat-icon"),e._uU(41,"share"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",14),e.TgZ(43,"p"),e._uU(44,"Current build"),e.qZA(),e.TgZ(45,"div",15),e.TgZ(46,"button",16),e.NdJ("click",function(){return!i.busy&&i.downloadBuild()}),e.TgZ(47,"mat-icon"),e._uU(48,"file_download"),e.qZA(),e.qZA(),e.TgZ(49,"button",17),e.NdJ("click",function(){return!i.busy&&i.copyBuild()}),e.TgZ(50,"mat-icon"),e._uU(51,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",19),e._uU(53),e.TgZ(54,"a",20),e._uU(55,"Github"),e.qZA(),e._uU(56," - "),e.TgZ(57,"a",20),e._uU(58,"The Slormancer"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formControl",i.buildControl),e.xp6(1),e.Q6J("ngIf",null!==i.buildControl.value),e.xp6(1),e.Q6J("ngForOf",i.getBuilds()),e.xp6(13),e.Q6J("heroClass",i.getHeroClass()),e.xp6(29),e.hij(" Slorm Planner ",i.VERSION," - "),e.xp6(1),e.Q6J("href",i.GITHUB_LINK,e.LSH),e.xp6(3),e.Q6J("href",i.GAME_LINK,e.LSH))},directives:[S.KE,S.hX,N.gD,m.JJ,m.oH,_.O5,_.sg,I.lW,D.gM,U.Hw,Oe.M,N.$L,F.ey],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:16px;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:16px;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),a}(),we=function(){var a=(0,v.Z)(function l(t){(0,h.Z)(this,l),this.name=t.name});return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-layer-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions"),e.TgZ(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" You're about to delete layer ",i.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[y.uh,y.xY,y.H8,I.lW,y.ZT],styles:[""]}),a}(),qe=d(2424),k=d(9224);function Le(a,l){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){var t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ue(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeSearch()}),e._uU(1,"close"),e.qZA()}}var Ie=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n,o,c){var s;return(0,h.Z)(this,i),(s=t.call(this)).buildStorageService=r,s.buildService=n,s.searchService=o,s.dialog=c,s.searchControl=new m.NI(""),s.layerControl=new m.NI(null),s.layerOptions=[],s}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.layerControl.setValue(o,{emitEvent:!1})}),this.buildStorageService.buildChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.layerOptions=null===o?[]:o.layers.map(function(c){return{label:c.name,value:c}})}),this.searchService.searchChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.searchControl.setValue(o,{emitEvent:!1})}),this.layerControl.setValue(this.buildStorageService.getLayer(),{emitEvent:!1}),this.layerControl.valueChanges.subscribe(function(o){return n.buildStorageService.loadLayer(o)}),this.searchControl.valueChanges.subscribe(function(o){return n.searchService.setSearch(o)})}},{key:"hasSearch",value:function(){return this.searchService.hasSearch()}},{key:"removeSearch",value:function(){this.searchService.setSearch(null)}},{key:"editLayer",value:function(){var n=this,o=this.buildStorageService.getLayer();null!==o&&this.dialog.open(H,{data:{title:"Edit layer name",name:o.name}}).afterClosed().subscribe(function(s){s&&(o.name=s,n.buildStorageService.saveLayer())})}},{key:"addLayer",value:function(){var n=this;this.dialog.open(H,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(c){var s=n.buildStorageService.getBuild();if(c&&null!==s){var u=n.buildService.addLayer(s,c);n.buildStorageService.loadLayer(u)}})}},{key:"duplicateLayer",value:function(){var n=this;this.dialog.open(H,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(c){var s=n.buildStorageService.getBuild(),u=n.buildStorageService.getLayer();if(c&&null!==s&&null!==u){var p=n.buildService.duplicateLayer(s,u,c);n.buildStorageService.loadLayer(p)}})}},{key:"removeLayer",value:function(){var n=this,o=this.buildStorageService.getLayer(),c=this.buildStorageService.getBuild();null!==o&&this.dialog.open(we,{data:{name:o.name}}).afterClosed().subscribe(function(u){u&&null!==c&&(n.buildService.deleteLayer(c,o),n.buildStorageService.saveBuild())})}},{key:"hasRoomForMoreLayer",value:function(){return this.buildStorageService.hasRoomForAnotherLayer()}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(ie.d),e.Y36(qe.o),e.Y36(y.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Duplicate this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"div",1),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,Le,2,2,"mat-option",4),e.qZA(),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA(),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return i.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA(),e.qZA(),e.TgZ(15,"button",7),e.NdJ("click",function(){return i.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.qZA(),e.TgZ(18,"button",8),e.NdJ("click",function(){return i.duplicateLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"mat-form-field",2),e.TgZ(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Ue,2,0,"mat-icon",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formControl",i.layerControl),e.xp6(1),e.Q6J("ngForOf",i.layerOptions),e.xp6(4),e.Q6J("disabled",i.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!i.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!i.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",i.searchControl),e.xp6(1),e.Q6J("ngIf",i.hasSearch()))},directives:[k.a8,k.dn,S.KE,S.hX,N.gD,m.JJ,m.oH,_.sg,I.lW,D.gM,U.Hw,Y.Nt,m.Fj,_.O5,F.ey,S.R9],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:8px;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),a}(),Ne=["dragImage"],Je=["dragBackground"];function Ee(a,l){if(1&a&&(e.TgZ(0,"a",11,12),e.TgZ(2,"span",13),e._uU(3),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.MAs(1);e.Q6J("routerLink",t.route)("active",i.isActive),e.xp6(3),e.Oqu(t.name)}}var Fe=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r){var n;return(0,h.Z)(this,i),(n=t.call(this)).itemMoveService=r,n.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],n.isDragging=!1,n.dragImage=null,n.dragBackground=null,n.itemMoveService.draggingItem.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){n.isDragging=o;var c=n.itemMoveService.getHoldItem();null!==c&&n.dragImage&&n.dragBackground&&(n.dragImage.nativeElement.src=c.icon,n.dragBackground.nativeElement.src=c.itemIconBackground)}),n}return(0,v.Z)(i,[{key:"onMouseMove",value:function(n){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){var o=n.clientY-this.dragImage.nativeElement.height/2+"px",c=n.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=o,this.dragImage.nativeElement.style.left=c,this.dragBackground.nativeElement.style.top=o,this.dragBackground.nativeElement.style.left=c}}},{key:"onMouseUp",value:function(){this.itemMoveService.releaseHoldItem()}},{key:"onMouseContextMenu",value:function(){this.itemMoveService.releaseHoldItem()}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(ae.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build"]],viewQuery:function(t,i){var r;1&t&&(e.Gf(Ne,5),e.Gf(Je,5)),2&t&&(e.iGM(r=e.CRH())&&(i.dragImage=r.first),e.iGM(r=e.CRH())&&(i.dragBackground=r.first))},hostBindings:function(t,i){1&t&&e.NdJ("mousemove",function(n){return i.onMouseMove(n)})("mouseup",function(){return i.onMouseUp()})("contextmenu",function(){return i.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(t,i){if(1&t){var r=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-icon",2),e.NdJ("click",function(){return e.CHM(r),e.MAs(8).toggle()}),e._uU(3,"menu"),e.qZA(),e.qZA(),e.TgZ(4,"nav",3),e.YNc(5,Ee,4,3,"a",4),e.qZA(),e.qZA(),e.TgZ(6,"mat-sidenav-container"),e.TgZ(7,"mat-sidenav",null,5),e._UZ(9,"app-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header"),e._UZ(12,"router-outlet"),e._UZ(13,"img",7,8),e._UZ(15,"img",9,10),e.qZA(),e.qZA()}if(2&t){var n=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",i.ROUTES),e.xp6(4),e.Q6J("sidenav",n),e.xp6(4),e.ekj("dragging",i.isDragging),e.xp6(2),e.ekj("dragging",i.isDragging)}},directives:[U.Hw,E.BU,_.sg,$.TM,$.JX,Ae,$.Rh,Ie,L.lC,L.yS,E.Nj,L.Od],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),a}(),ee=d(4373),Be=d(9184),C=d(4713),M=d(5581),w=d(4902),R=d(7201),se=d(7438),Qe=d(7795),Ye=d(9713);function He(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(c){return e.CHM(t),e.oxw(2).selectAncestralLegacy(c)}),e._uU(1,"> "),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw().$implicit,n=e.oxw();e.Akn(r.iconStyle),e.Q6J("ancestralLegacy",n.getAncestralLegacy(i))("equipped",n.isAncestralLegacyEquipped(i))("selected",n.isNodeSelected(i))}}function je(a,l){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"div",10),e.YNc(2,He,2,5,"app-ancestral-legacy-slot",11),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.oxw();e.Akn(t.style),e.Gre("zone absolute color-",t.color,""),e.ekj("large",t.large)("active",i.isRealmActive(t.realmId)),e.xp6(2),e.Q6J("ngForOf",t.ancestralLegacies)}}function De(a,l){1&a&&e._UZ(0,"div",13),2&a&&e.Akn(l.$implicit.style)}function Re(a,l){1&a&&e._UZ(0,"div",14),2&a&&e.Akn(l.$implicit.style)}function Ve(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){var c=e.CHM(t).$implicit;return e.oxw().toggleNode(c.nodeId)}),e._UZ(1,"div",16),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw();e.Akn(i.style),e.ekj("active",r.isNodeActive(i.nodeId))("available",r.isNodeAvailable(i.nodeId))}}var Ge=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n,o){var c;return(0,h.Z)(this,i),(c=t.call(this)).buildStorageService=r,c.slormancerDataService=n,c.slormancerCharacterModifierService=o,c.selectedAncestralLegacy=null,c.selectedAncestralLegacyChange=new e.vpe,c.BOUNDS_X={min:-200,max:200},c.BOUNDS_Y={min:-200,max:200},c.availableNodes=[],c.activeRealms=[],c.weldingShapes=[],c.lineShapes=[],c.zoneShapes=[],c.nodeShapes=[],c.character=null,c.position={x:0,y:0},c.scale=2,c.grabbed=!1,c.drawMap(),c}return(0,v.Z)(i,[{key:"onWheelUp",value:function(n){return this.scale=Math.max(1,Math.min(2,this.scale+(n.deltaY>0?-.2:.2))),!1}},{key:"onMouseDown",value:function(){this.grabbed=!0}},{key:"onMouseUp",value:function(){this.grabbed=!1}},{key:"onMouseMouve",value:function(n){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+n.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+n.movementY)))}},{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=null===o?null:o.character,n.updateMap()})}},{key:"drawMap",value:function(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,C.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,C.pb)(0,9),-72,52),this.addNodeShapes((0,C.pb)(0,9).map(function(n){return 10+2*n}),-82.8,92),this.addNodeShapes((0,C.pb)(0,9).map(function(n){return 11+2*n}),-61.2,92),this.addZoneShapes((0,C.pb)(10,19),-54,112),this.addZoneShapes((0,C.pb)(20,29),-72,150,!0),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,C.pb)(0,9).map(function(n){return 31+3*n}),-72,120),this.addNodeShapes((0,C.pb)(10,19).map(function(n){return 3*n}),-81,127),this.addNodeShapes((0,C.pb)(10,19).map(function(n){return 2+3*n}),-63,127),this.addZoneShapes((0,C.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,C.pb)(0,4).map(function(n){return 61+5*n}),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,42,45,46,49,50,53,54,57,58],-72,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181)}},{key:"updateMap",value:function(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){var n=null!==this.character?this.character.ancestralLegacies.activeNodes:[],o=se.R.filter(function(c){return void 0!==c.nodes.find(function(s){return-1!==n.indexOf(s)})});this.character.ancestralLegacies.activeNodes.length<ee.sD&&(this.availableNodes=[].concat((0,w.Z)(se.m),(0,w.Z)(o.map(function(c){return c.nodes}).flat())).filter(M.mr)),this.activeRealms=o.map(function(c){return c.realm})}}},{key:"isNodeActive",value:function(n){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(n)}},{key:"isRealmActive",value:function(n){return-1!==this.activeRealms.indexOf(n)}},{key:"isNodeAvailable",value:function(n){return-1!==this.availableNodes.indexOf(n)}},{key:"isNodeSelected",value:function(n){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===n}},{key:"isAncestralLegacyEquipped",value:function(n){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(n)}},{key:"getAncestralLegacy",value:function(n){var o=null;return null!==this.character&&(o=(0,M.lA)(this.character.ancestralLegacies.ancestralLegacies.find(function(c){return c.id==n}))),o}},{key:"toggleNode",value:function(n){if(null!==this.character){var o;o=this.isNodeActive(n)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,n):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,n),this.buildStorageService.saveLayer(),o&&this.updateMap()}return!1}},{key:"selectAncestralLegacy",value:function(n){console.log(n),this.selectedAncestralLegacyChange.emit(n)}},{key:"addLineShapes",value:function(n,o,c,s){var u,p=360/n;(u=this.lineShapes).push.apply(u,(0,w.Z)((0,C.pb)(n).map(function(b){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(o+b*p)+"deg) translateX("+c+"px)"}}})))}},{key:"addWeldinghapes",value:function(n,o,c,s){var u,p=360/n;(u=this.weldingShapes).push.apply(u,(0,w.Z)((0,C.pb)(n).map(function(b){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(o+b*p)+"deg) translateX("+c+"px)"}}})))}},{key:"addZoneShapes",value:function(n,o,c){var s,u=this,p=arguments.length>3&&void 0!==arguments[3]&&arguments[3],b=360/n.length;(s=this.zoneShapes).push.apply(s,(0,w.Z)(n.map(function(g,A){var q=u.slormancerDataService.getAncestralRealmColor(g),Q=u.slormancerDataService.getAncestralLegacyIdsFromRealm(g),pe=o+A*b;return{style:{transform:"translate(-50%, -50%) rotate("+pe+"deg) translateX("+c+"px)"},iconStyle:{transform:"rotate("+-pe+"deg)"},large:p,realmId:g,ancestralLegacies:Q,color:q}})))}},{key:"addNodeShapes",value:function(n,o,c){var s,u=n.length,p=360/u;(s=this.nodeShapes).push.apply(s,(0,w.Z)((0,C.pb)(u).map(function(b){return{style:{transform:"translate(-50%, -50%) rotate("+(o+b*p)+"deg) translateX("+c+"px)"},nodeId:(0,M.Be)(n[b],0)}})))}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(Qe.o),e.Y36(R.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(t,i){1&t&&e.NdJ("wheel",function(n){return i.onWheelUp(n)})("mousedown",function(){return i.onMouseDown()})("mouseup",function(){return i.onMouseUp()})("mouseleave",function(){return i.onMouseUp()})("mousemove",function(n){return i.onMouseMouve(n)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","large","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,je,3,10,"div",6),e.YNc(7,De,1,2,"div",7),e.YNc(8,Re,1,2,"div",8),e.YNc(9,Ve,2,6,"div",9),e.qZA(),e.qZA()),2&t&&(e.ekj("grabbed",i.grabbed),e.xp6(1),e.Udp("top",i.position.y+"px")("left",i.position.x+"px")("transform","scale("+i.scale+")"),e.xp6(5),e.Q6J("ngForOf",i.zoneShapes),e.xp6(1),e.Q6J("ngForOf",i.lineShapes),e.xp6(1),e.Q6J("ngForOf",i.weldingShapes),e.xp6(1),e.Q6J("ngForOf",i.nodeShapes))},directives:[_.sg,Ye.y],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid #d5ad48;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;grid-gap:4px;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),a}(),$e=d(9065);function Xe(a,l){if(1&a&&e._UZ(0,"div",9),2&a){var t=l.$implicit,i=e.oxw();e.ekj("unlocked",i.isPointUnlock(t))}}var We=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n,o){var c;return(0,h.Z)(this,i),(c=t.call(this)).buildStorageService=r,c.slormancerAncestralLegacyService=n,c.messageService=o,c.ANCESTRAL_LEGACY_POINTS=(0,C.pb)(ee.JY),c.character=null,c.selectedAncestralLegacy=null,c}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=null===o?null:o.character,n.selectDefaultAncestralLegacy()})}},{key:"selectDefaultAncestralLegacy",value:function(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){var n=(0,M.lA)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===n?null:(0,M.lA)(this.character.ancestralLegacies.ancestralLegacies[n])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,M.lA)(this.character.ancestralLegacies.ancestralLegacies[0]))}}},{key:"isPointUnlock",value:function(n){return n<ee.sD}},{key:"optimizeAncestralLegacies",value:function(){if(null!==this.character){var o,n=(0,X.Z)(this.character.ancestralLegacies.ancestralLegacies);try{for(n.s();!(o=n.n()).done;){var c=o.value;c.baseRank=c.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(c,c.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(c)}}catch(s){n.e(s)}finally{n.f()}this.buildStorageService.saveLayer(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(Be.O),e.Y36(K.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",0),e.TgZ(3,"div",1),e.YNc(4,Xe,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return i.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"div",5),e.TgZ(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(n){return i.selectedAncestralLegacy=n}),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",i.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",i.selectedAncestralLegacy))},directives:[k.a8,k.dn,_.sg,U.Hw,D.gM,Ge,$e.q],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:20px;gap:20px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:8px;gap:8px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;grid-gap:20px;gap:20px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;flex-grow:1}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:500px}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),a}(),V=d(7399),ze=d(3729);function Ke(a,l){if(1&a&&e._UZ(0,"app-attribute-line",2),2&a){var t=l.$implicit,i=e.oxw(2);e.Q6J("iconShift",t%2==0)("attribute",i.attributes.allocated[t])("remainingPoints",i.attributes.remainingPoints)}}function et(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Ke,1,3,"app-attribute-line",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(3),e.AsE("",t.attributes.remainingPoints,"/",t.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}var tt=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=r,n.ALL_ATTRIBUTES=V.A,n.attributes=null,n}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.attributes=null===o?null:o.character.attributes})}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(t,i){1&t&&e.YNc(0,et,5,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==i.attributes)},directives:[_.O5,k.a8,k.dn,_.sg,ze.g],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),a}(),nt=function(){var a=(0,v.Z)(function l(){(0,h.Z)(this,l),this.character=null});return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,i){1&t&&e._uU(0,"TODO")},styles:[""]}),a}(),at=function(){var a=(0,v.Z)(function l(){(0,h.Z)(this,l),this.character=null});return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,i){1&t&&e._uU(0,"TODO TURRET")},styles:[""]}),a}();function it(a,l){if(1&a&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&a){var t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function ot(a,l){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function rt(a,l){if(1&a&&e._UZ(0,"app-defense-calc",6),2&a){var t=e.oxw(2);e.Q6J("character",t.character)}}function lt(a,l){if(1&a&&e._UZ(0,"app-turret-syndrome-calc",6),2&a){var t=e.oxw(2);e.Q6J("character",t.character)}}function ct(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"mat-form-field",1),e.TgZ(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().currentCalc=n}),e.YNc(7,it,2,2,"mat-option",3),e.qZA(),e.qZA(),e.YNc(8,ot,2,0,"p",0),e.YNc(9,rt,1,1,"app-defense-calc",4),e.YNc(10,lt,1,1,"app-turret-syndrome-calc",4),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(6),e.Q6J("ngModel",i.currentCalc),e.xp6(1),e.Q6J("ngForOf",i.options),e.xp6(1),e.Q6J("ngIf",null===i.currentCalc),e.xp6(1),e.Q6J("ngIf",i.currentCalc===i.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",i.currentCalc===i.CalcPage.TurretSyndrome)}}var J=function(){return(a=J||(J={}))[a.Defense=0]="Defense",a[a.TurretSyndrome=1]="TurretSyndrome",J;var a}(),st=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=r,n.CalcPage=J,n.character=null,n.options=[{value:J.Defense,label:"Defenses"},{value:J.TurretSyndrome,label:"Turret"}],n.currentCalc=null,n.buildStorageService.layerChanged.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){return n.character=null===o?null:o.character}),n}return(0,v.Z)(i)}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(t,i){1&t&&e.YNc(0,ct,11,5,"main",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[_.O5,k.a8,k.dn,S.KE,S.hX,N.gD,m.JJ,m.On,_.sg,F.ey,nt,at],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),a}(),ut=d(9635),ue=d(4440),dt=d(4425);function pt(a,l){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function gt(a,l){if(1&a&&e._UZ(0,"app-compare-view",9),2&a){var t=e.oxw(2);e.Q6J("differences",t.differences)}}function mt(a,l){if(1&a&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&a){var t=l.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ft(a,l){if(1&a&&e._UZ(0,"app-main-stats",2),2&a){var t=e.oxw(2);e.Q6J("stats",t.layerControl.value.character.stats)}}function _t(a,l){if(1&a&&(e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA(),e.qZA(),e.TgZ(6,"mat-card",3),e.TgZ(7,"mat-card-content"),e.YNc(8,pt,2,0,"p",0),e.YNc(9,gt,1,1,"app-compare-view",4),e.qZA(),e.qZA(),e.TgZ(10,"mat-card",1),e.TgZ(11,"mat-card-content"),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,mt,2,2,"mat-option",7),e.qZA(),e.qZA(),e.YNc(17,ft,1,1,"app-main-stats",8),e.qZA(),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(4),e.Oqu(t.currentLayer.name),e.xp6(1),e.Q6J("stats",t.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===t.differences),e.xp6(1),e.Q6J("ngIf",null!==t.differences),e.xp6(6),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layers),e.xp6(1),e.Q6J("ngIf",t.layerControl.value)}}var vt=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n){var o;return(0,h.Z)(this,i),(o=t.call(this)).buildStorageService=r,o.slormancerCharacterComparatorService=n,o.differences=null,o.currentLayer=null,o.layers=[],o.config=null,o.layerControl=new m.NI(0),o.buildStorageService.buildChanged.pipe((0,x.R)(o.unsubscribe)).subscribe(function(c){o.layers=null===c?[]:c.layers,o.layerControl.setValue(o.layers[0])}),o.buildStorageService.layerChanged.pipe((0,x.R)(o.unsubscribe)).subscribe(function(c){if(o.currentLayer=c,null!==c){var s=o.layers.indexOf(c);-1!==s&&(o.layerControl.setValue(o.layers[0===s&&o.layers.length>1?1:0]),o.updateDifferences())}}),o.layerControl.valueChanges.subscribe(function(){return o.updateDifferences()}),o}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"updateDifferences",value:function(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(ut.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(t,i){1&t&&e.YNc(0,_t,18,7,"main",0),2&t&&e.Q6J("ngIf",null!==i.currentLayer&&i.layers.length>0)},directives:[_.O5,k.a8,k.dn,ue.w,S.KE,S.hX,N.gD,m.JJ,m.oH,_.sg,dt.$,F.ey],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}"]}),a}(),ht=d(1093),yt=d(648),te=d(2469),bt=d(7446);function Ct(a,l){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function St(a,l){if(1&a&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,Ct,2,1,"mat-icon",5),e.qZA()),2&a){var t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function kt(a,l){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){var t=l.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function xt(a,l){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function Mt(a,l){if(1&a&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,kt,2,2,"mat-option",8),e.qZA(),e.YNc(5,xt,2,1,"mat-icon",5),e.qZA()),2&a){var t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.config.values),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function Zt(a,l){if(1&a&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&a){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function Ot(a,l){if(1&a&&(e.TgZ(0,"mat-checkbox",10),e.TgZ(1,"label"),e._uU(2),e.YNc(3,Zt,2,1,"mat-icon",11),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.Q6J("formControl",t.control)("checked",t.control.value),e.xp6(2),e.hij(" ",t.config.label," "),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function Tt(a,l){if(1&a&&(e.ynx(0),e.YNc(1,St,5,3,"mat-form-field",1),e.YNc(2,Mt,6,4,"mat-form-field",1),e.YNc(3,Ot,4,4,"mat-checkbox",2),e.BQk()),2&a){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNumber(t.config)),e.xp6(1),e.Q6J("ngIf",t.isEnum(t.config)),e.xp6(1),e.Q6J("ngIf",t.isBoolean(t.config))}}var Pt=function(){var a=function(){function l(){(0,h.Z)(this,l),this.control=null,this.config=null}return(0,v.Z)(l,[{key:"isNumber",value:function(i){return"number"===i.type}},{key:"isEnum",value:function(i){return"enum"===i.type}},{key:"isBoolean",value:function(i){return"boolean"===i.type}}]),l}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(t,i){1&t&&e.YNc(0,Tt,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",null!==i.config&&null!==i.control)},directives:[_.O5,S.KE,S.hX,Y.Nt,m.wV,m.Fj,m.JJ,m.oH,U.Hw,S.R9,D.gM,N.gD,_.sg,F.ey,bt.oG],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),a}();function At(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var t=l.$implicit,i=e.oxw(3);e.Q6J("control",i.getControl(t))("config",t)}}function wt(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,At,1,2,"app-config-entry",3),e.BQk()),2&a){var t=l.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function qt(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,wt,4,2,"ng-container",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.GENERAL_CONFIG_GROUPS)}}function Lt(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var t=l.$implicit,i=e.oxw(4);e.Q6J("control",i.getControl(t))("config",t)}}function Ut(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Lt,1,2,"app-config-entry",3),e.BQk()),2&a){var t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function It(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ut,4,2,"ng-container",0),e.BQk()),2&a){var t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isGroupValid(t))}}function Nt(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,It,2,1,"ng-container",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.CLASS_CONFIG_GROUPS)}}function Jt(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var t=l.$implicit,i=e.oxw(4);e.Q6J("control",i.getControl(t))("config",t)}}function Et(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Jt,1,2,"app-config-entry",3),e.BQk()),2&a){var t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function Ft(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Et,4,2,"ng-container",0),e.BQk()),2&a){var t=l.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isGroupValid(t))}}function Bt(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,Ft,2,1,"ng-container",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.EQUIPMENT_CONFIG_GROUPS)}}var Qt=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=r,n.EXTRA_VALIDATORS={percent_missing_health:[m.kI.max(100)],percent_missing_mana:[m.kI.max(100)],enemy_percent_missing_health:[m.kI.max(100)],block_stacks:[m.kI.max(100)],nimble_champion_stacks:[m.kI.max(200)],nimble_chaserenitympion_stacks:[m.kI.max(12)]},n.GENERAL_CONFIG_GROUPS=[{title:"General",condition:function(){return!0},configurations:[{type:"number",key:"all_characters_level",label:"Sum of all your character's level"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"boolean",key:"idle",label:"Are you idle ?"}]},{title:"When in Combat",condition:function(){return!0},configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Actives inner fire"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"}]},{title:"Enemy",condition:function(){return!0},configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"}]}],n.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:function(c){return 2===c.reaper.id},configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:function(c){return 105===c.reaper.id},configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:function(c){return 73===c.reaper.id},configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:function(c){return 74===c.reaper.id},configurations:[{type:"number",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:function(c){return 75===c.reaper.id},configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:function(c){return 79===c.reaper.id||80===c.reaper.id},configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:function(c){return 82===c.reaper.id||83===c.reaper.id},configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:function(c){return 111===c.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:function(c){return 112===c.reaper.id},configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:function(c){return 113===c.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Gold Armor",condition:function(c){return n.hasActivable(c,0)},configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:function(c){return n.hasActivable(c,3)},configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:function(c){return n.hasActivable(c,6)},configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Willpower",condition:function(c){return n.isAttributeAllocated(c,V.a.Willpower)},configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:function(c){return n.isAttributeAllocated(c,V.a.Dexterity)},configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:function(c){return n.isAttributeAllocated(c,V.a.Bravery)},configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:function(c){return n.isAncestralLegacyEquipped(c,80)},configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:function(c){return n.isAncestralLegacyEquipped(c,85)},configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:function(c){return n.isAncestralLegacyEquipped(c,33)},configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:function(c){return n.isAncestralLegacyEquipped(c,106)},configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:function(c){return n.isAncestralLegacyEquipped(c,82)},configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Faith of the Ancients",condition:function(c){return n.hasLegendaryEffect(c,31)},configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:function(c){return n.hasLegendaryEffect(c,29)},configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:function(c){return n.hasLegendaryEffect(c,75)},configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:function(c){return n.hasLegendaryEffect(c,77)},configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:function(c){return n.hasLegendaryEffect(c,26)},configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:function(c){return n.hasLegendaryEffect(c,63)},configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:function(c){return n.hasLegendaryEffect(c,16)},configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:function(c){return n.hasLegendaryEffect(c,16)},configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:function(c){return n.hasLegendaryEffect(c,76)},configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"A Path to the First",condition:function(c){return n.hasLegendaryEffect(c,32)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:function(c){return n.hasLegendaryEffect(c,33)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:function(c){return n.hasLegendaryEffect(c,74)},configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]}],n.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:function(c){return c.heroClass===f.i.Warrior},configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,0)},configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,2)},configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,3)},configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,4)},configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,5)},configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,6)},configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,7)},configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,9)},configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:function(c){return n.isSkillEquipped(c,f.i.Warrior,10)},configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:function(c){return c.heroClass===f.i.Huntress},configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,0)},configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,1)},configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,2)},configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,3)},configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,4)},configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,5)},configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,7)},configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,8)},configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:function(c){return n.isSkillEquipped(c,f.i.Huntress,9)},configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:function(c){return c.heroClass===f.i.Mage},configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,0)},configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,2)},configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,4)},configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,6)},configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,7)},configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,8)},configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:te.H.Arcanic,label:"Arcanic"},{value:te.H.Temporal,label:"Temporal"},{value:te.H.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:function(c){return n.isSkillEquipped(c,f.i.Mage,9)},configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],n.config=null,n}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.config=this.generateConfigurationForm();var o=this.buildStorageService.getBuild();console.log(null===o?null:o.configuration),this.config.valueChanges.subscribe(function(){return n.updateConfiguration()})}},{key:"generateConfigurationForm",value:function(){for(var n={},o=this.buildStorageService.getBuild(),s=0,u=Object.entries(null!==o?o.configuration:ht.g);s<u.length;s++){var p=u[s],b=[m.kI.required].concat((0,w.Z)((0,M.Be)(this.EXTRA_VALIDATORS[p[0]],[])));"number"===p[1]&&b.push(m.kI.min(0)),n[p[0]]=new m.NI(p[1],b)}return new m.cw(n)}},{key:"updateConfiguration",value:function(){var n=this.buildStorageService.getBuild();null!==this.config&&null!==n&&this.config.valid&&(n.configuration=this.config.value,this.buildStorageService.saveBuild())}},{key:"getControl",value:function(n){return null===this.config?null:this.config.get(n.key)}},{key:"isGroupValid",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&n.condition(o.character)}},{key:"hasActivable",value:function(n,o){return[n.activable1,n.activable2,n.activable3,n.activable4].filter(M.BX).some(function(c){return!("element"in c)&&c.id===o})}},{key:"isSkillEquipped",value:function(n,o,c){return n.heroClass===o&&[n.primarySkill,n.secondarySkill,n.supportSkill].filter(M.BX).some(function(s){return s.id===c})}},{key:"isAttributeAllocated",value:function(n,o){var c=n.attributes.allocated[o];return c.rank>0||c.bonusRank>0}},{key:"isAncestralLegacyEquipped",value:function(n,o){return n.ancestralLegacies.activeAncestralLegacies.includes(o)}},{key:"hasLegendaryEffect",value:function(n,o){return yt.PL.map(function(c){var s;return null===(s=n.gear[c])||void 0===s?void 0:s.legendaryEffect}).filter(M.BX).some(function(c){return c.id===o})}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(t,i){1&t&&(e.TgZ(0,"main"),e.YNc(1,qt,3,1,"mat-card",0),e.YNc(2,Nt,3,1,"mat-card",0),e.YNc(3,Bt,3,1,"mat-card",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==i.config),e.xp6(1),e.Q6J("ngIf",null!==i.config),e.xp6(1),e.Q6J("ngIf",null!==i.config))},directives:[_.O5,k.a8,k.dn,_.sg,Pt],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px;padding:8px 12px}"]}),a}(),Yt=d(7614),Ht=d(916),jt=d(4591),Dt=d(3662),Rt=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n){var o;return(0,h.Z)(this,i),(o=t.call(this)).buildStorageService=r,o.slormancerCharacterModifierService=n,o.character=null,o}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=null!==o&&null!==o.character?o.character:null})}},{key:"updatePrimarySkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,n),this.buildStorageService.saveLayer())}},{key:"updateSecondarySkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,n),this.buildStorageService.saveLayer())}},{key:"updateSupportSkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,n),this.buildStorageService.saveLayer())}},{key:"updateActivable1",value:function(n){null!==this.character&&this.character.activable1!==n&&(null!==n&&(this.character.activable2===n?this.character.activable2=this.character.activable1:this.character.activable3===n?this.character.activable3=this.character.activable1:this.character.activable4===n&&(this.character.activable4=this.character.activable1)),this.character.activable1=n,this.buildStorageService.saveLayer())}},{key:"updateActivable2",value:function(n){null!==this.character&&this.character.activable2!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable2:this.character.activable3===n?this.character.activable3=this.character.activable2:this.character.activable4===n&&(this.character.activable4=this.character.activable2)),this.character.activable2=n,this.buildStorageService.saveLayer())}},{key:"updateActivable3",value:function(n){null!==this.character&&this.character.activable3!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable3:this.character.activable2===n?this.character.activable2=this.character.activable3:this.character.activable4===n&&(this.character.activable4=this.character.activable3)),this.character.activable3=n,this.buildStorageService.saveLayer())}},{key:"updateActivable4",value:function(n){null!==this.character&&this.character.activable4!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable4:this.character.activable3===n?this.character.activable3=this.character.activable4:this.character.activable2===n&&(this.character.activable2=this.character.activable4)),this.character.activable4=n,this.buildStorageService.saveLayer())}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(R.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-bar"]],features:[e.qOj],decls:15,vars:8,consts:[[1,"skill-bar"],[1,"skill-slot-border"],[3,"skill","changed"],[3,"skill","support","changed"],[3,"activable","changed"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"app-skill-slot",2),e.NdJ("changed",function(n){return i.updatePrimarySkill(n)}),e.qZA(),e.qZA(),e.TgZ(3,"div",1),e.TgZ(4,"app-skill-slot",2),e.NdJ("changed",function(n){return i.updateSecondarySkill(n)}),e.qZA(),e.qZA(),e.TgZ(5,"div",1),e.TgZ(6,"app-skill-slot",3),e.NdJ("changed",function(n){return i.updateSupportSkill(n)}),e.qZA(),e.qZA(),e.TgZ(7,"div",1),e.TgZ(8,"app-activable-slot",4),e.NdJ("changed",function(n){return i.updateActivable1(n)}),e.qZA(),e.qZA(),e.TgZ(9,"div",1),e.TgZ(10,"app-activable-slot",4),e.NdJ("changed",function(n){return i.updateActivable2(n)}),e.qZA(),e.qZA(),e.TgZ(11,"div",1),e.TgZ(12,"app-activable-slot",4),e.NdJ("changed",function(n){return i.updateActivable3(n)}),e.qZA(),e.qZA(),e.TgZ(13,"div",1),e.TgZ(14,"app-activable-slot",4),e.NdJ("changed",function(n){return i.updateActivable4(n)}),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(2),e.Q6J("skill",null===i.character?null:i.character.primarySkill),e.xp6(2),e.Q6J("skill",null===i.character?null:i.character.secondarySkill),e.xp6(2),e.Q6J("skill",null===i.character?null:i.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable1),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable2),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable3),e.xp6(2),e.Q6J("activable",null===i.character?null:i.character.activable4))},directives:[jt.X,Dt.Z],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:4px;gap:4px;border:3px solid #3c3c3c;padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid #3c3c3c}"]}),a}(),Vt=d(6538);function Gt(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);var n=e.oxw(2);return n.dragInItemsGroup(n.character.inventory)})("mouseleave",function(){return e.CHM(t),e.oxw(2).dragOutItemsGroup()})("mouseup",function(){e.CHM(t);var n=e.oxw(2);return n.dragDrop(n.character.inventory)}),e._uU(1,"Bag"),e.qZA()}if(2&a){var i=e.oxw(2);e.ekj("drag-on",i.isDragging&&i.itemGroupBeingDraggedOn===i.character.inventory)("drag-possible",i.itemGroupDragDropPossible)("drag-impossible",!i.itemGroupDragDropPossible)}}function $t(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(o){var s=e.CHM(t).index;return e.oxw(2).updateIventoryItem(s,o)}),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw(2);e.Q6J("item",i)("character",r.character)}}function Xt(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);var s=e.oxw().$implicit;return e.oxw(2).dragInItemsGroup(s)})("mouseleave",function(){return e.CHM(t),e.oxw(3).dragOutItemsGroup()})("mouseup",function(){e.CHM(t);var s=e.oxw().$implicit;return e.oxw(2).dragDrop(s)}),e._uU(1),e.qZA()}if(2&a){var i=e.oxw(),r=i.$implicit,n=i.index,o=e.oxw(2);e.ekj("drag-on",o.isDragging&&o.itemGroupBeingDraggedOn===r)("drag-possible",o.itemGroupDragDropPossible)("drag-impossible",!o.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",n+1,"")}}function Wt(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(o){var s=e.CHM(t).index,u=e.oxw().index;return e.oxw(2).updateSharedInventoryItem(u,s,o)}),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw(3);e.Q6J("item",i)("character",r.character)}}function zt(a,l){if(1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,Xt,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,Wt,1,2,"app-item-slot",9),e.qZA(),e.qZA()),2&a){var t=l.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function Kt(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content"),e.TgZ(5,"app-character-equipment",2),e.NdJ("changed",function(){return e.CHM(t),e.oxw().gearChanged()}),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3),e.TgZ(8,"app-reaper-slot",2),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateReaper(n)}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-card",5),e.TgZ(12,"mat-card-content"),e.TgZ(13,"mat-tab-group",6),e.TgZ(14,"mat-tab"),e.YNc(15,Gt,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,$t,1,2,"app-item-slot",9),e.qZA(),e.qZA(),e.YNc(18,zt,4,1,"mat-tab",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Oqu(i.character.fullName),e.xp6(2),e.Q6J("character",i.character),e.xp6(3),e.Q6J("character",i.character),e.xp6(9),e.Q6J("ngForOf",i.character.inventory),e.xp6(1),e.Q6J("ngForOf",i.character.sharedInventory)}}var en=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n){var o;return(0,h.Z)(this,i),(o=t.call(this)).buildStorageService=r,o.itemMoveService=n,o.character=null,o.isDragging=!1,o.itemGroupBeingDraggedOn=null,o.itemGroupDragDropPossible=!1,o.itemMoveService.draggingItem.pipe((0,x.R)(o.unsubscribe)).subscribe(function(c){return o.isDragging=c}),o}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=null===o?null:o.character})}},{key:"dragInItemsGroup",value:function(n){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==n.find(function(o){return null===o}),this.itemGroupBeingDraggedOn=n)}},{key:"dragOutItemsGroup",value:function(){this.itemGroupBeingDraggedOn=null}},{key:"dragDrop",value:function(n){this.itemMoveService.moveDraggedItemToItemGroup(n)}},{key:"gearChanged",value:function(){this.buildStorageService.saveLayer()}},{key:"updateReaper",value:function(n){null!==this.character&&(this.character.reaper=n,this.buildStorageService.saveLayer())}},{key:"updateIventoryItem",value:function(n,o){null!==this.character&&(this.character.inventory[n]=o,this.buildStorageService.saveLayer())}},{key:"updateSharedInventoryItem",value:function(n,o,c){if(null!==this.character){var s=this.character.sharedInventory[n];s&&(s[o]=c,this.buildStorageService.saveBuild())}}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(ae.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(t,i){1&t&&e.YNc(0,Kt,19,5,"main",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[_.O5,k.a8,k.dn,Yt.q,Ht.R,Rt,E.SP,E.uX,E.uD,_.sg,Vt.y],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:12px;background-color:#161412;border:3px solid #3c3c3c}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),a}(),G=d(7255),de=d(5016),B=d(2525);function tn(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var r=e.oxw(2);return r.maximize(r.selectedSkill)}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function nn(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var r=e.oxw(2);return r.equipSupport(r.selectedSkill)}),e._uU(1," Equip as Support skill "),e.qZA()}}function an(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var r=e.oxw(2);return r.equipPrimary(r.selectedSkill)}),e._uU(1," Equip as Primary skill "),e.qZA()}}function on(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var r=e.oxw(2);return r.equipSecondary(r.selectedSkill)}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function rn(a,l){if(1&a&&(e.YNc(0,tn,2,0,"button",4),e.YNc(1,nn,2,0,"button",4),e.YNc(2,an,2,0,"button",4),e.YNc(3,on,2,0,"button",4)),2&a){var t=e.oxw();e.Q6J("ngIf",null!==t.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSupportSkill(t.selectedSkill)&&t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedPrimarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSecondarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill))}}var ln=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n,o,c){var s;return(0,h.Z)(this,i),(s=t.call(this)).buildStorageService=r,s.messageService=n,s.slormancerSkillService=o,s.slormancerCharacterModifierService=c,s.selectedSkill=null,s.menu=null,s}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"openSettings",value:function(){return null!==this.menu&&this.menu.openMenu(),!1}},{key:"isSupport",value:function(n){return n.skill.type===G.W.Support}},{key:"maximize",value:function(n){if(null!==this.buildStorageService.getLayer()){n.skill.baseLevel=n.skill.maxLevel,this.slormancerSkillService.updateSkillModel(n.skill);var s,c=(0,X.Z)(n.upgrades);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.baseRank=u.maxRank,this.slormancerSkillService.updateUpgrade(u)}}catch(p){c.e(p)}finally{c.f()}this.buildStorageService.saveLayer(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name)}}},{key:"equipSupport",value:function(n){var o=this.buildStorageService.getLayer();null!==o&&this.slormancerCharacterModifierService.setSupportSkill(o.character,n.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.buildStorageService.saveLayer())}},{key:"equipPrimary",value:function(n){var o=this.buildStorageService.getLayer();null!==o&&this.slormancerCharacterModifierService.setPrimarySkill(o.character,n.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.buildStorageService.saveLayer())}},{key:"equipSecondary",value:function(n){var o=this.buildStorageService.getLayer();null!==o&&this.slormancerCharacterModifierService.setSecondarySkill(o.character,n.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.buildStorageService.saveLayer())}},{key:"isEquippedSupportSkill",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&o.character.supportSkill===n.skill}},{key:"isEquippedPrimarySkill",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&o.character.primarySkill===n.skill}},{key:"isEquippedSecondarySkill",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&o.character.secondarySkill===n.skill}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(K.e),e.Y36(de.A),e.Y36(R.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-settings-skills"]],viewQuery:function(t,i){var r;1&t&&e.Gf(B.p6,7),2&t&&e.iGM(r=e.CRH())&&(i.menu=r.first)},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return i.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,rn,4,4,"ng-template",3),e.qZA()),2&t){var r=e.MAs(3);e.Q6J("matMenuTriggerFor",r),e.xp6(2),e.Q6J("overlapTrigger",!0)}},directives:[U.Hw,B.p6,B.VK,B.KA,_.O5,B.OP],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),a}(),cn=d(411),sn=d(8849),un=d(9536);function dn(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",5),e.NdJ("click",function(){var c=e.CHM(t).$implicit;return e.oxw(2).incrementSkill(c)})("contextmenu",function(){var c=e.CHM(t).$implicit;return e.oxw(2).decrementSkill(c)}),e.qZA(),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw(2);e.ekj("selected",r.isSkillSelected(i)),e.xp6(1),e.ekj("equipped",r.isSkillEquipped(i)),e.Q6J("src","assets/img/icon/"+i.skill.iconLarge+".png",e.LSH)}}function pn(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",6),e.NdJ("click",function(){var c=e.CHM(t).$implicit;return e.oxw(2).incrementSkill(c)})("contextmenu",function(){var c=e.CHM(t).$implicit;return e.oxw(2).decrementSkill(c)}),e.qZA(),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw(2);e.ekj("selected",r.isSkillSelected(i)),e.xp6(1),e.ekj("equipped",r.isSkillEquipped(i)),e.Q6J("src","assets/img/icon/"+i.skill.icon+".png",e.LSH)}}function gn(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){var c=e.CHM(t).$implicit;return e.oxw(4).incrementUpgrade(c)})("contextmenu",function(){var c=e.CHM(t).$implicit;return e.oxw(4).decrementUpgrade(c)}),e.qZA()}if(2&a){var i=l.$implicit,r=e.oxw(4);e.Q6J("upgrade",i)("equipped",r.isUpgradeEquipped(i))}}function mn(a,l){if(1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,gn,1,2,"app-upgrade-slot",19),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",t," "),e.xp6(2),e.Q6J("ngForOf",i.getLineUpgrades(t))}}function fn(a,l){if(1&a&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._UZ(2,"app-settings-skills",9),e._UZ(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11),e.TgZ(5,"div",12),e.YNc(6,mn,5,2,"div",13),e.qZA(),e.qZA(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",t.selectedSkill),e.xp6(1),e.Q6J("skill",t.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",t.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",t.selectedUpgrade)}}function _n(a,l){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",1),e.YNc(3,dn,2,5,"div",2),e.YNc(4,pn,2,5,"div",2),e.qZA(),e.YNc(5,fn,9,4,"div",3),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.getSupportSkills(t.character)),e.xp6(1),e.Q6J("ngForOf",t.getActiveSkills(t.character)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill)}}var vn=function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r,n,o){var c;return(0,h.Z)(this,i),(c=t.call(this)).buildStorageService=r,c.slormancerSkillService=n,c.slormancerCharacterModifierService=o,c.character=null,c.selectedSkill=null,c.selectedUpgrade=null,c.selectedSkillLines=[],c}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=null===o?null:o.character,n.updateSelectedSkill()})}},{key:"updateSelectedSkill",value:function(){var n=this.character,o=this.selectedSkill,c=null;null===n?c=null:null===o?c=(0,M.lA)(null!==n.supportSkill?n.skills.find(function(s){return s.skill===n.supportSkill}):n.skills[0]):null===(c=(0,M.lA)(n.skills.find(function(s){return s.skill.id===o.skill.id})))&&(c=(0,M.lA)(n.skills[0])),this.selectSkill(c)}},{key:"getSupportSkills",value:function(n){return n.skills.filter(function(o){return o.skill.type===G.W.Support})}},{key:"getActiveSkills",value:function(n){return n.skills.filter(function(o){return o.skill.type===G.W.Active})}},{key:"isSkillEquipped",value:function(n){return null!==this.character&&(this.character.primarySkill===n.skill||this.character.secondarySkill===n.skill||this.character.supportSkill===n.skill)}},{key:"isEquippedSupportSkill",value:function(n){return null!==this.character&&this.character.supportSkill===n.skill}},{key:"isEquippedPrimarySkill",value:function(n){return null!==this.character&&this.character.primarySkill===n.skill}},{key:"isEquippedSecondarySkill",value:function(n){return null!==this.character&&this.character.secondarySkill===n.skill}},{key:"isSkillSelected",value:function(n){return this.selectedSkill===n}},{key:"selectSkill",value:function(n){this.selectedSkill!==n&&(this.selectedSkill=n,this.selectedSkillLines=null===n?[]:n.upgrades.map(function(o){return o.line}).filter(M.mr).sort(),this.selectedUpgrade=null===n?null:(0,M.lA)(n.upgrades[0]))}},{key:"incrementSkill",value:function(n){return this.selectedSkill===n?n.skill.baseLevel<n.skill.maxLevel&&(n.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(n.skill),this.buildStorageService.saveLayer(),console.log(n)):this.selectSkill(n),!1}},{key:"decrementSkill",value:function(n){return this.selectedSkill===n?n.skill.baseLevel>1&&(n.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(n.skill),this.buildStorageService.saveLayer(),console.log(n)):this.selectSkill(n),!1}},{key:"getLineUpgrades",value:function(n){var o=[];return null!==this.selectedSkill&&(o=this.selectedSkill.upgrades.filter(function(c){return c.line===n})),o}},{key:"isUpgradeEquipped",value:function(n){var o=!1;return null!==this.selectedSkill&&(o=void 0!==this.selectedSkill.selectedUpgrades.find(function(c){return n.id===c})),o}},{key:"incrementUpgrade",value:function(n){if(null!==this.selectedSkill&&null!==this.character){var o=!1;this.selectedUpgrade!==n&&(this.selectedUpgrade=n,o=!0),this.isUpgradeEquipped(n)?!o&&n.baseRank<n.maxRank&&(n.baseRank++,this.slormancerSkillService.updateUpgrade(n),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,n),0===n.baseRank&&(n.baseRank=1,this.slormancerSkillService.updateUpgrade(n)),this.buildStorageService.saveLayer()),console.log(n)}return!1}},{key:"decrementUpgrade",value:function(n){if(null!==this.selectedSkill&&null!==this.character){var o=!1;this.selectedUpgrade!==n&&(this.selectedUpgrade=n,o=!0),this.isUpgradeEquipped(n)?!o&&n.baseRank>1&&(n.baseRank--,this.slormancerSkillService.updateUpgrade(n),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,n),this.buildStorageService.saveLayer()),console.log(n)}return!1}},{key:"isSupport",value:function(n){return n.skill.type===G.W.Support}},{key:"equipSupport",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,n.skill),this.buildStorageService.saveLayer())}},{key:"equipPrimary",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,n.skill),this.buildStorageService.saveLayer())}},{key:"equipSecondary",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,n.skill),this.buildStorageService.saveLayer())}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(de.A),e.Y36(R.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(t,i){1&t&&e.YNc(0,_n,6,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[_.O5,k.a8,k.dn,_.sg,ln,cn.O,sn.B,un.A],styles:['.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;grid-gap:8px;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;grid-gap:20px;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-gap:12px;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),a}(),hn=d(8376),yn=d(8313);function bn(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Cn(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function Sn(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,i.mergedStat.suffix,"+")," ")}}function kn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Sn,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,i.mergedStat.suffix,"+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function xn(a,l){if(1&a&&(e.ynx(0),e.YNc(1,kn,10,4,"div",13),e.BQk()),2&a){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function Mn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(t.value,i.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Zn(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Mn,10,3,"div",13),e.BQk()),2&a){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function On(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," ")}}function Tn(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,bn,2,0,"span",2),e.qZA(),e.YNc(9,Cn,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,xn,2,1,"ng-container",12),e.YNc(15,Zn,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,On,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Pn(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function An(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function wn(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,"%","+")," ")}}function qn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,wn,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,"%","+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Ln(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(t.value,"%")," "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Un(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalPercent(t.mergedStat),"%","+")," ")}}function In(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Pn,2,0,"span",2),e.qZA(),e.YNc(9,An,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,qn,10,4,"div",15),e.YNc(15,Ln,10,3,"div",15),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Un,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalPercent(t.mergedStat),"%","+")," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Nn(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Jn(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function En(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,"%","+")," ")}}function Fn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,En,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,"%","+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Bn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=l.$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",t.value,"% "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Qn(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Nn,2,0,"span",2),e.qZA(),e.YNc(9,Jn,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Fn,10,4,"div",15),e.YNc(15,Bn,10,3,"div",15),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function Yn(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Hn(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function jn(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,i.mergedStat.suffix,"+")," ")}}function Dn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,jn,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,i.mergedStat.suffix,"+")," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Rn(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Dn,10,4,"div",13),e.BQk()),2&a){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function Vn(a,l){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(t.value,i.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Gn(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Vn,10,3,"div",13),e.BQk()),2&a){var t=l.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function $n(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," ")}}function Xn(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Yn,2,0,"span",2),e.qZA(),e.YNc(9,Hn,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Rn,2,1,"ng-container",12),e.YNc(15,Gn,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,$n,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Wn(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function zn(a,l){if(1&a&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula"),e.YNc(3,Wn,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.totalHasMinMax(t.mergedStat)),e.xp6(2),e.hij(" ",t.getMinFormula(t.mergedStat)," ")}}function Kn(a,l){if(1&a&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.xp6(4),e.hij(" ",t.getMaxFormula(t.mergedStat)," ")}}function ea(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(2);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.total,t.mergedStat.suffix)," ")}}function ta(a,l){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Tn,24,7,"ng-container",2),e.YNc(2,In,24,7,"ng-container",2),e.YNc(3,Qn,16,5,"ng-container",2),e.YNc(4,Xn,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,zn,6,2,"div",4),e.YNc(8,Kn,5,1,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e._uU(11,"Total (rounded)"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,ea,2,1,"div",8),e._UZ(15,"div",9),e._UZ(16,"div",10),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasFlatValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.percent.length>0||t.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.multiplier.length>0||t.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",t.hasFlatExtraValues(t.mergedStat)),e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)&&t.totalHasMinMax(t.mergedStat)),e.xp6(5),e.hij(" ",t.minValueToString(t.mergedStat.total,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}var na=function(){var a=function(){function l(t,i){(0,h.Z)(this,l),this.slormancerTranslateService=t,this.slormancerStatUpdaterService=i,this.mergedStat=null,this.percent=!1}return(0,v.Z)(l,[{key:"translate",value:function(i){return this.slormancerTranslateService.translate(i)}},{key:"getSource",value:function(i){var r="";return"synergy"in i?r="Synergy":"character"in i?r="Character":"skill"in i?r="Skill":"upgrade"in i?r="Upgrade":"item"in i?r="Item":"ancestralLegacy"in i?r="Ancestral Legacy":"attribute"in i?r="Attribute":"reaper"in i?r="Reaper":"activable"in i?r="Activable":"mechanic"in i?r="Mechanic":"classMechanic"in i?r="Class Mechanic":"ultimatum"in i&&(r="Ultimatum"),r}},{key:"getSourceName",value:function(i){var r="";return"synergy"in i?r=i.synergy:"skill"in i?r=i.skill.nameLabel:"upgrade"in i?r=i.upgrade.name:"item"in i?r=i.item.name:"ancestralLegacy"in i?r=i.ancestralLegacy.name:"attribute"in i?r=i.attribute.attributeName:"reaper"in i?r=i.reaper.name:"activable"in i?r=i.activable.name:"mechanic"in i?r=i.mechanic.name:"classMechanic"in i?r=i.classMechanic.name:"ultimatum"in i&&(r=i.ultimatum.title),r}},{key:"valueToString",value:function(i,r){return"number"==typeof i?(0,C.NM)(i,5)+r:(0,C.NM)(i.min,5)+r+"-"+(0,C.NM)(i.max,5)+r}},{key:"minValueToString",value:function(i,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"number"==typeof i?n+((0,C.NM)(i,5)+r):n+(0,C.NM)(i.min,5)+r}},{key:"maxValueToString",value:function(i,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return"number"==typeof i?"":n+(0,C.NM)(i.max,5)+r}},{key:"getTotalFlat",value:function(i){return this.slormancerStatUpdaterService.getTotalFlat(i)}},{key:"getTotalFlatExtra",value:function(i){return this.slormancerStatUpdaterService.getTotalFlatExtra(i)}},{key:"getTotalPercent",value:function(i){var r=this.slormancerStatUpdaterService.addNumberValues(i.values.percent.map(function(o){return o.value})),n=r+this.slormancerStatUpdaterService.addNumberValues(i.values.maxPercent.map(function(o){return o.value}));return r!==n?{min:r,max:n}:r}},{key:"getTotalFlatPercent",value:function(i){var r=this.slormancerStatUpdaterService.getTotalFlatAndPercent(i);return this.valueToString(r,i.suffix)}},{key:"getTotal",value:function(i){var r=this.slormancerStatUpdaterService.getTotal(i);return this.valueToString(r,i.suffix)}},{key:"hasFlatValues",value:function(i){return i.values.flat.filter(function(r){return!r.extra}).length>0||i.values.max.filter(function(r){return!r.extra}).length>0}},{key:"hasFlatExtraValues",value:function(i){return i.values.flat.filter(function(r){return r.extra}).length>0||i.values.max.filter(function(r){return r.extra}).length>0}},{key:"hasPercentValues",value:function(i){return i.values.percent.length>0||i.values.maxPercent.length>0}},{key:"hasMultiplierValues",value:function(i){return i.values.multiplier.length>0||i.values.maxMultiplier.length>0}},{key:"showFormula",value:function(i){return(i.values.flat.filter(function(u){return!u.extra}).length>0||i.values.max.filter(function(u){return!u.extra}).length>0?1:0)+(i.values.percent.length>0||i.values.maxPercent.length>0?1:0)+(i.values.multiplier.length>0||i.values.maxMultiplier.length>0?1:0)+(i.values.flat.filter(function(u){return u.extra}).length>0||i.values.max.filter(function(u){return u.extra}).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(i.stat)?1:0)>=2}},{key:"totalHasMinMax",value:function(i){return"number"!=typeof i.total}},{key:"getMinFormula",value:function(i){var r=this.slormancerStatUpdaterService.getTotal(i),n=this.slormancerStatUpdaterService.getTotalFlat(i),o=this.slormancerStatUpdaterService.getTotalPercent(i),c=i.values.multiplier.map(function(p){return p.value}),s=this.slormancerStatUpdaterService.getTotalFlatExtra(i);n="number"==typeof n?n:n.min,o="number"==typeof o?o:o.min,s="number"==typeof s?s:s.min;var u=(0,C.NM)("number"==typeof r?r:r.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(i.stat)?u+="(1 - "+[n,o].concat((0,w.Z)(c)).filter(function(p){return 0!==p}).map(function(p){return Math.max(0,100-p)/100}).join(" * ")+") * 100":(u+=this.valueToString(n,i.suffix)+[o].concat((0,w.Z)(c)).filter(function(p){return 0!==p}).map(function(p){return" * "+(p+100)/100}).join(""),0!==s&&(u+=" + "+s)),u}},{key:"getMaxFormula",value:function(i){var r=this.slormancerStatUpdaterService.getTotal(i),n=this.slormancerStatUpdaterService.getTotalFlat(i),o=this.slormancerStatUpdaterService.getTotalPercent(i),c=this.slormancerStatUpdaterService.getTotalFlatExtra(i),s=i.values.multiplier.map(function(p){return p.value});n="number"==typeof n?n:n.max,o="number"==typeof o?o:o.max,c="number"==typeof c?c:c.max;var u=(0,C.NM)("number"==typeof r?r:r.max,5)+" = ";return u+=this.valueToString(n,i.suffix)+[o].concat((0,w.Z)(s)).filter(function(p){return 0!==p}).map(function(p){return" * "+(p+100)/100}).join(""),0!==c&&(u+=" + "+c),u}}]),l}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(yn.n),e.Y36(hn.C))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(t,i){1&t&&e.YNc(0,ta,17,9,"div",0),2&t&&e.Q6J("ngIf",null!==i.mergedStat)},directives:[_.O5,_.sg],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:4px;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),a}();function aa(a,l){if(1&a){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"app-main-stats",2),e.NdJ("selected",function(n){return e.CHM(t),e.oxw().selectMergedStat(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"mat-card"),e.TgZ(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Q6J("stats",i.stats),e.xp6(3),e.Q6J("mergedStat",i.selectedMergedStat)}}var oa=[{path:"",component:Fe,children:[{path:"inventory",component:en},{path:"skills",component:vn},{path:"ancestral-legacies",component:We},{path:"attributes",component:tt},{path:"stats",component:function(){var a=function(l){(0,Z.Z)(i,l);var t=(0,O.Z)(i);function i(r){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=r,n.stats=null,n.selectedMergedStat=null,n}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.stats=null===o?null:o.character.stats})}},{key:"selectMergedStat",value:function(n){this.selectedMergedStat=n}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(t,i){1&t&&e.YNc(0,aa,7,2,"main",0),2&t&&e.Q6J("ngIf",null!==i.stats)},directives:[_.O5,k.a8,k.dn,ue.w,na],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;grid-gap:20px;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a}()},{path:"config",component:Qt},{path:"compare",component:vt},{path:"calcs",component:st},{path:"**",redirectTo:"inventory"}]}],ra=function(){var a=(0,v.Z)(function l(){(0,h.Z)(this,l)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[L.Bz.forChild(oa)],L.Bz]}),a}(),la=function(){var a=(0,v.Z)(function l(){(0,h.Z)(this,l)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[_.ez,ge.m,ra]]}),a}()}}]);