"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[592],{6702:function(v,c,e){e.d(c,{Q:function(){return O}});var f=e(5671),D=e(3144),t=e(5542),m=e(5581),g=e(8223),E=e(7423),d=e(9808),C=e(3874);function I(o,u){if(1&o&&(t.ynx(0),t.TgZ(1,"mat-icon"),t._uU(2,"file_upload"),t.qZA(),t._uU(3),t.BQk()),2&o){var i=t.oxw();t.xp6(3),t.Oqu(i.label)}}function M(o,u){1&o&&(t.ynx(0),t.TgZ(1,"mat-icon",4),t._uU(2,"sync"),t.qZA(),t._uU(3,"Uploading..."),t.BQk())}var O=function(){var o=function(){function u(i){(0,f.Z)(this,u),this.messageService=i,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.label=null,this.upload=new t.vpe,this.busy=!1,this.parsing=!1}return(0,D.Z)(u,[{key:"uploadFile",value:function(p){return new Promise(function(_,s){var a=new FileReader;a.onerror=function(){a=null,s()},a.onloadend=function(){null!==a&&null!==a.result&&(_(a.result.toString()),a=null)},a.readAsText(p)})}},{key:"startUpload",value:function(p){var _=this,s=p.target;if(null!==s&&!this.busy){var a=s.files,l=null===a?null:(0,m.lA)(a[0]);null!==l&&(l.size<=this.MAX_UPLOAD_FILE_SIZE?(this.busy=!0,this.uploadFile(l).then(function(r){_.upload.emit(r),s.value="",_.busy=!1},function(){s.value="",_.messageService.error("Failed to upload this file"),_.busy=!1})):this.messageService.error("Cannot upload files bigger than "+this.MAX_UPLOAD_FILE_SIZE_MO+"Mo"))}}}]),u}();return o.\u0275fac=function(i){return new(i||o)(t.Y36(g.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-file-upload-button"]],inputs:{label:"label"},outputs:{upload:"upload"},decls:5,vars:2,consts:[["type","file",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[1,"animation-rotation"]],template:function(i,p){if(1&i){var _=t.EpF();t.TgZ(0,"input",0,1),t.NdJ("change",function(a){return p.startUpload(a)}),t.qZA(),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(_),t.MAs(1).click()}),t.YNc(3,I,4,1,"ng-container",3),t.YNc(4,M,4,0,"ng-container",3),t.qZA()}2&i&&(t.xp6(3),t.Q6J("ngIf",!p.busy),t.xp6(1),t.Q6J("ngIf",p.busy))},directives:[E.lW,d.O5,C.Hw],styles:["input[type=file][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{width:100%}"]}),o}()},2846:function(v,c,e){e.d(c,{M:function(){return s}});var f=e(5671),D=e(3144),t=e(5542),m=e(3075),g=e(8271),E=e(6702),d=e(7322),C=e(7531),I=e(9808),M=e(7423);function O(a,l){1&a&&(t.TgZ(0,"mat-hint",8),t._uU(1,"Paste here a save, build, layer or link"),t.qZA())}function o(a,l){1&a&&(t.TgZ(0,"mat-hint",8),t._uU(1,"Paste here a build, layer or link"),t.qZA())}function u(a,l){1&a&&(t.TgZ(0,"mat-hint",9),t._uU(1,"Character found"),t.qZA())}function i(a,l){1&a&&(t.TgZ(0,"mat-hint",9),t._uU(1,"Layer found"),t.qZA())}function p(a,l){1&a&&(t.TgZ(0,"mat-hint",9),t._uU(1,"Build found"),t.qZA())}function _(a,l){1&a&&(t.TgZ(0,"mat-hint",10),t._uU(1,"No valid data found"),t.qZA())}var s=function(){var a=function(){function l(r){var n=this;(0,f.Z)(this,l),this.importExportService=r,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.uploadLabel=null,this.importLabel=null,this.heroClass=null,this.import=new t.vpe,this.sharedData=null,this.importContent=new m.NI(null,m.kI.maxLength(this.MAX_UPLOAD_FILE_SIZE)),this.importContent.valueChanges.subscribe(function(h){null===h||0===h.length?n.sharedData=null:n.parseExportedData(h)})}return(0,D.Z)(l,[{key:"parseExportedData",value:function(n){this.sharedData=this.importExportService.import(n,this.heroClass)}},{key:"hasValidSharedData",value:function(){return null!==this.sharedData&&(null!==this.sharedData.character||null!==this.sharedData.layer||null!==this.sharedData.planner)}},{key:"upload",value:function(n){this.importContent.setValue(n)}},{key:"importData",value:function(){null!==this.sharedData&&(this.import.emit(this.sharedData),this.importContent.setValue(""),this.sharedData=null)}}]),l}();return a.\u0275fac=function(r){return new(r||a)(t.Y36(g.s))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-import-data"]],inputs:{uploadLabel:"uploadLabel",importLabel:"importLabel",heroClass:"heroClass"},outputs:{import:"import"},decls:16,vars:11,consts:[[1,"import"],[3,"label","upload"],["appearance","outline","color","primary","floatLabel","never"],["matInput","",3,"formControl"],["align","end",4,"ngIf"],["align","end","class","success",4,"ngIf"],["align","end","class","error",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["align","end"],["align","end",1,"success"],["align","end",1,"error"]],template:function(r,n){1&r&&(t.TgZ(0,"div",0),t.TgZ(1,"app-file-upload-button",1),t.NdJ("upload",function(P){return n.upload(P)}),t.qZA(),t.TgZ(2,"mat-form-field",2),t.TgZ(3,"mat-label"),t._uU(4,"Import content..."),t.qZA(),t._UZ(5,"textarea",3),t.YNc(6,O,2,0,"mat-hint",4),t.YNc(7,o,2,0,"mat-hint",4),t.YNc(8,u,2,0,"mat-hint",5),t.YNc(9,i,2,0,"mat-hint",5),t.YNc(10,p,2,0,"mat-hint",5),t.YNc(11,_,2,0,"mat-hint",6),t.TgZ(12,"mat-error"),t._uU(13),t.qZA(),t.qZA(),t.TgZ(14,"button",7),t.NdJ("click",function(){return n.importData()}),t._uU(15),t.qZA(),t.qZA()),2&r&&(t.xp6(1),t.Q6J("label",n.uploadLabel),t.xp6(4),t.Q6J("formControl",n.importContent),t.xp6(1),t.Q6J("ngIf",null===n.sharedData&&null!==n.heroClass),t.xp6(1),t.Q6J("ngIf",null===n.sharedData&&null===n.heroClass),t.xp6(1),t.Q6J("ngIf",null!==n.sharedData&&null!==n.sharedData.character),t.xp6(1),t.Q6J("ngIf",null!==n.sharedData&&null!==n.sharedData.layer),t.xp6(1),t.Q6J("ngIf",null!==n.sharedData&&null!==n.sharedData.planner),t.xp6(1),t.Q6J("ngIf",null!==n.sharedData&&!n.hasValidSharedData()),t.xp6(2),t.hij("Cannot parse files bigger than ",n.MAX_UPLOAD_FILE_SIZE_MO,"Mo"),t.xp6(1),t.Q6J("disabled",!n.hasValidSharedData()),t.xp6(1),t.Oqu(n.importLabel))},directives:[E.Q,d.KE,d.hX,C.Nt,m.Fj,m.JJ,m.oH,I.O5,d.TO,M.lW,d.bx],styles:[".import[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;grid-gap:12px;gap:12px;width:100%}.import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px;max-height:60px}"]}),a}()}}]);