"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[247],{9247:function(oi,ee,u){u.r(ee),u.d(ee,{BuildModule:function(){return ai}});var v=u(3144),h=u(5671),f=u(9808),ce=u(2271),w=u(1083),Z=u(136),O=u(7777),x=u(2722),T=u(6446),te=u(7469),e=u(5542),q=u(3874),E=u(3251),V=u(2638),G=u(7762),p=u(3075),$=u(2340),y=u(8966),se=u(3417),ue=function(){var a=function(){function c(t){(0,h.Z)(this,c),this.dialog=t}return(0,v.Z)(c,[{key:"created",value:function(){console.log("CreateBuildModalComponent created"),this.dialog.close()}}]),c}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-modal"]],decls:2,vars:0,consts:[[3,"created"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-dialog-content"),e.TgZ(1,"app-create-build",0),e.NdJ("created",function(){return i.created()}),e.qZA(),e.qZA())},directives:[y.xY,se.b],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a}(),U=u(7423),de=function(){var a=(0,v.Z)(function c(t){(0,h.Z)(this,c),this.name=t.name});return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-build-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a build"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions"),e.TgZ(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" You're about to delete the build ",i.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[y.uh,y.xY,y.H8,U.lW,y.ZT],styles:[""]}),a}(),C=u(7322),Q=u(7531);function pe(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Build name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A build name is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions"),e.TgZ(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Submit"),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Oqu(i.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var ge=function(){var a=function(){function c(t,i){(0,h.Z)(this,c),this.dialog=t,this.title=i.title,this.form=new p.cw({name:new p.NI(i.name,p.kI.required)})}return(0,v.Z)(c,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),c}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.so),e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-build-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,i){1&t&&e.YNc(0,pe,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==i.form)},directives:[f.O5,p._Y,p.JL,p.sg,y.uh,y.xY,C.KE,C.hX,Q.Nt,p.Fj,p.JJ,p.u,C.TO,y.H8,U.lW,y.ZT],styles:[""]}),a}();function me(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4),e.TgZ(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-dialog-actions"),e.TgZ(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Submit"),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.Q6J("formGroup",i.form),e.xp6(2),e.Oqu(i.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var H=function(){var a=function(){function c(t,i){(0,h.Z)(this,c),this.dialog=t,this.title=i.title,this.form=new p.cw({name:new p.NI(i.name,p.kI.required)})}return(0,v.Z)(c,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),c}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.so),e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,i){1&t&&e.YNc(0,me,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==i.form)},directives:[f.O5,p._Y,p.JL,p.sg,y.uh,y.xY,C.KE,C.hX,Q.Nt,p.Fj,p.JJ,p.u,C.TO,y.H8,U.lW,y.ZT],styles:[""]}),a}(),P=u(311),ne=u(7355),fe=u(7757),ie=u.n(fe),_e=u(655),ve=function(){var a=function(){function c(){(0,h.Z)(this,c)}return(0,v.Z)(c,[{key:"copyToClipboard",value:function(i){var l=null;try{return(l=document.createElement("textarea")).style.position="fixed",l.style.left="0",l.style.top="0",l.style.opacity="0",l.value=i,document.body.appendChild(l),l.focus(),l.select(),document.execCommand("copy"),document.body.removeChild(l),!0}catch(n){null!==l&&document.body.contains(l)&&document.body.removeChild(l)}return!1}},{key:"getClipboardText",value:function(){return(0,_e.mG)(this,void 0,void 0,ie().mark(function i(){var l;return ie().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(l=null,!navigator.clipboard){o.next=10;break}return o.prev=2,o.next=5,navigator.clipboard.readText();case 5:l=o.sent,o.next=10;break;case 8:o.prev=8,o.t0=o.catch(2);case 10:return o.abrupt("return",l);case 11:case"end":return o.stop()}},i,null,[[2,8]])}))}}]),c}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),he=u(8271),_=u(2107),W=u(8223),ye=function(){var a=function(){function c(){(0,h.Z)(this,c)}return(0,v.Z)(c,[{key:"downloadFile",value:function(i,l){var n=document.createElement("a"),o=new Blob([i],{type:"text/plain"}),r=window.URL.createObjectURL(o);n.href=r,n.download=l,n.click(),window.URL.revokeObjectURL(r),n.remove()}}]),c}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),L=u(4102),F=u(508),Y=u(7238),be=u(2846);function Ce(a,c){if(1&a&&(e.TgZ(0,"mat-select-trigger"),e._UZ(1,"img",21),e._uU(2),e.qZA()),2&a){var t=e.oxw();e.xp6(1),e.MGl("src","assets/img/character/icon/",t.buildControl.value.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.buildControl.value.name," ")}}function ke(a,c){if(1&a&&(e.TgZ(0,"mat-option",22),e._UZ(1,"img",21),e._uU(2),e.qZA()),2&a){var t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.name," ")}}var Se=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n,o,r,s,d,g,S){var m;return(0,h.Z)(this,i),(m=t.call(this)).messageService=l,m.downloadService=n,m.clipboardService=o,m.importExportService=r,m.buildStorageService=s,m.buildService=d,m.router=g,m.dialog=S,m.VERSION=$.N.version,m.GITHUB_LINK=$.N.githublink,m.GAME_LINK=$.N.gameLink,m.sidenav=null,m.busy=!1,m.buildControl=new p.NI(m.buildStorageService.getBuildPreview()),m.buildControl.valueChanges.pipe((0,x.R)(m.unsubscribe)).subscribe(function(N){return m.buildStorageService.loadBuild(N)}),m.buildStorageService.buildChanged.pipe((0,x.R)(m.unsubscribe)).subscribe(function(){m.buildControl.setValue(m.buildStorageService.getBuildPreview(),{emitEvent:!1})}),m}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"closeSideNav",value:function(){null!==this.sidenav&&this.sidenav.close()}},{key:"getBuilds",value:function(){return this.buildStorageService.getBuilds()}},{key:"getHeroClass",value:function(){var n=_.i.Warrior,o=this.buildStorageService.getBuild();return null!==o&&(n=o.heroClass),n}},{key:"import",value:function(n){var o=this,r=this.buildStorageService.getBuild();if(null!==n&&null!==r)if(null!==n.character)this.dialog.open(H,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(function(J){if(J){var K=o.buildService.addLayer(r,J,n.character);o.buildStorageService.loadLayer(K),o.closeSideNav()}});else if(null!==n.layer){var d=this.buildService.addLayer(r,n.layer.name,n.layer.character);this.buildStorageService.loadLayer(d),this.closeSideNav()}else if(null!==n.planner){var m,g=null,S=(0,G.Z)(n.planner.layers);try{for(S.s();!(m=S.n()).done;){var N=m.value;g=this.buildService.addLayer(r,N.name,N.character)}}catch(J){S.e(J)}finally{S.f()}null!==g&&this.buildStorageService.loadLayer(g),this.closeSideNav()}}},{key:"downloadLayer",value:function(){var n=this.buildStorageService.getLayer();if(null!==n){var o=this.importExportService.exportLayer(n);this.downloadService.downloadFile(o,n.name)}}},{key:"copyLayer",value:function(){var n=this.buildStorageService.getLayer();if(null!==n){var o=this.importExportService.exportLayer(n);this.clipboardService.copyToClipboard(o)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}},{key:"downloadBuild",value:function(){var n=this.buildStorageService.getBuild();if(null!==n){var o=this.importExportService.exportBuild(n);this.downloadService.downloadFile(o,"build.sav")}}},{key:"copyBuild",value:function(){var n=this.buildStorageService.getBuild();if(null!==n){var o=this.importExportService.exportBuild(n);this.clipboardService.copyToClipboard(o)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}},{key:"copyExternalLink",value:function(){var n=this.buildStorageService.getLayer();if(null!==n){var o=this.importExportService.exportCharacterAsLink(n.character);this.clipboardService.copyToClipboard(o)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}},{key:"deleteBuild",value:function(){var n=this,o=this.buildStorageService.getBuild();null!==o&&this.dialog.open(de,{data:{name:o.name}}).afterClosed().subscribe(function(s){s&&(n.buildStorageService.deleteBuild(),console.log(n.buildStorageService.getBuilds()),0===n.buildStorageService.getBuilds().length&&(console.log("navigate"),n.router.navigate(["/create"])))})}},{key:"editBuild",value:function(){var n=this,o=this.buildStorageService.getBuild();null!==o&&this.dialog.open(ge,{data:{title:"Edit build name",name:o.name}}).afterClosed().subscribe(function(s){s&&(o.name=s,n.buildStorageService.saveBuild())})}},{key:"createNewBuild",value:function(){this.dialog.open(ue)}},{key:"trackbyBuildPreview",value:function(n,o){return console.log("trackbyBuildPreview : ",n,o),o.storageKey}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(W.e),e.Y36(ye),e.Y36(ve),e.Y36(he.s),e.Y36(P.x),e.Y36(ne.d),e.Y36(w.F0),e.Y36(y.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:59,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"build"],[1,"build-selection"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit build name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete build",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"info"],["target","blank",3,"href"],[1,"hero-icon",3,"src"],[3,"value"]],template:function(t,i){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"h3"),e._uU(4,"Builds"),e.qZA(),e.TgZ(5,"div",3),e.TgZ(6,"mat-form-field",4),e.TgZ(7,"mat-label"),e._uU(8,"Current build"),e.qZA(),e.TgZ(9,"mat-select",5),e.YNc(10,Ce,3,2,"mat-select-trigger",6),e.YNc(11,ke,3,3,"mat-option",7),e.qZA(),e.qZA(),e.TgZ(12,"button",8),e.NdJ("click",function(){return i.editBuild()}),e.TgZ(13,"mat-icon"),e._uU(14,"edit"),e.qZA(),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return i.deleteBuild()}),e.TgZ(16,"mat-icon"),e._uU(17,"delete"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(18,"button",10),e.NdJ("click",function(){return i.createNewBuild()}),e._uU(19,"New build"),e.qZA(),e.qZA(),e._UZ(20,"hr"),e.TgZ(21,"div",11),e.TgZ(22,"h3"),e._uU(23,"Import"),e.qZA(),e.TgZ(24,"app-import-data",12),e.NdJ("import",function(n){return i.import(n)}),e.qZA(),e.qZA(),e._UZ(25,"hr"),e.TgZ(26,"div",13),e.TgZ(27,"h3"),e._uU(28,"Export"),e.qZA(),e.TgZ(29,"div",14),e.TgZ(30,"p"),e._uU(31,"Current layer"),e.qZA(),e.TgZ(32,"div",15),e.TgZ(33,"button",16),e.NdJ("click",function(){return!i.busy&&i.downloadLayer()}),e.TgZ(34,"mat-icon"),e._uU(35,"file_download"),e.qZA(),e.qZA(),e.TgZ(36,"button",17),e.NdJ("click",function(){return!i.busy&&i.copyLayer()}),e.TgZ(37,"mat-icon"),e._uU(38,"content_copy"),e.qZA(),e.qZA(),e.TgZ(39,"button",18),e.NdJ("click",function(){return!i.busy&&i.copyExternalLink()}),e.TgZ(40,"mat-icon"),e._uU(41,"share"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(42,"div",14),e.TgZ(43,"p"),e._uU(44,"Current build"),e.qZA(),e.TgZ(45,"div",15),e.TgZ(46,"button",16),e.NdJ("click",function(){return!i.busy&&i.downloadBuild()}),e.TgZ(47,"mat-icon"),e._uU(48,"file_download"),e.qZA(),e.qZA(),e.TgZ(49,"button",17),e.NdJ("click",function(){return!i.busy&&i.copyBuild()}),e.TgZ(50,"mat-icon"),e._uU(51,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(52,"div",19),e._uU(53),e.TgZ(54,"a",20),e._uU(55,"Github"),e.qZA(),e._uU(56," - "),e.TgZ(57,"a",20),e._uU(58,"The Slormancer"),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(9),e.Q6J("formControl",i.buildControl),e.xp6(1),e.Q6J("ngIf",null!==i.buildControl.value),e.xp6(1),e.Q6J("ngForOf",i.getBuilds()),e.xp6(13),e.Q6J("heroClass",i.getHeroClass()),e.xp6(29),e.hij(" Slorm Planner ",i.VERSION," - "),e.xp6(1),e.Q6J("href",i.GITHUB_LINK,e.LSH),e.xp6(3),e.Q6J("href",i.GAME_LINK,e.LSH))},directives:[C.KE,C.hX,L.gD,p.JJ,p.oH,f.O5,L.$L,f.sg,F.ey,U.lW,Y.gM,q.Hw,be.M],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),a}(),xe=function(){var a=(0,v.Z)(function c(t){(0,h.Z)(this,c),this.name=t.name});return a.\u0275fac=function(t){return new(t||a)(e.Y36(y.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-layer-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,i){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions"),e.TgZ(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA(),e.qZA()),2&t&&(e.xp6(3),e.hij(" You're about to delete layer ",i.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[y.uh,y.xY,y.H8,U.lW,y.ZT],styles:[""]}),a}(),Me=u(2424),k=u(9224);function Ze(a,c){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){var t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Oe(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeSearch()}),e._uU(1,"close"),e.qZA()}}var Te=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n,o,r){var s;return(0,h.Z)(this,i),(s=t.call(this)).buildStorageService=l,s.buildService=n,s.searchService=o,s.dialog=r,s.searchControl=new p.NI(""),s.layerControl=new p.NI(null),s.layerOptions=[],s}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.layerControl.setValue(o,{emitEvent:!1})}),this.buildStorageService.buildChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.layerOptions=null===o?[]:o.layers.map(function(r){return{label:r.name,value:r}})}),this.searchService.searchChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.searchControl.setValue(o,{emitEvent:!1})}),this.layerControl.setValue(this.buildStorageService.getLayer(),{emitEvent:!1}),this.layerControl.valueChanges.subscribe(function(o){return n.buildStorageService.loadLayer(o)}),this.searchControl.valueChanges.subscribe(function(o){return n.searchService.setSearch(o)})}},{key:"hasSearch",value:function(){return this.searchService.hasSearch()}},{key:"removeSearch",value:function(){this.searchService.setSearch(null)}},{key:"editLayer",value:function(){var n=this,o=this.buildStorageService.getLayer();null!==o&&this.dialog.open(H,{data:{title:"Edit layer name",name:o.name}}).afterClosed().subscribe(function(s){s&&(o.name=s,n.buildStorageService.saveLayer())})}},{key:"addLayer",value:function(){var n=this;this.dialog.open(H,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(r){var s=n.buildStorageService.getBuild();if(r&&null!==s){var d=n.buildService.addLayer(s,r);n.buildStorageService.loadLayer(d)}})}},{key:"duplicateLayer",value:function(){var n=this;this.dialog.open(H,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(r){var s=n.buildStorageService.getBuild(),d=n.buildStorageService.getLayer();if(r&&null!==s&&null!==d){var g=n.buildService.duplicateLayer(s,d,r);n.buildStorageService.loadLayer(g)}})}},{key:"removeLayer",value:function(){var n=this,o=this.buildStorageService.getLayer(),r=this.buildStorageService.getBuild();null!==o&&this.dialog.open(xe,{data:{name:o.name}}).afterClosed().subscribe(function(d){d&&null!==r&&(n.buildService.deleteLayer(r,o),n.buildStorageService.saveBuild())})}},{key:"hasRoomForMoreLayer",value:function(){return this.buildStorageService.hasRoomForAnotherLayer()}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(ne.d),e.Y36(Me.o),e.Y36(y.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Duplicate this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(t,i){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"div",1),e.TgZ(4,"mat-form-field",2),e.TgZ(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,Ze,2,2,"mat-option",4),e.qZA(),e.qZA(),e.TgZ(9,"button",5),e.NdJ("click",function(){return i.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA(),e.qZA(),e.TgZ(12,"button",6),e.NdJ("click",function(){return i.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA(),e.qZA(),e.TgZ(15,"button",7),e.NdJ("click",function(){return i.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA(),e.qZA(),e.TgZ(18,"button",8),e.NdJ("click",function(){return i.duplicateLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"mat-form-field",2),e.TgZ(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Oe,2,0,"mat-icon",11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(7),e.Q6J("formControl",i.layerControl),e.xp6(1),e.Q6J("ngForOf",i.layerOptions),e.xp6(4),e.Q6J("disabled",i.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!i.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!i.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",i.searchControl),e.xp6(1),e.Q6J("ngIf",i.hasSearch()))},directives:[k.a8,k.dn,C.KE,C.hX,L.gD,p.JJ,p.oH,f.sg,F.ey,U.lW,Y.gM,q.Hw,Q.Nt,p.Fj,f.O5,C.R9],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),a}(),Pe=["dragImage"],Ae=["dragBackground"];function we(a,c){if(1&a&&(e.TgZ(0,"a",11,12),e.TgZ(2,"span",13),e._uU(3),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.MAs(1);e.Q6J("routerLink",t.route)("active",i.isActive),e.xp6(3),e.Oqu(t.name)}}var qe=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l){var n;return(0,h.Z)(this,i),(n=t.call(this)).itemMoveService=l,n.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],n.isDragging=!1,n.dragImage=null,n.dragBackground=null,n.itemMoveService.draggingItem.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){n.isDragging=o;var r=n.itemMoveService.getHoldItem();null!==r&&n.dragImage&&n.dragBackground&&(n.dragImage.nativeElement.src=r.icon,n.dragBackground.nativeElement.src=r.itemIconBackground)}),n}return(0,v.Z)(i,[{key:"onMouseMove",value:function(n){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){var o=n.clientY-this.dragImage.nativeElement.height/2+"px",r=n.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=o,this.dragImage.nativeElement.style.left=r,this.dragBackground.nativeElement.style.top=o,this.dragBackground.nativeElement.style.left=r}}},{key:"onMouseUp",value:function(){this.itemMoveService.releaseHoldItem()}},{key:"onMouseContextMenu",value:function(){this.itemMoveService.releaseHoldItem()}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(te.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build"]],viewQuery:function(t,i){var l;1&t&&(e.Gf(Pe,5),e.Gf(Ae,5)),2&t&&(e.iGM(l=e.CRH())&&(i.dragImage=l.first),e.iGM(l=e.CRH())&&(i.dragBackground=l.first))},hostBindings:function(t,i){1&t&&e.NdJ("mousemove",function(n){return i.onMouseMove(n)})("mouseup",function(){return i.onMouseUp()})("contextmenu",function(){return i.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(t,i){if(1&t){var l=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"mat-icon",2),e.NdJ("click",function(){return e.CHM(l),e.MAs(8).toggle()}),e._uU(3,"menu"),e.qZA(),e.qZA(),e.TgZ(4,"nav",3),e.YNc(5,we,4,3,"a",4),e.qZA(),e.qZA(),e.TgZ(6,"mat-sidenav-container"),e.TgZ(7,"mat-sidenav",null,5),e._UZ(9,"app-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header"),e._UZ(12,"router-outlet"),e._UZ(13,"img",7,8),e._UZ(15,"img",9,10),e.qZA(),e.qZA()}if(2&t){var n=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",i.ROUTES),e.xp6(4),e.Q6J("sidenav",n),e.xp6(4),e.ekj("dragging",i.isDragging),e.xp6(2),e.ekj("dragging",i.isDragging)}},directives:[q.Hw,E.BU,f.sg,w.yS,E.Nj,w.Od,V.TM,V.JX,Se,V.Rh,Te,w.lC],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),a}(),X=u(4373),Ue=u(9184),b=u(4713),M=u(5581),A=u(4902),j=u(7201),ae=u(7438),Le=u(5351),Ie=u(9713);function Ne(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(r){return e.CHM(t),e.oxw(2).selectAncestralLegacy(r)}),e._uU(1,"> "),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw().$implicit,n=e.oxw();e.Akn(l.iconStyle),e.Q6J("ancestralLegacy",n.getAncestralLegacy(i))("equipped",n.isAncestralLegacyEquipped(i))("selected",n.isNodeSelected(i))}}function Je(a,c){if(1&a&&(e.TgZ(0,"div"),e.TgZ(1,"div",10),e.YNc(2,Ne,2,5,"app-ancestral-legacy-slot",11),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.oxw();e.Akn(t.style),e.Gre("zone absolute color-",t.color,""),e.ekj("large",t.large)("active",i.isRealmActive(t.realmId)),e.xp6(2),e.Q6J("ngForOf",t.ancestralLegacies)}}function Ee(a,c){1&a&&e._UZ(0,"div",13),2&a&&e.Akn(c.$implicit.style)}function Fe(a,c){1&a&&e._UZ(0,"div",14),2&a&&e.Akn(c.$implicit.style)}function Be(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw().toggleNode(r.nodeId)}),e._UZ(1,"div",16),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw();e.Akn(i.style),e.ekj("active",l.isNodeActive(i.nodeId))("available",l.isNodeAvailable(i.nodeId))}}var Qe=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n,o){var r;return(0,h.Z)(this,i),(r=t.call(this)).buildStorageService=l,r.slormancerDataService=n,r.slormancerCharacterModifierService=o,r.selectedAncestralLegacy=null,r.selectedAncestralLegacyChange=new e.vpe,r.BOUNDS_X={min:-200,max:200},r.BOUNDS_Y={min:-200,max:200},r.availableNodes=[],r.activeRealms=[],r.weldingShapes=[],r.lineShapes=[],r.zoneShapes=[],r.nodeShapes=[],r.character=null,r.position={x:0,y:0},r.scale=2,r.grabbed=!1,r.drawMap(),r}return(0,v.Z)(i,[{key:"onWheelUp",value:function(n){return this.scale=Math.max(1,Math.min(2,this.scale+(n.deltaY>0?-.2:.2))),!1}},{key:"onMouseDown",value:function(){this.grabbed=!0}},{key:"onMouseUp",value:function(){this.grabbed=!1}},{key:"onMouseMouve",value:function(n){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+n.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+n.movementY)))}},{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=null===o?null:o.character,n.updateMap()})}},{key:"drawMap",value:function(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,b.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,b.pb)(0,9),-72,52),this.addNodeShapes((0,b.pb)(0,9).map(function(n){return 10+2*n}),-82.8,92),this.addNodeShapes((0,b.pb)(0,9).map(function(n){return 11+2*n}),-61.2,92),this.addZoneShapes((0,b.pb)(10,19),-54,112),this.addZoneShapes((0,b.pb)(20,29),-72,150,!0),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,b.pb)(0,9).map(function(n){return 31+3*n}),-72,120),this.addNodeShapes((0,b.pb)(10,19).map(function(n){return 3*n}),-81,127),this.addNodeShapes((0,b.pb)(10,19).map(function(n){return 2+3*n}),-63,127),this.addZoneShapes((0,b.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,b.pb)(0,4).map(function(n){return 61+5*n}),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,42,45,46,49,50,53,54,57,58],-72,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181)}},{key:"updateMap",value:function(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){var n=null!==this.character?this.character.ancestralLegacies.activeNodes:[],o=ae.R.filter(function(r){return void 0!==r.nodes.find(function(s){return-1!==n.indexOf(s)})});this.character.ancestralLegacies.activeNodes.length<X.sD&&(this.availableNodes=[].concat((0,A.Z)(ae.m),(0,A.Z)(o.map(function(r){return r.nodes}).flat())).filter(M.mr)),this.activeRealms=o.map(function(r){return r.realm})}}},{key:"isNodeActive",value:function(n){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(n)}},{key:"isRealmActive",value:function(n){return-1!==this.activeRealms.indexOf(n)}},{key:"isNodeAvailable",value:function(n){return-1!==this.availableNodes.indexOf(n)}},{key:"isNodeSelected",value:function(n){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===n}},{key:"isAncestralLegacyEquipped",value:function(n){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(n)}},{key:"getAncestralLegacy",value:function(n){var o=null;return null!==this.character&&(o=(0,M.lA)(this.character.ancestralLegacies.ancestralLegacies.find(function(r){return r.id==n}))),o}},{key:"toggleNode",value:function(n){if(null!==this.character){var o;o=this.isNodeActive(n)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,n):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,n),this.buildStorageService.saveLayer(),o&&this.updateMap()}return!1}},{key:"selectAncestralLegacy",value:function(n){console.log(n),this.selectedAncestralLegacyChange.emit(n)}},{key:"addLineShapes",value:function(n,o,r,s){var d,g=360/n;(d=this.lineShapes).push.apply(d,(0,A.Z)((0,b.pb)(n).map(function(S){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(o+S*g)+"deg) translateX("+r+"px)"}}})))}},{key:"addWeldinghapes",value:function(n,o,r,s){var d,g=360/n;(d=this.weldingShapes).push.apply(d,(0,A.Z)((0,b.pb)(n).map(function(S){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(o+S*g)+"deg) translateX("+r+"px)"}}})))}},{key:"addZoneShapes",value:function(n,o,r){var s,d=this,g=arguments.length>3&&void 0!==arguments[3]&&arguments[3],S=360/n.length;(s=this.zoneShapes).push.apply(s,(0,A.Z)(n.map(function(m,N){var J=d.slormancerDataService.getAncestralRealmColor(m),K=d.slormancerDataService.getAncestralLegacyIdsFromRealm(m),le=o+N*S;return{style:{transform:"translate(-50%, -50%) rotate("+le+"deg) translateX("+r+"px)"},iconStyle:{transform:"rotate("+-le+"deg)"},large:g,realmId:m,ancestralLegacies:K,color:J}})))}},{key:"addNodeShapes",value:function(n,o,r){var s,d=n.length,g=360/d;(s=this.nodeShapes).push.apply(s,(0,A.Z)((0,b.pb)(d).map(function(S){return{style:{transform:"translate(-50%, -50%) rotate("+(o+S*g)+"deg) translateX("+r+"px)"},nodeId:(0,M.Be)(n[S],0)}})))}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(Le.o),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(t,i){1&t&&e.NdJ("wheel",function(n){return i.onWheelUp(n)})("mousedown",function(){return i.onMouseDown()})("mouseup",function(){return i.onMouseUp()})("mouseleave",function(){return i.onMouseUp()})("mousemove",function(n){return i.onMouseMouve(n)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","large","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e._UZ(5,"div",5),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,Je,3,10,"div",6),e.YNc(7,Ee,1,2,"div",7),e.YNc(8,Fe,1,2,"div",8),e.YNc(9,Be,2,6,"div",9),e.qZA(),e.qZA()),2&t&&(e.ekj("grabbed",i.grabbed),e.xp6(1),e.Udp("top",i.position.y+"px")("left",i.position.x+"px")("transform","scale("+i.scale+")"),e.xp6(5),e.Q6J("ngForOf",i.zoneShapes),e.xp6(1),e.Q6J("ngForOf",i.lineShapes),e.xp6(1),e.Q6J("ngForOf",i.weldingShapes),e.xp6(1),e.Q6J("ngForOf",i.nodeShapes))},directives:[f.sg,Ie.y],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid #d5ad48;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.large[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),a}(),He=u(9065);function Ye(a,c){if(1&a&&e._UZ(0,"div",9),2&a){var t=c.$implicit,i=e.oxw();e.ekj("unlocked",i.isPointUnlock(t))}}var je=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n,o){var r;return(0,h.Z)(this,i),(r=t.call(this)).buildStorageService=l,r.slormancerAncestralLegacyService=n,r.messageService=o,r.ANCESTRAL_LEGACY_POINTS=(0,b.pb)(X.JY),r.character=null,r.selectedAncestralLegacy=null,r}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=null===o?null:o.character,n.selectDefaultAncestralLegacy()})}},{key:"selectDefaultAncestralLegacy",value:function(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){var n=(0,M.lA)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===n?null:(0,M.lA)(this.character.ancestralLegacies.ancestralLegacies[n])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,M.lA)(this.character.ancestralLegacies.ancestralLegacies[0]))}}},{key:"isPointUnlock",value:function(n){return n<X.sD}},{key:"optimizeAncestralLegacies",value:function(){if(null!==this.character){var o,n=(0,G.Z)(this.character.ancestralLegacies.ancestralLegacies);try{for(n.s();!(o=n.n()).done;){var r=o.value;r.baseRank=r.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(r,r.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(r)}}catch(s){n.e(s)}finally{n.f()}this.buildStorageService.saveLayer(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(Ue.O),e.Y36(W.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(t,i){1&t&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",0),e.TgZ(3,"div",1),e.YNc(4,Ye,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return i.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA(),e.qZA(),e.TgZ(7,"div",4),e.TgZ(8,"div",5),e.TgZ(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(n){return i.selectedAncestralLegacy=n}),e.qZA(),e.qZA(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(4),e.Q6J("ngForOf",i.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",i.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",i.selectedAncestralLegacy))},directives:[k.a8,k.dn,f.sg,q.Hw,Y.gM,Qe,He.q],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;flex-grow:1}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:500px}mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),a}(),R=u(7399),Re=u(3729);function De(a,c){if(1&a&&e._UZ(0,"app-attribute-line",2),2&a){var t=c.$implicit,i=e.oxw(2);e.Q6J("iconShift",t%2==0)("attribute",i.attributes.allocated[t])("remainingPoints",i.attributes.remainingPoints)}}function Ve(a,c){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"p"),e._uU(3),e.qZA(),e.YNc(4,De,1,3,"app-attribute-line",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(3),e.AsE("",t.attributes.remainingPoints,"/",t.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}var Ge=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=l,n.ALL_ATTRIBUTES=R.A,n.attributes=null,n}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.attributes=null===o?null:o.character.attributes})}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(t,i){1&t&&e.YNc(0,Ve,5,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==i.attributes)},directives:[f.O5,k.a8,k.dn,f.sg,Re.g],styles:["mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),a}(),$e=function(){var a=(0,v.Z)(function c(){(0,h.Z)(this,c),this.character=null});return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,i){1&t&&e._uU(0,"TODO")},styles:[""]}),a}(),We=function(){var a=(0,v.Z)(function c(){(0,h.Z)(this,c),this.character=null});return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,i){1&t&&e._uU(0,"TODO TURRET")},styles:[""]}),a}();function Xe(a,c){if(1&a&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&a){var t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function ze(a,c){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function Ke(a,c){if(1&a&&e._UZ(0,"app-defense-calc",6),2&a){var t=e.oxw(2);e.Q6J("character",t.character)}}function et(a,c){if(1&a&&e._UZ(0,"app-turret-syndrome-calc",6),2&a){var t=e.oxw(2);e.Q6J("character",t.character)}}function tt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card"),e.TgZ(2,"mat-card-content"),e.TgZ(3,"mat-form-field",1),e.TgZ(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(n){return e.CHM(t),e.oxw().currentCalc=n}),e.YNc(7,Xe,2,2,"mat-option",3),e.qZA(),e.qZA(),e.YNc(8,ze,2,0,"p",0),e.YNc(9,Ke,1,1,"app-defense-calc",4),e.YNc(10,et,1,1,"app-turret-syndrome-calc",4),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(6),e.Q6J("ngModel",i.currentCalc),e.xp6(1),e.Q6J("ngForOf",i.options),e.xp6(1),e.Q6J("ngIf",null===i.currentCalc),e.xp6(1),e.Q6J("ngIf",i.currentCalc===i.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",i.currentCalc===i.CalcPage.TurretSyndrome)}}var I=function(){return(a=I||(I={}))[a.Defense=0]="Defense",a[a.TurretSyndrome=1]="TurretSyndrome",I;var a}(),nt=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=l,n.CalcPage=I,n.character=null,n.options=[{value:I.Defense,label:"Defenses"},{value:I.TurretSyndrome,label:"Turret"}],n.currentCalc=null,n.buildStorageService.layerChanged.pipe((0,x.R)(n.unsubscribe)).subscribe(function(o){return n.character=null===o?null:o.character}),n}return(0,v.Z)(i)}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(t,i){1&t&&e.YNc(0,tt,11,5,"main",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[f.O5,k.a8,k.dn,C.KE,C.hX,L.gD,p.JJ,p.On,f.sg,F.ey,$e,We],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),a}(),it=u(9635),oe=u(4440),at=u(4425);function ot(a,c){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function rt(a,c){if(1&a&&e._UZ(0,"app-compare-view",9),2&a){var t=e.oxw(2);e.Q6J("differences",t.differences)}}function lt(a,c){if(1&a&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&a){var t=c.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function ct(a,c){if(1&a&&e._UZ(0,"app-main-stats",2),2&a){var t=e.oxw(2);e.Q6J("stats",t.layerControl.value.character.stats)}}function st(a,c){if(1&a&&(e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA(),e.qZA(),e.TgZ(6,"mat-card",3),e.TgZ(7,"mat-card-content"),e.YNc(8,ot,2,0,"p",0),e.YNc(9,rt,1,1,"app-compare-view",4),e.qZA(),e.qZA(),e.TgZ(10,"mat-card",1),e.TgZ(11,"mat-card-content"),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,lt,2,2,"mat-option",7),e.qZA(),e.qZA(),e.YNc(17,ct,1,1,"app-main-stats",8),e.qZA(),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(4),e.Oqu(t.currentLayer.name),e.xp6(1),e.Q6J("stats",t.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===t.differences),e.xp6(1),e.Q6J("ngIf",null!==t.differences),e.xp6(6),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layers),e.xp6(1),e.Q6J("ngIf",t.layerControl.value)}}var ut=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n){var o;return(0,h.Z)(this,i),(o=t.call(this)).buildStorageService=l,o.slormancerCharacterComparatorService=n,o.differences=null,o.currentLayer=null,o.layers=[],o.config=null,o.layerControl=new p.NI(0),o.buildStorageService.buildChanged.pipe((0,x.R)(o.unsubscribe)).subscribe(function(r){o.layers=null===r?[]:r.layers,o.layerControl.setValue(o.layers[0])}),o.buildStorageService.layerChanged.pipe((0,x.R)(o.unsubscribe)).subscribe(function(r){if(o.currentLayer=r,null!==r){var s=o.layers.indexOf(r);-1!==s&&(o.layerControl.setValue(o.layers[0===s&&o.layers.length>1?1:0]),o.updateDifferences())}}),o.layerControl.valueChanges.subscribe(function(){return o.updateDifferences()}),o}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"updateDifferences",value:function(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(it.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(t,i){1&t&&e.YNc(0,st,18,7,"main",0),2&t&&e.Q6J("ngIf",null!==i.currentLayer&&i.layers.length>0)},directives:[f.O5,k.a8,k.dn,oe.w,at.$,C.KE,C.hX,L.gD,p.JJ,p.oH,f.sg,F.ey],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a}(),dt=u(1093),pt=u(648),z=u(2469),gt=u(7446);function mt(a,c){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function ft(a,c){if(1&a&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,mt,2,1,"mat-icon",5),e.qZA()),2&a){var t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function _t(a,c){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){var t=c.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function vt(a,c){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function ht(a,c){if(1&a&&(e.TgZ(0,"mat-form-field",3),e.TgZ(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,_t,2,2,"mat-option",8),e.qZA(),e.YNc(5,vt,2,1,"mat-icon",5),e.qZA()),2&a){var t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.config.values),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function yt(a,c){if(1&a&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&a){var t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function bt(a,c){if(1&a&&(e.TgZ(0,"mat-checkbox",10),e.TgZ(1,"label"),e._uU(2),e.YNc(3,yt,2,1,"mat-icon",11),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.Q6J("formControl",t.control)("checked",t.control.value),e.xp6(2),e.hij(" ",t.config.label," "),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function Ct(a,c){if(1&a&&(e.ynx(0),e.YNc(1,ft,5,3,"mat-form-field",1),e.YNc(2,ht,6,4,"mat-form-field",1),e.YNc(3,bt,4,4,"mat-checkbox",2),e.BQk()),2&a){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNumber(t.config)),e.xp6(1),e.Q6J("ngIf",t.isEnum(t.config)),e.xp6(1),e.Q6J("ngIf",t.isBoolean(t.config))}}var kt=function(){var a=function(){function c(){(0,h.Z)(this,c),this.control=null,this.config=null}return(0,v.Z)(c,[{key:"isNumber",value:function(i){return"number"===i.type}},{key:"isEnum",value:function(i){return"enum"===i.type}},{key:"isBoolean",value:function(i){return"boolean"===i.type}}]),c}();return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(t,i){1&t&&e.YNc(0,Ct,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",null!==i.config&&null!==i.control)},directives:[f.O5,C.KE,C.hX,Q.Nt,p.wV,p.Fj,p.JJ,p.oH,q.Hw,C.R9,Y.gM,L.gD,f.sg,F.ey,gt.oG],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),a}();function St(a,c){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var t=c.$implicit,i=e.oxw(3);e.Q6J("control",i.getControl(t))("config",t)}}function xt(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,St,1,2,"app-config-entry",3),e.BQk()),2&a){var t=c.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function Mt(a,c){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,xt,4,2,"ng-container",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.GENERAL_CONFIG_GROUPS)}}function Zt(a,c){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var t=c.$implicit,i=e.oxw(4);e.Q6J("control",i.getControl(t))("config",t)}}function Ot(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Zt,1,2,"app-config-entry",3),e.BQk()),2&a){var t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function Tt(a,c){if(1&a&&(e.ynx(0),e.YNc(1,Ot,4,2,"ng-container",0),e.BQk()),2&a){var t=c.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isGroupValid(t))}}function Pt(a,c){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,Tt,2,1,"ng-container",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.CLASS_CONFIG_GROUPS)}}function At(a,c){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var t=c.$implicit,i=e.oxw(4);e.Q6J("control",i.getControl(t))("config",t)}}function wt(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,At,1,2,"app-config-entry",3),e.BQk()),2&a){var t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function qt(a,c){if(1&a&&(e.ynx(0),e.YNc(1,wt,4,2,"ng-container",0),e.BQk()),2&a){var t=c.$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngIf",i.isGroupValid(t))}}function Ut(a,c){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.YNc(2,qt,2,1,"ng-container",1),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.EQUIPMENT_CONFIG_GROUPS)}}var Lt=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=l,n.EXTRA_VALIDATORS={percent_missing_health:[p.kI.max(100)],percent_missing_mana:[p.kI.max(100)],enemy_percent_missing_health:[p.kI.max(100)],block_stacks:[p.kI.max(100)],nimble_champion_stacks:[p.kI.max(200)],nimble_chaserenitympion_stacks:[p.kI.max(12)]},n.GENERAL_CONFIG_GROUPS=[{title:"General",condition:function(){return!0},configurations:[{type:"number",key:"all_other_characters_level",label:"Sum of all your other character's level"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"elder_slorms",label:"Total Elder Slorm"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"number",key:"highest_slorm_temple_floor",label:"Highest Slorm Temple floor"},{type:"boolean",key:"idle",label:"Are you idle ?"}]},{title:"When in Combat",condition:function(){return!0},configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Active inner fires"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"}]},{title:"Enemy",condition:function(){return!0},configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"}]}],n.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:function(r){return 2===r.reaper.id},configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:function(r){return 105===r.reaper.id},configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:function(r){return 73===r.reaper.id},configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:function(r){return 74===r.reaper.id},configurations:[{type:"boolean",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:function(r){return 75===r.reaper.id},configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:function(r){return 79===r.reaper.id||80===r.reaper.id},configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:function(r){return 82===r.reaper.id||83===r.reaper.id},configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:function(r){return 111===r.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:function(r){return 112===r.reaper.id},configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:function(r){return 113===r.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Concentrated Inner Strength)",condition:function(r){return 23===r.reaper.id},configurations:[{type:"boolean",key:"concentration_buff",label:"Is Concentration active"}]},{title:"Reaper (Fate-Crusher)",condition:function(r){return 53===r.reaper.id},configurations:[{type:"number",key:"fulgurorn_dedication_stacks",label:"Fulgurorn's Dedication stacks"}]},{title:"Reaper (Inner Fireworks)",condition:function(r){return 57===r.reaper.id||58===r.reaper.id},configurations:[{type:"number",key:"enemy_inner_weakness_stacks",label:"Inner weakness stacks on enemy",info:'Effect is applied if "use enemy state" is checked'}]},{title:"Reaper (Temple Keeper)",condition:function(r){return 84===r.reaper.id},configurations:[{type:"boolean",key:"show_temple_keeper_as_totem",label:"Display temple keeper stats on it's totem's form"}]},{title:"Reaper (Slorm Temple)",condition:function(r){return 85===r.reaper.id},configurations:[{type:"boolean",key:"ultima_momentum_buff",label:"Is Ultima-Momentum active"},{type:"boolean",key:"show_elder_inner_fire_damage",label:"Show inner fire damages as elder"}]},{title:"Reaper (Giant Slayer)",condition:function(r){return 91===r.reaper.id||92===r.reaper.id},configurations:[{type:"number",key:"enemy_enfeeble_stacks",label:"Enemy enfeeble stacks",info:'Effect is applied if "use enemy state" is checked'},{type:"number",key:"apex_predator_stacks",label:"Apex predator stacks"},{type:"number",key:"enfeeble_stacks_in_radius",label:"Enfeeble stacks on enemies around you"}]},{title:"Gold Armor",condition:function(r){return n.hasActivable(r,0)},configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:function(r){return n.hasActivable(r,3)},configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:function(r){return n.hasActivable(r,6)},configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Summon Skeleton Squire",condition:function(r){return n.hasActivable(r,17)},configurations:[{type:"number",key:"summoned_skeleton_squires",label:"Number of summoned skeleton squires"},{type:"boolean",key:"always_summon_maximum_skeleton_squires",label:"Always summon the maximum number of skeleton squires",info:"Based on your available mana after other skills reservation. Override fixed number of summoned skeleton squires"},{type:"number",key:"minimum_unreserved_mana",label:"Minimum unreserved mana",info:"When summoning skeleton squires, will make sure that your mana do not go under this value. When exporting a build, this value is set to your highest skill cost."}]},{title:"Summon Prime Totem",condition:function(r){return n.hasActivable(r,19)},configurations:[{type:"boolean",key:"add_totem_tag_to_prime_totem_skills",label:"Apply totem tags to Wood Sticks / Arrow Shots / Arcane Missiles"}]},{title:"Exposed Armor",condition:function(r){return n.hasActivable(r,23)},configurations:[{type:"boolean",key:"exposed_armor_buff",label:"Is exposed armor active"}]},{title:"Willpower",condition:function(r){return n.isAttributeAllocated(r,R.a.Willpower)},configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:function(r){return n.isAttributeAllocated(r,R.a.Dexterity)},configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:function(r){return n.isAttributeAllocated(r,R.a.Bravery)},configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:function(r){return n.isAncestralLegacyEquipped(r,80)},configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:function(r){return n.isAncestralLegacyEquipped(r,85)},configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:function(r){return n.isAncestralLegacyEquipped(r,33)},configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:function(r){return n.isAncestralLegacyEquipped(r,106)},configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:function(r){return n.isAncestralLegacyEquipped(r,82)},configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Faith of the Ancients",condition:function(r){return n.hasLegendaryEffect(r,31)},configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:function(r){return n.hasLegendaryEffect(r,29)},configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:function(r){return n.hasLegendaryEffect(r,75)},configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:function(r){return n.hasLegendaryEffect(r,77)},configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:function(r){return n.hasLegendaryEffect(r,26)},configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:function(r){return n.hasLegendaryEffect(r,63)},configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:function(r){return n.hasLegendaryEffect(r,16)},configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:function(r){return n.hasLegendaryEffect(r,16)},configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:function(r){return n.hasLegendaryEffect(r,76)},configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"A Path to the First",condition:function(r){return n.hasLegendaryEffect(r,32)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:function(r){return n.hasLegendaryEffect(r,33)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:function(r){return n.hasLegendaryEffect(r,74)},configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]}],n.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:function(r){return r.heroClass===_.i.Warrior},configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,0)},configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,2)},configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,3)},configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,4)},configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,5)},configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,6)},configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,7)},configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,9)},configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:function(r){return n.isSkillEquipped(r,_.i.Warrior,10)},configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:function(r){return r.heroClass===_.i.Huntress},configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,0)},configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,1)},configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,2)},configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,3)},configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,4)},configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,5)},configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,7)},configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,8)},configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:function(r){return n.isSkillEquipped(r,_.i.Huntress,9)},configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:function(r){return r.heroClass===_.i.Mage},configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,0)},configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,2)},configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,4)},configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,6)},configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,7)},configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,8)},configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:z.H.Arcanic,label:"Arcanic"},{value:z.H.Temporal,label:"Temporal"},{value:z.H.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:function(r){return n.isSkillEquipped(r,_.i.Mage,9)},configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],n.config=null,n}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.config=this.generateConfigurationForm();var o=this.buildStorageService.getBuild();console.log(null===o?null:o.configuration),this.config.valueChanges.subscribe(function(){return n.updateConfiguration()})}},{key:"generateConfigurationForm",value:function(){for(var n={},o=this.buildStorageService.getBuild(),s=0,d=Object.entries(null!==o?o.configuration:dt.g);s<d.length;s++){var g=d[s],S=[p.kI.required].concat((0,A.Z)((0,M.Be)(this.EXTRA_VALIDATORS[g[0]],[])));"number"===g[1]&&S.push(p.kI.min(0)),n[g[0]]=new p.NI(g[1],S)}return new p.cw(n)}},{key:"updateConfiguration",value:function(){var n=this.buildStorageService.getBuild();null!==this.config&&null!==n&&this.config.valid&&(n.configuration=this.config.value,this.buildStorageService.saveBuild())}},{key:"getControl",value:function(n){return null===this.config?null:this.config.get(n.key)}},{key:"isGroupValid",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&n.condition(o.character)}},{key:"hasActivable",value:function(n,o){return[n.activable1,n.activable2,n.activable3,n.activable4].filter(M.BX).some(function(r){return!("element"in r)&&r.id===o})}},{key:"isSkillEquipped",value:function(n,o,r){return n.heroClass===o&&[n.primarySkill,n.secondarySkill,n.supportSkill].filter(M.BX).some(function(s){return s.id===r})}},{key:"isAttributeAllocated",value:function(n,o){var r=n.attributes.allocated[o];return r.rank>0||r.bonusRank>0}},{key:"isAncestralLegacyEquipped",value:function(n,o){return n.ancestralLegacies.activeAncestralLegacies.includes(o)}},{key:"hasLegendaryEffect",value:function(n,o){return pt.PL.map(function(r){var s;return null===(s=n.gear[r])||void 0===s?void 0:s.legendaryEffect}).filter(M.BX).some(function(r){return r.id===o})}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(t,i){1&t&&(e.TgZ(0,"main"),e.YNc(1,Mt,3,1,"mat-card",0),e.YNc(2,Pt,3,1,"mat-card",0),e.YNc(3,Ut,3,1,"mat-card",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==i.config),e.xp6(1),e.Q6J("ngIf",null!==i.config),e.xp6(1),e.Q6J("ngIf",null!==i.config))},directives:[f.O5,k.a8,k.dn,f.sg,kt],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a}(),It=u(7614),Nt=u(916),Jt=u(4591),Et=u(3662);function Ft(a,c){1&a&&e._UZ(0,"img",8)}function Bt(a,c){1&a&&e._UZ(0,"img",8)}function Qt(a,c){1&a&&e._UZ(0,"img",8)}function Ht(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"app-skill-slot",4),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updatePrimarySkill(n)}),e.qZA(),e.qZA(),e.YNc(4,Ft,1,0,"img",5),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"div",3),e.TgZ(7,"app-skill-slot",4),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateSecondarySkill(n)}),e.qZA(),e.qZA(),e.YNc(8,Bt,1,0,"img",5),e.qZA(),e.TgZ(9,"div",2),e.TgZ(10,"div",3),e.TgZ(11,"app-skill-slot",6),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateSupportSkill(n)}),e.qZA(),e.qZA(),e.YNc(12,Qt,1,0,"img",5),e.qZA(),e.TgZ(13,"div",2),e.TgZ(14,"div",3),e.TgZ(15,"app-activable-slot",7),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateActivable1(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(16,"div",2),e.TgZ(17,"div",3),e.TgZ(18,"app-activable-slot",7),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateActivable2(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"div",2),e.TgZ(20,"div",3),e.TgZ(21,"app-activable-slot",7),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateActivable3(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",2),e.TgZ(23,"div",3),e.TgZ(24,"app-activable-slot",7),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateActivable4(n)}),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Q6J("skill",i.character.primarySkill),e.xp6(1),e.Q6J("ngIf",null!==i.character.primarySkill&&i.character.primarySkill.locked),e.xp6(3),e.Q6J("skill",i.character.secondarySkill),e.xp6(1),e.Q6J("ngIf",null!==i.character.secondarySkill&&i.character.secondarySkill.locked),e.xp6(3),e.Q6J("skill",i.character.supportSkill)("support",!0),e.xp6(1),e.Q6J("ngIf",null!==i.character.supportSkill&&i.character.supportSkill.locked),e.xp6(3),e.Q6J("activable",i.character.activable1),e.xp6(3),e.Q6J("activable",i.character.activable2),e.xp6(3),e.Q6J("activable",i.character.activable3),e.xp6(3),e.Q6J("activable",i.character.activable4)}}var Yt=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n){var o;return(0,h.Z)(this,i),(o=t.call(this)).buildStorageService=l,o.slormancerCharacterModifierService=n,o.character=null,o}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=null!==o&&null!==o.character?o.character:null})}},{key:"updatePrimarySkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,n),this.buildStorageService.saveLayer())}},{key:"updateSecondarySkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,n),this.buildStorageService.saveLayer())}},{key:"updateSupportSkill",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,n),this.buildStorageService.saveLayer())}},{key:"updateActivable1",value:function(n){null!==this.character&&this.character.activable1!==n&&(null!==n&&(this.character.activable2===n?this.character.activable2=this.character.activable1:this.character.activable3===n?this.character.activable3=this.character.activable1:this.character.activable4===n&&(this.character.activable4=this.character.activable1)),this.character.activable1=n,this.buildStorageService.saveLayer())}},{key:"updateActivable2",value:function(n){null!==this.character&&this.character.activable2!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable2:this.character.activable3===n?this.character.activable3=this.character.activable2:this.character.activable4===n&&(this.character.activable4=this.character.activable2)),this.character.activable2=n,this.buildStorageService.saveLayer())}},{key:"updateActivable3",value:function(n){null!==this.character&&this.character.activable3!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable3:this.character.activable2===n?this.character.activable2=this.character.activable3:this.character.activable4===n&&(this.character.activable4=this.character.activable3)),this.character.activable3=n,this.buildStorageService.saveLayer())}},{key:"updateActivable4",value:function(n){null!==this.character&&this.character.activable4!==n&&(null!==n&&(this.character.activable1===n?this.character.activable1=this.character.activable4:this.character.activable3===n?this.character.activable3=this.character.activable4:this.character.activable2===n&&(this.character.activable2=this.character.activable4)),this.character.activable4=n,this.buildStorageService.saveLayer())}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-bar"]],features:[e.qOj],decls:1,vars:1,consts:[["class","skill-bar",4,"ngIf"],[1,"skill-bar"],[1,"skill-slot"],[1,"skill-slot-border"],[3,"skill","changed"],["class","locked","src","assets/img/icon//locked.png",4,"ngIf"],[3,"skill","support","changed"],[3,"activable","changed"],["src","assets/img/icon//locked.png",1,"locked"]],template:function(t,i){1&t&&e.YNc(0,Ht,25,11,"div",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[f.O5,Jt.X,Et.Z],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;border:3px solid #3c3c3c;padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]{position:relative}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid #3c3c3c}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;pointer-events:none}"]}),a}(),jt=u(6538);function Rt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);var n=e.oxw(2);return n.dragInItemsGroup(n.character.inventory)})("mouseleave",function(){return e.CHM(t),e.oxw(2).dragOutItemsGroup()})("mouseup",function(){e.CHM(t);var n=e.oxw(2);return n.dragDrop(n.character.inventory)}),e._uU(1,"Bag"),e.qZA()}if(2&a){var i=e.oxw(2);e.ekj("drag-on",i.isDragging&&i.itemGroupBeingDraggedOn===i.character.inventory)("drag-possible",i.itemGroupDragDropPossible)("drag-impossible",!i.itemGroupDragDropPossible)}}function Dt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(o){var s=e.CHM(t).index;return e.oxw(2).updateIventoryItem(s,o)}),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw(2);e.Q6J("item",i)("character",l.character)}}function Vt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);var s=e.oxw().$implicit;return e.oxw(2).dragInItemsGroup(s)})("mouseleave",function(){return e.CHM(t),e.oxw(3).dragOutItemsGroup()})("mouseup",function(){e.CHM(t);var s=e.oxw().$implicit;return e.oxw(2).dragDrop(s)}),e._uU(1),e.qZA()}if(2&a){var i=e.oxw(),l=i.$implicit,n=i.index,o=e.oxw(2);e.ekj("drag-on",o.isDragging&&o.itemGroupBeingDraggedOn===l)("drag-possible",o.itemGroupDragDropPossible)("drag-impossible",!o.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",n+1,"")}}function Gt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(o){var s=e.CHM(t).index,d=e.oxw().index;return e.oxw(2).updateSharedInventoryItem(d,s,o)}),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw(3);e.Q6J("item",i)("character",l.character)}}function $t(a,c){if(1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,Vt,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,Gt,1,2,"app-item-slot",9),e.qZA(),e.qZA()),2&a){var t=c.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function Wt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content"),e.TgZ(5,"app-character-equipment",2),e.NdJ("changed",function(){return e.CHM(t),e.oxw().gearChanged()}),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3),e.TgZ(8,"app-reaper-slot",2),e.NdJ("changed",function(n){return e.CHM(t),e.oxw().updateReaper(n)}),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-card",5),e.TgZ(12,"mat-card-content"),e.TgZ(13,"mat-tab-group",6),e.TgZ(14,"mat-tab"),e.YNc(15,Rt,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,Dt,1,2,"app-item-slot",9),e.qZA(),e.qZA(),e.YNc(18,$t,4,1,"mat-tab",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Oqu(i.character.fullName),e.xp6(2),e.Q6J("character",i.character),e.xp6(3),e.Q6J("character",i.character),e.xp6(9),e.Q6J("ngForOf",i.character.inventory),e.xp6(1),e.Q6J("ngForOf",i.character.sharedInventory)}}var Xt=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n){var o;return(0,h.Z)(this,i),(o=t.call(this)).buildStorageService=l,o.itemMoveService=n,o.character=null,o.isDragging=!1,o.itemGroupBeingDraggedOn=null,o.itemGroupDragDropPossible=!1,o.itemMoveService.draggingItem.pipe((0,x.R)(o.unsubscribe)).subscribe(function(r){return o.isDragging=r}),o}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){return n.character=null===o?null:o.character})}},{key:"dragInItemsGroup",value:function(n){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==n.find(function(o){return null===o}),this.itemGroupBeingDraggedOn=n)}},{key:"dragOutItemsGroup",value:function(){this.itemGroupBeingDraggedOn=null}},{key:"dragDrop",value:function(n){this.itemMoveService.moveDraggedItemToItemGroup(n)}},{key:"gearChanged",value:function(){this.buildStorageService.saveLayer()}},{key:"updateReaper",value:function(n){null!==this.character&&(this.character.reaper=n,this.buildStorageService.saveLayer())}},{key:"updateIventoryItem",value:function(n,o){null!==this.character&&(this.character.inventory[n]=o,this.buildStorageService.saveLayer())}},{key:"updateSharedInventoryItem",value:function(n,o,r){if(null!==this.character){var s=this.character.sharedInventory[n];s&&(s[o]=r,this.buildStorageService.saveBuild())}}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(te.v))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(t,i){1&t&&e.YNc(0,Wt,19,5,"main",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[f.O5,k.a8,k.dn,It.q,Nt.R,Yt,E.SP,E.uX,E.uD,f.sg,jt.y],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:12px;background-color:#161412;border:3px solid #3c3c3c}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),a}(),D=u(7255),re=u(5016),B=u(2525);function zt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.maximize(l.selectedSkill)}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function Kt(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.equipSupport(l.selectedSkill)}),e._uU(1," Equip as Support skill "),e.qZA()}}function en(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.equipPrimary(l.selectedSkill)}),e._uU(1," Equip as Primary skill "),e.qZA()}}function tn(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);var l=e.oxw(2);return l.equipSecondary(l.selectedSkill)}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function nn(a,c){if(1&a&&(e.YNc(0,zt,2,0,"button",4),e.YNc(1,Kt,2,0,"button",4),e.YNc(2,en,2,0,"button",4),e.YNc(3,tn,2,0,"button",4)),2&a){var t=e.oxw();e.Q6J("ngIf",null!==t.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSupportSkill(t.selectedSkill)&&t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedPrimarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSecondarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill))}}var an=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n,o,r){var s;return(0,h.Z)(this,i),(s=t.call(this)).buildStorageService=l,s.messageService=n,s.slormancerSkillService=o,s.slormancerCharacterModifierService=r,s.selectedSkill=null,s.menu=null,s}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"openSettings",value:function(){return null!==this.menu&&this.menu.openMenu(),!1}},{key:"isSupport",value:function(n){return n.skill.type===D.W.Support}},{key:"maximize",value:function(n){if(null!==this.buildStorageService.getLayer()){n.skill.baseLevel=n.skill.maxLevel,this.slormancerSkillService.updateSkillModel(n.skill);var s,r=(0,G.Z)(n.upgrades);try{for(r.s();!(s=r.n()).done;){var d=s.value;d.baseRank=d.maxRank,this.slormancerSkillService.updateUpgrade(d)}}catch(g){r.e(g)}finally{r.f()}this.buildStorageService.saveLayer(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name)}}},{key:"equipSupport",value:function(n){var o=this.buildStorageService.getLayer();null!==o&&this.slormancerCharacterModifierService.setSupportSkill(o.character,n.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.buildStorageService.saveLayer())}},{key:"equipPrimary",value:function(n){var o=this.buildStorageService.getLayer();null!==o&&this.slormancerCharacterModifierService.setPrimarySkill(o.character,n.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.buildStorageService.saveLayer())}},{key:"equipSecondary",value:function(n){var o=this.buildStorageService.getLayer();null!==o&&this.slormancerCharacterModifierService.setSecondarySkill(o.character,n.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+n.skill.icon+'.png"/> '+n.skill.name),this.buildStorageService.saveLayer())}},{key:"isEquippedSupportSkill",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&o.character.supportSkill===n.skill}},{key:"isEquippedPrimarySkill",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&o.character.primarySkill===n.skill}},{key:"isEquippedSecondarySkill",value:function(n){var o=this.buildStorageService.getLayer();return null!==o&&o.character.secondarySkill===n.skill}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(W.e),e.Y36(re.A),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-settings-skills"]],viewQuery:function(t,i){var l;1&t&&e.Gf(B.p6,7),2&t&&e.iGM(l=e.CRH())&&(i.menu=l.first)},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(t,i){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return i.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,nn,4,4,"ng-template",3),e.qZA()),2&t){var l=e.MAs(3);e.Q6J("matMenuTriggerFor",l),e.xp6(2),e.Q6J("overlapTrigger",!0)}},directives:[q.Hw,B.p6,B.VK,B.KA,f.O5,B.OP],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),a}(),on=u(411),rn=u(9536),ln=u(8849);function cn(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",5),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw(2).incrementSkill(r)})("contextmenu",function(){var r=e.CHM(t).$implicit;return e.oxw(2).decrementSkill(r)}),e.qZA(),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw(2);e.ekj("selected",l.isSkillSelected(i)),e.xp6(1),e.ekj("equipped",l.isSkillEquipped(i)),e.Q6J("src","assets/img/icon/"+i.skill.iconLarge+".png",e.LSH)}}function sn(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"img",6),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw(2).incrementSkill(r)})("contextmenu",function(){var r=e.CHM(t).$implicit;return e.oxw(2).decrementSkill(r)}),e.qZA(),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw(2);e.ekj("selected",l.isSkillSelected(i)),e.xp6(1),e.ekj("equipped",l.isSkillEquipped(i)),e.Q6J("src","assets/img/icon/"+i.skill.icon+".png",e.LSH)}}function un(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){var r=e.CHM(t).$implicit;return e.oxw(4).incrementUpgrade(r)})("contextmenu",function(){var r=e.CHM(t).$implicit;return e.oxw(4).decrementUpgrade(r)}),e.qZA()}if(2&a){var i=c.$implicit,l=e.oxw(4);e.Q6J("upgrade",i)("equipped",l.isUpgradeEquipped(i))}}function dn(a,c){if(1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,un,1,2,"app-upgrade-slot",19),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.oxw(3);e.xp6(2),e.hij(" ",t," "),e.xp6(2),e.Q6J("ngForOf",i.getLineUpgrades(t))}}function pn(a,c){if(1&a&&(e.TgZ(0,"div",7),e.TgZ(1,"div",8),e._UZ(2,"app-settings-skills",9),e._UZ(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11),e.TgZ(5,"div",12),e.YNc(6,dn,5,2,"div",13),e.qZA(),e.qZA(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",t.selectedSkill),e.xp6(1),e.Q6J("skill",t.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",t.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",t.selectedUpgrade)}}function gn(a,c){if(1&a&&(e.TgZ(0,"mat-card"),e.TgZ(1,"mat-card-content"),e.TgZ(2,"div",1),e.YNc(3,cn,2,5,"div",2),e.YNc(4,sn,2,5,"div",2),e.qZA(),e.YNc(5,pn,9,4,"div",3),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.getSupportSkills(t.character)),e.xp6(1),e.Q6J("ngForOf",t.getActiveSkills(t.character)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill)}}var mn=function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l,n,o){var r;return(0,h.Z)(this,i),(r=t.call(this)).buildStorageService=l,r.slormancerSkillService=n,r.slormancerCharacterModifierService=o,r.character=null,r.selectedSkill=null,r.selectedUpgrade=null,r.selectedSkillLines=[],r}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.character=null===o?null:o.character,n.updateSelectedSkill()})}},{key:"updateSelectedSkill",value:function(){var n=this.character,o=this.selectedSkill,r=null;null===n?r=null:null===o?r=(0,M.lA)(null!==n.supportSkill?n.skills.find(function(s){return s.skill===n.supportSkill}):n.skills[0]):null===(r=(0,M.lA)(n.skills.find(function(s){return s.skill.id===o.skill.id})))&&(r=(0,M.lA)(n.skills[0])),this.selectSkill(r)}},{key:"getSupportSkills",value:function(n){return n.skills.filter(function(o){return o.skill.type===D.W.Support})}},{key:"getActiveSkills",value:function(n){return n.skills.filter(function(o){return o.skill.type===D.W.Active})}},{key:"isSkillEquipped",value:function(n){return null!==this.character&&(this.character.primarySkill===n.skill||this.character.secondarySkill===n.skill||this.character.supportSkill===n.skill)}},{key:"isEquippedSupportSkill",value:function(n){return null!==this.character&&this.character.supportSkill===n.skill}},{key:"isEquippedPrimarySkill",value:function(n){return null!==this.character&&this.character.primarySkill===n.skill}},{key:"isEquippedSecondarySkill",value:function(n){return null!==this.character&&this.character.secondarySkill===n.skill}},{key:"isSkillSelected",value:function(n){return this.selectedSkill===n}},{key:"selectSkill",value:function(n){this.selectedSkill!==n&&(this.selectedSkill=n,this.selectedSkillLines=null===n?[]:n.upgrades.map(function(o){return o.line}).filter(M.mr).sort(),this.selectedUpgrade=null===n?null:(0,M.lA)(n.upgrades[0]))}},{key:"incrementSkill",value:function(n){return this.selectedSkill===n?n.skill.baseLevel<n.skill.maxLevel&&(n.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(n.skill),this.buildStorageService.saveLayer(),console.log(n)):this.selectSkill(n),!1}},{key:"decrementSkill",value:function(n){return this.selectedSkill===n?n.skill.baseLevel>1&&(n.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(n.skill),this.buildStorageService.saveLayer(),console.log(n)):this.selectSkill(n),!1}},{key:"getLineUpgrades",value:function(n){var o=[];return null!==this.selectedSkill&&(o=this.selectedSkill.upgrades.filter(function(r){return r.line===n})),o}},{key:"isUpgradeEquipped",value:function(n){var o=!1;return null!==this.selectedSkill&&(o=void 0!==this.selectedSkill.selectedUpgrades.find(function(r){return n.id===r})),o}},{key:"incrementUpgrade",value:function(n){if(null!==this.selectedSkill&&null!==this.character){var o=!1;this.selectedUpgrade!==n&&(this.selectedUpgrade=n,o=!0),this.isUpgradeEquipped(n)?!o&&n.baseRank<n.maxRank&&(n.baseRank++,this.slormancerSkillService.updateUpgrade(n),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,n),0===n.baseRank&&(n.baseRank=1,this.slormancerSkillService.updateUpgrade(n)),this.buildStorageService.saveLayer()),console.log(n)}return!1}},{key:"decrementUpgrade",value:function(n){if(null!==this.selectedSkill&&null!==this.character){var o=!1;this.selectedUpgrade!==n&&(this.selectedUpgrade=n,o=!0),this.isUpgradeEquipped(n)?!o&&n.baseRank>1&&(n.baseRank--,this.slormancerSkillService.updateUpgrade(n),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,n),this.buildStorageService.saveLayer()),console.log(n)}return!1}},{key:"isSupport",value:function(n){return n.skill.type===D.W.Support}},{key:"equipSupport",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,n.skill),this.buildStorageService.saveLayer())}},{key:"equipPrimary",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,n.skill),this.buildStorageService.saveLayer())}},{key:"equipSecondary",value:function(n){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,n.skill),this.buildStorageService.saveLayer())}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x),e.Y36(re.A),e.Y36(j.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(t,i){1&t&&e.YNc(0,gn,6,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==i.character)},directives:[f.O5,k.a8,k.dn,f.sg,an,on.O,rn.A,ln.B],styles:['.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),a}(),fn=u(8376),_n=u(8313);function vn(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function hn(a,c){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function yn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,i.mergedStat.suffix,!0)," ")}}function bn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,yn,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,i.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Cn(a,c){if(1&a&&(e.ynx(0),e.YNc(1,bn,10,4,"div",13),e.BQk()),2&a){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function kn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(t.value,i.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Sn(a,c){if(1&a&&(e.ynx(0),e.YNc(1,kn,10,3,"div",13),e.BQk()),2&a){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function xn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," ")}}function Mn(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,vn,2,0,"span",2),e.qZA(),e.YNc(9,hn,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Cn,2,1,"ng-container",12),e.YNc(15,Sn,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,xn,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Zn(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function On(a,c){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function Tn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,"%",!0)," ")}}function Pn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Tn,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function An(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(t.value,"%")," "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function wn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," ")}}function qn(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Zn,2,0,"span",2),e.qZA(),e.YNc(9,On,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Pn,10,4,"div",15),e.YNc(15,An,10,3,"div",15),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,wn,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Un(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Ln(a,c){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function In(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,"%",!0)," ")}}function Nn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,In,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Jn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=c.$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",t.value,"% "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function En(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Un,2,0,"span",2),e.qZA(),e.YNc(9,Ln,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Nn,10,4,"div",15),e.YNc(15,Jn,10,3,"div",15),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function Fn(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Bn(a,c){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA(),e.qZA())}function Qn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(2).$implicit,i=e.oxw(3);e.xp6(1),e.hij(" ",i.maxValueToString(t.value,i.mergedStat.suffix,!0)," ")}}function Hn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Qn,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(4),e.hij(" ",i.minValueToString(t.value,i.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",i.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Yn(a,c){if(1&a&&(e.ynx(0),e.YNc(1,Hn,10,4,"div",13),e.BQk()),2&a){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function jn(a,c){if(1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA(),e.qZA()),2&a){var t=e.oxw().$implicit,i=e.oxw(3);e.xp6(5),e.hij(" +",i.valueToString(t.value,i.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",i.getSource(t.source)," "),e.xp6(2),e.hij(" ",i.getSourceName(t.source)," ")}}function Rn(a,c){if(1&a&&(e.ynx(0),e.YNc(1,jn,10,3,"div",13),e.BQk()),2&a){var t=c.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function Dn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," ")}}function Vn(a,c){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.TgZ(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Fn,2,0,"span",2),e.qZA(),e.YNc(9,Bn,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA(),e.qZA(),e.YNc(14,Yn,2,1,"ng-container",12),e.YNc(15,Rn,2,1,"ng-container",12),e.TgZ(16,"div",5),e.TgZ(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Dn,2,1,"div",8),e._UZ(22,"div",9),e._UZ(23,"div",10),e.qZA(),e.BQk()),2&a){var t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Gn(a,c){1&a&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function $n(a,c){if(1&a&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula"),e.YNc(3,Gn,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.totalHasMinMax(t.mergedStat)),e.xp6(2),e.hij(" ",t.getMinFormula(t.mergedStat)," ")}}function Wn(a,c){if(1&a&&(e.TgZ(0,"div",5),e.TgZ(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA(),e.qZA()),2&a){var t=e.oxw(2);e.xp6(4),e.hij(" ",t.getMaxFormula(t.mergedStat)," ")}}function Xn(a,c){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var t=e.oxw(2);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.total,t.mergedStat.suffix)," ")}}function zn(a,c){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Mn,24,7,"ng-container",2),e.YNc(2,qn,24,7,"ng-container",2),e.YNc(3,En,16,5,"ng-container",2),e.YNc(4,Vn,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,$n,6,2,"div",4),e.YNc(8,Wn,5,1,"div",4),e.TgZ(9,"div",5),e.TgZ(10,"div",6),e._uU(11,"Total"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,Xn,2,1,"div",8),e._UZ(15,"div",9),e._UZ(16,"div",10),e.qZA(),e.qZA()),2&a){var t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasFlatValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.percent.length>0||t.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.multiplier.length>0||t.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",t.hasFlatExtraValues(t.mergedStat)),e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)&&t.totalHasMinMax(t.mergedStat)),e.xp6(5),e.hij(" ",t.minValueToString(t.mergedStat.total,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}var Kn=function(){var a=function(){function c(t,i){(0,h.Z)(this,c),this.slormancerTranslateService=t,this.slormancerStatUpdaterService=i,this.mergedStat=null,this.percent=!1}return(0,v.Z)(c,[{key:"translate",value:function(i){return this.slormancerTranslateService.translate(i)}},{key:"getSource",value:function(i){var l="";return"synergy"in i?l="Synergy":"character"in i?l="Character":"skill"in i?l="Skill":"upgrade"in i?l="Upgrade":"item"in i?l="Item":"ancestralLegacy"in i?l="Ancestral Legacy":"attribute"in i?l="Attribute":"reaper"in i?l="Reaper":"activable"in i?l="Activable":"mechanic"in i?l="Mechanic":"classMechanic"in i?l="Class Mechanic":"ultimatum"in i&&(l="Ultimatum"),l}},{key:"getSourceName",value:function(i){var l="";return"synergy"in i?l=i.synergy:"skill"in i?l=i.skill.nameLabel:"upgrade"in i?l=i.upgrade.name:"item"in i?l=i.item.name:"ancestralLegacy"in i?l=i.ancestralLegacy.name:"attribute"in i?l=i.attribute.attributeName:"reaper"in i?l=i.reaper.name:"activable"in i?l=i.activable.name:"mechanic"in i?l=i.mechanic.name:"classMechanic"in i?l=i.classMechanic.name:"ultimatum"in i&&(l=i.ultimatum.title),l}},{key:"valueToString",value:function(i,l){return"number"==typeof i?(0,b.NM)(i,5)+l:(0,b.NM)(i.min,5)+l+"-"+(0,b.NM)(i.max,5)+l}},{key:"minValueToString",value:function(i,l){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,b.NM)("number"==typeof i?i:i.min,5);return(o>=0&&n?"+":"")+o+l}},{key:"maxValueToString",value:function(i,l){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,b.NM)("number"==typeof i?i:i.max,5);return(o>=0&&n?"+":"")+o+l}},{key:"getTotalFlat",value:function(i){return this.slormancerStatUpdaterService.getTotalFlat(i)}},{key:"getTotalFlatExtra",value:function(i){return this.slormancerStatUpdaterService.getTotalFlatExtra(i)}},{key:"getTotalPercent",value:function(i){var l=this.slormancerStatUpdaterService.addNumberValues(i.values.percent.map(function(o){return o.value})),n=l+this.slormancerStatUpdaterService.addNumberValues(i.values.maxPercent.map(function(o){return o.value}));return l!==n?{min:l,max:n}:l}},{key:"getTotalFlatPercent",value:function(i){var l=this.slormancerStatUpdaterService.getTotalFlatAndPercent(i);return this.valueToString(l,i.suffix)}},{key:"getTotal",value:function(i){var l=this.slormancerStatUpdaterService.getTotal(i);return this.valueToString(l,i.suffix)}},{key:"hasFlatValues",value:function(i){return i.values.flat.filter(function(l){return!l.extra}).length>0||i.values.max.filter(function(l){return!l.extra}).length>0}},{key:"hasFlatExtraValues",value:function(i){return i.values.flat.filter(function(l){return l.extra}).length>0||i.values.max.filter(function(l){return l.extra}).length>0}},{key:"hasPercentValues",value:function(i){return i.values.percent.length>0||i.values.maxPercent.length>0}},{key:"hasMultiplierValues",value:function(i){return i.values.multiplier.length>0||i.values.maxMultiplier.length>0}},{key:"showFormula",value:function(i){return(i.values.flat.filter(function(d){return!d.extra}).length>0||i.values.max.filter(function(d){return!d.extra}).length>0?1:0)+(i.values.percent.length>0||i.values.maxPercent.length>0?1:0)+(i.values.multiplier.length>0||i.values.maxMultiplier.length>0?1:0)+(i.values.flat.filter(function(d){return d.extra}).length>0||i.values.max.filter(function(d){return d.extra}).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(i.stat)?1:0)>=2}},{key:"totalHasMinMax",value:function(i){return"number"!=typeof i.total}},{key:"getMinFormula",value:function(i){var l=this.slormancerStatUpdaterService.getTotal(i),n=this.slormancerStatUpdaterService.getTotalFlat(i),o=this.slormancerStatUpdaterService.getTotalPercent(i),r=i.values.multiplier.map(function(g){return g.value}),s=this.slormancerStatUpdaterService.getTotalFlatExtra(i);n="number"==typeof n?n:n.min,o="number"==typeof o?o:o.min,s="number"==typeof s?s:s.min;var d=(0,b.NM)("number"==typeof l?l:l.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(i.stat)?d+="(1 - "+[n,o].concat((0,A.Z)(r)).filter(function(g){return 0!==g}).map(function(g){return Math.max(0,100-g)/100}).join(" * ")+") * 100":(d+="round( "+this.valueToString(n,i.suffix)+[o].concat((0,A.Z)(r)).filter(function(g){return 0!==g}).map(function(g){return" * "+(g+100)/100}).join("")+" )",0!==s&&(d+=s>0?" + "+s:" - "+Math.abs(s))),d}},{key:"getMaxFormula",value:function(i){var l=this.slormancerStatUpdaterService.getTotal(i),n=this.slormancerStatUpdaterService.getTotalFlat(i),o=this.slormancerStatUpdaterService.getTotalPercent(i),r=this.slormancerStatUpdaterService.getTotalFlatExtra(i),s=i.values.multiplier.map(function(g){return g.value});n="number"==typeof n?n:n.max,o="number"==typeof o?o:o.max,r="number"==typeof r?r:r.max;var d=(0,b.NM)("number"==typeof l?l:l.max,5)+" = ";return d+="round( "+this.valueToString(n,i.suffix)+[o].concat((0,A.Z)(s)).filter(function(g){return 0!==g}).map(function(g){return" * "+(g+100)/100}).join("")+" )",0!==r&&(d+=r>0?" + "+r:" - "+Math.abs(r)),d}}]),c}();return a.\u0275fac=function(t){return new(t||a)(e.Y36(_n.n),e.Y36(fn.C))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(t,i){1&t&&e.YNc(0,zn,17,9,"div",0),2&t&&e.Q6J("ngIf",null!==i.mergedStat)},directives:[f.O5,f.sg],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),a}();function ei(a,c){if(1&a){var t=e.EpF();e.TgZ(0,"main"),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-content"),e.TgZ(3,"app-main-stats",2),e.NdJ("selected",function(n){return e.CHM(t),e.oxw().selectMergedStat(n)}),e.qZA(),e.qZA(),e.qZA(),e.TgZ(4,"mat-card"),e.TgZ(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA(),e.qZA(),e.qZA()}if(2&a){var i=e.oxw();e.xp6(3),e.Q6J("stats",i.stats),e.xp6(3),e.Q6J("mergedStat",i.selectedMergedStat)}}var ni=[{path:"",component:qe,children:[{path:"inventory",component:Xt},{path:"skills",component:mn},{path:"ancestral-legacies",component:je},{path:"attributes",component:Ge},{path:"stats",component:function(){var a=function(c){(0,Z.Z)(i,c);var t=(0,O.Z)(i);function i(l){var n;return(0,h.Z)(this,i),(n=t.call(this)).buildStorageService=l,n.stats=null,n.selectedMergedStat=null,n}return(0,v.Z)(i,[{key:"ngOnInit",value:function(){var n=this;this.buildStorageService.layerChanged.pipe((0,x.R)(this.unsubscribe)).subscribe(function(o){n.stats=null===o?null:o.character.stats})}},{key:"selectMergedStat",value:function(n){this.selectedMergedStat=n}}]),i}(T.B);return a.\u0275fac=function(t){return new(t||a)(e.Y36(P.x))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(t,i){1&t&&e.YNc(0,ei,7,2,"main",0),2&t&&e.Q6J("ngIf",null!==i.stats)},directives:[f.O5,k.a8,k.dn,oe.w,Kn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a}()},{path:"config",component:Lt},{path:"compare",component:ut},{path:"calcs",component:nt},{path:"**",redirectTo:"inventory"}]}],ii=function(){var a=(0,v.Z)(function c(){(0,h.Z)(this,c)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[w.Bz.forChild(ni)],w.Bz]}),a}(),ai=function(){var a=(0,v.Z)(function c(){(0,h.Z)(this,c)});return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[f.ez,ce.m,ii]]}),a}()}}]);