"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[508],{6446:(k,T,f)=>{f.d(T,{B:()=>O});var t=f(7579),i=f(5e3);let O=(()=>{class l{constructor(){this.unsubscribe=new t.x}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275cmp=i.Xpm({type:l,selectors:[["ng-component"]],decls:0,vars:0,template:function(e,a){},encapsulation:2}),l})()},8003:(k,T,f)=>{f.d(T,{K:()=>a});var t=f(5e3),i=f(9808);function O(c,g){if(1&c&&t._UZ(0,"div",11),2&c){const p=t.oxw(2);t.Q6J("innerHTML",p.activable.genresLabel,t.oJD)}}function l(c,g){if(1&c&&t._UZ(0,"div",12),2&c){const p=t.oxw(2);t.Q6J("innerHTML",p.activable.cooldownLabel,t.oJD)}}function o(c,g){if(1&c&&t._UZ(0,"div",13),2&c){const p=t.oxw(2);t.Q6J("innerHTML",p.activable.costLabel,t.oJD)}}function e(c,g){if(1&c&&(t.TgZ(0,"div",1)(1,"div",2)(2,"div",3),t._UZ(3,"img",4),t.qZA(),t.TgZ(4,"div",5)(5,"div",6),t._uU(6),t.qZA(),t.YNc(7,O,1,1,"div",7),t.YNc(8,l,1,1,"div",8),t.YNc(9,o,1,1,"div",9),t.qZA()(),t._UZ(10,"div",10),t.qZA()),2&c){const p=t.oxw();t.xp6(3),t.Q6J("src",p.activable.icon,t.LSH),t.xp6(3),t.Oqu(p.activable.name),t.xp6(1),t.Q6J("ngIf",null!==p.activable.genresLabel),t.xp6(1),t.Q6J("ngIf",null!==p.activable.cooldownLabel),t.xp6(1),t.Q6J("ngIf",null!==!p.activable.costLabel),t.xp6(1),t.Q6J("innerHTML",p.activable.description,t.oJD)}}let a=(()=>{class c{constructor(){this.activable=null,this.reinforcment=0}}return c.\u0275fac=function(p){return new(p||c)},c.\u0275cmp=t.Xpm({type:c,selectors:[["app-activable-view"]],inputs:{activable:"activable",reinforcment:"reinforcment"},decls:1,vars:1,consts:[["class","activable",4,"ngIf"],[1,"activable"],[1,"activable-head"],[1,"icon"],["loading","lazy",3,"src"],[1,"info"],[1,"name"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(p,C){1&p&&t.YNc(0,e,11,6,"div",0),2&p&&t.Q6J("ngIf",null!==C.activable)},dependencies:[i.O5],styles:[".activable[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;padding:5px;display:flex;flex-direction:column;gap:5px}.activable[_ngcontent-%COMP%]  .value{color:#ce4607}.activable[_ngcontent-%COMP%]  .range, .activable[_ngcontent-%COMP%]  .range .value, .activable[_ngcontent-%COMP%]  .details, .activable[_ngcontent-%COMP%]  .details .value, .activable[_ngcontent-%COMP%]  .formula, .activable[_ngcontent-%COMP%]  .formula .value{color:#686868}.activable[_ngcontent-%COMP%]  .affixes .range, .activable[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.activable[_ngcontent-%COMP%]  .life{color:#257539}.activable[_ngcontent-%COMP%]  .mana{color:#3397dd}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;border:4px solid rgb(190,135,31);min-width:44px;min-height:44px;width:44px;height:44px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:4px solid black;min-width:36px;min-height:36px;width:36px;height:36px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:19px;color:#ce4607}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.activable[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),c})()},3761:(k,T,f)=>{f.d(T,{F:()=>I});var t=f(3075),i=f(2349),O=f(3359),l=f(311),o=f(5e3),e=f(1671);function a(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"div",21)(1,"button",22),o.NdJ("click",function(){o.CHM(m);const S=o.oxw(2);return o.KtG(S.addBasicAffix())}),o.TgZ(2,"mat-icon"),o._uU(3,"add"),o.qZA()()()}}function c(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"app-item-edit-stat",24),o.NdJ("remove",function(){o.CHM(m);const S=o.oxw().$implicit,Z=o.oxw(3);return o.KtG(Z.removeAffix(S))}),o.qZA()}if(2&s){const m=o.oxw().$implicit,h=o.oxw(3);o.Q6J("form",m)("itemBase",h.item.base)("itemLevel",h.item.level)("itemReinforcment",h.item.reinforcment)("alreadyUsedStats",h.alreadyUsedStats)("removable",!1)}}function g(s,A){if(1&s&&(o.ynx(0),o.YNc(1,c,1,6,"app-item-edit-stat",23),o.BQk()),2&s){const m=A.$implicit,h=o.oxw(3);o.xp6(1),o.Q6J("ngIf",h.isBasicStat(m))}}function p(s,A){if(1&s&&(o.ynx(0),o.YNc(1,g,2,1,"ng-container",14),o.BQk()),2&s){const m=o.oxw(2);o.xp6(1),o.Q6J("ngForOf",m.form.controls.affixes.controls)}}function C(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"div",21)(1,"button",22),o.NdJ("click",function(){o.CHM(m);const S=o.oxw(3);return o.KtG(S.addMagicAffix())}),o.TgZ(2,"mat-icon"),o._uU(3,"add"),o.qZA()()()}}function n(s,A){if(1&s&&(o.TgZ(0,"div",9)(1,"div",10),o._uU(2," Magic Stats : "),o.qZA(),o.YNc(3,C,4,0,"div",11),o.qZA()),2&s){const m=o.oxw(2);o.xp6(3),o.Q6J("ngIf",m.hasBasicStats()&&!m.hasMaximumMagicStats())}}function _(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"app-item-edit-stat",24),o.NdJ("remove",function(){o.CHM(m);const S=o.oxw().$implicit,Z=o.oxw(2);return o.KtG(Z.removeAffix(S))}),o.qZA()}if(2&s){const m=o.oxw().$implicit,h=o.oxw(2);o.Q6J("form",m)("itemBase",h.item.base)("itemLevel",h.item.level)("itemReinforcment",h.item.reinforcment)("alreadyUsedStats",h.alreadyUsedStats)("removable",!h.hasRareStats()&&!h.hasEpicStats())}}function u(s,A){if(1&s&&(o.ynx(0),o.YNc(1,_,1,6,"app-item-edit-stat",23),o.BQk()),2&s){const m=A.$implicit,h=o.oxw(2);o.xp6(1),o.Q6J("ngIf",h.isMagicStat(m))}}function x(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"div",21)(1,"button",22),o.NdJ("click",function(){o.CHM(m);const S=o.oxw(3);return o.KtG(S.addRareAffix())}),o.TgZ(2,"mat-icon"),o._uU(3,"add"),o.qZA()()()}}function b(s,A){if(1&s&&(o.TgZ(0,"div",9)(1,"div",10),o._uU(2," Rare Stats : "),o.qZA(),o.YNc(3,x,4,0,"div",11),o.qZA()),2&s){const m=o.oxw(2);o.xp6(3),o.Q6J("ngIf",m.hasMagicStats()&&!m.hasMaximumRareStats())}}function J(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"app-item-edit-stat",24),o.NdJ("remove",function(){o.CHM(m);const S=o.oxw().$implicit,Z=o.oxw(2);return o.KtG(Z.removeAffix(S))}),o.qZA()}if(2&s){const m=o.oxw().$implicit,h=o.oxw(2);o.Q6J("form",m)("itemBase",h.item.base)("itemLevel",h.item.level)("itemReinforcment",h.item.reinforcment)("alreadyUsedStats",h.alreadyUsedStats)("removable",!h.hasEpicStats())}}function P(s,A){if(1&s&&(o.ynx(0),o.YNc(1,J,1,6,"app-item-edit-stat",23),o.BQk()),2&s){const m=A.$implicit,h=o.oxw(2);o.xp6(1),o.Q6J("ngIf",h.isRareStat(m))}}function R(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"div",21)(1,"button",22),o.NdJ("click",function(){o.CHM(m);const S=o.oxw(3);return o.KtG(S.addEpicAffix())}),o.TgZ(2,"mat-icon"),o._uU(3,"add"),o.qZA()()()}}function w(s,A){if(1&s&&(o.TgZ(0,"div",9)(1,"div",10),o._uU(2," Epic Stats : "),o.qZA(),o.YNc(3,R,4,0,"div",11),o.qZA()),2&s){const m=o.oxw(2);o.xp6(3),o.Q6J("ngIf",m.hasRareStats()&&!m.hasMaximumEpicStats())}}function N(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"app-item-edit-stat",24),o.NdJ("remove",function(){o.CHM(m);const S=o.oxw().$implicit,Z=o.oxw(2);return o.KtG(Z.removeAffix(S))}),o.qZA()}if(2&s){const m=o.oxw().$implicit,h=o.oxw(2);o.Q6J("form",m)("itemBase",h.item.base)("itemLevel",h.item.level)("itemReinforcment",h.item.reinforcment)("alreadyUsedStats",h.alreadyUsedStats)("removable",!0)}}function B(s,A){if(1&s&&(o.ynx(0),o.YNc(1,N,1,6,"app-item-edit-stat",23),o.BQk()),2&s){const m=A.$implicit,h=o.oxw(2);o.xp6(1),o.Q6J("ngIf",h.isEpicStat(m))}}function M(s,A){if(1&s){const m=o.EpF();o.TgZ(0,"form",1),o.NdJ("submit",function(){o.CHM(m);const S=o.oxw();return o.KtG(S.submit())}),o.TgZ(1,"mat-dialog-content")(2,"div",2),o._UZ(3,"app-item-view",3),o.qZA(),o.TgZ(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),o._uU(8,"Item level"),o.qZA(),o._UZ(9,"input",7),o.TgZ(10,"mat-error"),o._uU(11),o.qZA()(),o.TgZ(12,"mat-form-field",6)(13,"mat-label"),o._uU(14,"Item reinforcment"),o.qZA(),o._UZ(15,"input",8),o.TgZ(16,"mat-error"),o._uU(17,"Reinforcment must be >= 0"),o.qZA()()(),o.TgZ(18,"div",9)(19,"div",10),o._uU(20," Base Stats : "),o.qZA(),o.YNc(21,a,4,0,"div",11),o.qZA(),o.YNc(22,p,2,1,"ng-container",12),o.YNc(23,n,4,1,"div",13),o.YNc(24,u,2,1,"ng-container",14),o.YNc(25,b,4,1,"div",13),o.YNc(26,P,2,1,"ng-container",14),o.YNc(27,w,4,1,"div",13),o.YNc(28,B,2,1,"ng-container",14),o._UZ(29,"app-item-edit-legendary-effect",15)(30,"app-item-edit-buff-reaper",16)(31,"app-item-edit-buff-skill",17)(32,"app-item-edit-buff-attribute",16),o.qZA()(),o.TgZ(33,"mat-dialog-actions")(34,"button",18),o._uU(35,"Cancel"),o.qZA(),o.TgZ(36,"button",19),o.NdJ("click",function(){o.CHM(m);const S=o.oxw();return o.KtG(S.reset())}),o._uU(37,"Reset"),o.qZA(),o.TgZ(38,"button",20),o._uU(39,"Apply"),o.qZA()()()}if(2&s){const m=o.oxw();o.Q6J("formGroup",m.form),o.xp6(3),o.Q6J("item",m.item)("details",!0),o.xp6(6),o.Q6J("max",m.MAX_ITEM_LEVEL),o.xp6(2),o.hij("Level must be between 1 and ",m.MAX_ITEM_LEVEL,""),o.xp6(10),o.Q6J("ngIf",!m.hasMaximumBasicStats()),o.xp6(1),o.Q6J("ngIf",m.hasBasicStats()),o.xp6(1),o.Q6J("ngIf",m.hasBasicStats()),o.xp6(1),o.Q6J("ngForOf",m.form.controls.affixes.controls),o.xp6(1),o.Q6J("ngIf",m.hasMagicStats()),o.xp6(1),o.Q6J("ngForOf",m.form.controls.affixes.controls),o.xp6(1),o.Q6J("ngIf",m.hasRareStats()),o.xp6(1),o.Q6J("ngForOf",m.form.controls.affixes.controls),o.xp6(1),o.Q6J("base",m.item.base)("itemReinforcment",m.item.reinforcment)("heroClass",m.item.heroClass)("form",m.form.controls.legendary),o.xp6(1),o.Q6J("form",m.form.controls.reaper),o.xp6(1),o.Q6J("heroClass",m.item.heroClass)("form",m.form.controls.skill),o.xp6(1),o.Q6J("form",m.form.controls.attribute)}}let I=(()=>{class s{constructor(m,h,S,Z,H,D,F,Q,U){this.dialogRef=m,this.slormancerCharacterUpdaterService=h,this.slormancerItemService=S,this.slormancerAffixService=Z,this.slormancerLegendaryEffectService=H,this.slormancerTranslationService=D,this.formOptionsService=F,this.buildStorageService=Q,this.MAX_ITEM_LEVEL=O.Sb7,this.maxBasicStats=0,this.alreadyUsedStats=[],this.form=new t.cw({level:new t.NI(0,{nonNullable:!0,validators:[t.kI.required,t.kI.min(1),t.kI.max(this.MAX_ITEM_LEVEL),t.kI.pattern(/^[0-9]+$/)]}),reinforcment:new t.NI(0,{nonNullable:!0,validators:[t.kI.required,t.kI.min(0),t.kI.pattern(/^[0-9]+$/)]}),affixes:new t.Oe([]),legendary:new t.cw({id:new t.NI(null),value:new t.NI(0,{nonNullable:!0,validators:[t.kI.required,t.kI.min(0),t.kI.pattern(/^[0-9]+$/)]})}),reaper:new t.cw({smith:new t.NI(null),value:new t.NI(0,{nonNullable:!0,validators:[t.kI.required,t.kI.min(0),t.kI.pattern(/^[0-9]+$/)]})}),attribute:new t.cw({attribute:new t.NI(null),value:new t.NI(0,{nonNullable:!0,validators:[t.kI.required,t.kI.min(0),t.kI.pattern(/^[0-9]+$/)]})}),skill:new t.cw({skill:new t.NI(null),value:new t.NI(0,{nonNullable:!0,validators:[t.kI.required,t.kI.min(0),t.kI.pattern(/^[0-9]+$/)]})})}),this.originalItem=U.item,this.maxLevel=U.maxLevel,this.form.valueChanges.subscribe(()=>{this.updatePreview(),this.alreadyUsedStats=this.form.controls.affixes.getRawValue().map(V=>V.stat)}),this.form.controls.affixes.valueChanges.subscribe(()=>{this.sortAffixes()}),this.character=U.character,this.reset()}reset(){this.item=this.slormancerItemService.getEquipableItemClone(this.originalItem),this.form.controls.affixes.clear({emitEvent:!1});for(const m of this.item.affixes)this.form.controls.affixes.push(this.getAffixForm(),{emitEvent:!1});this.form.reset({level:this.item.level,reinforcment:this.item.reinforcment,affixes:this.item.affixes.map(m=>({pure:m.isPure,purity:m.pure,rarity:m.rarity,stat:m.craftedEffect.effect.stat,value:m.craftedEffect.craftedValue})),legendary:{id:null===this.item.legendaryEffect?null:this.item.legendaryEffect.id,value:null===this.item.legendaryEffect?0:this.item.legendaryEffect.value},attribute:{attribute:null===this.item.attributeEnchantment?null:this.item.attributeEnchantment.craftedAttribute,value:null===this.item.attributeEnchantment?0:this.item.attributeEnchantment.craftedValue},reaper:{smith:null===this.item.reaperEnchantment?null:this.item.reaperEnchantment.craftedReaperSmith,value:null===this.item.reaperEnchantment?0:this.item.reaperEnchantment.craftedValue},skill:{skill:null===this.item.skillEnchantment?null:this.item.skillEnchantment.craftedSkill,value:null===this.item.skillEnchantment?0:this.item.skillEnchantment.craftedValue}}),this.sortAffixes(),this.updatePreview()}submit(){this.form.valid&&this.dialogRef.close(this.item)}updatePreview(){const m=this.item;if(this.form.valid){const h=this.form.getRawValue();m.level=h.level,m.reinforcment=h.reinforcment,m.affixes=h.affixes.map(Z=>this.slormancerAffixService.getAffixFromStat(Z.stat,m.level,m.reinforcment,Z.rarity,Z.value,Z.pure?Z.purity:0)).filter(O.BXh),m.legendaryEffect=null===h.legendary.id?null:this.slormancerLegendaryEffectService.getLegendaryEffectById(h.legendary.id,h.legendary.value,m.reinforcment,m.heroClass),m.reaperEnchantment=null===h.reaper.smith?null:this.slormancerItemService.getReaperEnchantment(h.reaper.smith,h.reaper.value),m.skillEnchantment=null===h.skill.skill?null:this.slormancerItemService.getSkillEnchantment(h.skill.skill,h.skill.value),m.attributeEnchantment=null===h.attribute.attribute?null:this.slormancerItemService.getAttributeEnchantment(h.attribute.attribute,h.attribute.value),this.slormancerItemService.updateEquipableItemModel(m);const S=this.buildStorageService.getBuild();this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==S?S.configuration:O.g5j,!1,m),this.slormancerItemService.updateEquipableItemView(m)}}sortAffixes(){this.form.controls.affixes.controls.sort((m,h)=>(0,O.rR7)(this.slormancerTranslationService.translate(m.controls.stat.value),this.slormancerTranslationService.translate(h.controls.stat.value)))}getAffixForm(){return new t.cw({pure:new t.NI(!1,{nonNullable:!0,validators:t.kI.required}),purity:new t.NI(0,{nonNullable:!0,validators:t.kI.required}),rarity:new t.NI(O.uqS.Normal,{nonNullable:!0,validators:t.kI.required}),stat:new t.NI("",{nonNullable:!0,validators:t.kI.required}),value:new t.NI(0,{nonNullable:!0,validators:t.kI.required})})}affixToForm(m){const h=this.getAffixForm();return h.reset({pure:m.isPure,purity:m.pure,rarity:m.rarity,stat:m.craftedEffect.effect.stat,value:m.craftedEffect.craftedValue}),h}hasBasicStats(){return this.form.controls.affixes.controls.filter(m=>this.isBasicStat(m)).length>0}hasMaximumBasicStats(){return this.form.controls.affixes.controls.filter(m=>this.isBasicStat(m)).length>=this.maxBasicStats}hasMagicStats(){return this.form.controls.affixes.controls.filter(m=>this.isMagicStat(m)).length>0}hasMaximumMagicStats(){return this.form.controls.affixes.controls.filter(m=>this.isMagicStat(m)).length>=O.aHw}isBasicStat(m){return m.controls.rarity.value===O.uqS.Normal}isMagicStat(m){return m.controls.rarity.value===O.uqS.Magic}isRareStat(m){return m.controls.rarity.value===O.uqS.Rare}isEpicStat(m){return m.controls.rarity.value===O.uqS.Epic}hasRareStats(){return this.form.controls.affixes.controls.filter(m=>this.isRareStat(m)).length>0}hasMaximumRareStats(){return this.form.controls.affixes.controls.filter(m=>this.isRareStat(m)).length>=O.bm}hasEpicStats(){return this.form.controls.affixes.controls.filter(m=>this.isEpicStat(m)).length>0}hasMaximumEpicStats(){return this.form.controls.affixes.controls.filter(m=>this.isEpicStat(m)).length>=O.hcO}getAffix(m){return null===this.item?null:(0,O.lA$)(this.item.affixes[m])}removeAffix(m){this.form.controls.affixes.removeAt(this.form.controls.affixes.controls.indexOf(m)),this.updatePreview()}addAffix(m){const S=this.formOptionsService.getStatsOptions(this.item.base,m).filter(Z=>-1===this.alreadyUsedStats.indexOf(Z.value))[0];if(S){const Z=this.slormancerAffixService.getAffixFromStat(S.value,this.item.level,this.item.reinforcment,m,1e3);null!==Z&&(this.form.controls.affixes.push(this.affixToForm(Z)),this.updatePreview())}}addBasicAffix(){this.addAffix(O.uqS.Normal)}addMagicAffix(){this.addAffix(O.uqS.Magic)}addRareAffix(){this.addAffix(O.uqS.Rare)}addEpicAffix(){this.addAffix(O.uqS.Epic)}}return s.\u0275fac=function(m){return new(m||s)(o.Y36(i.so),o.Y36(O.Pdp),o.Y36(O.SgH),o.Y36(O.lRX),o.Y36(O.ArO),o.Y36(O.n6D),o.Y36(e.K),o.Y36(l.x),o.Y36(i.WI))},s.\u0275cmp=o.Xpm({type:s,selectors:[["app-item-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"preview"],[3,"item","details"],[1,"form"],[1,"form-line"],["appearance","outline"],["matInput","","type","number","step","1","min","1","formControlName","level",3,"max"],["matInput","","type","number","step","1","min","0","formControlName","reinforcment"],[1,"form-info"],[1,"label"],["class","add",4,"ngIf"],[4,"ngIf"],["class","form-info",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"base","itemReinforcment","heroClass","form"],[3,"form"],[3,"heroClass","form"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[3,"form","itemBase","itemLevel","itemReinforcment","alreadyUsedStats","removable","remove",4,"ngIf"],[3,"form","itemBase","itemLevel","itemReinforcment","alreadyUsedStats","removable","remove"]],template:function(m,h){1&m&&o.YNc(0,M,40,21,"form",0),2&m&&o.Q6J("ngIf",null!==h.form&&null!==h.item)},styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1;overflow:auto}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:370px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{align-items:stretch}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-basis:auto}}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;min-height:40px}"]}),s})()},4344:(k,T,f)=>{f.d(T,{F:()=>B});var t=f(3359),i=f(5e3),O=f(9808),l=f(8003);function o(M,I){1&M&&(i.TgZ(0,"div",20),i._uU(1,"Equipped"),i.qZA())}function e(M,I){if(1&M&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&M){const s=I.$implicit;i.Gre("marks-",s.pureMarks,""),i.ekj("pure",s.isPure),i.xp6(2),i.Tol(s.rarity),i.xp6(1),i.Q6J("innerHTML",s.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",s.statLabel,i.oJD)}}function a(M,I){if(1&M&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Base Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,e,5,10,"li",23),i.qZA()()),2&M){const s=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",s.getNormalAffixes())}}function c(M,I){if(1&M&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&M){const s=I.$implicit;i.Gre("marks-",s.pureMarks,""),i.ekj("pure",s.isPure),i.xp6(2),i.Tol(s.rarity),i.xp6(1),i.Q6J("innerHTML",s.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",s.statLabel,i.oJD)}}function g(M,I){if(1&M&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Magic Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,c,5,10,"li",23),i.qZA()()),2&M){const s=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",s.getMagicAffixes())}}function p(M,I){if(1&M&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&M){const s=I.$implicit;i.Gre("marks-",s.pureMarks,""),i.ekj("pure",s.isPure),i.xp6(2),i.Tol(s.rarity),i.xp6(1),i.Q6J("innerHTML",s.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",s.statLabel,i.oJD)}}function C(M,I){if(1&M&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Rare Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,p,5,10,"li",23),i.qZA()()),2&M){const s=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",s.getRareAffixes())}}function n(M,I){if(1&M&&(i.TgZ(0,"li")(1,"div",24),i._UZ(2,"div"),i.qZA(),i._UZ(3,"div",25)(4,"div",26),i.qZA()),2&M){const s=I.$implicit;i.Gre("marks-",s.pureMarks,""),i.ekj("pure",s.isPure),i.xp6(2),i.Tol(s.rarity),i.xp6(1),i.Q6J("innerHTML",s.valueLabel,i.oJD),i.xp6(1),i.Q6J("innerHTML",s.statLabel,i.oJD)}}function _(M,I){if(1&M&&(i.TgZ(0,"div",21)(1,"div",22),i._uU(2,"Epic Stats:"),i.qZA(),i.TgZ(3,"ul"),i.YNc(4,n,5,10,"li",23),i.qZA()()),2&M){const s=i.oxw(2);i.xp6(4),i.Q6J("ngForOf",s.getEpicAffixes())}}function u(M,I){if(1&M&&(i.TgZ(0,"span",35),i._uU(1),i.qZA()),2&M){const s=i.oxw(3);i.xp6(1),i.hij(" ",s.item.legendaryEffect.activable.name,"")}}function x(M,I){if(1&M&&(i.TgZ(0,"div",6),i._UZ(1,"img",8),i.qZA()),2&M){const s=i.oxw(3);i.xp6(1),i.Q6J("src",s.item.legendaryEffect.skillIcon,i.LSH)}}function b(M,I){if(1&M&&(i.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",22)(4,"div",24),i._UZ(5,"div",30),i.qZA(),i._uU(6),i.TgZ(7,"div",24),i._UZ(8,"div",30),i.qZA()(),i.TgZ(9,"div",31),i._UZ(10,"span",32),i.YNc(11,u,2,1,"span",33),i.qZA(),i.YNc(12,x,2,1,"div",34),i.qZA()()()),2&M){const s=i.oxw(2);i.xp6(6),i.hij(" ",s.item.legendaryEffect.title," "),i.xp6(4),i.Q6J("innerHTML",s.item.legendaryEffect.description,i.oJD),i.xp6(1),i.Q6J("ngIf",null!==s.item.legendaryEffect.activable),i.xp6(1),i.Q6J("ngIf",null!==s.item.legendaryEffect.skillIcon)}}function J(M,I){if(1&M&&i._UZ(0,"app-activable-view",36),2&M){const s=i.oxw(2);i.Q6J("activable",s.item.legendaryEffect.activable)("reinforcment",s.item.reinforcment)}}function P(M,I){if(1&M&&(i.TgZ(0,"div",37),i._UZ(1,"img",8)(2,"div",38),i.qZA()),2&M){const s=i.oxw(2);i.xp6(1),i.Q6J("src",s.item.reaperEnchantment.icon,i.LSH),i.xp6(1),i.Q6J("innerHTML",s.item.reaperEnchantment.label,i.oJD)}}function R(M,I){if(1&M&&(i.TgZ(0,"div",39),i._UZ(1,"img",8)(2,"div",38),i.qZA()),2&M){const s=i.oxw(2);i.xp6(1),i.Q6J("src",s.item.skillEnchantment.icon,i.LSH),i.xp6(1),i.Q6J("innerHTML",s.item.skillEnchantment.label,i.oJD)}}function w(M,I){if(1&M&&(i.TgZ(0,"div"),i._UZ(1,"img",8)(2,"div",38),i.qZA()),2&M){const s=i.oxw(2);i.Gre("buff attribute atr-",s.item.attributeEnchantment.craftedAttribute,""),i.xp6(1),i.Q6J("src",s.item.attributeEnchantment.icon,i.LSH),i.xp6(1),i.Q6J("innerHTML",s.item.attributeEnchantment.label,i.oJD)}}function N(M,I){if(1&M&&(i.TgZ(0,"div"),i._UZ(1,"div",1),i.TgZ(2,"div",2),i.YNc(3,o,2,0,"div",3),i.TgZ(4,"div",4)(5,"div",5)(6,"div",6),i._UZ(7,"img",7)(8,"img",8),i.qZA(),i.TgZ(9,"div",9),i._uU(10),i.qZA(),i.TgZ(11,"div",10),i._uU(12,"-"),i.qZA(),i.TgZ(13,"div",11),i._uU(14),i.qZA(),i.TgZ(15,"div"),i._uU(16),i.qZA()(),i._UZ(17,"div",12),i.TgZ(18,"div",13),i.YNc(19,a,5,1,"div",14),i.YNc(20,g,5,1,"div",14),i.YNc(21,C,5,1,"div",14),i.YNc(22,_,5,1,"div",14),i.qZA()(),i.YNc(23,b,13,4,"div",15),i.YNc(24,J,1,2,"app-activable-view",16),i.YNc(25,P,3,2,"div",17),i.YNc(26,R,3,2,"div",18),i.YNc(27,w,3,5,"div",19),i.qZA()()),2&M){const s=i.oxw();i.Gre("item ",s.item.rarity,""),i.ekj("nodetails",!s.details),i.xp6(1),i.Q6J("innerHTML",s.item.name,i.oJD),i.xp6(2),i.Q6J("ngIf",s.equipped),i.xp6(4),i.Q6J("src",s.item.itemIconBackground,i.LSH),i.xp6(1),i.Q6J("src",s.item.icon,i.LSH),i.xp6(2),i.Oqu(s.item.rarityLabel),i.xp6(4),i.Oqu(s.item.baseLabel),i.xp6(2),i.Oqu(s.item.levelLabel),i.xp6(3),i.Q6J("ngIf",s.getNormalAffixes().length>0),i.xp6(1),i.Q6J("ngIf",s.getMagicAffixes().length>0),i.xp6(1),i.Q6J("ngIf",s.getRareAffixes().length>0),i.xp6(1),i.Q6J("ngIf",s.getEpicAffixes().length>0),i.xp6(1),i.Q6J("ngIf",null!==s.item.legendaryEffect),i.xp6(1),i.Q6J("ngIf",null!==s.item.legendaryEffect&&null!==s.item.legendaryEffect.activable),i.xp6(1),i.Q6J("ngIf",null!==s.item.reaperEnchantment),i.xp6(1),i.Q6J("ngIf",null!==s.item.skillEnchantment),i.xp6(1),i.Q6J("ngIf",null!==s.item.attributeEnchantment)}}let B=(()=>{class M{constructor(){this.item=null,this.equipped=!1,this.details=!0}getNormalAffixes(){return null===this.item?[]:this.item.affixes.filter(s=>s.rarity===t.uqS.Normal)}getMagicAffixes(){return null===this.item?[]:this.item.affixes.filter(s=>s.rarity===t.uqS.Magic)}getRareAffixes(){return null===this.item?[]:this.item.affixes.filter(s=>s.rarity===t.uqS.Rare)}getEpicAffixes(){return null===this.item?[]:this.item.affixes.filter(s=>s.rarity===t.uqS.Epic)}}return M.\u0275fac=function(s){return new(s||M)},M.\u0275cmp=i.Xpm({type:M,selectors:[["app-item-view"]],inputs:{item:"item",equipped:"equipped",details:"details"},decls:1,vars:1,consts:[[3,"class","nodetails",4,"ngIf"],[1,"head",3,"innerHTML"],[1,"content"],["class","equipped",4,"ngIf"],[1,"main"],[1,"info"],[1,"icon"],[1,"background",3,"src"],[3,"src"],[1,"rarity"],[1,"split"],[1,"base"],[1,"separator"],[1,"stats"],["class","affixes",4,"ngIf"],["class","legendary-effect outer-border",4,"ngIf"],[3,"activable","reinforcment",4,"ngIf"],["class","buff reaper",4,"ngIf"],["class","buff skill",4,"ngIf"],[3,"class",4,"ngIf"],[1,"equipped"],[1,"affixes"],[1,"title"],[3,"pure","class",4,"ngFor","ngForOf"],[1,"bullet"],[1,"value",3,"innerHTML"],[1,"name",3,"innerHTML"],[1,"legendary-effect","outer-border"],[1,"border"],[1,"inner-border","legendary-description"],[1,"legendary"],[1,"description"],[3,"innerHTML"],["class","value",4,"ngIf"],["class","icon",4,"ngIf"],[1,"value"],[3,"activable","reinforcment"],[1,"buff","reaper"],[1,"info",3,"innerHTML"],[1,"buff","skill"]],template:function(s,A){1&s&&i.YNc(0,N,28,21,"div",0),2&s&&i.Q6J("ngIf",null!==A.item)},dependencies:[O.sg,O.O5,l.K],styles:['.item.normal[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#898989}.item.magic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#2e8726}.item.rare[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#176ab1}.item.epic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#c68d20}.item.legendary[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#ce4607}.item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#59513c}.item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#61462d}.item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#7791a1}.item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#efc65c}.item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#f5b250}.bullet[_ngcontent-%COMP%]{min-width:8px}.bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.bullet[_ngcontent-%COMP%]   div.normal[_ngcontent-%COMP%]{background-color:#898989}.bullet[_ngcontent-%COMP%]   div.magic[_ngcontent-%COMP%]{background-color:#2e8726}.bullet[_ngcontent-%COMP%]   div.rare[_ngcontent-%COMP%]{background-color:#176ab1}.bullet[_ngcontent-%COMP%]   div.epic[_ngcontent-%COMP%]{background-color:#c68d20}.bullet[_ngcontent-%COMP%]   div.legendary[_ngcontent-%COMP%]{background-color:#ce4607}.item[_ngcontent-%COMP%]{background-color:#151412;color:#fff;border:2px solid black;min-width:350px}.item[_ngcontent-%COMP%]  .legendary-effect .value, .item[_ngcontent-%COMP%]  .buff .value{color:#fff}.item[_ngcontent-%COMP%]  .range, .item[_ngcontent-%COMP%]  .range .value, .item[_ngcontent-%COMP%]  .details, .item[_ngcontent-%COMP%]  .details .value, .item[_ngcontent-%COMP%]  .formula, .item[_ngcontent-%COMP%]  .formula .value, .item[_ngcontent-%COMP%]  .pure-info, .item[_ngcontent-%COMP%]  .pure-info .value{color:#686868}.item[_ngcontent-%COMP%]  .affixes .range, .item[_ngcontent-%COMP%]  .affixes .value, .item[_ngcontent-%COMP%]  .pure-info{word-break:keep-all;white-space:nowrap}.item.nodetails[_ngcontent-%COMP%]     .details, .item.nodetails[_ngcontent-%COMP%]     .formula{display:none}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;text-transform:capitalize}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{min-width:80px;width:80px;display:flex;flex-direction:column;align-items:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{text-transform:capitalize;text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:56px;min-height:56px;width:56px;height:56px;border:4px solid black;margin-bottom:10px;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;min-width:2px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;list-style:disc inside;padding-left:0}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row;padding-left:5px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]{color:#46e7b0;background:linear-gradient(90deg,rgba(70,231,176,.3) 0%,rgba(70,231,176,0) 100%)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-2[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-3[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:1}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border:2px solid rgb(46,44,37)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .inner-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px 30px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:5px;color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-top:5px;min-width:36px;min-height:36px;width:36px;height:36px;border:3px solid black;padding:2px;background-color:#2e2c25}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]{border:3px solid rgb(59,56,49);padding:5px 36px;text-align:center;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:-6px;top:50%;margin-top:-22px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.reaper[_ngcontent-%COMP%]{color:#148e89}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.skill[_ngcontent-%COMP%]{color:#ce4607}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-0[_ngcontent-%COMP%]{color:#2f5996}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-1[_ngcontent-%COMP%]{color:#a83007}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-2[_ngcontent-%COMP%]{color:#79b549}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-3[_ngcontent-%COMP%]{color:#d0b545}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-4[_ngcontent-%COMP%]{color:#4bc1b2}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-5[_ngcontent-%COMP%]{color:#753098}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-6[_ngcontent-%COMP%]{color:#cd7028}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-7[_ngcontent-%COMP%]{color:#bf3c59}']}),M})()},9762:(k,T,f)=>{f.d(T,{b:()=>C});var t=f(5e3),i=f(9808),O=f(8003);const l=["content"];function o(n,_){if(1&n&&t._UZ(0,"div",30),2&n){const u=t.oxw(2);t.Q6J("innerHTML",u.reaper.affinityLabel,t.oJD)}}function e(n,_){if(1&n&&(t.TgZ(0,"div",31)(1,"div",32)(2,"div",33),t._UZ(3,"div"),t.qZA(),t._uU(4),t.TgZ(5,"div",33),t._UZ(6,"div"),t.qZA()(),t._UZ(7,"div",24),t.qZA()),2&n){const u=t.oxw(2);t.xp6(4),t.Oqu(u.reaper.benedictionTitleLabel),t.xp6(3),t.Q6J("innerHTML",u.reaper.benediction,t.oJD)}}function a(n,_){if(1&n&&(t.TgZ(0,"div",34)(1,"div",32)(2,"div",33),t._UZ(3,"div"),t.qZA(),t._uU(4),t.TgZ(5,"div",33),t._UZ(6,"div"),t.qZA()(),t._UZ(7,"div",24),t.qZA()),2&n){const u=t.oxw(2);t.xp6(4),t.Oqu(u.reaper.maledictionTitleLabel),t.xp6(3),t.Q6J("innerHTML",u.reaper.malediction,t.oJD)}}function c(n,_){1&n&&t._UZ(0,"app-activable-view",37),2&n&&t.Q6J("activable",_.$implicit)}function g(n,_){if(1&n&&(t.TgZ(0,"div",35)(1,"div",32)(2,"div",33),t._UZ(3,"div"),t.qZA(),t._uU(4),t.TgZ(5,"div",33),t._UZ(6,"div"),t.qZA()(),t.YNc(7,c,1,1,"app-activable-view",36),t.qZA()),2&n){const u=t.oxw(2);t.xp6(4),t.Oqu(u.reaper.activablesTitleLabel),t.xp6(3),t.Q6J("ngForOf",u.reaper.activables)}}function p(n,_){if(1&n&&(t.TgZ(0,"div",1)(1,"div",2),t._uU(2),t.qZA(),t.TgZ(3,"div",3,4)(5,"div",5)(6,"div",6),t._UZ(7,"img",7),t.TgZ(8,"div",8),t._UZ(9,"div",9),t.qZA()(),t.TgZ(10,"div",10),t.YNc(11,o,1,1,"div",11),t.TgZ(12,"div",12)(13,"div",13),t._uU(14),t.qZA(),t._UZ(15,"div",14),t.qZA(),t.TgZ(16,"div",15)(17,"div",16),t._uU(18),t.qZA(),t._UZ(19,"div",17),t.TgZ(20,"div",18),t._uU(21),t.qZA()(),t.TgZ(22,"div",19),t._UZ(23,"div",20),t.TgZ(24,"div",21),t._UZ(25,"span",22)(26,"span",23),t.qZA()()()(),t._UZ(27,"div",24),t.YNc(28,e,8,2,"div",25),t.YNc(29,a,8,2,"div",26),t.YNc(30,g,8,2,"div",27),t._UZ(31,"div",28)(32,"div",29),t.qZA()()),2&n){const u=t.oxw();t.Udp("max-height",u.maxHeight),t.ekj("mobile-view",u.tooltip),t.xp6(2),t.Oqu(u.reaper.name),t.xp6(5),t.ekj("primordial-effect",u.reaper.primordial),t.Q6J("src",u.reaper.icon,t.LSH),t.xp6(4),t.Q6J("ngIf",null!==u.reaper.affinityLabel),t.xp6(3),t.Oqu(u.reaper.type),t.xp6(1),t.Q6J("innerHTML",u.reaper.smithLabel,t.oJD),t.xp6(3),t.Oqu(u.reaper.damagesLabel),t.xp6(1),t.Q6J("innerHTML",u.reaper.damageTypeLabel,t.oJD),t.xp6(2),t.Oqu(u.reaper.maxDamagesLabel),t.xp6(2),t.Q6J("innerHTML",u.reaper.victimsLabel,t.oJD),t.xp6(2),t.Q6J("innerHTML",u.reaper.levelLabel,t.oJD),t.xp6(1),t.Q6J("innerHTML",u.reaper.bonusLevelLabel,t.oJD),t.xp6(1),t.Q6J("innerHTML",u.reaper.description,t.oJD),t.xp6(1),t.Q6J("ngIf",null!==u.reaper.benediction),t.xp6(1),t.Q6J("ngIf",null!==u.reaper.malediction),t.xp6(1),t.Q6J("ngIf",u.reaper.activables.length>0),t.xp6(2),t.Q6J("innerHTML",u.reaper.lore,t.oJD)}}let C=(()=>{class n{constructor(){this.reaper=null,this.maxHeight=null,this.tooltip=!1,this.content=null}scroll(u){this.content&&(this.content.nativeElement.scrollTop+=u.deltaY)}}return n.\u0275fac=function(u){return new(u||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-reaper-view"]],viewQuery:function(u,x){if(1&u&&t.Gf(l,5),2&u){let b;t.iGM(b=t.CRH())&&(x.content=b.first)}},inputs:{reaper:"reaper",maxHeight:"maxHeight",tooltip:"tooltip"},decls:1,vars:1,consts:[["class","reaper",3,"maxHeight","mobile-view",4,"ngIf"],[1,"reaper"],[1,"head"],[1,"content"],["content",""],[1,"info"],[1,"icon"],["loading","lazy",3,"src"],[1,"background-outer"],[1,"background"],[1,"summary"],["class","affinity",3,"innerHTML",4,"ngIf"],[1,"base"],[1,"type"],[1,"builder",3,"innerHTML"],[1,"damages"],[1,"current-damage"],[1,"type",3,"innerHTML"],[1,"max-damage"],[1,"stats"],[1,"victim",3,"innerHTML"],[1,"level"],[1,"base",3,"innerHTML"],[1,"bonus",3,"innerHTML"],[1,"description",3,"innerHTML"],["class","benediction",4,"ngIf"],["class","malediction",4,"ngIf"],["class","activables",4,"ngIf"],[1,"separator"],[1,"lore",3,"innerHTML"],[1,"affinity",3,"innerHTML"],[1,"benediction"],[1,"title"],[1,"bullet"],[1,"malediction"],[1,"activables"],[3,"activable",4,"ngFor","ngForOf"],[3,"activable"]],template:function(u,x){1&u&&t.YNc(0,p,33,22,"div",0),2&u&&t.Q6J("ngIf",null!==x.reaper)},dependencies:[i.sg,i.O5,O.K],styles:['.reaper[_ngcontent-%COMP%]{background-color:#090909;color:#fff;border:2px solid black;width:350px;display:flex;flex-direction:column}@media (max-width: 768px){.reaper.mobile-view[_ngcontent-%COMP%]{position:fixed;top:5%;left:5%}}.reaper[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid rgb(121,183,164)}.reaper[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{overflow-y:auto}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:130px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:stretch}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .background-outer[_ngcontent-%COMP%]{border:3px solid rgb(59,56,49);flex-grow:1;display:flex;flex-direction:column}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .background-outer[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid rgb(18,16,14);background-color:#22201c;flex-grow:1;height:150px;width:85px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;flex-grow:1;text-align:left;gap:10px;font-size:16px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .affinity[_ngcontent-%COMP%]{width:32px;height:32px;position:absolute;top:0;right:4px;text-align:center;display:flex;flex-direction:row;align-items:center;justify-content:center}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .affinity[_ngcontent-%COMP%]:before{content:"";border:3px solid rgb(59,56,49);width:100%;height:100%;position:absolute;left:-3px;top:-3px;transform:rotate(45deg)}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .current-damage[_ngcontent-%COMP%]{font-size:30px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:20px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]   .bonus[_ngcontent-%COMP%]{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .max-damage[_ngcontent-%COMP%]{color:#686868}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]     .value{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]     .details{color:#686868}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#61f7b7}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]{color:#ff4722}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#d13001}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]     .value, .reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]     .value{color:#fff}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:5px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#3b3831;margin:0 30px;height:4px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .lore[_ngcontent-%COMP%]{color:#b8b8b8;text-align:center}']}),n})()},4890:(k,T,f)=>{f.d(T,{G:()=>n});var t=f(2722),i=f(3359),O=f(6446),l=f(5e3),o=f(2424),e=f(9808),a=f(1314),c=f(7295);function g(_,u){if(1&_&&l._UZ(0,"img",8),2&_){const x=l.oxw(2);l.Q6J("src",x.rune.levelBorder,l.LSH)}}function p(_,u){if(1&_&&l._UZ(0,"app-rune-view",9),2&_){const x=l.oxw(2);l.Q6J("rune",x.rune)}}function C(_,u){if(1&_&&(l.ynx(0),l._UZ(1,"img",5),l.YNc(2,g,1,1,"img",6),l.YNc(3,p,1,1,"ng-template",7),l.BQk()),2&_){const x=l.oxw(),b=l.MAs(2);l.xp6(1),l.Gre("smith-",x.rune.reapersmith,""),l.ekj("aura",x.hasAura(x.rune)),l.Q6J("src",x.rune.runeIcon,l.LSH),l.xp6(1),l.Q6J("ngIf",x.showLevel),l.xp6(1),l.Q6J("cdkConnectedOverlayOpen",x.showOverlay)("cdkConnectedOverlayOrigin",b)}}let n=(()=>{class _ extends O.B{constructor(x){super(),this.searchService=x,this.rune=null,this.showLevel=!0,this.selected=!1,this.showOverlay=!1,this.hiddenBySearch=!1,this.searchService.searchChanged.pipe((0,t.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnChanges(){this.updateSearch()}updateSearch(){this.hiddenBySearch=null!==this.rune&&this.searchService.hasSearch()&&!this.searchService.runeMatchSearch(this.rune)}hasAura(x){return x.type===i.evb.Effect}}return _.\u0275fac=function(x){return new(x||_)(l.Y36(o.o))},_.\u0275cmp=l.Xpm({type:_,selectors:[["app-rune-slot"]],hostBindings:function(x,b){1&x&&l.NdJ("mouseenter",function(){return b.onOver()})("mouseleave",function(){return b.onLeave()})},inputs:{rune:"rune",showLevel:"showLevel",selected:"selected"},features:[l.qOj,l.TTD],decls:5,vars:5,consts:[[1,"rune"],["cdkOverlayOrigin","",1,"overlay-position"],["trigger","cdkOverlayOrigin"],[1,"inner-slot"],[4,"ngIf"],[1,"rune-icon",3,"src"],["class","rune-level",3,"src",4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[1,"rune-level",3,"src"],[3,"rune"]],template:function(x,b){1&x&&(l.TgZ(0,"div",0),l._UZ(1,"div",1,2)(3,"div",3),l.YNc(4,C,4,9,"ng-container",4),l.qZA()),2&x&&(l.ekj("selected",b.selected)("hidden-search",b.hiddenBySearch),l.xp6(4),l.Q6J("ngIf",null!==b.rune))},dependencies:[e.O5,a.pI,a.xu,c.g],styles:['.rune[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;width:48px;height:48px}.rune[_ngcontent-%COMP%]   .overlay-position[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.rune.hidden-search[_ngcontent-%COMP%]{opacity:.2}.rune[_ngcontent-%COMP%]:before{content:"";border:3px solid rgb(59,56,49);width:28px;height:28px;position:absolute;left:8px;top:8px;transform:rotate(45deg)}.rune.selected[_ngcontent-%COMP%]:before{border:3px solid rgb(206,70,7)}.rune[_ngcontent-%COMP%]   img.rune-icon[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level[_ngcontent-%COMP%]{image-rendering:pixelated;position:absolute;pointer-events:none;transform:scale(4)}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-0[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-0[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(227,97,16,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-1[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-1[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(175,245,60,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-2[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-2[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(191,159,16,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-3[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-3[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(207,19,44,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-4[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-4[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(170,54,191,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-5[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-5[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(35,174,247,.5))}.rune[_ngcontent-%COMP%]   img.rune-icon.aura.smith-6[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   img.rune-level.aura.smith-6[_ngcontent-%COMP%]{filter:drop-shadow(0 0 2px rgba(84,246,178,.4))}.rune[_ngcontent-%COMP%]   img.rune-icon[_ngcontent-%COMP%]{bottom:60%}.rune[_ngcontent-%COMP%]   img.rune-level[_ngcontent-%COMP%]{bottom:40%}app-rune-view[_ngcontent-%COMP%]{width:350px}']}),_})()},7295:(k,T,f)=>{f.d(T,{g:()=>o});var t=f(5e3);function i(e,a){if(1&e&&t._UZ(0,"div",18),2&e){const c=t.oxw(2);t.Q6J("innerHTML",c.rune.constraintLabel,t.oJD)}}function O(e,a){if(1&e&&t._UZ(0,"app-activable-view",19),2&e){const c=t.oxw(2);t.Q6J("activable",c.rune.activable)("reinforcment",c.rune.level)}}function l(e,a){if(1&e&&(t.TgZ(0,"div",1),t._UZ(1,"div",2),t.TgZ(2,"div",3)(3,"div",4)(4,"div",5),t._UZ(5,"app-rune-slot",6),t.qZA(),t.TgZ(6,"div",7),t._UZ(7,"div",8)(8,"div",9),t.YNc(9,i,1,1,"div",10),t.qZA(),t.TgZ(10,"div",11),t._UZ(11,"app-rune-slot",6),t.qZA()(),t._UZ(12,"div",12)(13,"div",13),t.YNc(14,O,1,2,"app-activable-view",14),t._UZ(15,"div",12)(16,"div",15),t.TgZ(17,"div",16),t._UZ(18,"img",17),t.qZA()()()),2&e){const c=t.oxw();t.xp6(1),t.Q6J("innerHTML",c.rune.name,t.oJD),t.xp6(4),t.Q6J("rune",c.rune),t.xp6(2),t.Q6J("innerHTML",c.rune.typeLabel,t.oJD),t.xp6(1),t.Q6J("innerHTML",c.rune.smithLabel,t.oJD),t.xp6(1),t.Q6J("ngIf",null!==c.rune.constraintLabel),t.xp6(2),t.Q6J("rune",c.rune),t.xp6(2),t.Q6J("innerHTML",c.rune.description,t.oJD),t.xp6(1),t.Q6J("ngIf",null!==c.rune.activable),t.xp6(2),t.Q6J("innerHTML",c.rune.flavor,t.oJD),t.xp6(2),t.Q6J("src",c.rune.levelIcon,t.LSH)}}let o=(()=>{class e{constructor(){this.rune=null}}return e.\u0275fac=function(c){return new(c||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-rune-view"]],inputs:{rune:"rune"},decls:1,vars:1,consts:[["class","rune slormancer-tooltip",4,"ngIf"],[1,"rune","slormancer-tooltip"],[1,"head","inner-box",3,"innerHTML"],[1,"content","inner-box"],[1,"info"],[1,"icon","left"],[3,"rune"],[1,"main"],[1,"type",3,"innerHTML"],[1,"smith",3,"innerHTML"],["class","constraint",3,"innerHTML",4,"ngIf"],[1,"icon","right"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"activable","reinforcment",4,"ngIf"],[1,"flavor",3,"innerHTML"],[1,"bottom-level"],[3,"src"],[1,"constraint",3,"innerHTML"],[3,"activable","reinforcment"]],template:function(c,g){1&c&&t.YNc(0,l,19,10,"div",0),2&c&&t.Q6J("ngIf",null!==g.rune)},styles:[".rune[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff}.rune[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.rune[_ngcontent-%COMP%]     .description .value{color:#ce4607}.rune[_ngcontent-%COMP%]     .description .range, .rune[_ngcontent-%COMP%]     .description .range .value, .rune[_ngcontent-%COMP%]     .description .details, .rune[_ngcontent-%COMP%]     .description .details .value, .rune[_ngcontent-%COMP%]     .description .formula, .rune[_ngcontent-%COMP%]     .description .formula .value, .rune[_ngcontent-%COMP%]     .description .pure-info, .rune[_ngcontent-%COMP%]     .description .pure-info .value{color:#686868}.rune[_ngcontent-%COMP%]     .description .affixes .range, .rune[_ngcontent-%COMP%]     .description .affixes .value, .rune[_ngcontent-%COMP%]     .description .pure-info{word-break:keep-all;white-space:nowrap}.rune[_ngcontent-%COMP%]     .power.value{color:#ce4607}.rune[_ngcontent-%COMP%]     .flavor .disabled{color:#ce4607}.rune[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 30px;text-transform:uppercase;font-size:17px}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:16px}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;justify-content:space-between}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .constraint[_ngcontent-%COMP%]{margin-top:4px}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .flavor[_ngcontent-%COMP%]{text-align:center}.rune[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .flavor[_ngcontent-%COMP%]{color:#686868}"]}),e})()},461:(k,T,f)=>{f.d(T,{a:()=>x});var t=f(3075),i=f(2722),O=f(6446),l=f(5e3),o=f(9808),e=f(7322),a=f(7531),c=f(4102),g=f(508);function p(b,J){if(1&b&&(l.TgZ(0,"mat-label"),l._uU(1),l.qZA()),2&b){const P=l.oxw(2);l.xp6(1),l.Oqu(P.label)}}function C(b,J){1&b&&(l.TgZ(0,"mat-option",9),l._uU(1," No results "),l.qZA())}function n(b,J){if(1&b&&(l.TgZ(0,"mat-option",10),l._UZ(1,"span",11),l.qZA()),2&b){const P=J.$implicit;l.ekj("filtered",P.filtered),l.Q6J("value",P.option.value)("disabled",P.filtered||P.disabled),l.xp6(1),l.Q6J("innerHTML",P.option.label,l.oJD)}}function _(b,J){if(1&b&&(l.TgZ(0,"mat-hint"),l._uU(1),l.qZA()),2&b){const P=l.oxw(2);l.xp6(1),l.Oqu(P.notFoundMessage)}}function u(b,J){if(1&b){const P=l.EpF();l.TgZ(0,"mat-form-field",1),l.YNc(1,p,2,1,"mat-label",2),l.TgZ(2,"mat-select",3),l.NdJ("openedChange",function(w){l.CHM(P);const N=l.MAs(5),B=l.oxw();return l.KtG(B.opened(w,N))}),l.TgZ(3,"mat-option",4)(4,"input",5,6),l.NdJ("keydown.space",function(w){l.CHM(P);const N=l.oxw();return l.KtG(N.handleSearchSpace(w))}),l.qZA()(),l.YNc(6,C,2,0,"mat-option",7),l.YNc(7,n,2,5,"mat-option",8),l.qZA(),l.YNc(8,_,2,1,"mat-hint",2),l.qZA()}if(2&b){const P=l.oxw();l.ekj("no-error-padding",P.noErrorPadding),l.xp6(1),l.Q6J("ngIf",null!==P.label),l.xp6(1),l.Q6J("formControl",P.control),l.xp6(2),l.Q6J("formControl",P.search),l.xp6(2),l.Q6J("ngIf",P.noResult),l.xp6(1),l.Q6J("ngForOf",P.filteredOptions)("ngForTrackBy",P.trackBy),l.xp6(1),l.Q6J("ngIf",null!==P.control.value&&!P.isStatInOptions(P.control.value)&&null!==P.notFoundMessage)}}let x=(()=>{class b extends O.B{constructor(){super(),this.label=null,this.control=null,this.options=[],this.noErrorPadding=!1,this.disabledOptions=[],this.notFoundMessage=null,this.filteredOptions=[],this.search=new t.NI(""),this.noResult=!1,this.search.valueChanges.subscribe(()=>this.filter())}ngOnChanges(P){null!==this.control&&P.control&&this.control.valueChanges.pipe((0,i.R)(this.unsubscribe)).subscribe(()=>this.resetFilter()),this.filter()}opened(P,R){!1===P?this.resetFilter():R.focus()}resetFilter(){this.search.setValue("")}filter(){const P=this.search.value.toLowerCase().trim();this.filteredOptions=this.options.map(R=>({option:R,filtered:-1===R.label.toLowerCase().indexOf(P),disabled:this.disabledOptions.includes(R.value)})),this.noResult=!this.filteredOptions.some(R=>!R.filtered)}trackBy(P,R){return R.option.value}handleSearchSpace(P){P.stopPropagation()}isStatInOptions(P){return this.options.some(R=>R.value===P)}}return b.\u0275fac=function(P){return new(P||b)},b.\u0275cmp=l.Xpm({type:b,selectors:[["app-search-select"]],inputs:{label:"label",control:"control",options:"options",noErrorPadding:"noErrorPadding",disabledOptions:"disabledOptions",notFoundMessage:"notFoundMessage"},features:[l.qOj,l.TTD],decls:1,vars:1,consts:[["appearance","outline","color","primary",3,"no-error-padding",4,"ngIf"],["appearance","outline","color","primary"],[4,"ngIf"],["color","primary",3,"formControl","openedChange"],["disabled","","role","search"],["matInput","","type","text","placeholder","Rechercher...",3,"formControl","keydown.space"],["searchInput",""],["role","no-result","disabled","",4,"ngIf"],[3,"value","disabled","filtered",4,"ngFor","ngForOf","ngForTrackBy"],["role","no-result","disabled",""],[3,"value","disabled"],[3,"innerHTML"]],template:function(P,R){1&P&&l.YNc(0,u,9,9,"mat-form-field",0),2&P&&l.Q6J("ngIf",null!==R.control&&R.options.length>0)},dependencies:[o.sg,o.O5,e.KE,e.bx,e.hX,a.Nt,c.gD,g.ey,t.Fj,t.JJ,t.oH],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),b})()},4296:(k,T,f)=>{f.d(T,{F1:()=>i,yF:()=>t});const t="https://github.com/cayrac/slorm-planner",i="http://www.slormitestudios.com"},311:(k,T,f)=>{f.d(T,{x:()=>g});var t=f(1135),i=f(7579),O=f(8372),l=f(3359),o=f(2340),e=f(5e3),a=f(3390);let c=(()=>{class p{constructor(){this.CHANGES=[{version:"0.0.2",update:n=>{n.configuration.frostbolt_shot_recently=0,n.configuration.has_elemental_prowess_buff=!1,n.configuration.has_splash_splash_buff=!1,n.configuration.has_booster_max_buff=!1,n.version="0.0.2"}},{version:"0.0.4",update:n=>{n.configuration.use_enemy_state=!1,n.version="0.0.4"}},{version:"0.0.8",update:n=>{n.version="0.0.8";for(const _ of n.layers)_.character.originalVersion=_.character.version,_.character.version=l.veS;n.configuration.has_electrify_buff=!1,n.configuration.elemental_spirit_stacks=0,n.configuration.is_channeling_focus=!1}},{version:"0.0.9",update:n=>{n.version="0.0.9";for(const _ of n.layers)_.character.version=l.veS}},{version:"0.0.10",update:n=>{n.version="0.0.10"}},{version:"0.0.11",update:n=>{n.version="0.0.11",n.name="New build"}},{version:"0.0.12",update:n=>{n.version="0.0.12";for(const _ of n.layers)_.character.importVersion=null}},{version:"0.1.0",update:n=>{n.version="0.1.0",void 0===n.configuration.concentration_buff&&(n.configuration.concentration_buff=!1),void 0===n.configuration.summoned_skeleton_squires&&(n.configuration.summoned_skeleton_squires=0),void 0===n.configuration.always_summon_maximum_skeleton_squires&&(n.configuration.always_summon_maximum_skeleton_squires=!1),void 0===n.configuration.minimum_unreserved_mana&&(n.configuration.minimum_unreserved_mana=0),void 0===n.configuration.fulgurorn_dedication_stacks&&(n.configuration.fulgurorn_dedication_stacks=0),void 0===n.configuration.enemy_inner_weakness_stacks&&(n.configuration.enemy_inner_weakness_stacks=0),void 0===n.configuration.add_totem_tag_to_prime_totem_skills&&(n.configuration.add_totem_tag_to_prime_totem_skills=!1),void 0===n.configuration.highest_slorm_temple_floor&&(n.configuration.highest_slorm_temple_floor=0),void 0===n.configuration.show_temple_keeper_as_totem&&(n.configuration.show_temple_keeper_as_totem=!1),void 0===n.configuration.ultima_momentum_buff&&(n.configuration.ultima_momentum_buff=!1),void 0===n.configuration.elder_slorms&&(n.configuration.elder_slorms=0),void 0===n.configuration.show_elder_inner_fire_damage&&(n.configuration.show_elder_inner_fire_damage=!1),void 0===n.configuration.exposed_armor_buff&&(n.configuration.exposed_armor_buff=!1),void 0===n.configuration.apex_predator_stacks&&(n.configuration.apex_predator_stacks=0),void 0===n.configuration.enemy_enfeeble_stacks&&(n.configuration.enemy_enfeeble_stacks=0),void 0===n.configuration.enfeeble_stacks_in_radius&&(n.configuration.enfeeble_stacks_in_radius=0),"all_characters_level"in n.configuration&&(n.configuration.all_characters_level=void 0,n.configuration.all_other_characters_level=100)}},{version:"0.1.1",update:n=>{n.version="0.1.1"}},{version:"0.1.2",update:n=>{n.version="0.1.2",void 0===n.configuration.chilled_enemy_nearby&&(n.configuration.chilled_enemy_nearby=l.g5j.chilled_enemy_nearby),void 0===n.configuration.in_combat&&(n.configuration.in_combat=l.g5j.in_combat)}},{version:"0.1.3",update:n=>{n.version="0.1.3"}},{version:"0.1.4",update:n=>{n.version="0.1.4"}},{version:"0.1.5",update:n=>{n.version="0.1.5"}},{version:"0.2.0",update:n=>{n.version="0.2.0";for(const _ of n.layers)_.character.reaper.baseAffinity=l.DxO,_.character.reaper.bonusAffinity=0,_.character.runes={effect:null,enhancement:null,activation:null};void 0===n.configuration.is_rune_active&&(n.configuration.is_rune_active=!1),void 0===n.configuration.effect_rune_affinity&&(n.configuration.effect_rune_affinity=100),void 0===n.configuration.effective_rune_stacks&&(n.configuration.effective_rune_stacks=225)}},{version:"0.2.1",update:n=>{n.version="0.2.1"}},{version:"0.2.2",update:n=>{n.version="0.2.2"}},{version:"0.2.3",update:n=>{n.version="0.2.3"}},{version:"0.2.5",update:n=>{n.version="0.2.5"}},{version:"0.2.5.1",update:n=>{n.version="0.2.5.1"}},{version:"0.2.5.2",update:n=>{n.version="0.2.5.2"}},{version:"0.3.0",update:n=>{n.version="0.3.0",n.configuration.has_living_inferno_buff=!1,n.configuration.has_shadow_shield_buff=!1,n.configuration.has_shadow_bargain_buff=!1,n.configuration.has_flawless_defense_buff=!1,n.configuration.aurelon_bargain_stacks=0,n.configuration.cleansing_surge_stacks=0,n.configuration.overcharged_stacks=0,n.configuration.has_frostfire_buff=!1,n.configuration.target_is_burning=!1,100===n.configuration.all_other_characters_level&&(n.configuration.all_other_characters_level=140)}},{version:"0.3.1",update:n=>{n.version="0.3.1"}},{version:"0.4.0",update:n=>{n.version="0.4.0",n.configuration.has_ancestral_instability_buff=!1,n.configuration.ancestral_instability_buff_duration=0,n.configuration.target_negative_effects=0,n.configuration.efficiency_buff=!1,n.configuration.has_avatar_of_shadow_buff=!1,n.configuration.highest_same_type_reaper_level=100}},{version:"0.4.1",update:n=>{n.version="0.4.1"}},{version:"0.4.2",update:n=>{n.version="0.4.2"}},{version:"0.5.0",update:n=>{n.version="0.5.0",n.configuration.is_triggered_by_book_smash=!1;for(const _ of n.layers)_.character.ancestralLegacies.activeFirstNode=null}},{version:"0.5.1",update:n=>{n.version="0.5.1"}},{version:"0.6.0",update:n=>{n.version="0.6.0",n.configuration.indirect_defense_stacks=0,n.configuration.other_characters_mastery_total=30,n.configuration.support_streak_stacks=0,n.configuration.victims_combo=0,n.configuration.enemy_horrified_stacks=0,n.configuration.bloodthirst_stacks=0,n.configuration.has_blood_frenzy_buff=!1,n.configuration.elemental_fury_stacks=0,n.configuration.fighter_bane_stacks=0,n.configuration.mage_bane_stacks=0,n.configuration.moonlight_stacks=0,n.configuration.sunlight_stacks=0,n.configuration.moonlight_side=!0,n.configuration.life_orbs_count=0,n.configuration.ancestral_wrath_stacks=0,n.configuration.is_curving_time_or_time_shifting=!1,n.configuration.ancestral_preparation_stacks=0,n.configuration.unity_level_0_47=0,n.configuration.unity_level_0_48=0,n.configuration.unity_level_0_49=0,n.configuration.unity_level_0_50=0,n.configuration.unity_level_0_51=0,n.configuration.unity_level_0_52=0,n.configuration.unity_level_1_47=0,n.configuration.unity_level_1_48=0,n.configuration.unity_level_1_49=0,n.configuration.unity_level_1_50=0,n.configuration.unity_level_1_51=0,n.configuration.unity_level_1_52=0,n.configuration.unity_level_2_47=0,n.configuration.unity_level_2_48=0,n.configuration.unity_level_2_49=0,n.configuration.unity_level_2_50=0,n.configuration.unity_level_2_51=0,n.configuration.unity_level_2_52=0,n.configuration.unity_level_0_47_p=0,n.configuration.unity_level_0_48_p=0,n.configuration.unity_level_0_49_p=0,n.configuration.unity_level_0_50_p=0,n.configuration.unity_level_0_51_p=0,n.configuration.unity_level_0_52_p=0,n.configuration.unity_level_1_47_p=0,n.configuration.unity_level_1_48_p=0,n.configuration.unity_level_1_49_p=0,n.configuration.unity_level_1_50_p=0,n.configuration.unity_level_1_51_p=0,n.configuration.unity_level_1_52_p=0,n.configuration.unity_level_2_47_p=0,n.configuration.unity_level_2_48_p=0,n.configuration.unity_level_2_49_p=0,n.configuration.unity_level_2_50_p=0,n.configuration.unity_level_2_51_p=0,n.configuration.unity_level_2_52_p=0,n.configuration.has_life_bargain_buff=!1,n.configuration.enemy_is_chill_or_frozen=!1,n.configuration.absorbed_damage_wrath=0,n.configuration.add_skeletons_to_controlled_minions=!1;for(const _ of n.layers){const u=_.character.reaper.affinity;_.character.reaper.baseReaperAffinity=u,_.character.reaper.baseEffectAffinity=u}}},{version:"0.6.1",update:n=>{n.version="0.6.1"}},{version:"0.6.2",update:n=>{n.version="0.6.2"}},{version:"0.6.3",update:n=>{n.version="0.6.3";for(const _ of n.layers)_.character.reaper.baseReaperAffinity=Number.isInteger(_.character.reaper.baseReaperAffinity)?_.character.reaper.baseReaperAffinity:100,_.character.reaper.baseEffectAffinity=Number.isInteger(_.character.reaper.baseEffectAffinity)?_.character.reaper.baseEffectAffinity:100}},{version:"0.6.4",update:n=>{n.version="0.6.4"}}]}updateToLatestVersion(n){void 0===n.version&&(n.version="0.0.1",n.configuration=l.g5j);for(let _ of this.CHANGES)(0,l.n4)(_.version,n.version)>0&&_.update(n)}}return p.\u0275fac=function(n){return new(n||p)},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})(),g=(()=>{class p{constructor(n,_,u){this.jsonConverterService=n,this.buildRetrocompatibilityService=_,this.slormancerCharacterUpdaterService=u,this.MAX_LAYERS=10,this.BUILDS_STORAGE_KEY="builds",this.CURRENT_BUILD_STORAGE_KEY="current-build",this.CURRENT_LAYER_STORAGE_KEY="current-layer",this.builds=[],this.build=null,this.layer=null,this.buildChanged=new t.X(null),this.layerChanged=new t.X(null),this.saveTrigger=new i.x,this.reload(),this.oldFormatTransition(),this.saveTrigger.pipe((0,O.b)(500)).subscribe(()=>this.saveToStorage())}getCurrentLayerIndex(){const n=localStorage.getItem(this.CURRENT_LAYER_STORAGE_KEY),_=null===n?0:parseInt(n,10);return Number.isNaN(_)?0:_}oldFormatTransition(){const n="slorm-planner-build",_=localStorage.getItem(n);if(null!==_&&0===this.builds.length){const u=this.jsonConverterService.jsonToBuild(JSON.parse(_));this.addBuild(u),localStorage.removeItem(n),this.saveToStorage()}}reload(){this.builds=[],this.build=null,this.layer=null;try{const n=localStorage.getItem(this.BUILDS_STORAGE_KEY),_=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY),u=this.getCurrentLayerIndex();if(null!==n&&(this.builds=JSON.parse(n)),null!==_){const x=localStorage.getItem(_);null!==x&&(this.build=this.jsonConverterService.jsonToBuild(JSON.parse(x)),this.buildRetrocompatibilityService.updateToLatestVersion(this.build))}if(null!==this.build){let x=(0,l.BeF)(this.build.layers[u],this.build.layers[0]);void 0!==x&&(this.layer=x);for(const b of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(b.character,this.build.configuration)}}catch(n){console.error("Failed to reload build : ",n)}this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}saveToStorage(){localStorage.setItem(this.BUILDS_STORAGE_KEY,JSON.stringify(this.builds));const n=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==n&&null!==this.build){localStorage.setItem(n,JSON.stringify(this.jsonConverterService.buildToJson(this.build)));let _=0;null!==this.layer&&(_=this.build.layers.indexOf(this.layer)),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,_<0?"0":_.toString())}}saveBuild(){if(null!==this.build){for(const _ of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(_.character,this.build.configuration);const n=this.getBuildPreview();if(null!==n&&(n.name=this.build.name),null!==this.build){let _=this.getCurrentLayerIndex();const u=null===this.layer?-1:this.build.layers.indexOf(this.layer);_=-1!==u?u:Math.min(_,this.build.layers.length-1),this.layer=(0,l.lA$)(this.build.layers[_])}this.saveTrigger.next(),this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}}saveLayer(){null!==this.build&&null!==this.layer&&(this.slormancerCharacterUpdaterService.updateCharacter(this.layer.character,this.build.configuration),this.saveTrigger.next())}loadBuild(n){localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,n.storageKey),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,"0"),this.reload()}deleteBuild(){const n=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==n){const _=this.builds.findIndex(u=>u.storageKey===n);if(-1!==_){this.builds.splice(_,1),localStorage.removeItem(n),localStorage.removeItem(this.CURRENT_BUILD_STORAGE_KEY),this.saveToStorage();const u=Math.min(_,this.builds.length-1),x=this.builds[u];x?this.loadBuild(x):this.reload()}}}loadLayer(n){null!==this.build&&-1!==this.build.layers.indexOf(n)&&(this.layer=n,this.saveBuild())}addBuild(n){null!==n&&this.buildRetrocompatibilityService.updateToLatestVersion(n);const _={heroClass:n.heroClass,name:n.name,storageKey:"build-"+(new Date).getTime(),version:o.N.version};this.builds.push(_),this.build=n,this.layer=(0,l.BeF)(n.layers[0],null),localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,_.storageKey),this.saveBuild()}getBuilds(){return this.builds}getBuild(){return this.build}getBuildPreview(){const n=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);return(0,l.lA$)(this.builds.find(_=>_.storageKey===n))}getLayer(){return this.layer}hasRoomForAnotherLayer(n=null){return null===this.build||this.build.layers.length<this.MAX_LAYERS&&(null===n||this.build.heroClass===n.heroClass)}}return p.\u0275fac=function(n){return new(n||p)(e.LFG(a.D),e.LFG(c),e.LFG(l.Pdp))},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})()},2763:(k,T,f)=>{f.d(T,{Y:()=>O});var t=f(655),i=f(5e3);let O=(()=>{class l{constructor(){}copyToClipboard(e){let a=null;try{return a=document.createElement("textarea"),a.style.position="fixed",a.style.left="0",a.style.top="0",a.style.opacity="0",a.value=e,document.body.appendChild(a),a.focus(),a.select(),document.execCommand("copy"),document.body.removeChild(a),!0}catch(c){null!==a&&document.body.contains(a)&&document.body.removeChild(a)}return!1}copyImageToClipboard(e){try{return navigator.clipboard.write([new ClipboardItem({"image/png":e})]),!0}catch(a){}return!1}getClipboardText(){return(0,t.mG)(this,void 0,void 0,function*(){let e=null;if(navigator.clipboard)try{e=yield navigator.clipboard.readText()}catch(a){}return e})}canCopyImage(){return"undefined"!=typeof ClipboardItem}}return l.\u0275fac=function(e){return new(e||l)},l.\u0275prov=i.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},1671:(k,T,f)=>{f.d(T,{K:()=>O});var t=f(3359),i=f(5e3);let O=(()=>{class l{constructor(e,a,c){this.slormancerDataService=e,this.slormancerTranslateService=a,this.slormancerReaperService=c,this.STATS_OPTIONS_CACHE={},this.LEGENDARY_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[],this.ALL_RARITIES_OPTIONS_CACHE=[],this.ALL_REAPER_BUFF_OPTIONS_CACHE=[],this.ALL_SKILL_BUFF_OPTIONS_CACHE={0:[],1:[],2:[]},this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=[],this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}},this.ULTIMATUM_OPTIONS_CACHE=[],this.initRarityOptionsCache(),this.initStatOptionsCache(),this.initLegendaryOptionsCache(),this.initReaperBuffOptions(),this.initSkillBuffOptions(),this.initAttributeBuffOptions(),this.initReaperOptions(),this.initUltimatumOptions()}getReaperOptions(e,a){return this.ALL_REAPER_OPTIONS_CACHE[a?"p":"b"][e]}getAllStatsoptions(){return this.ALL_STATS_OPTIONS_CACHE}getAllRaritiesOptions(){return this.ALL_RARITIES_OPTIONS_CACHE}getStatsOptions(e,a){let c=this.ALL_STATS_OPTIONS_CACHE;const g=this.getBaseKey(e),p=this.STATS_OPTIONS_CACHE[g];return p&&(a===t.uqS.Normal?c=(0,t.BeF)(p.P,[]):a===t.uqS.Magic||a===t.uqS.Rare?c=(0,t.BeF)(p.S,[]):a===t.uqS.Epic&&(c=(0,t.BeF)(p.E,[]))),c}getLegendaryOptions(e,a){let c=[];const g=this.LEGENDARY_OPTIONS_CACHE[e];return g&&(c=g[a]),c}getReaperBuffOptions(){return this.ALL_REAPER_BUFF_OPTIONS_CACHE}getSkillBuffOptions(e){return this.ALL_SKILL_BUFF_OPTIONS_CACHE[e]}getAttributeBuffOptions(){return this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE}getUltimatumOptions(){return this.ULTIMATUM_OPTIONS_CACHE}getBaseKey(e){return e===t.JNB.Body?"ARMOR":e.toUpperCase()}initRarityOptionsCache(){this.ALL_RARITIES_OPTIONS_CACHE=t.nte.map(e=>({label:this.slormancerTranslateService.translate("RAR_loot_"+e),value:e}))}initStatOptionsCache(){const e=this.slormancerDataService.getGameDataStats().filter(a=>"X"!==a.PERCENT);this.STATS_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[];for(const a of e){const c={label:this.slormancerTranslateService.translate(a.REF)+("%"===a.PERCENT?" (%)":""),value:a.REF};this.ALL_STATS_OPTIONS_CACHE.push(c);for(const g of t.liR){const p=this.getBaseKey(g),C=a[p];if(""!==C){let n=this.STATS_OPTIONS_CACHE[p];void 0===n&&(n={P:[],S:[],E:[]},this.STATS_OPTIONS_CACHE[p]=n),"P"===C&&(n.P.push(c),n.S.push(c),n.E.push(c)),"S"===C&&(n.S.push(c),n.E.push(c)),"E"===C&&n.E.push(c)}}}for(const a of t.liR){const c=this.getBaseKey(a),g=this.STATS_OPTIONS_CACHE[c];g&&(g.P.sort((p,C)=>(0,t.rR7)(p.label,C.label)),g.S.sort((p,C)=>(0,t.rR7)(p.label,C.label)),g.E.sort((p,C)=>(0,t.rR7)(p.label,C.label)))}this.ALL_STATS_OPTIONS_CACHE.sort((a,c)=>(0,t.rR7)(a.label,c.label))}initLegendaryOptionsCache(){const e=this.slormancerDataService.getGameDataLegendaries().filter(a=>a.LOOTABLE);this.LEGENDARY_OPTIONS_CACHE={};for(const a of e){const c={value:a.REF,label:a.EN_NAME};let g=this.LEGENDARY_OPTIONS_CACHE[a.ITEM];void 0===g&&(g={0:[],1:[],2:[]},this.LEGENDARY_OPTIONS_CACHE[a.ITEM]=g),-1===a.HERO||99===a.HERO?(g[0].push(c),g[1].push(c),g[2].push(c)):g[a.HERO].push(c)}}initReaperBuffOptions(){this.ALL_REAPER_BUFF_OPTIONS_CACHE=t.cIS.filter(e=>e!==t.Q1_.OhmAgad&&e!==t.Q1_.ReapersmithBrotherhood).map(e=>({value:e,label:this.slormancerTranslateService.translate("weapon_reapersmith_"+e)}))}initSkillBuffOptions(){this.ALL_SKILL_BUFF_OPTIONS_CACHE={[t.iHO.Warrior]:this.slormancerDataService.getGameDataActiveSkills(t.iHO.Warrior).map(e=>({value:e.REF,label:e.EN_NAME})),[t.iHO.Huntress]:this.slormancerDataService.getGameDataActiveSkills(t.iHO.Huntress).map(e=>({value:e.REF,label:e.EN_NAME})),[t.iHO.Mage]:this.slormancerDataService.getGameDataActiveSkills(t.iHO.Mage).map(e=>({value:e.REF,label:e.EN_NAME}))}}initAttributeBuffOptions(){this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=t.AFD.map(e=>({value:e,label:this.slormancerTranslateService.translate("character_trait_"+e)}))}initReaperOptions(){this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}};const e=this.slormancerDataService.getGameDataAvailableReaper();for(const a of e)this.ALL_REAPER_OPTIONS_CACHE.p[t.iHO.Warrior].push({value:a.REF,label:this.slormancerReaperService.getReaperName(a.EN_NAME,!0,t.iHO.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.p[t.iHO.Huntress].push({value:a.REF,label:this.slormancerReaperService.getReaperName(a.EN_NAME,!0,t.iHO.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.p[t.iHO.Mage].push({value:a.REF,label:this.slormancerReaperService.getReaperName(a.EN_NAME,!0,t.iHO.Mage)}),this.ALL_REAPER_OPTIONS_CACHE.b[t.iHO.Warrior].push({value:a.REF,label:this.slormancerReaperService.getReaperName(a.EN_NAME,!1,t.iHO.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.b[t.iHO.Huntress].push({value:a.REF,label:this.slormancerReaperService.getReaperName(a.EN_NAME,!1,t.iHO.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.b[t.iHO.Mage].push({value:a.REF,label:this.slormancerReaperService.getReaperName(a.EN_NAME,!1,t.iHO.Mage)})}initUltimatumOptions(){this.ULTIMATUM_OPTIONS_CACHE=t.N_V.map(e=>({value:e,label:this.slormancerTranslateService.translate("ultimatum_"+e)}))}}return l.\u0275fac=function(e){return new(e||l)(i.LFG(t.ogB),i.LFG(t.n6D),i.LFG(t.IxD))},l.\u0275prov=i.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3390:(k,T,f)=>{f.d(T,{D:()=>O});var t=f(3359),i=f(5e3);let O=(()=>{class l{constructor(e,a,c,g,p,C,n,_){this.slormancerDataService=e,this.slormancerCharacterBuilderService=a,this.slormancerItemService=c,this.slormancerLegendaryService=g,this.slormancerAffixService=p,this.slormancerReaperService=C,this.slormancerRunesService=n,this.slormancerUltimatumService=_,this.RARITY_MAPPING=[{rarity:t.uqS.Normal,mapping:0},{rarity:t.uqS.Magic,mapping:1},{rarity:t.uqS.Rare,mapping:2},{rarity:t.uqS.Epic,mapping:3},{rarity:t.uqS.Legendary,mapping:4}],this.STAT_MAPPING={},this.REVERSE_STAT_MAPPING={};for(const u of e.getGameDataStats())this.STAT_MAPPING[u.REF_NB]=u.REF,this.REVERSE_STAT_MAPPING[u.REF]=u.REF_NB}rarityToNumber(e){const a=this.RARITY_MAPPING.find(c=>c.rarity===e);return a?a.mapping:0}numberToRarity(e){const a=this.RARITY_MAPPING.find(c=>c.mapping===e);return a?a.rarity:t.uqS.Normal}itemToJson(e,a){return null===e?null:{base:a?e.base:null,level:e.level,reinforcment:e.reinforcment,affixes:e.affixes.map(c=>({rarity:this.rarityToNumber(c.rarity),pure:100===c.pure?0:c.pure,stat:(0,t.BeF)(this.REVERSE_STAT_MAPPING[c.craftedEffect.effect.stat],0),craftedValue:c.craftedEffect.craftedValue})),legendaryEffect:null===e.legendaryEffect?null:{craftedValue:e.legendaryEffect.value,id:e.legendaryEffect.id},reaperEnchantment:null===e.reaperEnchantment?null:{craftedValue:e.reaperEnchantment.craftedValue,reaperSmith:e.reaperEnchantment.craftedReaperSmith},skillEnchantment:null===e.skillEnchantment?null:{craftedValue:e.skillEnchantment.craftedValue,skill:e.skillEnchantment.craftedSkill},attributeEnchantment:null===e.attributeEnchantment?null:{craftedValue:e.attributeEnchantment.craftedValue,attribute:e.attributeEnchantment.craftedAttribute}}}ancestralLegacyToJson(e){return{id:e.id,rank:e.baseRank}}reaperToJson(e){return{id:e.id,level:e.baseInfo.level,affinity:e.baseReaperAffinity,effectAffinity:e.baseEffectAffinity,primordialLevel:e.primordialInfo.level,kills:e.baseInfo.kills,primordialKills:e.primordialInfo.kills,primordial:e.primordial?1:0}}runesToJson(e){return{activationId:null===e.activation?null:e.activation.id,activationLevel:null===e.activation?0:e.activation.level,effectId:null===e.effect?null:e.effect.id,effectLevel:null===e.effect?0:e.effect.level,enhancementId:null===e.enhancement?null:e.enhancement.id,enhancementLevel:null===e.enhancement?0:e.enhancement.level}}jsonToRunes(e,a,c){let g={activation:null,effect:null,enhancement:null};return void 0!==e&&(null!==e.activationId&&(g.activation=this.slormancerRunesService.getRuneById(e.activationId,a,e.activationLevel,c)),null!==e.effectId&&(g.effect=this.slormancerRunesService.getRuneById(e.effectId,a,e.effectLevel,c)),null!==e.enhancementId&&(g.enhancement=this.slormancerRunesService.getRuneById(e.enhancementId,a,e.enhancementLevel,c))),g}ultimatumToJson(e){let a=null;return null!==e&&(a={level:e.level,type:e.type}),a}skillToJson(e,a=!1){return{id:e.skill.id,rank:e.skill.baseLevel,upgrades:e.upgrades.map(c=>({id:c.id,rank:c.baseRank,selected:-1!==e.selectedUpgrades.indexOf(c.id)?1:0})).filter(c=>!a||c.selected)}}getActivableId(e){let a=null;return null!==e&&(a="isActivable"in e?e.id:200+e.id),a}characterToJson(e){return{type:"c",level:e.level,version:e.version,originalVersion:e.originalVersion,heroClass:e.heroClass,gear:{helm:this.itemToJson(e.gear.helm,!1),body:this.itemToJson(e.gear.body,!1),shoulder:this.itemToJson(e.gear.shoulder,!1),bracer:this.itemToJson(e.gear.bracer,!1),glove:this.itemToJson(e.gear.glove,!1),boot:this.itemToJson(e.gear.boot,!1),ring_l:this.itemToJson(e.gear.ring_l,!1),ring_r:this.itemToJson(e.gear.ring_r,!1),amulet:this.itemToJson(e.gear.amulet,!1),belt:this.itemToJson(e.gear.belt,!1),cape:this.itemToJson(e.gear.cape,!1)},inventory:e.inventory.map(a=>this.itemToJson(a,!0)),sharedInventory:e.sharedInventory.map(a=>a.map(c=>this.itemToJson(c,!0))),ultimatum:this.ultimatumToJson(e.ultimatum),ancestralLegacies:{ancestralLegacies:e.ancestralLegacies.ancestralLegacies.map(a=>this.ancestralLegacyToJson(a)),nodes:e.ancestralLegacies.activeNodes,firstNode:e.ancestralLegacies.activeFirstNode},reaper:this.reaperToJson(e.reaper),runes:this.runesToJson(e.runes),skills:e.skills.map(a=>this.skillToJson(a)),attributes:{[t.ahi.Toughness]:e.attributes.allocated[t.ahi.Toughness].baseRank,[t.ahi.Savagery]:e.attributes.allocated[t.ahi.Savagery].baseRank,[t.ahi.Fury]:e.attributes.allocated[t.ahi.Fury].baseRank,[t.ahi.Determination]:e.attributes.allocated[t.ahi.Determination].baseRank,[t.ahi.Zeal]:e.attributes.allocated[t.ahi.Zeal].baseRank,[t.ahi.Willpower]:e.attributes.allocated[t.ahi.Willpower].baseRank,[t.ahi.Dexterity]:e.attributes.allocated[t.ahi.Dexterity].baseRank,[t.ahi.Bravery]:e.attributes.allocated[t.ahi.Bravery].baseRank},support:null===e.supportSkill?null:e.supportSkill.id,primary:null===e.primarySkill?null:e.primarySkill.id,secondary:null===e.secondarySkill?null:e.secondarySkill.id,activable1:this.getActivableId(e.activable1),activable2:this.getActivableId(e.activable2),activable3:this.getActivableId(e.activable3),activable4:this.getActivableId(e.activable4)}}characterToMinimalJson(e){return{type:"c",level:e.level,version:e.version,originalVersion:e.originalVersion,heroClass:e.heroClass,gear:{helm:this.itemToJson(e.gear.helm,!1),body:this.itemToJson(e.gear.body,!1),shoulder:this.itemToJson(e.gear.shoulder,!1),bracer:this.itemToJson(e.gear.bracer,!1),glove:this.itemToJson(e.gear.glove,!1),boot:this.itemToJson(e.gear.boot,!1),ring_l:this.itemToJson(e.gear.ring_l,!1),ring_r:this.itemToJson(e.gear.ring_r,!1),amulet:this.itemToJson(e.gear.amulet,!1),belt:this.itemToJson(e.gear.belt,!1),cape:this.itemToJson(e.gear.cape,!1)},inventory:null,sharedInventory:null,ultimatum:this.ultimatumToJson(e.ultimatum),ancestralLegacies:{ancestralLegacies:e.ancestralLegacies.ancestralLegacies.filter(a=>-1!==e.ancestralLegacies.activeAncestralLegacies.indexOf(a.id)).map(a=>this.ancestralLegacyToJson(a)),nodes:e.ancestralLegacies.activeNodes,firstNode:e.ancestralLegacies.activeFirstNode},reaper:this.reaperToJson(e.reaper),runes:this.runesToJson(e.runes),skills:e.skills.filter(a=>a.skill===e.supportSkill||a.skill===e.primarySkill||a.skill===e.secondarySkill).map(a=>this.skillToJson(a,!0)),attributes:{[t.ahi.Toughness]:e.attributes.allocated[t.ahi.Toughness].baseRank,[t.ahi.Savagery]:e.attributes.allocated[t.ahi.Savagery].baseRank,[t.ahi.Fury]:e.attributes.allocated[t.ahi.Fury].baseRank,[t.ahi.Determination]:e.attributes.allocated[t.ahi.Determination].baseRank,[t.ahi.Zeal]:e.attributes.allocated[t.ahi.Zeal].baseRank,[t.ahi.Willpower]:e.attributes.allocated[t.ahi.Willpower].baseRank,[t.ahi.Dexterity]:e.attributes.allocated[t.ahi.Dexterity].baseRank,[t.ahi.Bravery]:e.attributes.allocated[t.ahi.Bravery].baseRank},support:null===e.supportSkill?null:e.supportSkill.id,primary:null===e.primarySkill?null:e.primarySkill.id,secondary:null===e.secondarySkill?null:e.secondarySkill.id,activable1:this.getActivableId(e.activable1),activable2:this.getActivableId(e.activable2),activable3:this.getActivableId(e.activable3),activable4:this.getActivableId(e.activable4)}}layerToJson(e){return{type:"l",character:this.characterToJson(e.character),name:e.name}}buildToJson(e){return{type:"p",version:e.version,heroClass:e.heroClass,name:e.name,layers:e.layers.map(a=>this.layerToJson(a)),configuration:Object.assign({},e.configuration)}}jsonToItem(e,a,c=null){let g=null;if(null!==e){const p=e.affixes.map(b=>this.slormancerAffixService.getAffixFromStat(this.STAT_MAPPING[b.stat],e.level,e.reinforcment,this.numberToRarity(b.rarity),b.craftedValue,b.pure)).filter(t.BXh);let C=c;null===C&&(C=null===e.base?t.JNB.Amulet:e.base);let n=null===e.legendaryEffect?null:this.slormancerLegendaryService.getLegendaryEffectById(e.legendaryEffect.id,e.legendaryEffect.craftedValue,e.reinforcment,a),_=null===e.reaperEnchantment?null:this.slormancerItemService.getReaperEnchantment(e.reaperEnchantment.reaperSmith,e.reaperEnchantment.craftedValue),u=null===e.skillEnchantment?null:this.slormancerItemService.getSkillEnchantment(e.skillEnchantment.skill,e.skillEnchantment.craftedValue),x=null===e.attributeEnchantment?null:this.slormancerItemService.getAttributeEnchantment(e.attributeEnchantment.attribute,e.attributeEnchantment.craftedValue);g=this.slormancerItemService.getEquipableItem(C,a,e.level,p,e.reinforcment,n,_,u,x)}return g}normalizeJsonCharacter(e){"0.2.152"===e.version&&(e.originalVersion=e.version,e.ultimatum=null),(0,t.n4)(e.version,"0.2.0")<0&&(e.reaper.affinity=t.DxO),(0,t.n4)(e.version,"0.5.0")<0&&(e.ancestralLegacies.firstNode=null)}jsonToCharacter(e){this.normalizeJsonCharacter(e);const a=this.slormancerReaperService.getReaperById(e.reaper.id,e.heroClass,1===e.reaper.primordial,e.reaper.level,0,e.reaper.primordialLevel,e.reaper.kills,e.reaper.primordialKills,e.reaper.affinity,e.reaper.effectAffinity),c=null===e.ultimatum?null:this.slormancerUltimatumService.getUltimatum(e.ultimatum.type,e.ultimatum.level),g=this.slormancerDataService.getGameDataAncestralLegacyIds().map((_,u)=>e.ancestralLegacies.ancestralLegacies.find(x=>x.id===u)).map(_=>_?_.rank:0),p=this.slormancerDataService.getGameDataSkills(e.heroClass).map((_,u)=>{let x=0;const b=e.skills.find(J=>J.id===u);if(b)x=(0,t.NMM)(b.rank);else{const J=e.skills.map(P=>P.upgrades).flat().find(P=>P.id===u);J&&(x=J.rank)}return x}),C=this.slormancerDataService.getGameDataSkills(e.heroClass).map((_,u)=>{const x=e.skills.map(b=>b.upgrades).flat().find(b=>b.id===u);return x?x.selected:0});return this.slormancerCharacterBuilderService.getCharacter(e.heroClass,e.level,e.version,e.originalVersion,null,a,this.jsonToRunes(e.runes,e.heroClass,null===a?null:a.id),c,e.ancestralLegacies.nodes,e.ancestralLegacies.firstNode,g,C,p,this.jsonToItem(e.gear.helm,e.heroClass,t.JNB.Helm),this.jsonToItem(e.gear.body,e.heroClass,t.JNB.Body),this.jsonToItem(e.gear.shoulder,e.heroClass,t.JNB.Shoulder),this.jsonToItem(e.gear.bracer,e.heroClass,t.JNB.Bracer),this.jsonToItem(e.gear.glove,e.heroClass,t.JNB.Glove),this.jsonToItem(e.gear.boot,e.heroClass,t.JNB.Boot),this.jsonToItem(e.gear.ring_l,e.heroClass,t.JNB.Ring),this.jsonToItem(e.gear.ring_r,e.heroClass,t.JNB.Ring),this.jsonToItem(e.gear.amulet,e.heroClass,t.JNB.Amulet),this.jsonToItem(e.gear.belt,e.heroClass,t.JNB.Belt),this.jsonToItem(e.gear.cape,e.heroClass,t.JNB.Cape),null===e.inventory?null:e.inventory.map(_=>this.jsonToItem(_,e.heroClass,null)),null===e.sharedInventory?null:e.sharedInventory.map(_=>_.map(u=>this.jsonToItem(u,e.heroClass,null))),e.attributes[t.ahi.Toughness],e.attributes[t.ahi.Savagery],e.attributes[t.ahi.Fury],e.attributes[t.ahi.Determination],e.attributes[t.ahi.Zeal],e.attributes[t.ahi.Willpower],e.attributes[t.ahi.Dexterity],e.attributes[t.ahi.Bravery],e.primary,e.secondary,e.support,e.activable1,e.activable2,e.activable3,e.activable4)}jsonToLayer(e){return{name:e.name,character:this.jsonToCharacter(e.character)}}jsonToBuild(e){return{version:e.version,heroClass:e.heroClass,name:e.name?e.name:"Default name",layers:e.layers.map(a=>this.jsonToLayer(a)),configuration:Object.assign({},e.configuration)}}jsonToSharedData(e){return{character:"c"===e.type?this.jsonToCharacter(e):null,configuration:null,layer:"l"===e.type?this.jsonToLayer(e):null,planner:"p"===e.type?this.jsonToBuild(e):null}}}return l.\u0275fac=function(e){return new(e||l)(i.LFG(t.ogB),i.LFG(t.oYj),i.LFG(t.SgH),i.LFG(t.ArO),i.LFG(t.lRX),i.LFG(t.IxD),i.LFG(t._VP),i.LFG(t.hrN))},l.\u0275prov=i.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},8223:(k,T,f)=>{f.d(T,{e:()=>c});var t=f(7261),i=f(5e3),O=f(9808),l=f(7423),o=f(5245);function e(g,p){if(1&g){const C=i.EpF();i.TgZ(0,"button",5),i.NdJ("click",function(){i.CHM(C);const _=i.oxw();return i.KtG(_.actionClick())}),i._uU(1),i.qZA()}if(2&g){const C=i.oxw();i.xp6(1),i.Oqu(C.action)}}let a=(()=>{class g{constructor(C,n){this.data=C,this.snackBarRef=n,this.message=C.message,this.action=C.action,this.actionCallback=C.actionCallback}close(){this.snackBarRef.dismiss()}actionClick(){null!==this.actionCallback&&this.actionCallback(),this.close()}}return g.\u0275fac=function(C){return new(C||g)(i.Y36(t.qD),i.Y36(t.OX))},g.\u0275cmp=i.Xpm({type:g,selectors:[["app-snackbar"]],decls:6,vars:2,consts:[[1,"content"],["src","assets/img/icon/message/success.png",1,"mc-ripped"],[1,"message",3,"innerHTML"],["mat-flat-button","","color","primary",3,"click",4,"ngIf"],[3,"click"],["mat-flat-button","","color","primary",3,"click"]],template:function(C,n){1&C&&(i.TgZ(0,"div",0),i._UZ(1,"img",1)(2,"div",2),i.YNc(3,e,2,1,"button",3),i.TgZ(4,"mat-icon",4),i.NdJ("click",function(){return n.close()}),i._uU(5,"close"),i.qZA()()),2&C&&(i.xp6(2),i.Q6J("innerHTML",n.message,i.oJD),i.xp6(1),i.Q6J("ngIf",null!==n.action&&null!==n.actionCallback))},dependencies:[O.O5,l.lW,o.Hw],styles:[".content[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:row;align-items:center;gap:16px}.content[_ngcontent-%COMP%]   .mc-ripped[_ngcontent-%COMP%]{height:30px;image-rendering:pixelated;animation:float 2s ease-in-out infinite}.content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;flex-grow:1}.content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]     img{height:32px;image-rendering:pixelated;margin:0 4px}.content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}@keyframes float{0%{transform:translatey(2px)}50%{transform:translatey(-2px)}to{transform:translatey(2px)}}"]}),g})(),c=(()=>{class g{constructor(C){this.snackBar=C,this.DEFAULT_DURATION=5e3,this.ACTION_DURATION=2e4,this.currentSnackBar=null}getConfig(C,n=null,_=null){return{duration:null!==n&&null!==_?this.ACTION_DURATION:this.DEFAULT_DURATION,data:{message:C,action:n,actionCallback:_}}}message(C,n=null,_=null){this.currentSnackBar=this.snackBar.openFromComponent(a,this.getConfig(C,n,_))}error(C,n=null,_=null){null!==this.currentSnackBar&&this.currentSnackBar.dismiss(),this.currentSnackBar=this.snackBar.openFromComponent(a,this.getConfig(C,n,_))}}return g.\u0275fac=function(C){return new(C||g)(i.LFG(t.ux))},g.\u0275prov=i.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},2424:(k,T,f)=>{f.d(T,{o:()=>l});var t=f(1135),i=f(3359),O=f(5e3);let l=(()=>{class o{constructor(){this.search=null,this.dom=document.createElement("div"),this.searchChanged=new t.X(null)}hasSearch(){return null!==this.search}setSearch(a){this.search=null!==a&&a.length>0?a:null,this.searchChanged.next(this.search)}getCleanSearchValue(){return null===this.search?null:this.search.toLowerCase().trim()}removeHtmlTags(a,c=[]){let g=a;if(null!==g){if(this.dom.innerHTML=g.toLowerCase(),c.length>0)for(const p of c){const C=this.dom.getElementsByClassName(p);for(let n=0,_=C.length;n<_;n++){const u=C.item(n);u&&u.remove()}}g=this.dom.textContent}return g}stringsMatchSearch(a){let c=!0;const g=this.getCleanSearchValue();return null!==g&&(c=null===this.search||void 0!==a.find(p=>(0,i.BXh)(p)&&-1!==p.toLowerCase().indexOf(g))),c}itemMatchSearch(a){return this.stringsMatchSearch([a.level.toString(),a.name,a.base,a.rarity,...a.affixes.map(c=>[c.isPure?"pure":null,this.removeHtmlTags(c.valueLabel+" "+c.statLabel,["details"])]).flat(),null===a.legendaryEffect?null:this.removeHtmlTags(a.legendaryEffect.description,["details"]),null!==a.reaperEnchantment?this.removeHtmlTags(a.reaperEnchantment.label,["details"]):null,null!==a.skillEnchantment?this.removeHtmlTags(a.skillEnchantment.label,["details"]):null,null!==a.attributeEnchantment?this.removeHtmlTags(a.attributeEnchantment.label,["details"]):null])||null!==a.legendaryEffect&&null!==a.legendaryEffect.activable&&this.activableMatchSearch(a.legendaryEffect.activable)}runeMatchSearch(a){return this.stringsMatchSearch([a.level.toString(),a.name,this.removeHtmlTags(a.constraintLabel),this.removeHtmlTags(a.description),a.flavor,a.smithLabel,a.typeLabel])}ultimatumMatchSearch(a){return this.stringsMatchSearch([a.title,a.levelLabel,a.bonusTitle,this.removeHtmlTags(a.bonusLabel),a.malusTitle,a.malusLabel])}upgradeMatchSearch(a){return this.stringsMatchSearch([a.name,a.type,this.removeHtmlTags(a.description),...a.genres,a.genresLabel,this.removeHtmlTags(a.costLabel),this.removeHtmlTags(a.costType),...a.relatedBuffs.map(c=>c.name),...a.relatedClassMechanics.map(c=>c.name),...a.relatedMechanics.map(c=>c.name)])}ancestralLegacyMatchSearch(a){return this.stringsMatchSearch([a.name,a.costType,...a.genres,a.isActivable?"activable":null,this.removeHtmlTags(a.description),...a.relatedBuffs.map(c=>c.name),...a.relatedMechanics.map(c=>c.name),...a.types,a.typeLabel,a.genresLabel,a.costLabel])}reaperMatchSearch(a){return this.stringsMatchSearch([a.name,a.description,a.benediction,a.malediction,a.smith.name,a.smithLabel,a.victimsLabel,a.levelLabel,a.damageTypeLabel,null!==a.benediction?a.benedictionTitleLabel:"",null!==a.malediction?a.maledictionTitleLabel:"",0!==a.activables.length?a.activablesTitleLabel:"",a.damagesLabel,a.maxDamagesLabel,a.affinityLabel,a.lore])||a.activables.some(c=>this.activableMatchSearch(c))}activableMatchSearch(a){return this.stringsMatchSearch([a.name,a.genresLabel,a.cooldownLabel,a.costLabel,a.description])}traitMatchSearch(a){return this.stringsMatchSearch([a.rankLabel,this.removeHtmlTags(a.cumulativeStats),this.removeHtmlTags(a.description),a.traitLevelLabel])}}return o.\u0275fac=function(a){return new(a||o)},o.\u0275prov=O.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},4802:(k,T,f)=>{f.d(T,{m:()=>z});var t=f(9808),i=f(8003),O=f(3359),l=f(2722),o=f(6446),e=f(5e3),a=f(1671),c=f(7423),g=f(5245),p=f(7322),C=f(4102),n=f(508),_=f(8029),u=f(3075);function x(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.addAttributeEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function b(v,E){if(1&v&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&v){const r=E.$implicit;e.Q6J("value",r.value),e.xp6(1),e.Q6J("innerHTML",r.label,e.oJD)}}function J(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Attribute Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,b,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(y){e.CHM(r);const L=e.oxw();return e.KtG(L.updateSliderValue(y))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.removeAttributeEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&v){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngForOf",r.options),e.xp6(2),e.Q6J("min",1)("max",3)("step",1),e.xp6(3),e.hij(" ",r.displayedValue," ")}}let P=(()=>{class v extends o.B{constructor(r,d){super(),this.itemFormService=r,this.slormancerItemService=d,this.form=null,this.options=[],this.displayedValue="",this.attributeEnchantment=null}ngOnChanges(r){this.options=this.itemFormService.getAttributeBuffOptions(),null!==this.form&&("form"in r&&this.form.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(d=>{var y,L;this.updateAttributeEnchantment(null!==(y=d.attribute)&&void 0!==y?y:null,null!==(L=d.value)&&void 0!==L?L:0)}),this.updateAttributeEnchantment(this.form.controls.attribute.value,this.form.controls.value.value))}updateAttributeEnchantment(r,d){this.attributeEnchantment=null===r?null:this.slormancerItemService.getAttributeEnchantment(r,d),this.displayedValue="",null!==this.attributeEnchantment&&(this.displayedValue="+"+(0,O.BeF)(this.attributeEnchantment.craftableValues[this.attributeEnchantment.craftedValue],0))}updateSliderValue(r){this.displayedValue="";const d=r.value;null!==this.attributeEnchantment&&null!==d&&this.updateAttributeEnchantment(this.attributeEnchantment.craftedValue,d)}removeAttributeEnchantment(){null!==this.form&&this.form.patchValue({attribute:null})}addAttributeEnchantment(){const r=this.options[0];null!==this.form&&r&&this.form.patchValue({attribute:r.value,value:3})}}return v.\u0275fac=function(r){return new(r||v)(e.Y36(a.K),e.Y36(O.SgH))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-item-edit-buff-attribute"]],inputs:{form:"form"},features:[e.qOj,e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","attribute"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Attribute Enchantment :"),e.qZA(),e.YNc(3,x,4,0,"div",2),e.qZA(),e.YNc(4,J,15,6,"div",3)),2&r&&(e.xp6(3),e.Q6J("ngIf",null!==d.form&&null===d.attributeEnchantment),e.xp6(1),e.Q6J("ngIf",null!==d.form&&null!==d.attributeEnchantment))},dependencies:[t.sg,t.O5,c.lW,g.Hw,p.KE,p.hX,C.gD,n.ey,_.pH,u.JJ,u.JL,u.sg,u.u]}),v})();function R(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.addReaperEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function w(v,E){if(1&v&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&v){const r=E.$implicit;e.Q6J("value",r.value),e.xp6(1),e.Q6J("innerHTML",r.label,e.oJD)}}function N(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Reaper Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,w,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(y){e.CHM(r);const L=e.oxw();return e.KtG(L.updateSliderValue(y))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.removeReaperEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&v){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngForOf",r.options),e.xp6(2),e.Q6J("min",1)("max",5)("step",1),e.xp6(3),e.hij(" ",r.displayedValue," ")}}let B=(()=>{class v extends o.B{constructor(r,d){super(),this.itemFormService=r,this.slormancerItemService=d,this.form=null,this.options=[],this.displayedValue="",this.reaperEnchantment=null}ngOnChanges(r){null!==this.form&&("form"in r&&this.form.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(d=>{var y,L;this.updateReaperEnchantment(null!==(y=d.smith)&&void 0!==y?y:null,null!==(L=d.value)&&void 0!==L?L:0)}),this.updateReaperEnchantment(this.form.controls.smith.value,this.form.controls.value.value)),this.options=this.itemFormService.getReaperBuffOptions()}updateReaperEnchantment(r,d){this.displayedValue="",this.reaperEnchantment=null===r?null:this.slormancerItemService.getReaperEnchantment(r,d),null!==this.reaperEnchantment&&(this.displayedValue="+"+this.reaperEnchantment.craftedValue)}updateSliderValue(r){this.displayedValue="";const d=r.value;null!==this.reaperEnchantment&&null!==d&&this.updateReaperEnchantment(this.reaperEnchantment.craftedReaperSmith,d)}removeReaperEnchantment(){null!==this.form&&this.form.patchValue({smith:null})}addReaperEnchantment(){const r=this.options[0];null!==this.form&&r&&this.form.patchValue({smith:r.value,value:5})}}return v.\u0275fac=function(r){return new(r||v)(e.Y36(a.K),e.Y36(O.SgH))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-item-edit-buff-reaper"]],inputs:{form:"form"},features:[e.qOj,e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","form-add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"form-add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","smith"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Reaper Enchantment :"),e.qZA(),e.YNc(3,R,4,0,"div",2),e.qZA(),e.YNc(4,N,15,6,"div",3)),2&r&&(e.xp6(3),e.Q6J("ngIf",null!==d.form&&null===d.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==d.form&&null!==d.reaperEnchantment))},dependencies:[t.sg,t.O5,c.lW,g.Hw,p.KE,p.hX,C.gD,n.ey,_.pH,u.JJ,u.JL,u.sg,u.u]}),v})();function M(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.addSkillEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function I(v,E){if(1&v&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&v){const r=E.$implicit;e.Q6J("value",r.value),e.xp6(1),e.Q6J("innerHTML",r.label,e.oJD)}}function s(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Skill Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,I,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(y){e.CHM(r);const L=e.oxw();return e.KtG(L.updateSliderValue(y))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.removeSkillEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&v){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngForOf",r.options),e.xp6(2),e.Q6J("min",1)("max",2)("step",1),e.xp6(3),e.hij(" ",r.displayedValue," ")}}let A=(()=>{class v extends o.B{constructor(r,d){super(),this.itemFormService=r,this.slormancerItemService=d,this.heroClass=O.iHO.Huntress,this.form=null,this.options=[],this.displayedValue="",this.skillEnchantment=null}ngOnChanges(r){this.options=this.itemFormService.getSkillBuffOptions(this.heroClass),null!==this.form&&("form"in r&&this.form.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(d=>{var y,L;this.updateSkillEnchantment(null!==(y=d.skill)&&void 0!==y?y:null,null!==(L=d.value)&&void 0!==L?L:0)}),this.updateSkillEnchantment(this.form.controls.skill.value,this.form.controls.value.value))}updateSkillEnchantment(r,d){this.skillEnchantment=null===r?null:this.slormancerItemService.getSkillEnchantment(r,d),this.displayedValue="",null!==this.skillEnchantment&&null!==d&&(this.displayedValue="+"+(0,O.BeF)(this.skillEnchantment.craftableValues[d],0))}updateSliderValue(r){this.displayedValue="";const d=r.value;null!==this.skillEnchantment&&null!==d&&this.updateSkillEnchantment(this.skillEnchantment.craftedSkill,d)}removeSkillEnchantment(){null!==this.form&&this.form.patchValue({skill:null})}addSkillEnchantment(){const r=this.options[0];null!==this.form&&r&&this.form.patchValue({skill:r.value,value:2})}}return v.\u0275fac=function(r){return new(r||v)(e.Y36(a.K),e.Y36(O.SgH))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-item-edit-buff-skill"]],inputs:{heroClass:"heroClass",form:"form"},features:[e.qOj,e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","skill"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Skill Enchantment :"),e.qZA(),e.YNc(3,M,4,0,"div",2),e.qZA(),e.YNc(4,s,15,6,"div",3)),2&r&&(e.xp6(3),e.Q6J("ngIf",null!==d.form&&null===d.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==d.form&&null!==d.skillEnchantment))},dependencies:[t.sg,t.O5,c.lW,g.Hw,p.KE,p.hX,C.gD,n.ey,_.pH,u.JJ,u.JL,u.sg,u.u]}),v})();function m(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.addLegendaryEffect())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function h(v,E){if(1&v&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&v){const r=E.$implicit;e.Q6J("value",r.value),e.xp6(1),e.Q6J("innerHTML",r.label,e.oJD)}}function S(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"mat-slider",18),e.NdJ("input",function(y){e.CHM(r);const L=e.oxw(2);return e.KtG(L.updateSliderValue(y))}),e.qZA()}2&v&&e.Q6J("min",75)("max",100)("step",1)}function Z(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Legendary effect"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,h,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11),e.YNc(8,S,1,3,"mat-slider",12),e.qZA(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.removeLegendaryEffect())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&v){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngForOf",r.options),e.xp6(2),e.Q6J("ngIf",r.hasLegendaryValues()),e.xp6(3),e.hij(" ",r.displayedValue," ")}}let H=(()=>{class v extends o.B{constructor(r,d){super(),this.itemFormService=r,this.slormancerLegendaryEffectService=d,this.base=O.JNB.Amulet,this.heroClass=O.iHO.Huntress,this.itemReinforcment=0,this.form=null,this.options=[],this.displayedValue="",this.legendaryEffect=null}ngOnChanges(r){null!==this.form&&("form"in r&&this.form.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(d=>{var y,L;this.updateLegendaryEffect(null!==(y=d.id)&&void 0!==y?y:null,null!==(L=d.value)&&void 0!==L?L:0)}),this.updateLegendaryEffect(this.form.controls.id.value,this.form.controls.value.value)),this.options=this.itemFormService.getLegendaryOptions(this.base,this.heroClass)}updateLegendaryEffect(r,d){this.legendaryEffect=null===this.form||null===r?null:this.slormancerLegendaryEffectService.getLegendaryEffectById(r,this.form.controls.value.value,this.itemReinforcment,this.heroClass),null!==this.legendaryEffect&&this.updateLegendaryValueLabel(this.legendaryEffect.value)}updateLegendaryValueLabel(r){this.displayedValue="",null!==this.legendaryEffect&&null!==r&&(this.displayedValue=this.legendaryEffect.effects.filter(d=>d.possibleCraftedValues.length>1).map(d=>{const y=d.effect.percent?"%":"";return(0,O.AWe)(d,r)+y}).join(" / "))}hasLegendaryValues(){return null!==this.legendaryEffect&&this.legendaryEffect.effects.filter(r=>r.possibleCraftedValues.length>1).length>0}updateSliderValue(r){this.displayedValue="";const d=r.value;null!==this.legendaryEffect&&null!==d&&this.updateLegendaryValueLabel(d)}removeLegendaryEffect(){null!==this.form&&this.form.patchValue({id:null})}addLegendaryEffect(){const r=this.options[0];null!==this.form&&r&&this.form.patchValue({id:r.value,value:100})}}return v.\u0275fac=function(r){return new(r||v)(e.Y36(a.K),e.Y36(O.ArO))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-item-edit-legendary-effect"]],inputs:{base:"base",heroClass:"heroClass",itemReinforcment:"itemReinforcment",form:"form"},features:[e.qOj,e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"],["color","primary","formControlName","value",3,"min","max","step","input"]],template:function(r,d){1&r&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Legendary effect :"),e.qZA(),e.YNc(3,m,4,0,"div",2),e.qZA(),e.YNc(4,Z,15,4,"div",3)),2&r&&(e.xp6(3),e.Q6J("ngIf",null!==d.form&&null===d.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==d.form&&null!==d.legendaryEffect))},dependencies:[t.sg,t.O5,c.lW,g.Hw,p.KE,p.hX,C.gD,n.ey,_.pH,u.JJ,u.JL,u.sg,u.u]}),v})();var D=f(3761),F=f(7446),Q=f(461);function U(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"mat-slider",11),e.NdJ("input",function(y){e.CHM(r);const L=e.oxw(2);return e.KtG(L.updateSliderStat(y))}),e.qZA()}if(2&v){const r=e.oxw(2);e.Q6J("min",r.affix.craftedEffect.minPossibleCraftedValue)("max",r.affix.craftedEffect.maxPossibleCraftedValue)("step",1)}}function V(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"mat-slider",12),e.NdJ("input",function(y){e.CHM(r);const L=e.oxw(2);return e.KtG(L.updateSliderPurity(y))}),e.qZA()}2&v&&e.Q6J("min",101)("max",200)("step",1)}function K(v,E){if(1&v){const r=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"app-search-select",3),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,U,1,3,"mat-slider",5),e.YNc(5,V,1,3,"mat-slider",6),e.qZA(),e.TgZ(6,"div",7)(7,"div",8),e._uU(8),e.qZA(),e.TgZ(9,"mat-checkbox",9),e._uU(10,"Pure"),e.qZA(),e.TgZ(11,"button",10),e.NdJ("click",function(){e.CHM(r);const y=e.oxw();return e.KtG(y.removeStat())}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA()()()()}if(2&v){const r=e.oxw();e.Q6J("formGroup",r.form),e.xp6(2),e.Q6J("control",r.form.controls.stat)("options",r.options)("disabledOptions",r.alreadyUsedStats),e.xp6(2),e.Q6J("ngIf",!r.form.controls.pure.value),e.xp6(1),e.Q6J("ngIf",r.form.controls.pure.value),e.xp6(2),e.ekj("pure",r.form.controls.pure.value),e.xp6(1),e.Oqu(r.displayedValue),e.xp6(3),e.Q6J("disabled",!r.removable)}}let G=(()=>{class v extends o.B{constructor(r,d){super(),this.itemFormService=r,this.slormancerAffixService=d,this.itemBase=O.JNB.Amulet,this.itemLevel=0,this.itemReinforcment=0,this.alreadyUsedStats=[],this.form=null,this.removable=!1,this.remove=new e.vpe,this.options=[],this.displayedValue="",this.affix=null}ngOnChanges(r){null!==this.form&&("form"in r&&(this.form.controls.rarity.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(d=>{this.options=this.itemFormService.getStatsOptions(this.itemBase,d)}),this.form.valueChanges.pipe((0,l.R)(this.unsubscribe)).subscribe(()=>this.updateAffix())),("form"in r||"itemBase"in r)&&(this.options=this.itemFormService.getStatsOptions(this.itemBase,this.form.controls.rarity.value)),("form"in r||"itemLevel"in r||"itemReinforcment"in r)&&this.updateAffix())}updateAffix(){null!==this.form&&(this.affix=this.slormancerAffixService.getAffixFromStat(this.form.controls.stat.value,this.itemLevel,this.itemReinforcment,this.form.controls.rarity.value,this.form.controls.value.value,this.form.controls.purity.value),null!==this.affix&&this.slormancerAffixService.updateAffix(this.affix),this.updatePurity(this.form.controls.pure.value,this.form.controls.purity.value,this.form.controls.value.value))}updatePurity(r,d,y){r?this.setPuritylabel(d):this.setStatLabel(y)}updateSliderPurity(r){null!==r.value&&this.setPuritylabel(r.value)}updateSliderStat(r){null!==r.value&&this.setStatLabel(r.value)}setPuritylabel(r){this.displayedValue=Math.round(r-100)+"%"}setStatLabel(r){if(this.displayedValue="",null!==this.affix){const d=this.affix.craftedEffect.effect.percent?"%":"";this.displayedValue=null===this.affix?"":"+"+((0,O.AWe)(this.affix.craftedEffect,r)+d)}}removeStat(){this.remove.emit()}}return v.\u0275fac=function(r){return new(r||v)(e.Y36(a.K),e.Y36(O.lRX))},v.\u0275cmp=e.Xpm({type:v,selectors:[["app-item-edit-stat"]],inputs:{itemBase:"itemBase",itemLevel:"itemLevel",itemReinforcment:"itemReinforcment",alreadyUsedStats:"alreadyUsedStats",form:"form",removable:"removable"},outputs:{remove:"remove"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["class","stat-line",3,"formGroup",4,"ngIf"],[1,"stat-line",3,"formGroup"],[1,"select"],["label","Stat","notFoundMessage","This stat is not longer available",3,"control","options","disabledOptions"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],["color","accent","formControlName","purity",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["color","primary","formControlName","pure"],["mat-icon-button","","color","primary","type","button",3,"disabled","click"],["color","primary","formControlName","value",3,"min","max","step","input"],["color","accent","formControlName","purity",3,"min","max","step","input"]],template:function(r,d){1&r&&e.YNc(0,K,14,10,"div",0),2&r&&e.Q6J("ngIf",null!==d.form&&null!==d.affix)},dependencies:[t.O5,c.lW,g.Hw,_.pH,F.oG,u.JJ,u.JL,u.sg,u.u,Q.a],styles:[".pure[_ngcontent-%COMP%]{color:#20d787}"]}),v})();var j=f(4344),W=f(4890),X=f(7295),Y=f(9881),q=f(2349),$=f(7531);let z=(()=>{class v{}return v.\u0275fac=function(r){return new(r||v)},v.\u0275mod=e.oAB({type:v}),v.\u0275inj=e.cJS({imports:[t.ez,Y.q,Y.q]}),v})();e.B6R(D.F,[t.sg,t.O5,c.lW,g.Hw,q.ZT,q.xY,q.H8,p.TO,p.KE,p.hX,$.Nt,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.qQ,u.Fd,u.sg,u.u,j.F,G,H,B,A,P],[]),e.B6R(X.g,[t.O5,i.K,W.G],[])}}]);