"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[177],{5177:(wl,be,g)=>{g.r(be),g.d(be,{SlormPlannerModule:()=>Tl});var m=g(9808),ae=g(2271),E=g(1083),T=g(6446),M=g(4456),_e=g(1135),z=g(5457),C=g(5581),at=g(7579),it=g(8372),ie=g(2340),L=g(4373),$=g(2469);const B={attunment_pulse_current_school:$.H.Arcanic,completed_achievements:0,elder_slorms:0,active_inner_fire:0,mana_lost_last_second:0,mana_gained_last_second:0,knight_other_level:L.AR,enemy_under_command:0,enemies_in_breach_range:0,elite_under_command:0,totems_under_control:0,traps_nearby:0,serenity:0,arcanic_emblems:0,temporal_emblems:0,obliteration_emblems:0,last_cast_tormented:!1,last_cast_delighted:!1,next_cast_is_fortunate:!1,next_cast_is_perfect:!1,next_cast_is_new_emblem:!0,use_enemy_state:!1,enemy_percent_missing_health:0,percent_missing_health:0,percent_missing_mana:0,overall_reputation:0,crit_recently:!1,dodge_recently:!1,hits_taken_recently:0,skill_cast_recently:0,frostbolt_shot_recently:0,slormocide_60:0,goldbane_5:0,rebounds_before_hit:0,pierces_before_hit:0,enemies_in_rain_of_arrow:0,enemies_affected_by_latent_storm:0,clone_is_in_breach_range:!1,target_is_close:!1,target_is_isolated:!1,target_is_tracked:!1,target_is_time_locked:!1,target_is_in_breach_range:!1,enemy_is_poisoned:!1,enemy_has_military_oppression:!1,target_has_negative_effect:!1,target_is_skewered:!1,enemy_splintered_stacks:0,revengeance_stacks:0,target_has_broken_armor:!1,target_has_remnant_vulnerability:!1,target_has_arcane_discordance:!1,target_has_temporal_discordance:!1,target_has_obliteration_discordance:!1,is_first_arrow_shot_hit:!1,is_hit_blocked:!1,is_last_volley:!1,is_channeling_whirlwind:!1,is_channeling_arcane_barrier:!1,is_channeling_ray_of_obliteration:!1,is_channeling_focus:!1,is_remnant:!1,ray_of_obliteration_is_short:!1,void_arrow_fully_charged:!1,rift_nova_fully_charged:!1,elites_in_radius:0,ennemies_in_radius:0,negative_effects_on_ennemies_in_radius:0,enfeeble_stacks_in_radius:0,poison_enemies:0,trap_triggered_recently:!1,took_elemental_damage_recently:!1,took_physical_damage_recently:!1,cast_support_before_next_cast:!1,victims_reaper_104:0,banners_nearby:0,controlled_minions:0,has_elemental_prowess_buff:!1,totem_dexterity_stacks:0,greed_stacks:0,strider_stacks:0,merchant_stacks:0,nimble_champion_stacks:0,ancestral_legacy_stacks:0,conquest_stacks:0,stability_stacks:0,enlightenment_stacks:0,delightful_rain_stacks:0,target_latent_storm_stacks:0,exhilerating_senses_stacks:0,impatient_arrow_stacks:0,frenzy_stacks:0,oak_bark_armor_stacks:0,enemy_bleed_stacks:0,enemy_enfeeble_stacks:0,block_stacks:0,melee_defense_stacks:0,projectile_defense_stacks:0,aoe_defense_stacks:0,vitality_stacks:0,cosmic_stacks:0,invigorate_stacks:0,arcane_stacks:0,ray_of_obliteration_grow_stacks:0,high_spirit_stacks:0,chrono_manamorphosis_stacks:0,chrono_armor_stacks:0,chrono_empower_stacks:0,chrono_speed_stacks:0,enemy_traumatized_stacks:0,arcane_flux_stacks:0,arcane_breach_collision_stacks:0,temporal_breach_collision_stacks:0,obliteration_breach_collision_stacks:0,elemental_weakness_stacks:0,high_voltage_stacks:0,elemental_spirit_stacks:0,fulgurorn_dedication_stacks:0,enemy_inner_weakness_stacks:0,apex_predator_stacks:0,distance_with_target:0,has_elemental_temper_buff:!1,has_splash_splash_buff:!1,has_burning_shadow_buff:!1,has_gold_armor_buff:!1,has_soul_bound_buff:!1,has_adam_blessing_buff:!1,has_manabender_buff:!1,has_nimble_buff:!1,has_ancient_recognition_buff:!1,has_elemental_fervor_buff:!1,has_ancestral_fervor_buff:!1,has_assassin_haste_buff:!1,has_smoke_screen_buff:!1,has_ancestral_stab_slash_buff:!1,has_banner_regeneration_buff:!1,has_banner_haste_buff:!1,has_enduring_protector_buff:!1,has_speed_gate_buff:!1,has_shadow_repercussion_buff:!1,has_booster_max_buff:!1,has_electrify_buff:!1,concentration_buff:!1,ultima_momentum_buff:!1,exposed_armor_buff:!1,all_other_characters_level:100,idle:!1,damage_stored:0,overdrive_bounces_left:0,time_spend_channeling:0,overdrive_last_bounce:!1,hero_close_to_turret_syndrome:!1,turret_syndrome_on_cooldown:!1,projectile_passed_through_wall_of_omen:!1,summoned_skeleton_squires:0,always_summon_maximum_skeleton_squires:!1,minimum_unreserved_mana:0,add_totem_tag_to_prime_totem_skills:!1,highest_slorm_temple_floor:0,show_temple_keeper_as_totem:!1,show_elder_inner_fire_damage:!1,chilled_enemy_nearby:0,in_combat:!1},ot={attunment_pulse_current_school:$.H.Arcanic,completed_achievements:0,elder_slorms:0,active_inner_fire:0,mana_lost_last_second:0,mana_gained_last_second:0,knight_other_level:L.AR,enemy_under_command:0,enemies_in_breach_range:0,elite_under_command:0,totems_under_control:0,traps_nearby:0,serenity:6,arcanic_emblems:0,temporal_emblems:0,obliteration_emblems:0,last_cast_tormented:!1,last_cast_delighted:!1,next_cast_is_fortunate:!1,next_cast_is_perfect:!1,next_cast_is_new_emblem:!0,use_enemy_state:!1,enemy_percent_missing_health:0,percent_missing_health:0,percent_missing_mana:0,overall_reputation:0,crit_recently:!1,dodge_recently:!1,hits_taken_recently:0,skill_cast_recently:0,frostbolt_shot_recently:0,slormocide_60:0,goldbane_5:0,rebounds_before_hit:0,pierces_before_hit:0,enemies_in_rain_of_arrow:0,enemies_affected_by_latent_storm:1,clone_is_in_breach_range:!0,target_is_close:!1,target_is_isolated:!1,target_is_tracked:!1,target_is_time_locked:!1,target_is_in_breach_range:!0,enemy_is_poisoned:!1,enemy_has_military_oppression:!0,target_has_negative_effect:!1,target_is_skewered:!1,enemy_splintered_stacks:3,target_has_broken_armor:!1,target_has_remnant_vulnerability:!1,target_has_arcane_discordance:!0,target_has_temporal_discordance:!0,target_has_obliteration_discordance:!0,is_first_arrow_shot_hit:!1,is_hit_blocked:!1,is_last_volley:!1,is_channeling_whirlwind:!0,is_channeling_arcane_barrier:!1,is_channeling_ray_of_obliteration:!0,is_channeling_focus:!1,is_remnant:!1,ray_of_obliteration_is_short:!1,void_arrow_fully_charged:!1,rift_nova_fully_charged:!1,elites_in_radius:0,ennemies_in_radius:0,negative_effects_on_ennemies_in_radius:0,enfeeble_stacks_in_radius:0,poison_enemies:0,trap_triggered_recently:!0,took_elemental_damage_recently:!0,took_physical_damage_recently:!1,cast_support_before_next_cast:!1,victims_reaper_104:0,banners_nearby:0,controlled_minions:0,has_elemental_prowess_buff:!0,totem_dexterity_stacks:200,greed_stacks:0,strider_stacks:0,merchant_stacks:0,nimble_champion_stacks:10,ancestral_legacy_stacks:0,conquest_stacks:100,stability_stacks:100,enlightenment_stacks:999,delightful_rain_stacks:100,target_latent_storm_stacks:0,exhilerating_senses_stacks:0,impatient_arrow_stacks:20,frenzy_stacks:15,oak_bark_armor_stacks:10,enemy_bleed_stacks:0,enemy_enfeeble_stacks:0,block_stacks:0,melee_defense_stacks:0,projectile_defense_stacks:0,aoe_defense_stacks:0,vitality_stacks:10,cosmic_stacks:0,invigorate_stacks:5,arcane_stacks:5,ray_of_obliteration_grow_stacks:3,high_spirit_stacks:10,chrono_manamorphosis_stacks:25,chrono_armor_stacks:25,chrono_empower_stacks:25,chrono_speed_stacks:25,enemy_traumatized_stacks:8,arcane_flux_stacks:25,arcane_breach_collision_stacks:10,temporal_breach_collision_stacks:10,obliteration_breach_collision_stacks:10,elemental_weakness_stacks:12,high_voltage_stacks:0,revengeance_stacks:0,elemental_spirit_stacks:0,fulgurorn_dedication_stacks:165,enemy_inner_weakness_stacks:10,apex_predator_stacks:0,distance_with_target:0,has_elemental_temper_buff:!0,has_splash_splash_buff:!0,has_burning_shadow_buff:!0,has_gold_armor_buff:!0,has_soul_bound_buff:!0,has_adam_blessing_buff:!0,has_manabender_buff:!0,has_nimble_buff:!0,has_ancient_recognition_buff:!0,has_elemental_fervor_buff:!0,has_ancestral_fervor_buff:!0,has_assassin_haste_buff:!0,has_smoke_screen_buff:!0,has_ancestral_stab_slash_buff:!0,has_banner_regeneration_buff:!0,has_banner_haste_buff:!0,has_enduring_protector_buff:!0,has_speed_gate_buff:!0,has_shadow_repercussion_buff:!0,has_booster_max_buff:!0,has_electrify_buff:!0,concentration_buff:!0,ultima_momentum_buff:!0,exposed_armor_buff:!0,all_other_characters_level:100,idle:!0,damage_stored:0,overdrive_bounces_left:0,time_spend_channeling:20,overdrive_last_bounce:!1,hero_close_to_turret_syndrome:!0,turret_syndrome_on_cooldown:!0,projectile_passed_through_wall_of_omen:!0,summoned_skeleton_squires:0,always_summon_maximum_skeleton_squires:!0,minimum_unreserved_mana:0,add_totem_tag_to_prime_totem_skills:!0,highest_slorm_temple_floor:0,show_temple_keeper_as_totem:!1,show_elder_inner_fire_damage:!0,chilled_enemy_nearby:0,in_combat:!0};var e=g(5e3);let rt=(()=>{class a{constructor(){this.CHANGES=[{version:"0.0.2",update:t=>{t.configuration.frostbolt_shot_recently=0,t.configuration.has_elemental_prowess_buff=!1,t.configuration.has_splash_splash_buff=!1,t.configuration.has_booster_max_buff=!1,t.version="0.0.2"}},{version:"0.0.4",update:t=>{t.configuration.use_enemy_state=!1,t.version="0.0.4"}},{version:"0.0.8",update:t=>{t.version="0.0.8";for(const n of t.layers)n.character.originalVersion=n.character.version,n.character.version=L.ve;t.configuration.has_electrify_buff=!1,t.configuration.elemental_spirit_stacks=0,t.configuration.is_channeling_focus=!1}},{version:"0.0.9",update:t=>{t.version="0.0.9";for(const n of t.layers)n.character.version=L.ve}},{version:"0.0.10",update:t=>{t.version="0.0.10"}},{version:"0.0.11",update:t=>{t.version="0.0.11",t.name="New build"}},{version:"0.0.12",update:t=>{t.version="0.0.12";for(const n of t.layers)n.character.importVersion=null}},{version:"0.1.0",update:t=>{t.version="0.1.0",void 0===t.configuration.concentration_buff&&(t.configuration.concentration_buff=!1),void 0===t.configuration.summoned_skeleton_squires&&(t.configuration.summoned_skeleton_squires=0),void 0===t.configuration.always_summon_maximum_skeleton_squires&&(t.configuration.always_summon_maximum_skeleton_squires=!1),void 0===t.configuration.minimum_unreserved_mana&&(t.configuration.minimum_unreserved_mana=0),void 0===t.configuration.fulgurorn_dedication_stacks&&(t.configuration.fulgurorn_dedication_stacks=0),void 0===t.configuration.enemy_inner_weakness_stacks&&(t.configuration.enemy_inner_weakness_stacks=0),void 0===t.configuration.add_totem_tag_to_prime_totem_skills&&(t.configuration.add_totem_tag_to_prime_totem_skills=!1),void 0===t.configuration.highest_slorm_temple_floor&&(t.configuration.highest_slorm_temple_floor=0),void 0===t.configuration.show_temple_keeper_as_totem&&(t.configuration.show_temple_keeper_as_totem=!1),void 0===t.configuration.ultima_momentum_buff&&(t.configuration.ultima_momentum_buff=!1),void 0===t.configuration.elder_slorms&&(t.configuration.elder_slorms=0),void 0===t.configuration.show_elder_inner_fire_damage&&(t.configuration.show_elder_inner_fire_damage=!1),void 0===t.configuration.exposed_armor_buff&&(t.configuration.exposed_armor_buff=!1),void 0===t.configuration.apex_predator_stacks&&(t.configuration.apex_predator_stacks=0),void 0===t.configuration.enemy_enfeeble_stacks&&(t.configuration.enemy_enfeeble_stacks=0),void 0===t.configuration.enfeeble_stacks_in_radius&&(t.configuration.enfeeble_stacks_in_radius=0),"all_characters_level"in t.configuration&&(t.configuration.all_characters_level=void 0,t.configuration.all_other_characters_level=100)}},{version:"0.1.1",update:t=>{t.version="0.1.1"}},{version:"0.1.2",update:t=>{t.version="0.1.2",void 0===t.configuration.chilled_enemy_nearby&&(t.configuration.chilled_enemy_nearby=B.chilled_enemy_nearby),void 0===t.configuration.in_combat&&(t.configuration.in_combat=B.in_combat)}},{version:"0.1.3",update:t=>{t.version="0.1.3"}},{version:"0.1.4",update:t=>{t.version="0.1.4"}},{version:"0.1.5",update:t=>{t.version="0.1.5"}}]}updateToLatestVersion(t){void 0===t.version&&(t.version="0.0.1",t.configuration=B);for(let n of this.CHANGES)(0,C.n4)(n.version,t.version)>0&&n.update(t)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var h=g(7399),v=g(2206),de=g(9377),W=g(5351),V=g(5832),Me=g(7189),ge=g(3790),xe=g(1682),H=g(2473),O=g(4713);let Oe=(()=>{class a{constructor(t,n,i,r,l,s,d){this.slormancerDataService=t,this.slormancerCharacterBuilderService=n,this.slormancerItemService=i,this.slormancerLegendaryService=r,this.slormancerAffixService=l,this.slormancerReaperService=s,this.slormancerUltimatumService=d,this.RARITY_MAPPING=[{rarity:v.u.Normal,mapping:0},{rarity:v.u.Magic,mapping:1},{rarity:v.u.Rare,mapping:2},{rarity:v.u.Epic,mapping:3},{rarity:v.u.Legendary,mapping:4}],this.STAT_MAPPING={},this.REVERSE_STAT_MAPPING={};for(const u of t.getGameDataStats())this.STAT_MAPPING[u.REF_NB]=u.REF,this.REVERSE_STAT_MAPPING[u.REF]=u.REF_NB}rarityToNumber(t){const n=this.RARITY_MAPPING.find(i=>i.rarity===t);return n?n.mapping:0}numberToRarity(t){const n=this.RARITY_MAPPING.find(i=>i.mapping===t);return n?n.rarity:v.u.Normal}itemToJson(t,n){return null===t?null:{base:n?t.base:null,level:t.level,reinforcment:t.reinforcment,affixes:t.affixes.map(i=>({rarity:this.rarityToNumber(i.rarity),pure:100===i.pure?0:i.pure,stat:(0,C.Be)(this.REVERSE_STAT_MAPPING[i.craftedEffect.effect.stat],0),craftedValue:i.craftedEffect.craftedValue})),legendaryEffect:null===t.legendaryEffect?null:{craftedValue:t.legendaryEffect.value,id:t.legendaryEffect.id},reaperEnchantment:null===t.reaperEnchantment?null:{craftedValue:t.reaperEnchantment.craftedValue,reaperSmith:t.reaperEnchantment.craftedReaperSmith},skillEnchantment:null===t.skillEnchantment?null:{craftedValue:t.skillEnchantment.craftedValue,skill:t.skillEnchantment.craftedSkill},attributeEnchantment:null===t.attributeEnchantment?null:{craftedValue:t.attributeEnchantment.craftedValue,attribute:t.attributeEnchantment.craftedAttribute}}}ancestralLegacyToJson(t){return{id:t.id,rank:t.baseRank}}reaperToJson(t){return{id:t.id,level:t.baseInfo.level,primordialLevel:t.primordialInfo.level,kills:t.baseInfo.kills,primordialKills:t.primordialInfo.kills,primordial:t.primordial?1:0}}ultimatumToJson(t){let n=null;return null!==t&&(n={level:t.level,type:t.type}),n}skillToJson(t,n=!1){return{id:t.skill.id,rank:t.skill.baseLevel,upgrades:t.upgrades.map(i=>({id:i.id,rank:i.baseRank,selected:-1!==t.selectedUpgrades.indexOf(i.id)?1:0})).filter(i=>!n||i.selected)}}getActivableId(t){let n=null;return null!==t&&(n="isActivable"in t?t.id:200+t.id),n}characterToJson(t){return{type:"c",level:t.level,version:t.version,originalVersion:t.originalVersion,heroClass:t.heroClass,gear:{helm:this.itemToJson(t.gear.helm,!1),body:this.itemToJson(t.gear.body,!1),shoulder:this.itemToJson(t.gear.shoulder,!1),bracer:this.itemToJson(t.gear.bracer,!1),glove:this.itemToJson(t.gear.glove,!1),boot:this.itemToJson(t.gear.boot,!1),ring_l:this.itemToJson(t.gear.ring_l,!1),ring_r:this.itemToJson(t.gear.ring_r,!1),amulet:this.itemToJson(t.gear.amulet,!1),belt:this.itemToJson(t.gear.belt,!1),cape:this.itemToJson(t.gear.cape,!1)},inventory:t.inventory.map(n=>this.itemToJson(n,!0)),sharedInventory:t.sharedInventory.map(n=>n.map(i=>this.itemToJson(i,!0))),ultimatum:this.ultimatumToJson(t.ultimatum),ancestralLegacies:{ancestralLegacies:t.ancestralLegacies.ancestralLegacies.map(n=>this.ancestralLegacyToJson(n)),nodes:t.ancestralLegacies.activeNodes},reaper:this.reaperToJson(t.reaper),skills:t.skills.map(n=>this.skillToJson(n)),attributes:{[h.a.Toughness]:t.attributes.allocated[h.a.Toughness].rank,[h.a.Savagery]:t.attributes.allocated[h.a.Savagery].rank,[h.a.Fury]:t.attributes.allocated[h.a.Fury].rank,[h.a.Determination]:t.attributes.allocated[h.a.Determination].rank,[h.a.Zeal]:t.attributes.allocated[h.a.Zeal].rank,[h.a.Willpower]:t.attributes.allocated[h.a.Willpower].rank,[h.a.Dexterity]:t.attributes.allocated[h.a.Dexterity].rank,[h.a.Bravery]:t.attributes.allocated[h.a.Bravery].rank},support:null===t.supportSkill?null:t.supportSkill.id,primary:null===t.primarySkill?null:t.primarySkill.id,secondary:null===t.secondarySkill?null:t.secondarySkill.id,activable1:this.getActivableId(t.activable1),activable2:this.getActivableId(t.activable2),activable3:this.getActivableId(t.activable3),activable4:this.getActivableId(t.activable4)}}characterToMinimalJson(t){return{type:"c",level:t.level,version:t.version,originalVersion:t.originalVersion,heroClass:t.heroClass,gear:{helm:this.itemToJson(t.gear.helm,!1),body:this.itemToJson(t.gear.body,!1),shoulder:this.itemToJson(t.gear.shoulder,!1),bracer:this.itemToJson(t.gear.bracer,!1),glove:this.itemToJson(t.gear.glove,!1),boot:this.itemToJson(t.gear.boot,!1),ring_l:this.itemToJson(t.gear.ring_l,!1),ring_r:this.itemToJson(t.gear.ring_r,!1),amulet:this.itemToJson(t.gear.amulet,!1),belt:this.itemToJson(t.gear.belt,!1),cape:this.itemToJson(t.gear.cape,!1)},inventory:null,sharedInventory:null,ultimatum:this.ultimatumToJson(t.ultimatum),ancestralLegacies:{ancestralLegacies:t.ancestralLegacies.ancestralLegacies.filter(n=>-1!==t.ancestralLegacies.activeAncestralLegacies.indexOf(n.id)).map(n=>this.ancestralLegacyToJson(n)),nodes:t.ancestralLegacies.activeNodes},reaper:this.reaperToJson(t.reaper),skills:t.skills.filter(n=>n.skill===t.supportSkill||n.skill===t.primarySkill||n.skill===t.secondarySkill).map(n=>this.skillToJson(n,!0)),attributes:{[h.a.Toughness]:t.attributes.allocated[h.a.Toughness].rank,[h.a.Savagery]:t.attributes.allocated[h.a.Savagery].rank,[h.a.Fury]:t.attributes.allocated[h.a.Fury].rank,[h.a.Determination]:t.attributes.allocated[h.a.Determination].rank,[h.a.Zeal]:t.attributes.allocated[h.a.Zeal].rank,[h.a.Willpower]:t.attributes.allocated[h.a.Willpower].rank,[h.a.Dexterity]:t.attributes.allocated[h.a.Dexterity].rank,[h.a.Bravery]:t.attributes.allocated[h.a.Bravery].rank},support:null===t.supportSkill?null:t.supportSkill.id,primary:null===t.primarySkill?null:t.primarySkill.id,secondary:null===t.secondarySkill?null:t.secondarySkill.id,activable1:this.getActivableId(t.activable1),activable2:this.getActivableId(t.activable2),activable3:this.getActivableId(t.activable3),activable4:this.getActivableId(t.activable4)}}layerToJson(t){return{type:"l",character:this.characterToJson(t.character),name:t.name}}buildToJson(t){return{type:"p",version:t.version,heroClass:t.heroClass,name:t.name,layers:t.layers.map(n=>this.layerToJson(n)),configuration:Object.assign({},t.configuration)}}jsonToItem(t,n,i=null){let r=null;if(null!==t){const l=t.affixes.map(I=>this.slormancerAffixService.getAffixFromStat(this.STAT_MAPPING[I.stat],t.level,t.reinforcment,this.numberToRarity(I.rarity),I.craftedValue,I.pure)).filter(C.BX);let s=i;null===s&&(s=null===t.base?M.J.Amulet:t.base);let d=null===t.legendaryEffect?null:this.slormancerLegendaryService.getLegendaryEffectById(t.legendaryEffect.id,t.legendaryEffect.craftedValue,t.reinforcment,n),u=null===t.reaperEnchantment?null:this.slormancerItemService.getReaperEnchantment(t.reaperEnchantment.reaperSmith,t.reaperEnchantment.craftedValue),b=null===t.skillEnchantment?null:this.slormancerItemService.getSkillEnchantment(t.skillEnchantment.skill,t.skillEnchantment.craftedValue),P=null===t.attributeEnchantment?null:this.slormancerItemService.getAttributeEnchantment(t.attributeEnchantment.attribute,t.attributeEnchantment.craftedValue);r=this.slormancerItemService.getEquipableItem(s,n,t.level,l,t.reinforcment,d,u,b,P)}return r}normalizeJsonCharacter(t){"0.2.152"===t.version&&(t.originalVersion=t.version,t.ultimatum=null)}jsonToCharacter(t){this.normalizeJsonCharacter(t);const n=this.slormancerReaperService.getReaperById(t.reaper.id,t.heroClass,1===t.reaper.primordial,t.reaper.level,t.reaper.primordialLevel,t.reaper.kills,t.reaper.primordialKills),i=null===t.ultimatum?null:this.slormancerUltimatumService.getUltimatum(t.ultimatum.type,t.ultimatum.level),r=this.slormancerDataService.getGameDataAncestralLegacyIds().map((u,b)=>t.ancestralLegacies.ancestralLegacies.find(P=>P.id===b)).map(u=>u?u.rank:0),l=this.slormancerDataService.getGameDataSkills(t.heroClass).map((u,b)=>{let P=0;const I=t.skills.find(J=>J.id===b);if(I)P=(0,O.NM)(I.rank);else{const J=t.skills.map(ve=>ve.upgrades).flat().find(ve=>ve.id===b);J&&(P=J.rank)}return P}),s=this.slormancerDataService.getGameDataSkills(t.heroClass).map((u,b)=>{const P=t.skills.map(I=>I.upgrades).flat().find(I=>I.id===b);return P?P.selected:0});return this.slormancerCharacterBuilderService.getCharacter(t.heroClass,t.level,t.version,t.originalVersion,null,n,i,t.ancestralLegacies.nodes,r,s,l,this.jsonToItem(t.gear.helm,t.heroClass,M.J.Helm),this.jsonToItem(t.gear.body,t.heroClass,M.J.Body),this.jsonToItem(t.gear.shoulder,t.heroClass,M.J.Shoulder),this.jsonToItem(t.gear.bracer,t.heroClass,M.J.Bracer),this.jsonToItem(t.gear.glove,t.heroClass,M.J.Glove),this.jsonToItem(t.gear.boot,t.heroClass,M.J.Boot),this.jsonToItem(t.gear.ring_l,t.heroClass,M.J.Ring),this.jsonToItem(t.gear.ring_r,t.heroClass,M.J.Ring),this.jsonToItem(t.gear.amulet,t.heroClass,M.J.Amulet),this.jsonToItem(t.gear.belt,t.heroClass,M.J.Belt),this.jsonToItem(t.gear.cape,t.heroClass,M.J.Cape),null===t.inventory?null:t.inventory.map(u=>this.jsonToItem(u,t.heroClass,null)),null===t.sharedInventory?null:t.sharedInventory.map(u=>u.map(b=>this.jsonToItem(b,t.heroClass,null))),t.attributes[h.a.Toughness],t.attributes[h.a.Savagery],t.attributes[h.a.Fury],t.attributes[h.a.Determination],t.attributes[h.a.Zeal],t.attributes[h.a.Willpower],t.attributes[h.a.Dexterity],t.attributes[h.a.Bravery],t.primary,t.secondary,t.support,t.activable1,t.activable2,t.activable3,t.activable4)}jsonToLayer(t){return{name:t.name,character:this.jsonToCharacter(t.character)}}jsonToBuild(t){return{version:t.version,heroClass:t.heroClass,name:t.name?t.name:"Default name",layers:t.layers.map(n=>this.jsonToLayer(n)),configuration:Object.assign({},t.configuration)}}jsonToSharedData(t){return{character:"c"===t.type?this.jsonToCharacter(t):null,layer:"l"===t.type?this.jsonToLayer(t):null,planner:"p"===t.type?this.jsonToBuild(t):null}}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(W.o),e.LFG(H.o),e.LFG(V.S),e.LFG(Me.A),e.LFG(de.l),e.LFG(ge.I),e.LFG(xe.h))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),y=(()=>{class a{constructor(t,n,i){this.jsonConverterService=t,this.buildRetrocompatibilityService=n,this.slormancerCharacterUpdaterService=i,this.MAX_LAYERS=10,this.BUILDS_STORAGE_KEY="builds",this.CURRENT_BUILD_STORAGE_KEY="current-build",this.CURRENT_LAYER_STORAGE_KEY="current-layer",this.builds=[],this.build=null,this.layer=null,this.buildChanged=new _e.X(null),this.layerChanged=new _e.X(null),this.saveTrigger=new at.x,this.reload(),this.oldFormatTransition(),this.saveTrigger.pipe((0,it.b)(500)).subscribe(()=>this.saveToStorage())}getCurrentLayerIndex(){const t=localStorage.getItem(this.CURRENT_LAYER_STORAGE_KEY),n=null===t?0:parseInt(t,10);return Number.isNaN(n)?0:n}oldFormatTransition(){const t="slorm-planner-build",n=localStorage.getItem(t);if(null!==n&&0===this.builds.length){const i=this.jsonConverterService.jsonToBuild(JSON.parse(n));this.addBuild(i),localStorage.removeItem(t),this.saveToStorage()}}reload(){this.builds=[],this.build=null,this.layer=null;try{const t=localStorage.getItem(this.BUILDS_STORAGE_KEY),n=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY),i=this.getCurrentLayerIndex();if(null!==t&&(this.builds=JSON.parse(t)),null!==n){const r=localStorage.getItem(n);null!==r&&(this.build=this.jsonConverterService.jsonToBuild(JSON.parse(r)),this.buildRetrocompatibilityService.updateToLatestVersion(this.build))}if(null!==this.build){let r=(0,C.Be)(this.build.layers[i],this.build.layers[0]);void 0!==r&&(this.layer=r);for(const l of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(l.character,this.build.configuration)}}catch(t){console.error("Failed to reload build : ",t)}this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}saveToStorage(){localStorage.setItem(this.BUILDS_STORAGE_KEY,JSON.stringify(this.builds));const t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==t&&null!==this.build){localStorage.setItem(t,JSON.stringify(this.jsonConverterService.buildToJson(this.build)));let n=0;null!==this.layer&&(n=this.build.layers.indexOf(this.layer)),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,n<0?"0":n.toString())}}saveBuild(){if(null!==this.build){for(const n of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(n.character,this.build.configuration);const t=this.getBuildPreview();if(null!==t&&(t.name=this.build.name),null!==this.build){let n=this.getCurrentLayerIndex();const i=null===this.layer?-1:this.build.layers.indexOf(this.layer);n=-1!==i?i:Math.min(n,this.build.layers.length-1),this.layer=(0,C.lA)(this.build.layers[n])}this.saveTrigger.next(),this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}}saveLayer(){null!==this.build&&null!==this.layer&&(this.slormancerCharacterUpdaterService.updateCharacter(this.layer.character,this.build.configuration),this.saveTrigger.next())}loadBuild(t){localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,t.storageKey),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,"0"),this.reload()}deleteBuild(){const t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==t){const n=this.builds.findIndex(i=>i.storageKey===t);if(-1!==n){this.builds.splice(n,1),localStorage.removeItem(t),localStorage.removeItem(this.CURRENT_BUILD_STORAGE_KEY),this.saveToStorage();const i=Math.min(n,this.builds.length-1),r=this.builds[i];r?this.loadBuild(r):this.reload()}}}loadLayer(t){null!==this.build&&-1!==this.build.layers.indexOf(t)&&(this.layer=t,this.saveBuild())}addBuild(t){null!==t&&this.buildRetrocompatibilityService.updateToLatestVersion(t);const n={heroClass:t.heroClass,name:t.name,storageKey:"build-"+(new Date).getTime(),version:ie.N.version};this.builds.push(n),this.build=t,this.layer=(0,C.Be)(t.layers[0],null),localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,n.storageKey),this.saveBuild()}getBuilds(){return this.builds}getBuild(){return this.build}getBuildPreview(){const t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);return(0,C.lA)(this.builds.find(n=>n.storageKey===t))}getLayer(){return this.layer}hasRoomForAnotherLayer(t=null){return null===this.build||this.build.layers.length<this.MAX_LAYERS&&(null===t||this.build.heroClass===t.heroClass)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(Oe),e.LFG(rt),e.LFG(z.P))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})(),D=(()=>{class a{constructor(t){this.buildStorageService=t,this.draggingItem=new _e.X(!1),this.dragCount=0,this.item=null,this.requiredBase=null,this.callback=null}hold(t,n,i=null){this.dragCount=0,this.item=t,this.requiredBase=n,this.callback=i}startDragging(){this.draggingItem.getValue()||(this.dragCount++,null!==this.item&&this.dragCount>5&&this.draggingItem.next(!0))}isDragItemCompatible(t,n){return!(null!==t&&null!==this.requiredBase&&t.base!==this.requiredBase||null===this.item||null!==n&&this.item.base!==n)}isHoldItem(t){return t===this.item&&null!==t}getHoldItem(){return this.item}releaseHoldItem(){this.item=null,this.requiredBase=null,this.callback=null,this.draggingItem.next(!1)}swap(t,n,i){const r=this.item,l=this.callback,s=this.isDragItemCompatible(t,n);this.releaseHoldItem(),t!==r&&(s?(l&&l(!0,t),i&&i(!0,r)):(l&&l(!1,null),i&&i(!1,null)))}moveDraggedItemToItemGroup(t){const n=this.item,i=this.callback,r=t.indexOf(null),l=t.indexOf(n);if(this.releaseHoldItem(),-1!==r||-1!==l){i&&i(!0,null);const s=Math.min(...[r,l].filter(d=>-1!==d));t.splice(s,1,n)}else i&&i(!1,null)}equip(t,n){const i=this.buildStorageService.getLayer();if(null!==i&&null!==i.character){const r=t.base;switch(this.hold(t,r,n),r){case M.J.Amulet:this.swap(i.character.gear.amulet,r,(l,s)=>l?i.character.gear.amulet=s:null);break;case M.J.Belt:this.swap(i.character.gear.belt,r,(l,s)=>l?i.character.gear.belt=s:null);break;case M.J.Body:this.swap(i.character.gear.body,r,(l,s)=>l?i.character.gear.body=s:null);break;case M.J.Boot:this.swap(i.character.gear.boot,r,(l,s)=>l?i.character.gear.boot=s:null);break;case M.J.Bracer:this.swap(i.character.gear.bracer,r,(l,s)=>l?i.character.gear.bracer=s:null);break;case M.J.Cape:this.swap(i.character.gear.cape,r,(l,s)=>l?i.character.gear.cape=s:null);break;case M.J.Glove:this.swap(i.character.gear.glove,r,(l,s)=>l?i.character.gear.glove=s:null);break;case M.J.Helm:this.swap(i.character.gear.helm,r,(l,s)=>l?i.character.gear.helm=s:null);break;case M.J.Shoulder:this.swap(i.character.gear.shoulder,r,(l,s)=>l?i.character.gear.shoulder=s:null);break;case M.J.Ring:null===i.character.gear.ring_r?this.swap(i.character.gear.ring_r,r,(l,s)=>l?i.character.gear.ring_r=s:null):this.swap(i.character.gear.ring_l,r,(l,s)=>l?i.character.gear.ring_l=s:null)}}}moveToStash(t,n){const i=this.buildStorageService.getLayer();if(null!==i&&null!==i.character){const r=[i.character.inventory,...i.character.sharedInventory].filter(l=>void 0!==l.find(s=>null===s))[0];r&&(this.hold(t,null,n),this.moveDraggedItemToItemGroup(r))}}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var k=g(2722),ee=g(3251),Z=g(5245),ue=g(2638),c=g(3075),_=g(2349),S=g(7423);let lt=(()=>{class a{constructor(t){this.name=t.name}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-layer-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" You're about to delete layer ",n.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[S.lW,_.ZT,_.uh,_.xY,_.H8]}),a})();var f=g(7322),q=g(7531);function ct(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}let oe=(()=>{class a{constructor(t,n){this.dialog=t,this.title=n.title,this.form=new c.cw({name:new c.NI(n.name,c.kI.required)})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,ct,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[m.O5,S.lW,_.ZT,_.uh,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]}),a})(),j=(()=>{class a{constructor(t){this.slormancerCharacterBuilderService=t}createBuild(t,n){return{version:ie.N.version,name:n,heroClass:t,layers:[],configuration:B}}createBuildWithCharacter(t,n,i){const r={version:ie.N.version,name:t,heroClass:i.heroClass,layers:[],configuration:B},l=this.slormancerCharacterBuilderService.getCharacterClone(i);return l.importVersion=null,this.addLayer(r,n,l),r}addLayer(t,n,i=null){const r={name:n,character:null!==i?i:this.slormancerCharacterBuilderService.getCharacter(t.heroClass)};return t.layers.push(r),r}duplicateLayer(t,n,i){return this.addLayer(t,i,this.slormancerCharacterBuilderService.getCharacterClone(n.character))}deleteLayer(t,n){const i=t.layers.indexOf(n);-1!==i&&t.layers.splice(i,1)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(H.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var te=g(2424),ye=g(9300),w=g(9224),U=g(4102),N=g(508),F=g(7238);function st(a,o){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function mt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeSearch())}),e._uU(1,"close"),e.qZA()}}let _t=(()=>{class a extends T.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.buildService=n,this.searchService=i,this.dialog=r,this.searchControl=new c.NI(""),this.layerControl=new c.NI(null),this.layerOptions=[]}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.layerControl.setValue(t,{emitEvent:!1})),this.buildStorageService.buildChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>{this.layerOptions=null===t?[]:t.layers.map(n=>({label:n.name,value:n}))}),this.searchService.searchChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.searchControl.setValue(t,{emitEvent:!1})),this.layerControl.setValue(this.buildStorageService.getLayer(),{emitEvent:!1}),this.layerControl.valueChanges.pipe((0,ye.h)(C.BX)).subscribe(t=>this.buildStorageService.loadLayer(t)),this.searchControl.valueChanges.subscribe(t=>this.searchService.setSearch(t))}hasSearch(){return this.searchService.hasSearch()}removeSearch(){this.searchService.setSearch(null)}editLayer(){const t=this.buildStorageService.getLayer();null!==t&&this.dialog.open(oe,{data:{title:"Edit layer name",name:t.name}}).afterClosed().subscribe(i=>{i&&(t.name=i,this.buildStorageService.saveLayer())})}addLayer(){this.dialog.open(oe,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(n=>{const i=this.buildStorageService.getBuild();if(n&&null!==i){const r=this.buildService.addLayer(i,n);this.buildStorageService.loadLayer(r)}})}duplicateLayer(){this.dialog.open(oe,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(n=>{const i=this.buildStorageService.getBuild(),r=this.buildStorageService.getLayer();if(n&&null!==i&&null!==r){const l=this.buildService.duplicateLayer(i,r,n);this.buildStorageService.loadLayer(l)}})}removeLayer(){const t=this.buildStorageService.getLayer(),n=this.buildStorageService.getBuild();null!==t&&this.dialog.open(lt,{data:{name:t.name}}).afterClosed().subscribe(r=>{r&&null!==n&&(this.buildService.deleteLayer(n,t),this.buildStorageService.saveBuild())})}hasRoomForMoreLayer(){return this.buildStorageService.hasRoomForAnotherLayer()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(j),e.Y36(te.o),e.Y36(_.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Duplicate this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(t,n){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card")(2,"mat-card-content")(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,st,2,2,"mat-option",4),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA()(),e.TgZ(12,"button",6),e.NdJ("click",function(){return n.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()(),e.TgZ(15,"button",7),e.NdJ("click",function(){return n.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA()(),e.TgZ(18,"button",8),e.NdJ("click",function(){return n.duplicateLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA()()(),e.TgZ(21,"div",9)(22,"mat-form-field",2)(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,mt,2,0,"mat-icon",11),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("formControl",n.layerControl),e.xp6(1),e.Q6J("ngForOf",n.layerOptions),e.xp6(4),e.Q6J("disabled",n.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!n.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!n.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",n.searchControl),e.xp6(1),e.Q6J("ngIf",n.hasSearch()))},dependencies:[m.sg,m.O5,S.lW,Z.Hw,w.a8,w.dn,f.KE,f.hX,f.R9,q.Nt,U.gD,N.ey,F.gM,c.Fj,c.JJ,c.oH],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),a})();var p=g(2107),Pe=g(7106),dt=g(5458);let re=(()=>{class a{constructor(t,n,i,r){this.slormancerCharacterBuilderService=t,this.slormancerSaveParserService=n,this.slormancerShortDataService=i,this.jsonConverterService=r;const l=document.getElementsByTagName("base")[0];let s="/";if(void 0!==l){const d=l.getAttribute("href");null!==d&&(s=d)}this.VIEW_BUILD_PATH=window.origin+s+"slorm-planner/view/build/"}parseSaveData(t,n){const i=this.slormancerSaveParserService.parseSaveFile(t);return this.slormancerCharacterBuilderService.getCharacterFromSave(i,n)}parseUrlData(t){let n={character:null,layer:null,planner:null},i=null;try{const l=new URL(t).pathname.split("/");i=(0,C.lA)(l[l.length-1])}catch(r){}return null!==i&&(n=this.importFromShortData(i)),n}parseJsonData(t){const n=JSON.parse(t);return this.jsonConverterService.jsonToSharedData(n)}import(t,n=null){let i={character:null,layer:null,planner:null};if(null!==n)try{return i.character=this.parseSaveData(t,n),i}catch(r){console.error("Error when parsing save file : ",r)}try{return i=this.parseJsonData(atob(t)),i}catch(r){}try{return i=this.parseJsonData(t),i}catch(r){}return i=this.importFromShortData(t),null===i.character&&(i=this.parseUrlData(t)),console.log("data parsed : ",i),i}exportCharacter(t){return btoa(JSON.stringify(this.jsonConverterService.characterToJson(t)))}exportLayer(t){return btoa(JSON.stringify(this.jsonConverterService.layerToJson(t)))}exportBuild(t){return btoa(JSON.stringify(this.jsonConverterService.buildToJson(t)))}exportCharacterAsLink(t){const n=this.slormancerShortDataService.characterToShortData(t);return this.VIEW_BUILD_PATH+n}importFromShortData(t){return{character:this.slormancerShortDataService.shortDataToCharacter(t),layer:null,planner:null}}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(H.o),e.LFG(Pe.X),e.LFG(dt.q),e.LFG(Oe))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var R=g(8223),Se=g(2763);function gt(a,o){if(1&a&&(e.TgZ(0,"mat-icon",5),e._uU(1,"help_outline"),e.qZA()),2&a){const t=e.oxw(2);e.Q6J("matTooltip",t.help)}}function ut(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-icon"),e._uU(2,"file_upload"),e.qZA(),e._uU(3),e.YNc(4,gt,2,1,"mat-icon",4),e.BQk()),2&a){const t=e.oxw();e.xp6(3),e.hij("",t.label," "),e.xp6(1),e.Q6J("ngIf",null!==t.help)}}function pt(a,o){1&a&&(e.ynx(0),e.TgZ(1,"mat-icon",6),e._uU(2,"sync"),e.qZA(),e._uU(3,"Uploading..."),e.BQk())}let ke=(()=>{class a{constructor(t){this.messageService=t,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.label=null,this.help=null,this.upload=new e.vpe,this.busy=!1,this.parsing=!1}uploadFile(t){return new Promise((n,i)=>{var r=new FileReader;r.onerror=()=>{r=null,i()},r.onloadend=()=>{null!==r&&null!==r.result&&(n(r.result.toString()),r=null)},r.readAsText(t)})}startUpload(t){const n=t.target;if(null!==n&&!this.busy){const i=n.files,r=null===i?null:(0,C.lA)(i[0]);null!==r&&(r.size<=this.MAX_UPLOAD_FILE_SIZE?(this.busy=!0,this.uploadFile(r).then(l=>{this.upload.emit(l),n.value="",this.busy=!1},()=>{n.value="",this.messageService.error("Failed to upload this file"),this.busy=!1})):this.messageService.error("Cannot upload files bigger than "+this.MAX_UPLOAD_FILE_SIZE_MO+"Mo"))}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-file-upload-button"]],inputs:{label:"label",help:"help"},outputs:{upload:"upload"},decls:5,vars:2,consts:[["type","file",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"animation-rotation"]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(l){return n.startUpload(l)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(1);return e.KtG(l.click())}),e.YNc(3,ut,5,2,"ng-container",3),e.YNc(4,pt,4,0,"ng-container",3),e.qZA()}2&t&&(e.xp6(3),e.Q6J("ngIf",!n.busy),e.xp6(1),e.Q6J("ngIf",n.busy))},dependencies:[m.O5,S.lW,Z.Hw,F.gM],styles:["input[type=file][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{width:100%}"]}),a})();function ft(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectedClass=r)}),e._UZ(1,"img",9),e.TgZ(2,"div",10),e._uU(3),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw();e.ekj("selected",n.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH),e.xp6(2),e.Oqu(n.getLevel(t))}}let ht=(()=>{class a{constructor(t,n,i,r,l,s,d){this.messageService=t,this.buildStorageService=n,this.buildService=i,this.slormancerSaveParserService=r,this.slormancerCharacterBuilderService=l,this.importExportService=s,this.clipboardService=d,this.HERO_CLASSES=[p.i.Warrior,p.i.Huntress,p.i.Mage],this.created=new e.vpe,this.name="Default name",this.characters=null,this.selectedClass=null}parseGameSave(t){try{const n=this.slormancerSaveParserService.parseSaveFile(t);this.characters={[p.i.Warrior]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,p.i.Warrior),[p.i.Huntress]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,p.i.Huntress),[p.i.Mage]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,p.i.Mage)},this.selectedClass=null}catch(n){console.error(n),this.messageService.error("An error occured while parsing this save file")}}getLevel(t){let n="";return null!==this.characters&&(n=this.characters[t].level.toString()),n}createBuild(){if(null!==this.selectedClass&&null!==this.characters){const t=this.buildService.createBuildWithCharacter(this.name,"New layer",this.characters[this.selectedClass]);this.buildStorageService.addBuild(t),this.created.emit()}}copyExternalLink(){if(null!==this.selectedClass&&null!==this.characters){const t=this.importExportService.exportCharacterAsLink(this.characters[this.selectedClass]);this.clipboardService.copyToClipboard(t)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R.e),e.Y36(y),e.Y36(j),e.Y36(Pe.X),e.Y36(H.o),e.Y36(re),e.Y36(Se.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-from-game"]],inputs:{name:"name"},outputs:{created:"created"},decls:13,vars:7,consts:[[1,"import-game"],["label","Upload a Slormancer save file","help","Save files are located in :\n        C:\\Users\\[User]\\AppData\\Local\\The_Slormancer",3,"upload"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",1,"create",3,"disabled","click"],["mat-icon-button","","matTooltip","Generate an external link of this build",3,"disabled","click"],[1,"head",3,"click"],[3,"src"],[1,"level"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(r){return n.parseGameSave(r)}),e.qZA(),e.TgZ(2,"div",2)(3,"p"),e._uU(4,"Choose which character you want to upload"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,ft,4,4,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return n.createBuild()}),e._uU(9,"Create build"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.copyExternalLink()}),e.TgZ(11,"mat-icon"),e._uU(12,"share"),e.qZA()()()()),2&t&&(e.xp6(2),e.ekj("disabled",null===n.characters),e.xp6(1),e.ekj("disabled",null===n.characters),e.xp6(3),e.Q6J("ngForOf",n.HERO_CLASSES),e.xp6(2),e.Q6J("disabled",null===n.characters||null===n.selectedClass),e.xp6(2),e.Q6J("disabled",null===n.characters||null===n.selectedClass))},dependencies:[m.sg,S.lW,Z.Hw,F.gM,ke],styles:[".import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:24px;height:24px;line-height:8px;font-size:12px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.1}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{border-color:#b7b7b7}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{flex-grow:1}"]}),a})();function Ct(a,o){1&a&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a save, build, layer or link"),e.qZA())}function vt(a,o){1&a&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a build, layer or link"),e.qZA())}function bt(a,o){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Character found"),e.qZA())}function Mt(a,o){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Layer found"),e.qZA())}function xt(a,o){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Build found"),e.qZA())}function Ot(a,o){1&a&&(e.TgZ(0,"mat-hint",10),e._uU(1,"No valid data found"),e.qZA())}let Te=(()=>{class a{constructor(t){this.importExportService=t,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.uploadLabel=null,this.importLabel=null,this.heroClass=null,this.import=new e.vpe,this.sharedData=null,this.importContent=new c.NI(null,c.kI.maxLength(this.MAX_UPLOAD_FILE_SIZE)),this.importContent.valueChanges.subscribe(n=>{null===n||0===n.length?this.sharedData=null:this.parseExportedData(n)})}parseExportedData(t){this.sharedData=this.importExportService.import(t,this.heroClass),console.log("parse exported data : ",this.sharedData)}hasValidSharedData(){return null!==this.sharedData&&(null!==this.sharedData.character&&(null===this.heroClass||this.sharedData.character.heroClass===this.heroClass)||null!==this.sharedData.layer&&(null===this.heroClass||this.sharedData.layer.character.heroClass===this.heroClass)||null!==this.sharedData.planner&&(null===this.heroClass||this.sharedData.planner.heroClass===this.heroClass))}upload(t){this.importContent.setValue(t)}importData(){null!==this.sharedData&&(this.import.emit(this.sharedData),this.importContent.setValue(""),this.sharedData=null)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(re))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-import-data"]],inputs:{uploadLabel:"uploadLabel",importLabel:"importLabel",heroClass:"heroClass"},outputs:{import:"import"},decls:16,vars:11,consts:[[1,"import"],[3,"label","upload"],["appearance","outline","color","primary","floatLabel","never"],["matInput","",3,"formControl"],["align","end",4,"ngIf"],["align","end","class","success",4,"ngIf"],["align","end","class","error",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["align","end"],["align","end",1,"success"],["align","end",1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(r){return n.upload(r)}),e.qZA(),e.TgZ(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Import content..."),e.qZA(),e._UZ(5,"textarea",3),e.YNc(6,Ct,2,0,"mat-hint",4),e.YNc(7,vt,2,0,"mat-hint",4),e.YNc(8,bt,2,0,"mat-hint",5),e.YNc(9,Mt,2,0,"mat-hint",5),e.YNc(10,xt,2,0,"mat-hint",5),e.YNc(11,Ot,2,0,"mat-hint",6),e.TgZ(12,"mat-error"),e._uU(13),e.qZA()(),e.TgZ(14,"button",7),e.NdJ("click",function(){return n.importData()}),e._uU(15),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("label",n.uploadLabel),e.xp6(4),e.Q6J("formControl",n.importContent),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null!==n.heroClass),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null===n.heroClass),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.character),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.layer),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.planner),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&!n.hasValidSharedData()),e.xp6(2),e.hij("Cannot parse files bigger than ",n.MAX_UPLOAD_FILE_SIZE_MO,"Mo"),e.xp6(1),e.Q6J("disabled",!n.hasValidSharedData()),e.xp6(1),e.Oqu(n.importLabel))},dependencies:[m.O5,S.lW,f.TO,f.KE,f.bx,f.hX,q.Nt,c.Fj,c.JJ,c.oH,ke],styles:[".import[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;width:100%}.import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px;max-height:60px}"]}),a})(),yt=(()=>{class a{constructor(t,n){this.buildStorageService=t,this.buildService=n,this.created=new e.vpe,this.name="Default name"}createBuild(t){if(null!==t.character){const n=this.buildService.createBuildWithCharacter(this.name,"Imported layer",t.character);this.buildStorageService.addBuild(n),this.created.emit()}else if(null!==t.layer){const n=this.buildService.createBuildWithCharacter(this.name,t.layer.name,t.layer.character);this.buildStorageService.addBuild(n),this.created.emit()}else null!==t.planner&&(this.buildStorageService.addBuild(t.planner),this.created.emit())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(j))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-from-export"]],inputs:{name:"name"},outputs:{created:"created"},decls:2,vars:0,consts:[[1,"import-game"],["uploadLabel","Upload an exported file","importLabel","Create build",3,"import"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-import-data",1),e.NdJ("import",function(r){return n.createBuild(r)}),e.qZA()())},dependencies:[Te],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}"]}),a})();function Pt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectedClass=r)}),e._UZ(1,"img",6),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw();e.ekj("selected",n.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH)}}let St=(()=>{class a{constructor(t,n){this.buildService=t,this.buildStorageService=n,this.HERO_CLASSES=[p.i.Warrior,p.i.Huntress,p.i.Mage],this.created=new e.vpe,this.name="Default name",this.selectedClass=null}createBuild(){if(null!==this.selectedClass){const t=this.buildService.createBuild(this.selectedClass,this.name);this.buildService.addLayer(t,this.name),this.buildStorageService.addBuild(t),this.created.emit()}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(j),e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-empty"]],inputs:{name:"name"},outputs:{created:"created"},decls:8,vars:2,consts:[[1,"import-game"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"head",3,"click"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3,"Choose which character you want to build"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,Pt,2,3,"div",3),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.createBuild()}),e._uU(7,"Create build"),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.HERO_CLASSES),e.xp6(1),e.Q6J("disabled",null===n.selectedClass))},dependencies:[m.sg,S.lW],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:16px;height:16px;line-height:14px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]{border-color:#b7b7b7}"]}),a})(),we=(()=>{class a{constructor(){this.created=new e.vpe,this.buildName="My build"}passCreatedEvent(){this.created.emit()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build"]],outputs:{created:"created"},decls:16,vars:4,consts:[[3,"name","created"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","text",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Create build from a Slormancer save"),e.qZA(),e.TgZ(2,"app-create-build-from-game",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"h2"),e._uU(5,"Create build from exported data"),e.qZA(),e.TgZ(6,"app-create-build-from-export",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"h2"),e._uU(9,"Create empty build"),e.qZA(),e.TgZ(10,"app-create-build-empty",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"mat-form-field",1)(13,"mat-label"),e._uU(14,"Build name"),e.qZA(),e.TgZ(15,"input",2),e.NdJ("ngModelChange",function(r){return n.buildName=r}),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("name",n.buildName),e.xp6(4),e.Q6J("name",n.buildName),e.xp6(4),e.Q6J("name",n.buildName),e.xp6(5),e.Q6J("ngModel",n.buildName))},dependencies:[f.KE,f.hX,q.Nt,c.Fj,c.JJ,c.On,ht,yt,St],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}"]}),a})(),kt=(()=>{class a{constructor(t){this.dialog=t}created(){this.dialog.close()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-modal"]],decls:2,vars:0,consts:[[3,"created"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"app-create-build",0),e.NdJ("created",function(){return n.created()}),e.qZA()())},dependencies:[_.xY,we],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a})(),Tt=(()=>{class a{constructor(t){this.name=t.name}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-build-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a build"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" You're about to delete the build ",n.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[S.lW,_.ZT,_.uh,_.xY,_.H8]}),a})();function wt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Build name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A build name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}let At=(()=>{class a{constructor(t,n){this.dialog=t,this.title=n.title,this.form=new c.cw({name:new c.NI(n.name,c.kI.required)})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-build-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,wt,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[m.O5,S.lW,_.ZT,_.uh,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u]}),a})();var Ae=g(4296);let Zt=(()=>{class a{constructor(){}downloadFile(t,n){const i=document.createElement("a"),r=new Blob([t],{type:"text/plain"}),l=window.URL.createObjectURL(r);i.href=l,i.download=n,i.click(),window.URL.revokeObjectURL(l),i.remove()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function It(a,o){if(1&a&&(e.TgZ(0,"a",23),e._UZ(1,"img",24),e.qZA()),2&a){const t=o.$implicit;e.Q6J("routerLink",t.link),e.xp6(1),e.Q6J("src",t.icon,e.LSH)("matTooltip",t.label)}}function Et(a,o){if(1&a&&(e.TgZ(0,"mat-select-trigger"),e._UZ(1,"img",25),e._uU(2),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.MGl("src","assets/img/character/icon/",t.buildControl.value.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.buildControl.value.name," ")}}function Lt(a,o){if(1&a&&(e.TgZ(0,"mat-option",26),e._UZ(1,"img",25),e._uU(2),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.name," ")}}let Jt=(()=>{class a extends T.B{constructor(t,n,i,r,l,s,d,u){super(),this.messageService=t,this.downloadService=n,this.clipboardService=i,this.importExportService=r,this.buildStorageService=l,this.buildService=s,this.router=d,this.dialog=u,this.SHORTCUTS=[{link:"/slorm-reaper",icon:"assets/img/reaper/0/0.png",label:"Slorm reapers"}],this.VERSION=ie.N.version,this.GITHUB_PROJECT_LINK=Ae.yF,this.GAME_LINK=Ae.F1,this.sidenav=null,this.busy=!1,this.buildControl=new c.NI(this.buildStorageService.getBuildPreview()),this.buildControl.valueChanges.pipe((0,k.R)(this.unsubscribe),(0,ye.h)(C.BX)).subscribe(b=>this.buildStorageService.loadBuild(b)),this.buildStorageService.buildChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(()=>{this.buildControl.setValue(this.buildStorageService.getBuildPreview(),{emitEvent:!1})})}ngOnInit(){}closeSideNav(){null!==this.sidenav&&this.sidenav.close()}getBuilds(){return this.buildStorageService.getBuilds()}getHeroClass(){let t=p.i.Warrior;const n=this.buildStorageService.getBuild();return null!==n&&(t=n.heroClass),t}import(t){const n=this.buildStorageService.getBuild();if(null!==t&&null!==n)if(null!==t.character)this.dialog.open(oe,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(r=>{if(r){const l=this.buildService.addLayer(n,r,t.character);this.buildStorageService.loadLayer(l),this.closeSideNav()}});else if(null!==t.layer){const i=this.buildService.addLayer(n,t.layer.name,t.layer.character);this.buildStorageService.loadLayer(i),this.closeSideNav()}else if(null!==t.planner){let i=null;for(const r of t.planner.layers)i=this.buildService.addLayer(n,r.name,r.character);null!==i&&this.buildStorageService.loadLayer(i),this.closeSideNav()}}downloadLayer(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportLayer(t);this.downloadService.downloadFile(n,t.name)}}copyLayer(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportLayer(t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}downloadBuild(){const t=this.buildStorageService.getBuild();if(null!==t){const n=this.importExportService.exportBuild(t);this.downloadService.downloadFile(n,"build.sav")}}copyBuild(){const t=this.buildStorageService.getBuild();if(null!==t){const n=this.importExportService.exportBuild(t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}copyExternalLink(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportCharacterAsLink(t.character);this.clipboardService.copyToClipboard(n)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}deleteBuild(){const t=this.buildStorageService.getBuild();null!==t&&this.dialog.open(Tt,{data:{name:t.name}}).afterClosed().subscribe(i=>{i&&(this.buildStorageService.deleteBuild(),0===this.buildStorageService.getBuilds().length&&(console.log("redirection : "),this.router.navigate(["slorm-planner","create"])))})}editBuild(){const t=this.buildStorageService.getBuild();null!==t&&this.dialog.open(At,{data:{title:"Edit build name",name:t.name}}).afterClosed().subscribe(i=>{i&&(t.name=i,this.buildStorageService.saveBuild())})}createNewBuild(){this.dialog.open(kt)}trackbyBuildPreview(t,n){return n.storageKey}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(R.e),e.Y36(Zt),e.Y36(Se.Y),e.Y36(re),e.Y36(y),e.Y36(j),e.Y36(E.F0),e.Y36(_.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:63,vars:8,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"shortcuts"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"build"],[1,"build-selection"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit build name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete build",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"info"],["target","blank",3,"href"],[3,"routerLink"],[3,"src","matTooltip"],[1,"hero-icon",3,"src"],[3,"value"]],template:function(t,n){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span"),e._uU(4,"Other tools :"),e.qZA(),e.YNc(5,It,2,3,"a",3),e.qZA(),e.TgZ(6,"div",4)(7,"h3"),e._uU(8,"Builds"),e.qZA(),e.TgZ(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Current build"),e.qZA(),e.TgZ(13,"mat-select",7),e.YNc(14,Et,3,2,"mat-select-trigger",8),e.YNc(15,Lt,3,3,"mat-option",9),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.editBuild()}),e.TgZ(17,"mat-icon"),e._uU(18,"edit"),e.qZA()(),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.deleteBuild()}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA()()(),e.TgZ(22,"button",12),e.NdJ("click",function(){return n.createNewBuild()}),e._uU(23,"New build"),e.qZA()(),e._UZ(24,"hr"),e.TgZ(25,"div",13)(26,"h3"),e._uU(27,"Import"),e.qZA(),e.TgZ(28,"app-import-data",14),e.NdJ("import",function(r){return n.import(r)}),e.qZA()(),e._UZ(29,"hr"),e.TgZ(30,"div",15)(31,"h3"),e._uU(32,"Export"),e.qZA(),e.TgZ(33,"div",16)(34,"p"),e._uU(35,"Current layer"),e.qZA(),e.TgZ(36,"div",17)(37,"button",18),e.NdJ("click",function(){return!n.busy&&n.downloadLayer()}),e.TgZ(38,"mat-icon"),e._uU(39,"file_download"),e.qZA()(),e.TgZ(40,"button",19),e.NdJ("click",function(){return!n.busy&&n.copyLayer()}),e.TgZ(41,"mat-icon"),e._uU(42,"content_copy"),e.qZA()(),e.TgZ(43,"button",20),e.NdJ("click",function(){return!n.busy&&n.copyExternalLink()}),e.TgZ(44,"mat-icon"),e._uU(45,"share"),e.qZA()()()(),e.TgZ(46,"div",16)(47,"p"),e._uU(48,"Current build"),e.qZA(),e.TgZ(49,"div",17)(50,"button",18),e.NdJ("click",function(){return!n.busy&&n.downloadBuild()}),e.TgZ(51,"mat-icon"),e._uU(52,"file_download"),e.qZA()(),e.TgZ(53,"button",19),e.NdJ("click",function(){return!n.busy&&n.copyBuild()}),e.TgZ(54,"mat-icon"),e._uU(55,"content_copy"),e.qZA()()()()(),e.TgZ(56,"div",21),e._uU(57),e.TgZ(58,"a",22),e._uU(59,"Github"),e.qZA(),e._uU(60," - "),e.TgZ(61,"a",22),e._uU(62,"The Slormancer"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.SHORTCUTS),e.xp6(8),e.Q6J("formControl",n.buildControl),e.xp6(1),e.Q6J("ngIf",null!==n.buildControl.value),e.xp6(1),e.Q6J("ngForOf",n.getBuilds()),e.xp6(13),e.Q6J("heroClass",n.getHeroClass()),e.xp6(29),e.hij(" Slorm Planner ",n.VERSION," - "),e.xp6(1),e.Q6J("href",n.GITHUB_PROJECT_LINK,e.LSH),e.xp6(3),e.Q6J("href",n.GAME_LINK,e.LSH))},dependencies:[m.sg,m.O5,S.lW,Z.Hw,f.KE,f.hX,U.gD,U.$L,N.ey,F.gM,c.JJ,c.oH,Te,E.yS],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px;padding:4px}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:0}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),a})();const qt=["dragImage"],Ut=["dragBackground"];function Nt(a,o){if(1&a&&(e.TgZ(0,"a",11,12)(2,"span",13),e._uU(3),e.qZA()()),2&a){const t=o.$implicit,n=e.MAs(1);e.Q6J("routerLink",t.route)("active",n.isActive),e.xp6(3),e.Oqu(t.name)}}let Ft=(()=>{class a extends T.B{constructor(t){super(),this.itemMoveService=t,this.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],this.isDragging=!1,this.dragImage=null,this.dragBackground=null,this.itemMoveService.draggingItem.pipe((0,k.R)(this.unsubscribe)).subscribe(n=>{this.isDragging=n;const i=this.itemMoveService.getHoldItem();null!==i&&this.dragImage&&this.dragBackground&&(this.dragImage.nativeElement.src=i.icon,this.dragBackground.nativeElement.src=i.itemIconBackground)})}onMouseMove(t){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){const n=t.clientY-this.dragImage.nativeElement.height/2+"px",i=t.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=n,this.dragImage.nativeElement.style.left=i,this.dragBackground.nativeElement.style.top=n,this.dragBackground.nativeElement.style.left=i}}onMouseUp(){this.itemMoveService.releaseHoldItem()}onMouseContextMenu(){this.itemMoveService.releaseHoldItem()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build"]],viewQuery:function(t,n){if(1&t&&(e.Gf(qt,5),e.Gf(Ut,5)),2&t){let i;e.iGM(i=e.CRH())&&(n.dragImage=i.first),e.iGM(i=e.CRH())&&(n.dragBackground=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(r){return n.onMouseMove(r)})("mouseup",function(){return n.onMouseUp()})("contextmenu",function(){return n.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),e.NdJ("click",function(){e.CHM(i);const l=e.MAs(8);return e.KtG(l.toggle())}),e._uU(3,"menu"),e.qZA()(),e.TgZ(4,"nav",3),e.YNc(5,Nt,4,3,"a",4),e.qZA()(),e.TgZ(6,"mat-sidenav-container")(7,"mat-sidenav",null,5),e._UZ(9,"app-build-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header")(12,"router-outlet")(13,"img",7,8)(15,"img",9,10),e.qZA()()}if(2&t){const i=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",n.ROUTES),e.xp6(4),e.Q6J("sidenav",i),e.xp6(4),e.ekj("dragging",n.isDragging),e.xp6(2),e.ekj("dragging",n.isDragging)}},dependencies:[m.sg,ee.BU,ee.Nj,Z.Hw,ue.JX,ue.TM,ue.Rh,E.lC,E.yS,E.Od,_t,Jt],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),a})();var Ze=g(9184),Y=g(8313),A=g(9776);function Bt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,l=e.MAs(1),s=e.oxw(2);return e.KtG(s.showOverlay(l,r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function Qt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,l=e.MAs(1),s=e.oxw(2);return e.KtG(s.showOverlay(l,r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function Ht(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,l=e.MAs(1),s=e.oxw(2);return e.KtG(s.showOverlay(l,r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function Rt(a,o){if(1&a&&(e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"h3",12)(3,"p",12),e.qZA()()),2&a){const t=e.oxw(3);e.xp6(2),e.Q6J("innerHTML",t.overlayMechanic.name,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.overlayMechanic.description,e.oJD)}}function Yt(a,o){if(1&a&&e.YNc(0,Rt,4,2,"ng-template",9),2&a){const t=e.oxw(2);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",t.overlayTrigger)}}function Gt(a,o){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Bt,6,2,"div",2),e.YNc(2,Qt,6,2,"div",2),e.YNc(3,Ht,6,2,"div",2),e.YNc(4,Yt,1,2,null,3),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.classMechanics),e.xp6(1),e.Q6J("ngForOf",t.mechanics),e.xp6(1),e.Q6J("ngForOf",t.buffs),e.xp6(1),e.Q6J("ngIf",null!==t.overlayMechanic&&null!==t.overlayTrigger)}}let Ie=(()=>{class a{constructor(){this.classMechanics=[],this.mechanics=[],this.buffs=[],this.overlayTrigger=null,this.overlayMechanic=null}showOverlay(t,n){this.overlayMechanic=n,this.overlayTrigger=t}hideOverlay(){this.overlayTrigger=null,this.overlayMechanic=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mechanics-view"]],inputs:{classMechanics:"classMechanics",mechanics:"mechanics",buffs:"buffs"},decls:1,vars:1,consts:[["class","mechanics",4,"ngIf"],[1,"mechanics"],["class","mechanic","cdkOverlayOrigin","",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[4,"ngIf"],["cdkOverlayOrigin","",1,"mechanic",3,"mouseenter","mouseleave"],["trigger","cdkOverlayOrigin"],[1,"mechanic-icon"],[3,"src"],[1,"mechanic-name"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[1,"slormancer-tooltip"],[1,"inner-box"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Gt,5,4,"div",0),2&t&&e.Q6J("ngIf",n.classMechanics.length>0||n.mechanics.length>0||n.buffs.length>0)},dependencies:[m.sg,m.O5,A.pI,A.xu],styles:[".mechanics[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;background-color:#000;padding:4px;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:36px;min-height:36px;width:36px;height:36px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-name[_ngcontent-%COMP%]{background-color:#141310;padding:8px;display:flex;flex-direction:row;align-items:center;flex-grow:1}.slormancer-tooltip[_ngcontent-%COMP%]{max-width:350px}.slormancer-tooltip[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0;font-weight:400;color:#ce4607}.slormancer-tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.slormancer-tooltip[_ngcontent-%COMP%]     .value{color:#ce4607}"]}),a})();function Vt(a,o){if(1&a&&e._UZ(0,"div",17),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.genresLabel,e.oJD)}}function Dt(a,o){if(1&a&&e._UZ(0,"div",18),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.cooldownLabel,e.oJD)}}function jt(a,o){if(1&a&&e._UZ(0,"div",19),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.costLabel,e.oJD)}}function Kt(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8),e._UZ(10,"div",9),e.YNc(11,Vt,1,1,"div",10),e.YNc(12,Dt,1,1,"div",11),e._UZ(13,"div",12),e.YNc(14,jt,1,1,"div",13),e.qZA()(),e._UZ(15,"div",14)(16,"div",15)(17,"app-mechanics-view",16),e.qZA()()),2&a){const t=e.oxw();e.Gre("ancestral-legacy ",t.ancestralLegacy.damageTypes.length>0?t.ancestralLegacy.damageTypes[0]:"",""),e.xp6(2),e.Oqu(t.ancestralLegacy.name),e.xp6(6),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(2),e.Q6J("innerHTML",t.ancestralLegacy.typeLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.cooldownLabel),e.xp6(1),e.Q6J("innerHTML",t.ancestralLegacy.rankLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.costLabel),e.xp6(2),e.Q6J("innerHTML",t.ancestralLegacy.description,e.oJD),e.xp6(1),e.Q6J("mechanics",t.ancestralLegacy.relatedMechanics)("buffs",t.ancestralLegacy.relatedBuffs)}}let pe=(()=>{class a{constructor(t){this.slormancerTranslateService=t,this.NEXT_RANK_LABEL=this.slormancerTranslateService.translate("tt_next_rank"),this.MAX_RANK_LABEL=this.slormancerTranslateService.translate("tt_max_rank"),this.ancestralLegacy=null,this.hideNextRank=!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Y.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-view"]],inputs:{ancestralLegacy:"ancestralLegacy",hideNextRank:"hideNextRank"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"content"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"type",3,"innerHTML"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],[1,"rank",3,"innerHTML"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Kt,18,13,"div",0),2&t&&e.Q6J("ngIf",null!==n.ancestralLegacy)},dependencies:[m.O5,Ie],styles:[".ancestral-legacy[_ngcontent-%COMP%]{background-color:#090909;border:3px solid black;color:#fff;display:flex;flex-direction:column;max-width:400px}.ancestral-legacy[_ngcontent-%COMP%]  .description .value{color:#ce4607}.ancestral-legacy[_ngcontent-%COMP%]  .next-rank .value, .ancestral-legacy[_ngcontent-%COMP%]  .head, .ancestral-legacy[_ngcontent-%COMP%]  .rank .current, .ancestral-legacy[_ngcontent-%COMP%]  .cooldown .value{color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]  .range, .ancestral-legacy[_ngcontent-%COMP%]  .range .value, .ancestral-legacy[_ngcontent-%COMP%]  .details, .ancestral-legacy[_ngcontent-%COMP%]  .details .value, .ancestral-legacy[_ngcontent-%COMP%]  .formula, .ancestral-legacy[_ngcontent-%COMP%]  .formula .value{color:#686868}.ancestral-legacy[_ngcontent-%COMP%]  .affixes .range, .ancestral-legacy[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ancestral-legacy[_ngcontent-%COMP%]  .life{color:#257539}.ancestral-legacy[_ngcontent-%COMP%]  .mana{color:#3397dd}.ancestral-legacy.mag[_ngcontent-%COMP%]  .value:not(.mana){color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.ancestral-legacy[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),a})();var Ee=g(7438),le=g(7201);function Xt(a,o){if(1&a&&e._UZ(0,"app-ancestral-legacy-view",8),2&a){const t=e.oxw(3);e.Q6J("ancestralLegacy",t.ancestralLegacy)}}function zt(a,o){if(1&a&&e.YNc(0,Xt,1,1,"ng-template",7),2&a){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function $t(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1,2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.increasesRank())})("contextmenu",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.decreasesRank())}),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,zt,1,2,null,6),e.qZA()}if(2&a){const t=e.oxw();e.ekj("ranked",t.ancestralLegacy.baseRank>0)("equipped",t.equipped)("selected",t.selected)("readonly",t.readonly)("hidden-search",t.hiddenBySearch),e.xp6(3),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(1),e.ekj("max",t.ancestralLegacy.rank===t.ancestralLegacy.maxRank),e.xp6(1),e.Oqu(t.ancestralLegacy.rank===t.ancestralLegacy.maxRank?"Max":t.ancestralLegacy.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}let Le=(()=>{class a extends T.B{constructor(t,n,i){super(),this.searchService=t,this.slormancerAncestralLegacyService=n,this.buildStorageService=i,this.ancestralLegacy=null,this.equipped=!1,this.selected=!1,this.readonly=!1,this.overlay=!1,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.hiddenBySearch=null!==t&&null!==this.ancestralLegacy&&!this.searchService.ancestralLegacyMatchSearch(this.ancestralLegacy))}setRank(t,n){t.baseRank!==n&&this.selected&&(this.slormancerAncestralLegacyService.updateAncestralLegacyModel(t,n),this.slormancerAncestralLegacyService.updateAncestralLegacyView(t),this.buildStorageService.saveLayer())}increasesRank(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank+1)),this.changed.emit(this.ancestralLegacy)),!1}decreasesRank(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank-1)),this.changed.emit(this.ancestralLegacy)),!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te.o),e.Y36(Ze.O),e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{ancestralLegacy:"ancestralLegacy",equipped:"equipped",selected:"selected",readonly:"readonly",overlay:"overlay"},outputs:{changed:"changed"},features:[e.qOj],decls:1,vars:1,consts:[["class","ancestral-legacy","cdkOverlayOrigin","",3,"ranked","equipped","selected","readonly","hidden-search","click","contextmenu",4,"ngIf"],["cdkOverlayOrigin","",1,"ancestral-legacy",3,"click","contextmenu"],["trigger","cdkOverlayOrigin"],[1,"inner"],[3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy"]],template:function(t,n){1&t&&e.YNc(0,$t,7,15,"div",0),2&t&&e.Q6J("ngIf",null!==n.ancestralLegacy)},dependencies:[m.O5,A.pI,A.xu,pe],styles:[".ancestral-legacy[_ngcontent-%COMP%]{position:relative;z-index:1;border-radius:50%;border:1px solid transparent}.ancestral-legacy[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.ancestral-legacy.selected[_ngcontent-%COMP%]{border:1px solid rgb(132,30,6)}.ancestral-legacy.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.1}.ancestral-legacy.ranked.equipped[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background-color:#d5ad48}.ancestral-legacy[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:4px;border-radius:4px}.ancestral-legacy[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#202020;border:1px solid black;border-radius:50%;width:16px;height:16px}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid black;width:12px;height:12px;border-radius:50%;overflow:hidden}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:4px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0;width:34px;height:34px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:10px}"]}),a})();function Wt(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectAncestralLegacy(i))}),e._uU(1,"> "),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw().$implicit,i=e.oxw();e.Akn(n.iconStyle),e.Q6J("ancestralLegacy",i.getAncestralLegacy(t))("equipped",i.isAncestralLegacyEquipped(t))("selected",i.isNodeSelected(t))}}function en(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",10),e.YNc(2,Wt,2,5,"app-ancestral-legacy-slot",11),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw();e.Akn(t.style),e.MT6("zone absolute color-",t.color," size-",t.size,""),e.ekj("active",n.isRealmActive(t.realmId)),e.xp6(2),e.Q6J("ngForOf",t.ancestralLegacies)}}function tn(a,o){1&a&&e._UZ(0,"div",13),2&a&&e.Akn(o.$implicit.style)}function nn(a,o){1&a&&e._UZ(0,"div",14),2&a&&e.Akn(o.$implicit.style)}function an(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.toggleNode(r.nodeId))}),e._UZ(1,"div",16),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw();e.Akn(t.style),e.ekj("active",n.isNodeActive(t.nodeId))("available",n.isNodeAvailable(t.nodeId))}}let on=(()=>{class a extends T.B{constructor(t,n,i){super(),this.buildStorageService=t,this.slormancerDataService=n,this.slormancerCharacterModifierService=i,this.selectedAncestralLegacy=null,this.selectedAncestralLegacyChange=new e.vpe,this.BOUNDS_X={min:-500,max:500},this.BOUNDS_Y={min:-500,max:500},this.availableNodes=[],this.activeRealms=[],this.weldingShapes=[],this.lineShapes=[],this.zoneShapes=[],this.nodeShapes=[],this.character=null,this.position={x:0,y:0},this.scale=2,this.grabbed=!1,this.drawMap()}onWheelUp(t){return this.scale=Math.max(1,Math.min(2,this.scale+(t.deltaY>0?-.2:.2))),!1}onMouseDown(){this.grabbed=!0}onMouseUp(){this.grabbed=!1}onMouseMouve(t){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+t.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+t.movementY)))}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.updateMap()})}drawMap(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,O.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,O.pb)(0,9),-72,52),this.addNodeShapes((0,O.pb)(0,9).map(t=>10+2*t),-82.8,92),this.addNodeShapes((0,O.pb)(0,9).map(t=>11+2*t),-61.2,92),this.addZoneShapes((0,O.pb)(10,19),-54,112),this.addZoneShapes((0,O.pb)(20,29),-72,150,2),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,O.pb)(0,9).map(t=>31+3*t),-72,120),this.addNodeShapes((0,O.pb)(10,19).map(t=>3*t),-81,127),this.addNodeShapes((0,O.pb)(10,19).map(t=>2+3*t),-63,127),this.addZoneShapes((0,O.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,O.pb)(0,4).map(t=>61+5*t),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,45,49,53,57],-71,204),this.addZoneShapes([42,46,50,54,58],-37,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181),this.addZoneShapes((0,O.pb)(10,14).map(t=>4*t+3),-24.5,216),this.addNodeShapes([90,95,100,105,85],-22,194),this.addNodeShapes([115,121,127,133,139],-30.5,209),this.addZoneShapes((0,O.pb)(10,14).map(t=>4*t),360/70-88.5,216),this.addNodeShapes([86,91,96,101,106],360/70-91.5,194),this.addNodeShapes([112,118,124,130,136],360/70-82.5,209),this.addZoneShapes((0,O.pb)(60,64),-54,238,3),this.addNodeShapes([88,93,98,103,108],-54,198),this.addZoneShapes((0,O.pb)(22,26).map(t=>3*t),-70,258,2),this.addNodeShapes([113,119,125,131,137],-70.5,228),this.addZoneShapes((0,O.pb)(22,26).map(t=>3*t+1),-38,258,2),this.addNodeShapes([114,120,126,132,138],-37.5,228)}updateMap(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){const t=null!==this.character?this.character.ancestralLegacies.activeNodes:[],n=Ee.R.filter(i=>void 0!==i.nodes.find(r=>-1!==t.indexOf(r)));this.character.ancestralLegacies.activeNodes.length<L.sD&&(this.availableNodes=[...Ee.m,...n.map(i=>i.nodes).flat()].filter(C.mr)),this.activeRealms=n.map(i=>i.realm)}}isNodeActive(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(t)}isRealmActive(t){return-1!==this.activeRealms.indexOf(t)}isNodeAvailable(t){return-1!==this.availableNodes.indexOf(t)}isNodeSelected(t){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===t}isAncestralLegacyEquipped(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(t)}getAncestralLegacy(t){let n=null;return null!==this.character&&(n=(0,C.lA)(this.character.ancestralLegacies.ancestralLegacies.find(i=>i.id==t))),n}toggleNode(t){if(null!==this.character){let n=!1;n=this.isNodeActive(t)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,t):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,t),this.buildStorageService.saveLayer(),n&&this.updateMap()}return!1}selectAncestralLegacy(t){console.log(t),this.selectedAncestralLegacyChange.emit(t)}addLineShapes(t,n,i,r){const l=360/t;this.lineShapes.push(...(0,O.pb)(t).map(s=>({style:{width:r+"px",transform:"translate(-50%, -50%) rotate("+(n+s*l)+"deg) translateX("+i+"px)"}})))}addWeldinghapes(t,n,i,r){const l=360/t;this.weldingShapes.push(...(0,O.pb)(t).map(s=>({style:{width:r+"px",transform:"translate(-50%, -50%) rotate("+(n+s*l)+"deg) translateX("+i+"px)"}})))}addZoneShapes(t,n,i,r=1){const l=360/t.length;this.zoneShapes.push(...t.map((s,d)=>{const u=this.slormancerDataService.getAncestralRealmColor(s),b=this.slormancerDataService.getAncestralLegacyIdsFromRealm(s),P=n+d*l;return{style:{transform:"translate(-50%, -50%) rotate("+P+"deg) translateX("+i+"px)"},iconStyle:{transform:"rotate("+-P+"deg)"},size:r,realmId:s,ancestralLegacies:b,color:u}}))}addNodeShapes(t,n,i){const r=t.length,l=360/r;this.nodeShapes.push(...(0,O.pb)(r).map(s=>({style:{transform:"translate(-50%, -50%) rotate("+(n+s*l)+"deg) translateX("+i+"px)"},nodeId:(0,C.Be)(t[s],0)})))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(W.o),e.Y36(le.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(t,n){1&t&&e.NdJ("wheel",function(r){return n.onWheelUp(r)})("mousedown",function(){return n.onMouseDown()})("mouseup",function(){return n.onMouseUp()})("mouseleave",function(){return n.onMouseUp()})("mousemove",function(r){return n.onMouseMouve(r)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA()()(),e.YNc(6,en,3,9,"div",6),e.YNc(7,tn,1,2,"div",7),e.YNc(8,nn,1,2,"div",8),e.YNc(9,an,2,6,"div",9),e.qZA()()),2&t&&(e.ekj("grabbed",n.grabbed),e.xp6(1),e.Udp("top",n.position.y+"px")("left",n.position.x+"px")("transform","scale("+n.scale+")"),e.xp6(5),e.Q6J("ngForOf",n.zoneShapes),e.xp6(1),e.Q6J("ngForOf",n.lineShapes),e.xp6(1),e.Q6J("ngForOf",n.weldingShapes),e.xp6(1),e.Q6J("ngForOf",n.nodeShapes))},dependencies:[m.sg,Le],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid rgb(213,173,72);border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]{width:82px;height:82px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:76px;height:76px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),a})();function rn(a,o){if(1&a&&e._UZ(0,"div",9),2&a){const t=o.$implicit,n=e.oxw();e.ekj("unlocked",n.isPointUnlock(t))}}let ln=(()=>{class a extends T.B{constructor(t,n,i){super(),this.buildStorageService=t,this.slormancerAncestralLegacyService=n,this.messageService=i,this.ANCESTRAL_LEGACY_POINTS=(0,O.pb)(L.JY),this.character=null,this.selectedAncestralLegacy=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.selectDefaultAncestralLegacy()})}selectDefaultAncestralLegacy(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){const t=(0,C.lA)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===t?null:(0,C.lA)(this.character.ancestralLegacies.ancestralLegacies[t])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,C.lA)(this.character.ancestralLegacies.ancestralLegacies[0]))}}isPointUnlock(t){return t<L.sD}optimizeAncestralLegacies(){if(null!==this.character){for(const t of this.character.ancestralLegacies.ancestralLegacies)t.baseRank=t.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(t,t.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(t);this.buildStorageService.saveLayer(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(Ze.O),e.Y36(R.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div",1),e.YNc(4,rn,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return n.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(r){return n.selectedAncestralLegacy=r}),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",n.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",n.selectedAncestralLegacy))},dependencies:[m.sg,Z.Hw,w.a8,w.dn,F.gM,pe,on],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:100%}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:550px}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),a})();var cn=g(2652);function sn(a,o){if(1&a&&e._UZ(0,"div",7),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.attributeTraits.summary,e.oJD)}}function mn(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8),e.qZA(),e.YNc(9,sn,1,1,"div",6),e.qZA()()),2&a){const t=e.oxw();e.Gre("trait attribute-",t.attributeTraits.attribute,""),e.xp6(3),e.Oqu(t.attributeTraits.attributeName),e.xp6(2),e.Oqu(t.attributeTraits.title),e.xp6(3),e.Oqu(t.attributeTraits.recapLabel),e.xp6(1),e.Q6J("ngIf",null!==t.attributeTraits.summary)}}let _n=(()=>{class a{constructor(){this.attributeTraits=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attribute-summary-view"]],inputs:{attributeTraits:"attributeTraits"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"content"],[1,"info"],["class","description",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,mn,10,7,"div",0),2&t&&e.Q6J("ngIf",null!==n.attributeTraits)},dependencies:[m.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .locked{color:#686868}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value, .trait[_ngcontent-%COMP%]  .max, .trait[_ngcontent-%COMP%]  .max .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a})();var fe=g(2031);function dn(a,o){if(1&a&&e._UZ(0,"div",9),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.trait.cumulativeStats,e.oJD)}}function gn(a,o){if(1&a&&e._UZ(0,"div",9),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.trait.description,e.oJD)}}function un(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"div",10)(2,"div",11),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.trait.unlockLabel,e.oJD)}}function pn(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"span",4),e._uU(6),e.qZA(),e._uU(7," - "),e.TgZ(8,"span",5),e._uU(9),e.qZA()()(),e.TgZ(10,"div",6),e.YNc(11,dn,1,1,"div",7),e.YNc(12,gn,1,1,"div",7),e.YNc(13,un,3,1,"ng-container",8),e.qZA()()),2&a){const t=e.oxw();e.Gre("trait attribute-",t.trait.attribute,""),e.xp6(3),e.Oqu(t.trait.attributeName),e.xp6(3),e.Oqu(t.trait.rankLabel),e.xp6(3),e.Oqu(t.trait.traitLevelLabel),e.xp6(2),e.Q6J("ngIf",null!==t.trait.cumulativeStats),e.xp6(1),e.Q6J("ngIf",null!==t.trait.description),e.xp6(1),e.Q6J("ngIf",null!==t.trait.unlockLabel)}}let fn=(()=>{class a{constructor(){this.trait=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-trait-view"]],inputs:{trait:"trait"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"rank"],[1,"level"],[1,"content"],["class","description",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"description",3,"innerHTML"],[1,"separator"],[1,"unlock",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,pn,14,9,"div",0),2&t&&e.Q6J("ngIf",null!==n.trait)},dependencies:[m.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a})();function hn(a,o){1&a&&e._UZ(0,"div",7)}function Cn(a,o){if(1&a&&e._UZ(0,"app-trait-view",9),2&a){const t=e.oxw(3);e.Q6J("trait",t.trait)}}function vn(a,o){if(1&a&&e.YNc(0,Cn,1,1,"ng-template",8),2&a){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.isMouseOver)("cdkConnectedOverlayOrigin",t)}}function bn(a,o){if(1&a&&(e.TgZ(0,"div",1,2),e.YNc(2,hn,1,0,"div",3),e.TgZ(3,"div",4),e._UZ(4,"div",5),e.qZA(),e.YNc(5,vn,1,2,null,6),e.qZA()),2&a){const t=e.oxw();e.Gre("trait attribute-",t.trait.attribute,""),e.ekj("first",t.first)("last",t.last)("minor",t.isMinor(t.trait))("major",t.isMajor(t.trait))("greater",t.isGreater(t.trait))("active",t.unlocked)("bonus",t.bonus)("highlight",t.highlight)("hidden-by-search",t.isHiddenBySearch),e.xp6(2),e.Q6J("ngIf",t.trait.additive),e.xp6(3),e.Q6J("ngIf",t.isMouseOver)}}let Mn=(()=>{class a extends T.B{constructor(t){super(),this.searchService=t,this.trait=null,this.first=!1,this.last=!1,this.highlight=!1,this.unlocked=!1,this.bonus=!1,this.isMouseOver=!1,this.isHiddenBySearch=!1}onMouseEnter(){this.isMouseOver=!0}onMouseLeave(){this.isMouseOver=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(()=>this.isHiddenBySearch=null!==this.trait&&!this.searchService.traitMatchSearch(this.trait))}isMinor(t){return t.traitLevel===fe.y.Minor}isMajor(t){return t.traitLevel===fe.y.Major}isGreater(t){return t.traitLevel===fe.y.Greater}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-trait"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{trait:"trait",first:"first",last:"last",highlight:"highlight",unlocked:"unlocked",bonus:"bonus"},features:[e.qOj],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","first","last","minor","major","greater","active","bonus","highlight","hidden-by-search",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],["class","additive",4,"ngIf"],[1,"content"],[1,"node"],[4,"ngIf"],[1,"additive"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"trait"]],template:function(t,n){1&t&&e.YNc(0,bn,6,23,"div",0),2&t&&e.Q6J("ngIf",null!==n.trait)},dependencies:[m.O5,A.pI,A.xu,fn],styles:[".trait[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;position:relative;height:54px;width:8px;overflow:hidden;cursor:pointer}.trait.hidden-by-search[_ngcontent-%COMP%]{opacity:.2}.trait[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{position:absolute;width:4px;height:36px;left:4px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;border:4px solid black;background-color:#353535;overflow:hidden;border-left-width:0;border-right-width:0;height:30px;z-index:1}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border:2px solid black;background-color:#202020;height:14px}.trait.attribute-0.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#2f5996}.trait.attribute-0.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#2f59964d}.trait.attribute-1.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#a83007}.trait.attribute-1.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#a830074d}.trait.attribute-2.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#79b549}.trait.attribute-2.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#79b5494d}.trait.attribute-3.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#d0b545}.trait.attribute-3.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#d0b5454d}.trait.attribute-4.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#4bc1b2}.trait.attribute-4.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#4bc1b24d}.trait.attribute-5.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#753098}.trait.attribute-5.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#7530984d}.trait.attribute-6.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#cd7028}.trait.attribute-6.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#cd70284d}.trait.attribute-7.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#bf3c59}.trait.attribute-7.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#bf3c594d}.trait.bonus[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f}.trait.bonus.highlight[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f4d}.trait[_ngcontent-%COMP%]:not(.greater)   .content[_ngcontent-%COMP%]{border-left-width:2px;border-right-width:2px}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:8px}.trait.minor.first[_ngcontent-%COMP%]{width:10px}.trait.minor.first[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-left-width:4px;width:10px}.trait.major[_ngcontent-%COMP%]{width:12px}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:12px}.trait.greater[_ngcontent-%COMP%]{width:16px;position:relative}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;transform:rotate(45deg);border-width:4px;height:36px;width:36px;left:-10px}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-width:2px;width:14px;height:14px}.trait.greater[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{left:6px;height:54px}.trait.greater.last[_ngcontent-%COMP%]{width:32px}"]}),a})();function xn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-trait",9),e.NdJ("mouseenter",function(){const r=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.nodeEnter(r))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.nodeLeave())})("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.nodeClick())}),e.qZA()}if(2&a){const t=o.$implicit,n=o.index,i=e.oxw(2);e.Q6J("trait",t)("first",0===n)("last",n===i.attribute.traits.length-1)("highlight",i.isHighlight(n))("bonus",i.isBonus(n))("unlocked",i.isUnlocked(n))}}function On(a,o){if(1&a&&e._UZ(0,"app-attribute-summary-view",10),2&a){const t=e.oxw(2);e.Q6J("attributeTraits",t.attribute)}}function yn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addPoint(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",0===t.remainingPoints)}}function Pn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.removePoint(i))}),e.TgZ(1,"mat-icon"),e._uU(2,"remove"),e.qZA()()}if(2&a){const t=e.oxw(2);e.Q6J("disabled",0===t.attribute.rank)}}function Sn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1,2)(2,"img",3),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!0)})("mouseleave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!1)}),e.qZA(),e.TgZ(3,"div",4),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nodeEnter(-1))})("mouseleave",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nodeLeave())})("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.nodeClick())}),e.qZA(),e.YNc(4,xn,1,6,"app-trait",5),e.TgZ(5,"div",6),e._uU(6),e.qZA(),e.YNc(7,On,1,1,"ng-template",7),e.YNc(8,yn,3,1,"button",8),e.YNc(9,Pn,3,1,"button",8),e.qZA()}if(2&a){const t=e.MAs(1),n=e.oxw();e.Gre("bar attribute-",n.attribute.attribute,""),e.ekj("icon-shift",n.iconShift)("readonly",n.readonly)("short",n.short),e.xp6(2),e.Q6J("src",n.attribute.icon,e.LSH),e.xp6(2),e.Q6J("ngForOf",n.attribute.traits)("ngForTrackBy",n.trackByTrait),e.xp6(2),e.AsE(" +",n.attribute.rank+n.attribute.bonusRank," ",n.attribute.attributeName," "),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showSummary)("cdkConnectedOverlayOrigin",t),e.xp6(1),e.Q6J("ngIf",!n.readonly),e.xp6(1),e.Q6J("ngIf",!n.readonly)}}let Je=(()=>{class a{constructor(t,n){this.slormancerAttributeService=t,this.buildStorageService=n,this.attribute=null,this.remainingPoints=0,this.iconShift=!1,this.short=!1,this.readonly=!1,this.unlockedRange={min:0,max:0},this.highlightRange={min:0,max:0},this.bonusRange={min:0,max:0},this.cappedCursor=0,this.showSummary=!1,this.cursorIndex=null}ngOnInit(){this.updateCursor()}ngOnChanges(){this.updateCursor()}updateCursor(){null!==this.attribute&&(null===this.cursorIndex?(this.cappedCursor=this.attribute.rank,this.highlightRange={min:0,max:0},this.unlockedRange={min:0,max:this.attribute.rank},this.bonusRange={min:this.attribute.rank,max:this.attribute.rank+this.attribute.bonusRank}):(this.cappedCursor=Math.min(this.attribute.rank+this.remainingPoints,this.cursorIndex+1),this.bonusRange={min:Math.max(this.cappedCursor,this.attribute.rank),max:this.attribute.rank+this.attribute.bonusRank},this.highlightRange=this.cursorIndex<this.attribute.rank?{min:this.cursorIndex+1,max:Math.max(this.attribute.rank,this.cursorIndex+1)}:{min:this.attribute.rank,max:this.cappedCursor}))}nodeEnter(t){this.cursorIndex=t,this.updateCursor()}nodeLeave(){this.cursorIndex=null,this.updateCursor()}setRank(t){null!==this.attribute&&this.attribute.rank!==t&&!this.readonly&&(this.attribute.rank=t,this.slormancerAttributeService.updateAttributeTraits(this.attribute),this.buildStorageService.saveLayer(),this.updateCursor())}nodeClick(){null!==this.attribute&&this.setRank(this.cappedCursor)}isUnlocked(t){return t>=this.unlockedRange.min&&t<this.unlockedRange.max}isHighlight(t){return t>=this.highlightRange.min&&t<this.highlightRange.max}isBonus(t){return t>=this.bonusRange.min&&t<this.bonusRange.max}addPoint(t){null!==this.attribute&&this.remainingPoints>0&&this.setRank(this.attribute.rank+Math.min(this.remainingPoints,t.shiftKey?10:1))}removePoint(t){null!==this.attribute&&this.attribute.rank>0&&this.setRank(this.attribute.rank-Math.min(this.attribute.rank,t.shiftKey?10:1))}trackByTrait(t,n){return t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(cn.Q),e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attribute-line"]],inputs:{attribute:"attribute",remainingPoints:"remainingPoints",iconShift:"iconShift",short:"short",readonly:"readonly"},features:[e.TTD],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","icon-shift","readonly","short",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],[3,"src","mouseenter","mouseleave"],[1,"pre-bar",3,"mouseenter","mouseleave","click"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"total"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click"],[3,"attributeTraits"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&e.YNc(0,Sn,10,18,"div",0),2&t&&e.Q6J("ngIf",null!==n.attribute)},dependencies:[m.sg,m.O5,S.lW,Z.Hw,A.pI,A.xu,_n,Mn],styles:['.bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:4px 0;position:relative;height:60px}.bar.icon-shift[_ngcontent-%COMP%]{margin-left:16px}.bar[_ngcontent-%COMP%]:before{content:" ";position:absolute;background-color:#353535;border:4px solid black;transform:rotate(45deg);width:38px;height:38px}.bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:2;padding-left:1px}.bar[_ngcontent-%COMP%]   .pre-bar[_ngcontent-%COMP%]{background-color:#353535;border:4px solid black;margin-left:-6px;border-left:0;border-right:0;min-width:20px;width:20px;height:30px;z-index:1}.bar[_ngcontent-%COMP%]:not(.readonly)   .pre-bar[_ngcontent-%COMP%]{cursor:pointer}.bar[_ngcontent-%COMP%]:not(.icon-shift)   .pre-bar[_ngcontent-%COMP%]{width:36px}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:none;background-color:#353535;border:4px solid black;font-weight:700;border-left:0;width:130px;height:30px}.bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.bar.short[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar.short[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}@media (max-width: 768px){.bar[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}}.bar.attribute-0[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#2f5996}.bar.attribute-1[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#a83007}.bar.attribute-2[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#79b549}.bar.attribute-3[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#d0b545}.bar.attribute-4[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#4bc1b2}.bar.attribute-5[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#753098}.bar.attribute-6[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#cd7028}.bar.attribute-7[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#bf3c59}']}),a})();function kn(a,o){if(1&a&&e._UZ(0,"app-attribute-line",2),2&a){const t=o.$implicit,n=e.oxw(2);e.Q6J("iconShift",t%2==0)("attribute",n.attributes.allocated[t])("remainingPoints",n.attributes.remainingPoints)}}function Tn(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"p"),e._uU(3),e.qZA(),e.YNc(4,kn,1,3,"app-attribute-line",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.AsE("",t.attributes.remainingPoints,"/",t.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}let wn=(()=>{class a extends T.B{constructor(t){super(),this.buildStorageService=t,this.ALL_ATTRIBUTES=h.A,this.attributes=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.attributes=null===t?null:t.character.attributes)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(t,n){1&t&&e.YNc(0,Tn,5,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==n.attributes)},dependencies:[m.sg,m.O5,w.a8,w.dn,Je],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),a})(),An=(()=>{class a{constructor(){this.character=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"TODO")}}),a})(),Zn=(()=>{class a{constructor(){this.character=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"TODO TURRET")}}),a})();function In(a,o){if(1&a&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function En(a,o){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function Ln(a,o){if(1&a&&e._UZ(0,"app-defense-calc",6),2&a){const t=e.oxw(2);e.Q6J("character",t.character)}}function Jn(a,o){if(1&a&&e._UZ(0,"app-turret-syndrome-calc",6),2&a){const t=e.oxw(2);e.Q6J("character",t.character)}}function qn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"mat-form-field",1)(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.currentCalc=i)}),e.YNc(7,In,2,2,"mat-option",3),e.qZA()(),e.YNc(8,En,2,0,"p",0),e.YNc(9,Ln,1,1,"app-defense-calc",4),e.YNc(10,Jn,1,1,"app-turret-syndrome-calc",4),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.currentCalc),e.xp6(1),e.Q6J("ngForOf",t.options),e.xp6(1),e.Q6J("ngIf",null===t.currentCalc),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.TurretSyndrome)}}var K=(()=>{return(a=K||(K={}))[a.Defense=0]="Defense",a[a.TurretSyndrome=1]="TurretSyndrome",K;var a})();let Un=(()=>{class a extends T.B{constructor(t){super(),this.buildStorageService=t,this.CalcPage=K,this.character=null,this.options=[{value:K.Defense,label:"Defenses"},{value:K.TurretSyndrome,label:"Turret"}],this.currentCalc=null,this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(n=>this.character=null===n?null:n.character)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(t,n){1&t&&e.YNc(0,qn,11,5,"main",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[m.sg,m.O5,w.a8,w.dn,f.KE,f.hX,U.gD,N.ey,c.JJ,c.On,An,Zn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),a})();var qe=g(9635);function Nn(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.select(l.stats,r))}),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw(3);e.ekj("selected",n.isSelected(t)),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("matTooltip",n.getTooltip(n.stats,t)),e.xp6(1),e.Oqu(n.getValue(n.stats,t))}}function Fn(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.YNc(3,Nn,5,5,"div",4),e.BQk()),2&a){const t=o.$implicit;e.xp6(2),e.Oqu(t.section),e.xp6(1),e.Q6J("ngForOf",t.stats)}}function Bn(a,o){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Fn,4,2,"ng-container",2),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.SECTIONS)}}let he=(()=>{class a extends T.B{constructor(t){super(),this.slormancerTranslateService=t,this.SECTIONS=[{section:this.slormancerTranslateService.translate("cat_adventure"),stats:[{name:this.slormancerTranslateService.translate("essence_find"),stat:"essence_find",sign:!0},{name:this.slormancerTranslateService.translate("xp_find"),stat:"xp_find",sign:!0},{name:this.slormancerTranslateService.translate("influence_gain"),stat:"influence_gain",sign:!0},{name:this.slormancerTranslateService.translate("mf_find"),stat:"mf_find",sign:!0},{name:this.slormancerTranslateService.translate("mf_qual"),stat:"mf_qual",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_health"),stats:[{name:this.slormancerTranslateService.translate("max_health"),stat:"max_health",sign:!1},{name:this.slormancerTranslateService.translate("health_regeneration"),stat:"health_regeneration",sign:!0},{name:this.slormancerTranslateService.translate("health_leech_percent"),stat:"health_leech_percent",sign:!1},{name:this.slormancerTranslateService.translate("life_on_hit"),stat:"life_on_hit",sign:!0},{name:this.slormancerTranslateService.translate("life_on_kill"),stat:"life_on_kill",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_mana"),stats:[{name:this.slormancerTranslateService.translate("max_mana"),stat:"max_mana",sign:!1},{name:this.slormancerTranslateService.translate("mana_regeneration"),stat:"mana_regeneration",sign:!0},{name:this.slormancerTranslateService.translate("mana_leech_percent"),stat:"mana_leech_percent",sign:!1},{name:this.slormancerTranslateService.translate("mana_on_hit"),stat:"mana_on_hit",sign:!0},{name:this.slormancerTranslateService.translate("mana_on_kill"),stat:"mana_on_kill",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_movement"),stats:[{name:this.slormancerTranslateService.translate("movement_speed"),stat:"movement_speed",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_attack"),stats:[{name:this.slormancerTranslateService.translate("attack_speed"),stat:"attack_speed",sign:!1},{name:this.slormancerTranslateService.translate("basic_damage"),stat:"basic_damage",sign:!1},{name:this.slormancerTranslateService.translate("weapon_damage"),stat:"weapon_damage",sign:!1},{name:this.slormancerTranslateService.translate("physical_damage"),stat:"physical_damage",sign:!1},{name:this.slormancerTranslateService.translate("elemental_damage"),stat:"elemental_damage",sign:!1},{name:this.slormancerTranslateService.translate("critical_chance"),stat:"critical_chance",sign:!1},{name:this.slormancerTranslateService.translate("critical_damage"),stat:"critical_damage",sign:!1},{name:this.slormancerTranslateService.translate("ancestral_chance"),stat:"ancestral_chance",sign:!1},{name:this.slormancerTranslateService.translate("ancestral_damage"),stat:"ancestral_damage",sign:!1},{name:this.slormancerTranslateService.translate("armor_penetration"),stat:"armor_penetration",sign:!1},{name:this.slormancerTranslateService.translate("elemental_penetration"),stat:"elemental_penetration",sign:!1},{name:this.slormancerTranslateService.translate("dot_increased_damage"),stat:"dot_increased_damage",sign:!0},{name:this.slormancerTranslateService.translate("increased_on_elite"),stat:"increased_on_elite",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_defense"),stats:[{name:this.slormancerTranslateService.translate("armor"),stat:"armor",sign:!1},{name:this.slormancerTranslateService.translate("elemental_resist"),stat:"elemental_resist",sign:!1},{name:this.slormancerTranslateService.translate("fire_resistance"),stat:"fire_resistance",sign:!1},{name:this.slormancerTranslateService.translate("ice_resistance"),stat:"ice_resistance",sign:!1},{name:this.slormancerTranslateService.translate("lightning_resistance"),stat:"lightning_resistance",sign:!1},{name:this.slormancerTranslateService.translate("light_resistance"),stat:"light_resistance",sign:!1},{name:this.slormancerTranslateService.translate("shadow_resistance"),stat:"shadow_resistance",sign:!1},{name:this.slormancerTranslateService.translate("dodge"),stat:"dodge",sign:!1},{name:this.slormancerTranslateService.translate("thorns"),stat:"thorns",sign:!1},{name:this.slormancerTranslateService.translate("retaliate"),stat:"retaliate",sign:!1},{name:this.slormancerTranslateService.translate("tenacity"),stat:"tenacity",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_all"),stat:"reduced_on_all",sign:!1},{name:this.slormancerTranslateService.translate("reduced_by_elite"),stat:"reduced_by_elite",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_melee"),stat:"reduced_on_melee",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_projectile"),stat:"reduced_on_projectile",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_area"),stat:"reduced_on_area",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_resources"),stats:[{name:this.slormancerTranslateService.translate("gold_find"),stat:"gold_find",sign:!0},{name:this.slormancerTranslateService.translate("scrap_find"),stat:"scrap_find",sign:!0},{name:this.slormancerTranslateService.translate("slormite_find"),stat:"slormite_find",sign:!0},{name:this.slormancerTranslateService.translate("slormeline_find"),stat:"slormeline_find",sign:!0},{name:this.slormancerTranslateService.translate("reaper_find"),stat:"reaper_find",sign:!0},{name:this.slormancerTranslateService.translate("skill_mastery_gain"),stat:"skill_mastery_gain",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_secondary_melee"),stats:[{name:this.slormancerTranslateService.translate("inner_fire_chance"),stat:"inner_fire_chance",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_max_number"),stat:"inner_fire_max_number",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_duration"),stat:"inner_fire_duration",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_damage"),stat:"inner_fire_damage",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_chance"),stat:"overdrive_chance",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_bounce_number"),stat:"overdrive_bounce_number",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_damage"),stat:"overdrive_damage",sign:!1},{name:this.slormancerTranslateService.translate("recast_chance"),stat:"recast_chance",sign:!1},{name:this.slormancerTranslateService.translate("knockback_melee"),stat:"knockback_melee",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_projectile"),stats:[{name:this.slormancerTranslateService.translate("additional_projectile"),stat:"additional_projectile",sign:!0},{name:this.slormancerTranslateService.translate("chance_to_pierce"),stat:"chance_to_pierce",sign:!1},{name:this.slormancerTranslateService.translate("fork_chance"),stat:"fork_chance",sign:!1},{name:this.slormancerTranslateService.translate("chance_to_rebound"),stat:"chance_to_rebound",sign:!1},{name:this.slormancerTranslateService.translate("projectile_speed"),stat:"projectile_speed",sign:!0},{name:this.slormancerTranslateService.translate("knockback_projectile"),stat:"knockback_projectile",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_aoe"),stats:[{name:this.slormancerTranslateService.translate("aoe_increased_size"),stat:"aoe_increased_size",sign:!1},{name:this.slormancerTranslateService.translate("aoe_increased_effect"),stat:"aoe_increased_effect",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_extras"),stats:[{name:this.slormancerTranslateService.translate("totem_increased_effect"),stat:"totem_increased_effect",sign:!0},{name:this.slormancerTranslateService.translate("aura_increased_effect"),stat:"aura_increased_effect",sign:!0},{name:this.slormancerTranslateService.translate("minion_increased_damage"),stat:"minion_increased_damage",sign:!0}]}],this.stats=null,this.selectedMergedStat=null,this.selected=new e.vpe}ngOnInit(){}valueToString(t,n,i){let r;return r="number"==typeof t?(t<0?"-":n?"+":"")+t+i:(t.min<0?"":n?"+":"")+t.min+i+" - "+(t.max<0?"":n?"+":"")+t.max+i,r}getValue(t,n){const i=t.find(l=>l.stat===n.stat);let r="0";return i&&(r=this.valueToString(i.totalDisplayed,n.sign,i.suffix)),r}select(t,n){const i=t.find(r=>r.stat===n.stat);i&&(console.log(i),this.selectedMergedStat=i,this.selected.emit(i))}getTooltip(t,n){const i=t.find(l=>l.stat===n.stat);let r="No details found";if(i){const l="number"!=typeof i.total;r="Flat: "+i.values.flat.map(s=>this.valueToString(s.value,!1,i.suffix)).join(", ")+"\n",l&&(r+="Flat (max): "+i.values.max.map(s=>this.valueToString(s.value,!1,i.suffix)).join(", ")+"\n"),r+="Percent: "+i.values.percent.map(s=>this.valueToString(s.value,!1,"%")).join(", ")+"\n",l&&(r+="Percent (max) : "+i.values.maxPercent.map(s=>this.valueToString(s.value,!1,"%")).join(", ")+"\n"),r+="Multiplier: "+i.values.multiplier.map(s=>this.valueToString(s.value,!1,"%")).join(", ")}return r}translate(t){return this.slormancerTranslateService.translate(t)}isSelected(t){return null!==this.selectedMergedStat&&this.selectedMergedStat.stat===t.stat}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Y.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main-stats"]],inputs:{stats:"stats"},outputs:{selected:"selected"},features:[e.qOj],decls:1,vars:1,consts:[["class","sections",4,"ngIf"],[1,"sections"],[4,"ngFor","ngForOf"],[1,"section"],["class","stat",3,"selected","click",4,"ngFor","ngForOf"],[1,"stat",3,"click"],[1,"label"],[1,"value",3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,Bn,2,1,"div",0),2&t&&e.Q6J("ngIf",null!==n.stats)},dependencies:[m.sg,m.O5,F.gM],styles:[".sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-left:8px;cursor:pointer}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.sections[_ngcontent-%COMP%]   .stat.selected[_ngcontent-%COMP%]{background-color:#ffffff4d}"]}),a})();function Qn(a,o){if(1&a&&(e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"span",7),e._uU(5),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8),e._uU(8),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw();e.ekj("increase",t.difference>0)("decrease",t.difference<0),e.xp6(1),e.Q6J("matTooltip",n.valueToString(t.left,!0)),e.xp6(1),e.Oqu(n.valueToString(t.left)),e.xp6(3),e.Oqu(n.changeToString(t.difference)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("matTooltip",n.valueToString(t.right,!0)),e.xp6(1),e.Oqu(n.valueToString(t.right))}}function Hn(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Qn,9,10,"div",3),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",0!==t.difference)}}function Rn(a,o){1&a&&(e.TgZ(0,"div",9),e._uU(1,"No differences"),e.qZA())}let Ue=(()=>{class a{constructor(){this.differences=[]}valueToString(t,n=!1){let i="";return i+="number"==typeof t?t>1e4&&!n?Math.floor(t/1e3)+"k":t:t.min>1e4&&t.max>1e4&&!n?Math.floor(t.min/1e3)+"k - "+Math.floor(t.max/1e3)+"k":t.min+" - "+t.max,i}changeToString(t){let n="";return Number.isFinite(t)&&(t>0&&(n="+"),n+=t+"%"),n}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare-view"]],inputs:{differences:"differences"},decls:3,vars:2,consts:[[1,"differences"],[4,"ngFor","ngForOf"],["class","no-differences",4,"ngIf"],["class","difference",3,"increase","decrease",4,"ngIf"],[1,"difference"],[1,"left",3,"matTooltip"],[1,"change"],[1,"value"],[1,"right",3,"matTooltip"],[1,"no-differences"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,Hn,2,1,"ng-container",1),e.YNc(2,Rn,2,0,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.differences),e.xp6(1),e.Q6J("ngIf",0===n.differences.length))},dependencies:[m.sg,m.O5,F.gM],styles:[".differences[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;min-width:350px}@media (max-width: 374px){.differences[_ngcontent-%COMP%]{min-width:auto}}.differences[_ngcontent-%COMP%]   .no-differences[_ngcontent-%COMP%]{text-align:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{gap:8px}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 374px){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:none}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;text-align:center}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-basis:auto}}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{text-align:left}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.differences[_ngcontent-%COMP%]   .difference.increase[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:green}.differences[_ngcontent-%COMP%]   .difference.decrease[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:red}"]}),a})();function Yn(a,o){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function Gn(a,o){if(1&a&&e._UZ(0,"app-compare-view",9),2&a){const t=e.oxw(2);e.Q6J("differences",t.differences)}}function Vn(a,o){if(1&a&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Dn(a,o){if(1&a&&e._UZ(0,"app-main-stats",2),2&a){const t=e.oxw(2);e.Q6J("stats",t.layerControl.value.character.stats)}}function jn(a,o){if(1&a&&(e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA()(),e.TgZ(6,"mat-card",3)(7,"mat-card-content"),e.YNc(8,Yn,2,0,"p",0),e.YNc(9,Gn,1,1,"app-compare-view",4),e.qZA()(),e.TgZ(10,"mat-card",1)(11,"mat-card-content")(12,"mat-form-field",5)(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,Vn,2,2,"mat-option",7),e.qZA()(),e.YNc(17,Dn,1,1,"app-main-stats",8),e.qZA()()()),2&a){const t=e.oxw();e.xp6(4),e.Oqu(t.currentLayer.name),e.xp6(1),e.Q6J("stats",t.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===t.differences),e.xp6(1),e.Q6J("ngIf",null!==t.differences),e.xp6(6),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layers),e.xp6(1),e.Q6J("ngIf",t.layerControl.value)}}let Kn=(()=>{class a extends T.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerCharacterComparatorService=n,this.differences=null,this.currentLayer=null,this.layers=[],this.config=null,this.layerControl=new c.NI(null),this.buildStorageService.buildChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(i=>{var r;this.layers=null===i?[]:i.layers,this.layerControl.setValue(null!==(r=this.layers[0])&&void 0!==r?r:null)}),this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(i=>{var r;if(this.currentLayer=i,null!==i){const l=this.layers.indexOf(i);-1!==l&&(this.layerControl.setValue(null!==(r=this.layers[0===l&&this.layers.length>1?1:0])&&void 0!==r?r:null),this.updateDifferences())}}),this.layerControl.valueChanges.subscribe(()=>this.updateDifferences())}ngOnInit(){}updateDifferences(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(qe.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(t,n){1&t&&e.YNc(0,jn,18,7,"main",0),2&t&&e.Q6J("ngIf",null!==n.currentLayer&&n.layers.length>0)},dependencies:[m.sg,m.O5,w.a8,w.dn,f.KE,f.hX,U.gD,N.ey,c.JJ,c.oH,he,Ue],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a})();var X=g(648),ce=g(7446);function Xn(a,o){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function zn(a,o){if(1&a&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,Xn,2,1,"mat-icon",5),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function $n(a,o){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function Wn(a,o){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function ea(a,o){if(1&a&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,$n,2,2,"mat-option",8),e.qZA(),e.YNc(5,Wn,2,1,"mat-icon",5),e.qZA()),2&a){const t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.config.values),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function ta(a,o){if(1&a&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function na(a,o){if(1&a&&(e.TgZ(0,"mat-checkbox",10)(1,"label"),e._uU(2),e.YNc(3,ta,2,1,"mat-icon",11),e.qZA()()),2&a){const t=e.oxw(2);e.Q6J("formControl",t.control)("checked",t.control.value),e.xp6(2),e.hij(" ",t.config.label," "),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function aa(a,o){if(1&a&&(e.ynx(0),e.YNc(1,zn,5,3,"mat-form-field",1),e.YNc(2,ea,6,4,"mat-form-field",1),e.YNc(3,na,4,4,"mat-checkbox",2),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNumber(t.config)),e.xp6(1),e.Q6J("ngIf",t.isEnum(t.config)),e.xp6(1),e.Q6J("ngIf",t.isBoolean(t.config))}}let ia=(()=>{class a{constructor(){this.control=null,this.config=null}isNumber(t){return"number"===t.type}isEnum(t){return"enum"===t.type}isBoolean(t){return"boolean"===t.type}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,aa,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",null!==n.config&&null!==n.control)},dependencies:[m.sg,m.O5,Z.Hw,f.KE,f.hX,f.R9,q.Nt,U.gD,N.ey,ce.oG,F.gM,c.Fj,c.wV,c.JJ,c.oH],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),a})();function oa(a,o){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){const t=o.$implicit,n=e.oxw(3);e.Q6J("control",n.getControl(t))("config",t)}}function ra(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,oa,1,2,"app-config-entry",3),e.BQk()),2&a){const t=o.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function la(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,ra,4,2,"ng-container",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.GENERAL_CONFIG_GROUPS)}}function ca(a,o){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){const t=o.$implicit,n=e.oxw(4);e.Q6J("control",n.getControl(t))("config",t)}}function sa(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,ca,1,2,"app-config-entry",3),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function ma(a,o){if(1&a&&(e.ynx(0),e.YNc(1,sa,4,2,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isGroupValid(t))}}function _a(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,ma,2,1,"ng-container",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.CLASS_CONFIG_GROUPS)}}function da(a,o){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){const t=o.$implicit,n=e.oxw(4);e.Q6J("control",n.getControl(t))("config",t)}}function ga(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,da,1,2,"app-config-entry",3),e.BQk()),2&a){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function ua(a,o){if(1&a&&(e.ynx(0),e.YNc(1,ga,4,2,"ng-container",0),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isGroupValid(t))}}function pa(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,ua,2,1,"ng-container",1),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.EQUIPMENT_CONFIG_GROUPS)}}let fa=(()=>{class a extends T.B{constructor(t){super(),this.buildStorageService=t,this.EXTRA_VALIDATORS={percent_missing_health:[c.kI.max(100)],percent_missing_mana:[c.kI.max(100)],enemy_percent_missing_health:[c.kI.max(100)],block_stacks:[c.kI.max(100)],nimble_champion_stacks:[c.kI.max(200)],nimble_chaserenitympion_stacks:[c.kI.max(12)]},this.GENERAL_CONFIG_GROUPS=[{title:"General",condition:()=>!0,configurations:[{type:"number",key:"all_other_characters_level",label:"Sum of all your other character's level"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"elder_slorms",label:"Total Elder Slorm"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"number",key:"highest_slorm_temple_floor",label:"Highest Slorm Temple floor"},{type:"boolean",key:"idle",label:"Are you idle ?"}]},{title:"When in Combat",condition:()=>!0,configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Active inner fires"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"number",key:"chilled_enemy_nearby",label:"How much frozen or chilled enemies are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"},{type:"boolean",key:"in_combat",label:"Are you in combat"}]},{title:"Enemy",condition:()=>!0,configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"}]}],this.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:n=>2===n.reaper.id,configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:n=>105===n.reaper.id,configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:n=>73===n.reaper.id,configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:n=>74===n.reaper.id,configurations:[{type:"boolean",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:n=>75===n.reaper.id,configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:n=>79===n.reaper.id||80===n.reaper.id,configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:n=>82===n.reaper.id||83===n.reaper.id,configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:n=>111===n.reaper.id,configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:n=>112===n.reaper.id,configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:n=>113===n.reaper.id,configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Concentrated Inner Strength)",condition:n=>23===n.reaper.id,configurations:[{type:"boolean",key:"concentration_buff",label:"Is Concentration active"}]},{title:"Reaper (Fate-Crusher)",condition:n=>53===n.reaper.id,configurations:[{type:"number",key:"fulgurorn_dedication_stacks",label:"Fulgurorn's Dedication stacks"}]},{title:"Reaper (Inner Fireworks)",condition:n=>57===n.reaper.id||58===n.reaper.id,configurations:[{type:"number",key:"enemy_inner_weakness_stacks",label:"Inner weakness stacks on enemy",info:'Effect is applied if "use enemy state" is checked'}]},{title:"Reaper (Temple Keeper)",condition:n=>84===n.reaper.id,configurations:[{type:"boolean",key:"show_temple_keeper_as_totem",label:"Display temple keeper stats on it's totem's form"}]},{title:"Reaper (Slorm Temple)",condition:n=>85===n.reaper.id,configurations:[{type:"boolean",key:"ultima_momentum_buff",label:"Is Ultima-Momentum active"},{type:"boolean",key:"show_elder_inner_fire_damage",label:"Show inner fire damages as elder"}]},{title:"Reaper (Giant Slayer)",condition:n=>91===n.reaper.id||92===n.reaper.id,configurations:[{type:"number",key:"enemy_enfeeble_stacks",label:"Enemy enfeeble stacks",info:'Effect is applied if "use enemy state" is checked'},{type:"number",key:"apex_predator_stacks",label:"Apex predator stacks"},{type:"number",key:"enfeeble_stacks_in_radius",label:"Enfeeble stacks on enemies around you"}]},{title:"Gold Armor",condition:n=>this.hasActivable(n,0),configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:n=>this.hasActivable(n,3),configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:n=>this.hasActivable(n,6),configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Summon Skeleton Squire",condition:n=>this.hasActivable(n,17),configurations:[{type:"number",key:"summoned_skeleton_squires",label:"Number of summoned skeleton squires"},{type:"boolean",key:"always_summon_maximum_skeleton_squires",label:"Always summon the maximum number of skeleton squires",info:"Based on your available mana after other skills reservation. Override fixed number of summoned skeleton squires"},{type:"number",key:"minimum_unreserved_mana",label:"Minimum unreserved mana",info:"When summoning skeleton squires, will make sure that your mana do not go under this value. When exporting a build, this value is set to your highest skill cost."}]},{title:"Summon Prime Totem",condition:n=>this.hasActivable(n,19),configurations:[{type:"boolean",key:"add_totem_tag_to_prime_totem_skills",label:"Apply totem tags to Wood Sticks / Arrow Shots / Arcane Missiles"}]},{title:"Exposed Armor",condition:n=>this.hasActivable(n,23),configurations:[{type:"boolean",key:"exposed_armor_buff",label:"Is exposed armor active"}]},{title:"Willpower",condition:n=>this.isAttributeAllocated(n,h.a.Willpower),configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:n=>this.isAttributeAllocated(n,h.a.Dexterity),configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:n=>this.isAttributeAllocated(n,h.a.Bravery),configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:n=>this.isAncestralLegacyEquipped(n,80),configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:n=>this.isAncestralLegacyEquipped(n,85),configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:n=>this.isAncestralLegacyEquipped(n,33),configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:n=>this.isAncestralLegacyEquipped(n,106),configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:n=>this.isAncestralLegacyEquipped(n,82),configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Faith of the Ancients",condition:n=>this.hasLegendaryEffect(n,31),configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:n=>this.hasLegendaryEffect(n,29),configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:n=>this.hasLegendaryEffect(n,75),configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:n=>this.hasLegendaryEffect(n,77),configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:n=>this.hasLegendaryEffect(n,26),configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:n=>this.hasLegendaryEffect(n,63),configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:n=>this.hasLegendaryEffect(n,16),configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:n=>this.hasLegendaryEffect(n,16),configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:n=>this.hasLegendaryEffect(n,76),configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"A Path to the First",condition:n=>this.hasLegendaryEffect(n,32),configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:n=>this.hasLegendaryEffect(n,33),configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:n=>this.hasLegendaryEffect(n,74),configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]}],this.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:n=>n.heroClass===p.i.Warrior,configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:n=>this.isSkillEquipped(n,p.i.Warrior,0),configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:n=>this.isSkillEquipped(n,p.i.Warrior,2),configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:n=>this.isSkillEquipped(n,p.i.Warrior,3),configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:n=>this.isSkillEquipped(n,p.i.Warrior,4),configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:n=>this.isSkillEquipped(n,p.i.Warrior,5),configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:n=>this.isSkillEquipped(n,p.i.Warrior,6),configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:n=>this.isSkillEquipped(n,p.i.Warrior,7),configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:n=>this.isSkillEquipped(n,p.i.Warrior,9),configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:n=>this.isSkillEquipped(n,p.i.Warrior,10),configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:n=>n.heroClass===p.i.Huntress,configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:n=>this.isSkillEquipped(n,p.i.Huntress,0),configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:n=>this.isSkillEquipped(n,p.i.Huntress,1),configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:n=>this.isSkillEquipped(n,p.i.Huntress,2),configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:n=>this.isSkillEquipped(n,p.i.Huntress,3),configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:n=>this.isSkillEquipped(n,p.i.Huntress,4),configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:n=>this.isSkillEquipped(n,p.i.Huntress,5),configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:n=>this.isSkillEquipped(n,p.i.Huntress,7),configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:n=>this.isSkillEquipped(n,p.i.Huntress,8),configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:n=>this.isSkillEquipped(n,p.i.Huntress,9),configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:n=>n.heroClass===p.i.Mage,configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:n=>this.isSkillEquipped(n,p.i.Mage,0),configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:n=>this.isSkillEquipped(n,p.i.Mage,2),configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:n=>this.isSkillEquipped(n,p.i.Mage,4),configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:n=>this.isSkillEquipped(n,p.i.Mage,6),configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:n=>this.isSkillEquipped(n,p.i.Mage,7),configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:n=>this.isSkillEquipped(n,p.i.Mage,8),configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:$.H.Arcanic,label:"Arcanic"},{value:$.H.Temporal,label:"Temporal"},{value:$.H.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:n=>this.isSkillEquipped(n,p.i.Mage,9),configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],this.config=null}ngOnInit(){this.config=this.generateConfigurationForm(),this.config.valueChanges.subscribe(()=>this.updateConfiguration())}generateConfigurationForm(){let t={};const n=this.buildStorageService.getBuild(),i=Object.entries(null!==n?n.configuration:B);for(const r of i){let l=[c.kI.required,...(0,C.Be)(this.EXTRA_VALIDATORS[r[0]],[])];"number"===r[1]&&l.push(c.kI.min(0)),t[r[0]]=new c.NI(r[1],l)}return new c.cw(t)}updateConfiguration(){const t=this.buildStorageService.getBuild();null!==this.config&&null!==t&&this.config.valid&&(t.configuration=this.config.value,this.buildStorageService.saveBuild())}getControl(t){return null===this.config?null:this.config.get(t.key)}isGroupValid(t){const n=this.buildStorageService.getLayer();return null!==n&&t.condition(n.character)}hasActivable(t,n){return[t.activable1,t.activable2,t.activable3,t.activable4].filter(C.BX).some(i=>!("element"in i)&&i.id===n)}isSkillEquipped(t,n,i){return t.heroClass===n&&[t.primarySkill,t.secondarySkill,t.supportSkill].filter(C.BX).some(r=>r.id===i)}isAttributeAllocated(t,n){const i=t.attributes.allocated[n];return i.rank>0||i.bonusRank>0}isAncestralLegacyEquipped(t,n){return t.ancestralLegacies.activeAncestralLegacies.includes(n)}hasLegendaryEffect(t,n){return X.PL.map(i=>{var r;return null===(r=t.gear[i])||void 0===r?void 0:r.legendaryEffect}).filter(C.BX).some(i=>i.id===n)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(t,n){1&t&&(e.TgZ(0,"main"),e.YNc(1,la,3,1,"mat-card",0),e.YNc(2,_a,3,1,"mat-card",0),e.YNc(3,pa,3,1,"mat-card",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==n.config),e.xp6(1),e.Q6J("ngIf",null!==n.config),e.xp6(1),e.Q6J("ngIf",null!==n.config))},dependencies:[m.sg,m.O5,w.a8,w.dn,ia],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a})();var x=g(2525),Ne=g(8003);function ha(a,o){1&a&&(e.TgZ(0,"div",20),e._uU(1,"Equipped"),e.qZA())}function Ca(a,o){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){const t=o.$implicit;e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function va(a,o){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Base Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Ca,5,7,"li",23),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getNormalAffixes())}}function ba(a,o){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){const t=o.$implicit;e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function Ma(a,o){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Magic Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,ba,5,7,"li",23),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getMagicAffixes())}}function xa(a,o){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){const t=o.$implicit;e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function Oa(a,o){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Rare Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,xa,5,7,"li",23),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getRareAffixes())}}function ya(a,o){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){const t=o.$implicit;e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function Pa(a,o){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Epic Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,ya,5,7,"li",23),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getEpicAffixes())}}function Sa(a,o){if(1&a&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.item.legendaryEffect.activable.name,"")}}function ka(a,o){if(1&a&&(e.TgZ(0,"div",6),e._UZ(1,"img",8),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.Q6J("src",t.item.legendaryEffect.skillIcon,e.LSH)}}function Ta(a,o){if(1&a&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",22)(4,"div",24),e._UZ(5,"div",30),e.qZA(),e._uU(6),e.TgZ(7,"div",24),e._UZ(8,"div",30),e.qZA()(),e.TgZ(9,"div",31),e._UZ(10,"span",32),e.YNc(11,Sa,2,1,"span",33),e.qZA(),e.YNc(12,ka,2,1,"div",34),e.qZA()()()),2&a){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.item.legendaryEffect.title," "),e.xp6(4),e.Q6J("innerHTML",t.item.legendaryEffect.description,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect.activable),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect.skillIcon)}}function wa(a,o){if(1&a&&e._UZ(0,"app-activable-view",36),2&a){const t=e.oxw(2);e.Q6J("activable",t.item.legendaryEffect.activable)("reinforcment",t.item.reinforcment)}}function Aa(a,o){if(1&a&&(e.TgZ(0,"div",37),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.item.reaperEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.item.reaperEnchantment.label,e.oJD)}}function Za(a,o){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.item.skillEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.item.skillEnchantment.label,e.oJD)}}function Ia(a,o){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&a){const t=e.oxw(2);e.Gre("buff attribute atr-",t.item.attributeEnchantment.craftedAttribute,""),e.xp6(1),e.Q6J("src",t.item.attributeEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.item.attributeEnchantment.label,e.oJD)}}function Ea(a,o){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,ha,2,0,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7)(8,"img",8),e.qZA(),e.TgZ(9,"div",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e._uU(12,"-"),e.qZA(),e.TgZ(13,"div",11),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.qZA()(),e._UZ(17,"div",12),e.TgZ(18,"div",13),e.YNc(19,va,5,1,"div",14),e.YNc(20,Ma,5,1,"div",14),e.YNc(21,Oa,5,1,"div",14),e.YNc(22,Pa,5,1,"div",14),e.qZA()(),e.YNc(23,Ta,13,4,"div",15),e.YNc(24,wa,1,2,"app-activable-view",16),e.YNc(25,Aa,3,2,"div",17),e.YNc(26,Za,3,2,"div",18),e.YNc(27,Ia,3,5,"div",19),e.qZA()()),2&a){const t=e.oxw();e.Gre("item ",t.item.rarity,""),e.ekj("nodetails",!t.details),e.xp6(1),e.Q6J("innerHTML",t.item.name,e.oJD),e.xp6(2),e.Q6J("ngIf",t.equipped),e.xp6(4),e.Q6J("src",t.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",t.item.icon,e.LSH),e.xp6(2),e.Oqu(t.item.rarityLabel),e.xp6(4),e.Oqu(t.item.baseLabel),e.xp6(2),e.Oqu(t.item.levelLabel),e.xp6(3),e.Q6J("ngIf",t.getNormalAffixes().length>0),e.xp6(1),e.Q6J("ngIf",t.getMagicAffixes().length>0),e.xp6(1),e.Q6J("ngIf",t.getRareAffixes().length>0),e.xp6(1),e.Q6J("ngIf",t.getEpicAffixes().length>0),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect&&null!==t.item.legendaryEffect.activable),e.xp6(1),e.Q6J("ngIf",null!==t.item.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.item.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.item.attributeEnchantment)}}let Ce=(()=>{class a{constructor(){this.item=null,this.equipped=!1,this.details=!0}getNormalAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===v.u.Normal)}getMagicAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===v.u.Magic)}getRareAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===v.u.Rare)}getEpicAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===v.u.Epic)}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-view"]],inputs:{item:"item",equipped:"equipped",details:"details"},decls:1,vars:1,consts:[[3,"class","nodetails",4,"ngIf"],[1,"head",3,"innerHTML"],[1,"content"],["class","equipped",4,"ngIf"],[1,"main"],[1,"info"],[1,"icon"],[1,"background",3,"src"],[3,"src"],[1,"rarity"],[1,"split"],[1,"base"],[1,"separator"],[1,"stats"],["class","affixes",4,"ngIf"],["class","legendary-effect outer-border",4,"ngIf"],[3,"activable","reinforcment",4,"ngIf"],["class","buff reaper",4,"ngIf"],["class","buff skill",4,"ngIf"],[3,"class",4,"ngIf"],[1,"equipped"],[1,"affixes"],[1,"title"],[3,"pure",4,"ngFor","ngForOf"],[1,"bullet"],[1,"value",3,"innerHTML"],[1,"name",3,"innerHTML"],[1,"legendary-effect","outer-border"],[1,"border"],[1,"inner-border","legendary-description"],[1,"legendary"],[1,"description"],[3,"innerHTML"],["class","value",4,"ngIf"],["class","icon",4,"ngIf"],[1,"value"],[3,"activable","reinforcment"],[1,"buff","reaper"],[1,"info",3,"innerHTML"],[1,"buff","skill"]],template:function(t,n){1&t&&e.YNc(0,Ea,28,21,"div",0),2&t&&e.Q6J("ngIf",null!==n.item)},dependencies:[m.sg,m.O5,Ne.K],styles:['.item.normal[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#898989}.item.magic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#2e8726}.item.rare[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#176ab1}.item.epic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#c68d20}.item.legendary[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#ce4607}.item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#59513c}.item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#61462d}.item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#7791a1}.item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#efc65c}.item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#f5b250}.bullet[_ngcontent-%COMP%]{min-width:8px}.bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.bullet[_ngcontent-%COMP%]   div.normal[_ngcontent-%COMP%]{background-color:#898989}.bullet[_ngcontent-%COMP%]   div.magic[_ngcontent-%COMP%]{background-color:#2e8726}.bullet[_ngcontent-%COMP%]   div.rare[_ngcontent-%COMP%]{background-color:#176ab1}.bullet[_ngcontent-%COMP%]   div.epic[_ngcontent-%COMP%]{background-color:#c68d20}.bullet[_ngcontent-%COMP%]   div.legendary[_ngcontent-%COMP%]{background-color:#ce4607}.item[_ngcontent-%COMP%]{background-color:#151412;color:#fff;border:2px solid black;min-width:350px}.item[_ngcontent-%COMP%]  .legendary-effect .value, .item[_ngcontent-%COMP%]  .buff .value{color:#fff}.item[_ngcontent-%COMP%]  .range, .item[_ngcontent-%COMP%]  .range .value, .item[_ngcontent-%COMP%]  .details, .item[_ngcontent-%COMP%]  .details .value, .item[_ngcontent-%COMP%]  .formula, .item[_ngcontent-%COMP%]  .formula .value, .item[_ngcontent-%COMP%]  .pure-info, .item[_ngcontent-%COMP%]  .pure-info .value{color:#686868}.item[_ngcontent-%COMP%]  .affixes .range, .item[_ngcontent-%COMP%]  .affixes .value, .item[_ngcontent-%COMP%]  .pure-info{word-break:keep-all;white-space:nowrap}.item.nodetails[_ngcontent-%COMP%]     .details, .item.nodetails[_ngcontent-%COMP%]     .formula{display:none}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;text-transform:capitalize}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{min-width:80px;width:80px;display:flex;flex-direction:column;align-items:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{text-transform:capitalize;text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:56px;min-height:56px;width:56px;height:56px;border:4px solid black;margin-bottom:10px;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;min-width:2px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;list-style:disc inside;padding-left:0}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row;padding-left:5px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]{color:#46e7b0;background:linear-gradient(90deg,rgba(70,231,176,.3) 0%,rgba(70,231,176,0) 100%)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:1}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border:2px solid rgb(46,44,37)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .inner-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px 30px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:5px;color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-top:5px;min-width:36px;min-height:36px;width:36px;height:36px;border:3px solid black;padding:2px;background-color:#2e2c25}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]{border:3px solid rgb(59,56,49);padding:5px 36px;text-align:center;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:-6px;top:50%;margin-top:-22px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.reaper[_ngcontent-%COMP%]{color:#148e89}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.skill[_ngcontent-%COMP%]{color:#ce4607}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-0[_ngcontent-%COMP%]{color:#2f5996}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-1[_ngcontent-%COMP%]{color:#a83007}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-2[_ngcontent-%COMP%]{color:#79b549}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-3[_ngcontent-%COMP%]{color:#d0b545}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-4[_ngcontent-%COMP%]{color:#4bc1b2}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-5[_ngcontent-%COMP%]{color:#753098}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-6[_ngcontent-%COMP%]{color:#cd7028}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-7[_ngcontent-%COMP%]{color:#bf3c59}']}),a})(),La=(()=>{class a{constructor(t,n,i,r,l){this.slormancerItemService=n,this.slormancerCharacterBuilderService=i,this.slormancerCharacterUpdaterService=r,this.slormancerCharacterComparatorService=l;const s=this.slormancerCharacterBuilderService.getCharacterClone(t.character),d=this.slormancerCharacterBuilderService.getCharacterClone(t.character);s.gear[t.slot]=this.slormancerItemService.getEquipableItemClone(t.left),d.gear[t.slot]=this.slormancerItemService.getEquipableItemClone(t.right),this.slormancerCharacterUpdaterService.updateCharacter(s,t.config),this.slormancerCharacterUpdaterService.updateCharacter(d,t.config),this.left=t.left,this.right=t.right,this.differences=this.slormancerCharacterComparatorService.compareCharacters(s,d)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.WI),e.Y36(V.S),e.Y36(H.o),e.Y36(z.P),e.Y36(qe.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare-item-modal"]],decls:8,vars:6,consts:[["mat-dialog-title",""],[1,"item"],[3,"item","equipped"],[3,"differences"],[3,"item"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"div",1),e._UZ(4,"app-item-view",2),e.qZA(),e._UZ(5,"app-compare-view",3),e.TgZ(6,"div",1),e._UZ(7,"app-item-view",4),e.qZA()()),2&t&&(e.xp6(1),e.AsE("",n.left.name," - ",n.right.name,""),e.xp6(3),e.Q6J("item",n.left)("equipped",!0),e.xp6(1),e.Q6J("differences",n.differences),e.xp6(2),e.Q6J("item",n.right))},dependencies:[_.uh,_.xY,Ce,Ue],styles:["h2[_ngcontent-%COMP%]{display:none;text-align:center}@media (max-width: 992px){h2[_ngcontent-%COMP%]{display:block}}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:none}mat-dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:block}}@media (max-width: 374px){mat-dialog-content[_ngcontent-%COMP%]   app-compare-view[_ngcontent-%COMP%]{width:100%}}mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:370px;min-width:380px;overflow-y:auto}"]}),a})();function Ja(a,o){if(1&a&&(e.TgZ(0,"button",3),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("mat-dialog-close",t),e.xp6(1),e.Oqu(t)}}let qa=(()=>{class a{constructor(t){this.dialogRef=t,this.EQUIPABLE_ITEM_BASE_VALUES=M.l}selectBase(t){this.dialogRef.close(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-base-choice-modal"]],decls:7,vars:2,consts:[["mat-dialog-title",""],["mat-flat-button","","color","primary",3,"mat-dialog-close",4,"ngFor","ngForOf"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Choose a base for your item"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,Ja,2,2,"button",1),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",2),e._uU(6,"Cancel"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.EQUIPABLE_ITEM_BASE_VALUES),e.xp6(2),e.Q6J("mat-dialog-close",null))},dependencies:[m.sg,S.lW,_.ZT,_.uh,_.xY,_.H8],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),a})();var se=g(7148),Fe=g(1375);let Q=(()=>{class a{constructor(t,n,i){this.slormancerDataService=t,this.slormancerTranslateService=n,this.slormancerReaperService=i,this.STATS_OPTIONS_CACHE={},this.LEGENDARY_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[],this.ALL_RARITIES_OPTIONS_CACHE=[],this.ALL_REAPER_BUFF_OPTIONS_CACHE=[],this.ALL_SKILL_BUFF_OPTIONS_CACHE={0:[],1:[],2:[]},this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=[],this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}},this.ULTIMATUM_OPTIONS_CACHE=[],this.initRarityOptionsCache(),this.initStatOptionsCache(),this.initLegendaryOptionsCache(),this.initReaperBuffOptions(),this.initSkillBuffOptions(),this.initAttributeBuffOptions(),this.initReaperOptions(),this.initUltimatumOptions()}getReaperOptions(t,n){return this.ALL_REAPER_OPTIONS_CACHE[n?"p":"b"][t]}getAllStatsoptions(){return this.ALL_STATS_OPTIONS_CACHE}getAllRaritiesOptions(){return this.ALL_RARITIES_OPTIONS_CACHE}getStatsOptions(t,n){let i=this.ALL_STATS_OPTIONS_CACHE;const r=this.STATS_OPTIONS_CACHE[t];return r&&(n===v.u.Normal?i=(0,C.Be)(r.P,[]):(n===v.u.Magic||n===v.u.Rare)&&(i=(0,C.Be)(r.S,[]))),i}getLegendaryOptions(t,n){let i=[];const r=this.LEGENDARY_OPTIONS_CACHE[t];return r&&(i=r[n]),i}getReaperBuffOptions(){return this.ALL_REAPER_BUFF_OPTIONS_CACHE}getSkillBuffOptions(t){return this.ALL_SKILL_BUFF_OPTIONS_CACHE[t]}getAttributeBuffOptions(){return this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE}getUltimatumOptions(){return this.ULTIMATUM_OPTIONS_CACHE}getBaseKey(t){return t===M.J.Body?"ARMOR":t.toUpperCase()}initRarityOptionsCache(){this.ALL_RARITIES_OPTIONS_CACHE=v.n.map(t=>({label:this.slormancerTranslateService.translate("RAR_loot_"+t),value:t}))}initStatOptionsCache(){const t=this.slormancerDataService.getGameDataStats().filter(n=>"X"!==n.PERCENT);this.STATS_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[];for(const n of t){const i={label:this.slormancerTranslateService.translate(n.REF)+("%"===n.PERCENT?" (%)":""),value:n.REF};this.ALL_STATS_OPTIONS_CACHE.push(i);for(const r of M.l){const s=n[this.getBaseKey(r)];if(""!==s){let d=this.STATS_OPTIONS_CACHE[r];void 0===d&&(d={P:[],S:[]},this.STATS_OPTIONS_CACHE[r]=d),"P"===s&&d.P.push(i),("P"===s||"S"===s)&&d.S.push(i)}}}for(const n of M.l){const i=this.getBaseKey(n),r=this.STATS_OPTIONS_CACHE[i];if(r){const l=r.P,s=r.S;l&&l.sort((d,u)=>(0,C.rR)(d.label,u.label)),s&&s.sort((d,u)=>(0,C.rR)(d.label,u.label))}}this.ALL_STATS_OPTIONS_CACHE.sort((n,i)=>(0,C.rR)(n.label,i.label))}initLegendaryOptionsCache(){const t=this.slormancerDataService.getGameDataLegendaries().filter(n=>n.LOOTABLE);this.LEGENDARY_OPTIONS_CACHE={};for(const n of t){const i={value:n.REF,label:n.EN_NAME};let r=this.LEGENDARY_OPTIONS_CACHE[n.ITEM];void 0===r&&(r={0:[],1:[],2:[]},this.LEGENDARY_OPTIONS_CACHE[n.ITEM]=r),-1===n.HERO||99===n.HERO?(r[0].push(i),r[1].push(i),r[2].push(i)):r[n.HERO].push(i)}}initReaperBuffOptions(){this.ALL_REAPER_BUFF_OPTIONS_CACHE=se.c.filter(t=>t!==se.Q.OhmAgad&&t!==se.Q.ReapersmithBrotherhood).map(t=>({value:t,label:this.slormancerTranslateService.translate("weapon_reapersmith_"+t)}))}initSkillBuffOptions(){this.ALL_SKILL_BUFF_OPTIONS_CACHE={[p.i.Warrior]:this.slormancerDataService.getGameDataActiveSkills(p.i.Warrior).map(t=>({value:t.REF,label:t.EN_NAME})),[p.i.Huntress]:this.slormancerDataService.getGameDataActiveSkills(p.i.Huntress).map(t=>({value:t.REF,label:t.EN_NAME})),[p.i.Mage]:this.slormancerDataService.getGameDataActiveSkills(p.i.Mage).map(t=>({value:t.REF,label:t.EN_NAME}))}}initAttributeBuffOptions(){this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=h.A.map(t=>({value:t,label:this.slormancerTranslateService.translate("character_trait_"+t)}))}initReaperOptions(){this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}};const t=this.slormancerDataService.getGameDataAvailableReaper();for(const n of t)this.ALL_REAPER_OPTIONS_CACHE.p[p.i.Warrior].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!0,p.i.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.p[p.i.Huntress].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!0,p.i.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.p[p.i.Mage].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!0,p.i.Mage)}),this.ALL_REAPER_OPTIONS_CACHE.b[p.i.Warrior].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!1,p.i.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.b[p.i.Huntress].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!1,p.i.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.b[p.i.Mage].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!1,p.i.Mage)})}initUltimatumOptions(){this.ULTIMATUM_OPTIONS_CACHE=Fe.N.map(t=>({value:t,label:this.slormancerTranslateService.translate("ultimatum_"+t)}))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(W.o),e.LFG(Y.n),e.LFG(ge.I))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var ne=g(8029);function Ua(a,o){if(1&a&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Oqu(t.label)}}function Na(a,o){1&a&&(e.TgZ(0,"mat-option",9),e._uU(1," No results "),e.qZA())}function Fa(a,o){if(1&a&&(e.TgZ(0,"mat-option",10),e._UZ(1,"span",11),e.qZA()),2&a){const t=o.$implicit,n=e.oxw(2);e.ekj("filtered",t.filtered),e.Q6J("value",t.option.value)("disabled",t.filtered||n.optionDisable(t.option)),e.xp6(1),e.Q6J("innerHTML",t.option.label,e.oJD)}}function Ba(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mat-form-field",1),e.YNc(1,Ua,2,1,"mat-label",2),e.TgZ(2,"mat-select",3),e.NdJ("openedChange",function(i){e.CHM(t);const r=e.MAs(5),l=e.oxw();return e.KtG(l.opened(i,r))}),e.TgZ(3,"mat-option",4)(4,"input",5,6),e.NdJ("keydown.space",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.handleSearchSpace(i))}),e.qZA()(),e.YNc(6,Na,2,0,"mat-option",7),e.YNc(7,Fa,2,5,"mat-option",8),e.qZA()()}if(2&a){const t=e.oxw();e.ekj("no-error-padding",t.noErrorPadding),e.xp6(1),e.Q6J("ngIf",null!==t.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(2),e.Q6J("formControl",t.search),e.xp6(2),e.Q6J("ngIf",t.noResult),e.xp6(1),e.Q6J("ngForOf",t.filteredOptions)("ngForTrackBy",t.trackBy)}}let me=(()=>{class a extends T.B{constructor(){super(),this.label=null,this.control=null,this.options=[],this.noErrorPadding=!1,this.optionDisable=()=>!1,this.filteredOptions=[],this.search=new c.NI(""),this.noResult=!1,this.search.valueChanges.subscribe(()=>this.filter())}ngOnChanges(t){null!==this.control&&t.control&&this.control.valueChanges.pipe((0,k.R)(this.unsubscribe)).subscribe(()=>this.resetFilter()),this.filter()}opened(t,n){!1===t?this.resetFilter():n.focus()}resetFilter(){this.search.setValue("")}filter(){const t=this.search.value.toLowerCase().trim();this.filteredOptions=this.options.map(n=>({option:n,filtered:-1===n.label.toLowerCase().indexOf(t)})),this.noResult=!this.filteredOptions.some(n=>!n.filtered)}trackBy(t,n){return n.option.value}handleSearchSpace(t){t.stopPropagation()}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-search-select"]],inputs:{label:"label",control:"control",options:"options",noErrorPadding:"noErrorPadding",optionDisable:"optionDisable"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["appearance","outline","color","primary",3,"no-error-padding",4,"ngIf"],["appearance","outline","color","primary"],[4,"ngIf"],["color","primary",3,"formControl","openedChange"],["disabled","","role","search"],["matInput","","type","text","placeholder","Rechercher...",3,"formControl","keydown.space"],["searchInput",""],["role","no-result","disabled","",4,"ngIf"],[3,"value","disabled","filtered",4,"ngFor","ngForOf","ngForTrackBy"],["role","no-result","disabled",""],[3,"value","disabled"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Ba,8,8,"mat-form-field",0),2&t&&e.Q6J("ngIf",null!==n.control&&n.options.length>0)},dependencies:[m.sg,m.O5,f.KE,f.hX,q.Nt,U.gD,N.ey,c.Fj,c.JJ,c.oH],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a})();function Qa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mat-slider",11),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateSliderStat(i))}),e.qZA()}if(2&a){const t=e.oxw(2);e.Q6J("min",t.affix.craftedEffect.minPossibleCraftedValue)("max",t.affix.craftedEffect.maxPossibleCraftedValue)("step",1)}}function Ha(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mat-slider",12),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateSliderPurity(i))}),e.qZA()}2&a&&e.Q6J("min",101)("max",200)("step",1)}function Ra(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"app-search-select",3),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,Qa,1,3,"mat-slider",5),e.YNc(5,Ha,1,3,"mat-slider",6),e.qZA(),e.TgZ(6,"div",7)(7,"div",8),e._uU(8),e.qZA(),e.TgZ(9,"mat-checkbox",9),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.purityChanged(i))}),e._uU(10,"Pure"),e.qZA(),e.TgZ(11,"button",10),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeStat())}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.getStatControl())("options",t.options)("optionDisable",t.optionDisableMethod),e.xp6(2),e.Q6J("ngIf",!t.affix.isPure),e.xp6(1),e.Q6J("ngIf",t.affix.isPure),e.xp6(2),e.ekj("pure",t.affix.isPure),e.xp6(1),e.hij(" ",t.displayedValue," "),e.xp6(1),e.Q6J("checked",t.affix.isPure),e.xp6(2),e.Q6J("disabled",!t.removable)}}let Ya=(()=>{class a{constructor(t){this.itemFormService=t,this.base=M.J.Amulet,this.alreadyUsedStats=[],this.affix=null,this.form=null,this.removable=!1,this.remove=new e.vpe,this.options=[],this.displayedValue="",this.optionDisableMethod=n=>this.isOptionDisabled(n)}ngOnChanges(){null!==this.affix&&(this.options=this.itemFormService.getStatsOptions(this.base,this.affix.rarity),this.affix.isPure?this.setPuritylabel(this.affix.pure):this.setStatLabel(this.affix.craftedEffect.craftedValue))}getStatControl(){return null===this.form?null:this.form.get("stat")}isOptionDisabled(t){return-1!==this.alreadyUsedStats.indexOf(t.value)&&null!==this.affix&&t.value!==this.affix.craftedEffect.effect.stat}purityChanged(t){null!==this.affix&&null!==this.form&&this.form.patchValue(t.checked?{purity:101}:{purity:100})}updateSliderPurity(t){null!==t.value&&this.setPuritylabel(t.value)}updateSliderStat(t){null!==t.value&&this.setStatLabel(t.value)}setPuritylabel(t){this.displayedValue=Math.round(t-100)+"%"}setStatLabel(t){if(this.displayedValue="",null!==this.affix){const n=this.affix.craftedEffect.effect.percent?"%":"";this.displayedValue=null===this.affix?"":"+"+((0,C.AW)(this.affix.craftedEffect,t)+n)}}removeStat(){this.remove.emit()}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-stat"]],inputs:{base:"base",alreadyUsedStats:"alreadyUsedStats",affix:"affix",form:"form",removable:"removable"},outputs:{remove:"remove"},features:[e.TTD],decls:1,vars:1,consts:[["class","stat-line",3,"formGroup",4,"ngIf"],[1,"stat-line",3,"formGroup"],[1,"select"],["label","Stat",3,"control","options","optionDisable"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],["color","accent","formControlName","purity",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["color","primary",3,"checked","change"],["mat-icon-button","","color","primary","type","button",3,"disabled","click"],["color","primary","formControlName","value",3,"min","max","step","input"],["color","accent","formControlName","purity",3,"min","max","step","input"]],template:function(t,n){1&t&&e.YNc(0,Ra,14,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.affix)},dependencies:[m.O5,S.lW,Z.Hw,ne.pH,ce.oG,c.JJ,c.JL,c.sg,c.u,me],styles:[".pure[_ngcontent-%COMP%]{color:#20d787}"]}),a})();function Ga(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addLegendaryEffect())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Va(a,o){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function Da(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"mat-slider",18),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateSliderValue(i))}),e.qZA()}2&a&&e.Q6J("min",75)("max",100)("step",1)}function ja(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Legendary effect"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Va,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11),e.YNc(8,Da,1,3,"mat-slider",12),e.qZA(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeLegendaryEffect())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("ngIf",t.hasLegendaryValues()),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let Ka=(()=>{class a{constructor(t){this.itemFormService=t,this.base=M.J.Amulet,this.heroClass=p.i.Huntress,this.legendaryEffect=null,this.form=null,this.reinforcment=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getLegendaryOptions(this.base,this.heroClass),null!==this.legendaryEffect&&this.updateLegendaryValueLabel(this.legendaryEffect.value)}updateLegendaryValueLabel(t){this.displayedValue="",null!==this.legendaryEffect&&null!==t&&(this.displayedValue=this.legendaryEffect.effects.filter(n=>n.possibleCraftedValues.length>1).map(n=>{const i=n.effect.percent?"%":"";return(0,C.AW)(n,t)+i}).join(" / "))}hasLegendaryValues(){return null!==this.legendaryEffect&&this.legendaryEffect.effects.filter(t=>t.possibleCraftedValues.length>1).length>0}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.legendaryEffect&&null!==n&&this.updateLegendaryValueLabel(n)}removeLegendaryEffect(){null!==this.form&&this.form.patchValue({id:null})}addLegendaryEffect(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({id:t.value,value:100})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-legendary-effect"]],inputs:{base:"base",heroClass:"heroClass",legendaryEffect:"legendaryEffect",form:"form",reinforcment:"reinforcment"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"],["color","primary","formControlName","value",3,"min","max","step","input"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Legendary effect :"),e.qZA(),e.YNc(3,Ga,4,0,"div",2),e.qZA(),e.YNc(4,ja,15,4,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.legendaryEffect))},dependencies:[m.sg,m.O5,S.lW,Z.Hw,f.KE,f.hX,U.gD,N.ey,ne.pH,c.JJ,c.JL,c.sg,c.u]}),a})();function Xa(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addReaperEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function za(a,o){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function $a(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Reaper Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,za,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSliderValue(i))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeReaperEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",5)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let Wa=(()=>{class a{constructor(t){this.itemFormService=t,this.reaperEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getReaperBuffOptions(),null!==this.reaperEnchantment&&this.updateReaperEnchantmentValueLabel(this.reaperEnchantment.effect.value)}updateReaperEnchantmentValueLabel(t){this.displayedValue="",null!==this.reaperEnchantment&&null!==t&&(this.displayedValue="+"+(0,C.Be)(this.reaperEnchantment.craftableValues[t],0))}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.reaperEnchantment&&null!==n&&this.updateReaperEnchantmentValueLabel(n)}removeReaperEnchantment(){null!==this.form&&this.form.patchValue({smith:null})}addReaperEnchantment(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({smith:t.value,value:5})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-buff-reaper"]],inputs:{reaperEnchantment:"reaperEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","form-add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"form-add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","smith"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Reaper Enchantment :"),e.qZA(),e.YNc(3,Xa,4,0,"div",2),e.qZA(),e.YNc(4,$a,15,6,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.reaperEnchantment))},dependencies:[m.sg,m.O5,S.lW,Z.Hw,f.KE,f.hX,U.gD,N.ey,ne.pH,c.JJ,c.JL,c.sg,c.u]}),a})();function ei(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addSkillEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function ti(a,o){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function ni(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Skill Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,ti,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSliderValue(i))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeSkillEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",2)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let ai=(()=>{class a{constructor(t){this.itemFormService=t,this.heroClass=p.i.Huntress,this.skillEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getSkillBuffOptions(this.heroClass),null!==this.skillEnchantment&&this.updateSkillEnchantmentValueLabel(this.skillEnchantment.effect.value)}updateSkillEnchantmentValueLabel(t){this.displayedValue="",null!==this.skillEnchantment&&null!==t&&(this.displayedValue="+"+(0,C.Be)(this.skillEnchantment.craftableValues[t],0))}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.skillEnchantment&&null!==n&&this.updateSkillEnchantmentValueLabel(n)}removeSkillEnchantment(){null!==this.form&&this.form.patchValue({skill:null})}addSkillEnchantment(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({skill:t.value,value:2})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-buff-skill"]],inputs:{heroClass:"heroClass",skillEnchantment:"skillEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","skill"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Skill Enchantment :"),e.qZA(),e.YNc(3,ei,4,0,"div",2),e.qZA(),e.YNc(4,ni,15,6,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.skillEnchantment))},dependencies:[m.sg,m.O5,S.lW,Z.Hw,f.KE,f.hX,U.gD,N.ey,ne.pH,c.JJ,c.JL,c.sg,c.u]}),a})();function ii(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.addAttributeEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function oi(a,o){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function ri(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Attribute Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,oi,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSliderValue(i))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.removeAttributeEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",3)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let li=(()=>{class a{constructor(t){this.itemFormService=t,this.attributeEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getAttributeBuffOptions(),null!==this.attributeEnchantment&&this.updateAttributeEnchantmentValueLabel(this.attributeEnchantment.effect.value)}updateAttributeEnchantmentValueLabel(t){this.displayedValue="",null!==this.attributeEnchantment&&null!==t&&(this.displayedValue="+"+(0,C.Be)(this.attributeEnchantment.craftableValues[t],0))}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.attributeEnchantment&&null!==n&&this.updateAttributeEnchantmentValueLabel(n)}removeAttributeEnchantment(){null!==this.form&&this.form.patchValue({attribute:null})}addAttributeEnchantment(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({attribute:t.value,value:3})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-buff-attribute"]],inputs:{attributeEnchantment:"attributeEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","attribute"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Attribute Enchantment :"),e.qZA(),e.YNc(3,ii,4,0,"div",2),e.qZA(),e.YNc(4,ri,15,6,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.attributeEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.attributeEnchantment))},dependencies:[m.sg,m.O5,S.lW,Z.Hw,f.KE,f.hX,U.gD,N.ey,ne.pH,c.JJ,c.JL,c.sg,c.u]}),a})();function ci(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.addBasicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function si(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const i=e.oxw().index,r=e.oxw(3);return e.KtG(r.removeAffix(i))}),e.qZA()}if(2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw(3);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!1)}}function mi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,si,1,5,"app-item-edit-stat",24),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.isBasicStat(t))}}function _i(a,o){if(1&a&&(e.ynx(0),e.YNc(1,mi,2,1,"ng-container",14),e.BQk()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.getAffixControls())}}function di(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.addMagicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function gi(a,o){if(1&a&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Magic Stats : "),e.qZA(),e.YNc(3,di,4,0,"div",11),e.qZA()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.hasBasicStats()&&!t.hasMaximumMagicStats())}}function ui(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeAffix(i))}),e.qZA()}if(2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw(2);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!r.hasRareStats()&&!r.hasEpicStats())}}function pi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,ui,1,5,"app-item-edit-stat",24),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isMagicStat(t))}}function fi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.addRareAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function hi(a,o){if(1&a&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Rare Stats : "),e.qZA(),e.YNc(3,fi,4,0,"div",11),e.qZA()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.hasMagicStats()&&!t.hasMaximumRareStats())}}function Ci(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeAffix(i))}),e.qZA()}if(2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw(2);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!r.hasEpicStats())}}function vi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Ci,1,5,"app-item-edit-stat",24),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isRareStat(t))}}function bi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.addEpicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Mi(a,o){if(1&a&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Epic Stats : "),e.qZA(),e.YNc(3,bi,4,0,"div",11),e.qZA()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.hasRareStats()&&!t.hasMaximumEpicStats())}}function xi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const i=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeAffix(i))}),e.qZA()}if(2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw(2);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!0)}}function Oi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,xi,1,5,"app-item-edit-stat",24),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isEpicStat(t))}}function yi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"mat-dialog-content")(2,"div",2),e._UZ(3,"app-item-view",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8,"Item level"),e.qZA(),e._UZ(9,"input",7),e.TgZ(10,"mat-error"),e._uU(11),e.qZA()(),e.TgZ(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Item reinforcment"),e.qZA(),e._UZ(15,"input",8),e.TgZ(16,"mat-error"),e._uU(17,"Reinforcment must be >= 0"),e.qZA()()(),e.TgZ(18,"div",9)(19,"div",10),e._uU(20," Base Stats : "),e.qZA(),e.YNc(21,ci,4,0,"div",11),e.qZA(),e.YNc(22,_i,2,1,"ng-container",12),e.YNc(23,gi,4,1,"div",13),e.YNc(24,pi,2,1,"ng-container",14),e.YNc(25,hi,4,1,"div",13),e.YNc(26,vi,2,1,"ng-container",14),e.YNc(27,Mi,4,1,"div",13),e.YNc(28,Oi,2,1,"ng-container",14),e._UZ(29,"app-item-edit-legendary-effect",15)(30,"app-item-edit-buff-reaper",16)(31,"app-item-edit-buff-skill",17)(32,"app-item-edit-buff-attribute",18),e.qZA()(),e.TgZ(33,"mat-dialog-actions")(34,"button",19),e._uU(35,"Cancel"),e.qZA(),e.TgZ(36,"button",20),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.reset())}),e._uU(37,"Reset"),e.qZA(),e.TgZ(38,"button",21),e._uU(39,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("item",t.item)("details",!0),e.xp6(8),e.hij("Level must be between 1 and ",t.MAX_ITEM_LEVEL,""),e.xp6(10),e.Q6J("ngIf",!t.hasMaximumBasicStats()),e.xp6(1),e.Q6J("ngIf",t.hasBasicStats()),e.xp6(1),e.Q6J("ngIf",t.hasBasicStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("ngIf",t.hasMagicStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("ngIf",t.hasRareStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("base",t.item.base)("reinforcment",t.item.reinforcment)("heroClass",t.item.heroClass)("legendaryEffect",t.item.legendaryEffect)("form",t.getLegendaryEffectForm()),e.xp6(1),e.Q6J("reaperEnchantment",t.item.reaperEnchantment)("form",t.getReaperEnchantmentForm()),e.xp6(1),e.Q6J("heroClass",t.item.heroClass)("skillEnchantment",t.item.skillEnchantment)("form",t.getSkillEnchantmentForm()),e.xp6(1),e.Q6J("attributeEnchantment",t.item.attributeEnchantment)("form",t.getAttributeEnchantmentForm())}}let Pi=(()=>{class a{constructor(t,n,i,r,l,s,d,u,b){this.dialogRef=t,this.slormancerCharacterUpdaterService=n,this.slormancerItemService=i,this.slormancerDataService=r,this.slormancerAffixService=l,this.slormancerLegendaryEffectService=s,this.formOptionsService=d,this.buildStorageService=u,this.MAX_ITEM_LEVEL=L.Sb,this.maxBasicStats=0,this.alreadyUsedStats=[],this.originalItem=b.item,this.maxLevel=b.maxLevel,this.item=this.slormancerItemService.getEquipableItemClone(this.originalItem),this.character=b.character,this.reset()}reset(){Object.assign(this.item,this.slormancerItemService.getEquipableItemClone(this.originalItem)),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.item)}updatePreview(t){const n=this.item;if(t.valid){const i=t.value;if(n.level=i.level,n.reinforcment=i.reinforcment,n.affixes.forEach((l,s)=>{const d=t.get("affixes."+s);if(null!==d){const u=d.get("purity").value,b=d.get("value").value,P=d.get("stat").value,I=d.get("rarity").value;if(l.craftedEffect.effect.stat!==P){const J=this.slormancerAffixService.getAffixFromStat(P,n.level,n.reinforcment,I,b);null!==J&&(n.affixes[s]=J,l=J)}l.craftedEffect.craftedValue=b,l.pure=u}}),null!==i.legendaryEffect){const l=i.legendaryEffect.id,s=i.legendaryEffect.value;null===l?n.legendaryEffect=null:null===n.legendaryEffect||n.legendaryEffect.id!==l?n.legendaryEffect=this.slormancerLegendaryEffectService.getLegendaryEffectById(l,s,n.reinforcment,n.heroClass):n.legendaryEffect.value=s}if(null!==i.reaper){const l=i.reaper.smith,s=i.reaper.value;null===l?n.reaperEnchantment=null:null===n.reaperEnchantment||n.reaperEnchantment.craftedReaperSmith!==l?n.reaperEnchantment=this.slormancerItemService.getReaperEnchantment(l,s):n.reaperEnchantment.craftedValue=s}if(null!==i.skill){const l=i.skill.skill,s=i.skill.value;null===l?n.skillEnchantment=null:null===n.skillEnchantment||n.skillEnchantment.craftedSkill!==l?n.skillEnchantment=this.slormancerItemService.getSkillEnchantment(l,s):n.skillEnchantment.craftedValue=s}if(null!==i.attribute){const l=i.attribute.attribute,s=i.attribute.value;null===l?n.attributeEnchantment=null:null===n.attributeEnchantment||n.attributeEnchantment.craftedAttribute!==l?n.attributeEnchantment=this.slormancerItemService.getAttributeEnchantment(l,s):n.attributeEnchantment.craftedValue=s}this.alreadyUsedStats=n.affixes.map(l=>l.craftedEffect.effect.stat),this.slormancerItemService.updateEquipableItemModel(n);const r=this.buildStorageService.getBuild();this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==r?r.configuration:B,!1,n),this.slormancerItemService.updateEquipableItemView(n)}}affixToForm(t){return new c.cw({rarity:new c.NI(t.rarity),value:new c.NI(t.craftedEffect.craftedValue),purity:new c.NI(t.pure),stat:new c.NI(t.craftedEffect.effect.stat)})}legendaryEffectToForm(t){return new c.cw({id:new c.NI(null===t?null:t.id),value:new c.NI(null===t?100:t.value)})}buildForm(){let t=null;const n=new c.cw({level:new c.NI(this.item.level,[c.kI.required,c.kI.min(1),c.kI.max(this.MAX_ITEM_LEVEL),c.kI.pattern(/^[0-9]+$/)]),reinforcment:new c.NI(this.item.reinforcment,[c.kI.required,c.kI.min(0),c.kI.pattern(/^[0-9]+$/)]),affixes:new c.Oe(this.item.affixes.map(i=>this.affixToForm(i))),legendaryEffect:this.legendaryEffectToForm(this.item.legendaryEffect),reaper:new c.cw({smith:new c.NI(null===this.item.reaperEnchantment?null:this.item.reaperEnchantment.craftedReaperSmith),value:new c.NI(null===this.item.reaperEnchantment?5:this.item.reaperEnchantment.craftedValue)}),skill:new c.cw({skill:new c.NI(null===this.item.skillEnchantment?null:this.item.skillEnchantment.craftedSkill),value:new c.NI(null===this.item.skillEnchantment?2:this.item.skillEnchantment.craftedValue)}),attribute:new c.cw({attribute:new c.NI(null===this.item.attributeEnchantment?null:this.item.attributeEnchantment.craftedAttribute),value:new c.NI(null===this.item.attributeEnchantment?2:this.item.attributeEnchantment.craftedValue)})});return n.valueChanges.subscribe(()=>{this.updatePreview(n)}),this.updatePreview(n),this.maxBasicStats=this.slormancerDataService.getBaseMaxBasicStat(this.item.base),t=n,t}getAffixControls(){const t=this.form.get("affixes");return null!==t?t.controls:[]}isBasicStat(t){const n=t.get("rarity");return null!==n&&n.value===v.u.Normal}hasBasicStats(){return this.getAffixControls().filter(t=>this.isBasicStat(t)).length>0}hasMaximumBasicStats(){return this.getAffixControls().filter(t=>this.isBasicStat(t)).length>=this.maxBasicStats}isMagicStat(t){const n=t.get("rarity");return null!==n&&n.value===v.u.Magic}hasMagicStats(){return this.getAffixControls().filter(t=>this.isMagicStat(t)).length>0}hasMaximumMagicStats(){return this.getAffixControls().filter(t=>this.isMagicStat(t)).length>=L.aH}isRareStat(t){const n=t.get("rarity");return null!==n&&n.value===v.u.Rare}hasRareStats(){return this.getAffixControls().filter(t=>this.isRareStat(t)).length>0}hasMaximumRareStats(){return this.getAffixControls().filter(t=>this.isRareStat(t)).length>=L.bm}isEpicStat(t){const n=t.get("rarity");return null!==n&&n.value===v.u.Epic}hasEpicStats(){return this.getAffixControls().filter(t=>this.isEpicStat(t)).length>0}hasMaximumEpicStats(){return this.getAffixControls().filter(t=>this.isEpicStat(t)).length>=L.hc}getAffix(t){return null===this.item?null:(0,C.lA)(this.item.affixes[t])}removeAffix(t){const n=this.form.get("affixes");null!==n&&(n.removeAt(t),this.item.affixes.splice(t,1),this.updatePreview(this.form))}addAffix(t){const n=this.form.get("affixes"),r=this.formOptionsService.getStatsOptions(this.item.base,t).filter(l=>-1===this.alreadyUsedStats.indexOf(l.value))[0];if(r&&null!==n){const l=this.slormancerAffixService.getAffixFromStat(r.value,this.item.level,this.item.reinforcment,t,1e3);null!==l&&(this.item.affixes.push(l),n.push(this.affixToForm(l)),this.updatePreview(this.form))}}addBasicAffix(){this.addAffix(v.u.Normal)}addMagicAffix(){this.addAffix(v.u.Magic)}addRareAffix(){this.addAffix(v.u.Rare)}addEpicAffix(){this.addAffix(v.u.Epic)}getLegendaryEffectForm(){return null===this.form?null:this.form.get("legendaryEffect")}getReaperEnchantmentForm(){return null===this.form?null:this.form.get("reaper")}getSkillEnchantmentForm(){return null===this.form?null:this.form.get("skill")}getAttributeEnchantmentForm(){return null===this.form?null:this.form.get("attribute")}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(z.P),e.Y36(V.S),e.Y36(W.o),e.Y36(de.l),e.Y36(Me.A),e.Y36(Q),e.Y36(y),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"preview"],[3,"item","details"],[1,"form"],[1,"form-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["matInput","","type","number","step","1","formControlName","reinforcment"],[1,"form-info"],[1,"label"],["class","add",4,"ngIf"],[4,"ngIf"],["class","form-info",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"base","reinforcment","heroClass","legendaryEffect","form"],[3,"reaperEnchantment","form"],[3,"heroClass","skillEnchantment","form"],[3,"attributeEnchantment","form"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[3,"form","base","alreadyUsedStats","affix","removable","remove",4,"ngIf"],[3,"form","base","alreadyUsedStats","affix","removable","remove"]],template:function(t,n){1&t&&e.YNc(0,yi,40,24,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.item)},dependencies:[m.sg,m.O5,S.lW,Z.Hw,_.ZT,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,Ce,Ya,Ka,Wa,ai,li],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1;overflow:auto}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:370px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{align-items:stretch}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-basis:auto}}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;min-height:40px}"]}),a})(),Si=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-remove-confirm-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Are you sure you want to remove this item ?\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions")(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Remove"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[S.lW,_.ZT,_.xY,_.H8]}),a})();function ki(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",4)(2,"img",4),e.BQk()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("src",t.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",t.item.icon,e.LSH)}}function Ti(a,o){if(1&a&&e._UZ(0,"img",4),2&a){const t=e.oxw();e.MGl("src","assets/img/icon/item/",t.base,"/empty.png",e.LSH)}}function wi(a,o){if(1&a&&e._UZ(0,"app-item-view",10),2&a){const t=e.oxw(2);e.Q6J("item",t.item)("details",!1)}}function Ai(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.equip())}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_back"),e.qZA(),e._uU(3,"Equip item"),e.qZA()}}function Zi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.unequip())}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_forward"),e.qZA(),e._uU(3,"Unequip item"),e.qZA()}}function Ii(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3,"Create item"),e.qZA()}}function Ei(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1,"(Left slot)"),e.qZA())}function Li(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1,"(Right slot)"),e.qZA())}function Ji(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.compareWithSlot(r))}),e.TgZ(1,"mat-icon"),e._uU(2,"compare_arrows"),e.qZA(),e._uU(3,"Compare "),e.YNc(4,Ei,2,0,"span",2),e.YNc(5,Li,2,0,"span",2),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t===n.GearSlot.LeftRing),e.xp6(1),e.Q6J("ngIf",t===n.GearSlot.RightRing)}}function qi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3,"Edit item"),e.qZA()}}function Ui(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.take())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_cut"),e.qZA(),e._uU(3,"Move item"),e.qZA()}}function Ni(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.copy())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_copy"),e.qZA(),e._uU(3,"Copy item"),e.qZA()}}function Fi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.remove())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3,"Remove item"),e.qZA()}}function Bi(a,o){if(1&a&&(e.YNc(0,Ai,4,0,"button",11),e.YNc(1,Zi,4,0,"button",11),e.YNc(2,Ii,4,0,"button",11),e.YNc(3,Ji,6,2,"button",12),e.YNc(4,qi,4,0,"button",11),e.YNc(5,Ui,4,0,"button",11),e.YNc(6,Ni,4,0,"button",11),e.YNc(7,Fi,4,0,"button",11)),2&a){const t=e.oxw(2);e.Q6J("ngIf",null!==t.item&&null===t.base),e.xp6(1),e.Q6J("ngIf",null!==t.item&&null!==t.base),e.xp6(1),e.Q6J("ngIf",null===t.item),e.xp6(1),e.Q6J("ngForOf",t.comparableGearSlots),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item)}}function Qi(a,o){if(1&a&&(e.ynx(0),e.YNc(1,wi,1,2,"ng-template",5),e._UZ(2,"div",6),e.TgZ(3,"mat-menu",7,8),e.YNc(5,Bi,8,8,"ng-template",9),e.qZA(),e.BQk()),2&a){const t=e.MAs(4),n=e.oxw(),i=e.MAs(1);e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",!n.isDragging&&n.isMouseOver)("cdkConnectedOverlayOrigin",i),e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("overlapTrigger",!0)}}let Be=(()=>{class a extends T.B{constructor(t,n,i,r,l,s){super(),this.dialog=t,this.itemMoveService=n,this.searchService=i,this.slormancerCharacterBuilderService=r,this.slormancerItemService=l,this.buildStorageService=s,this.GearSlot=X.SH,this.character=null,this.item=null,this.base=null,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.isDragging=!1,this.isMouseOver=!1,this.isItemCompatible=!1,this.isDraggedItem=!1,this.hiddenBySearch=!1,this.comparableGearSlots=[],this.itemMoveService.draggingItem.pipe((0,k.R)(this.unsubscribe)).subscribe(d=>{this.isDragging=d,this.isDraggedItem=this.itemMoveService.isHoldItem(this.item),this.isItemCompatible=this.itemMoveService.isDragItemCompatible(this.item,this.base)}),this.searchService.searchChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onMouseOver(){this.isMouseOver=!0}onMouseLeave(){this.isMouseOver=!1}onMouseDown(t){return 0===t.button&&!this.readonly&&this.take(),!1}onMouseUp(t){return 0===t.button&&!this.readonly&&(this.isDragging?this.itemMoveService.swap(this.item,this.base,(n,i)=>this.moveCallback(n,i)):this.edit()),!1}onMouseContextMenu(){return this.itemMoveService.releaseHoldItem(),this.menu&&!this.readonly&&(this.updateComparableSlots(),this.menu.openMenu()),!1}ngOnInit(){}ngOnChanges(){this.updateSearch()}isMenuOpen(){return null!=this.menu&&this.menu.menuOpen}updateComparableSlots(){this.comparableGearSlots=[];const t=this.character,n=this.item;null!==t&&null!==n&&null===this.base&&(this.comparableGearSlots=X.PL.filter(i=>{const r=t.gear[i];return null!==r&&r.base===n.base}))}updateSearch(){this.hiddenBySearch=null!==this.item&&this.searchService.hasSearch()&&!this.searchService.itemMatchSearch(this.item)}moveCallback(t,n){t&&this.changed.emit(n),this.isDraggedItem=!1,this.isItemCompatible=!1}getItemEditModalData(t,n){const i=this.slormancerCharacterBuilderService.getCharacterClone(t),r=X.PL.find(d=>t.gear[d]===n),l=r?i.gear[r]:null;return{character:i,item:null!==l?l:this.slormancerItemService.getEquipableItemClone(n),maxLevel:i.level}}edit(t=this.item){const n=this.character;if(null!==n)if(null===t)null!==this.base?this.edit(this.slormancerItemService.getEmptyEquipableItem(this.base,n.heroClass,n.level)):this.dialog.open(qa).afterClosed().subscribe(i=>{null!=i&&this.edit(this.slormancerItemService.getEmptyEquipableItem(i,n.heroClass,n.level))});else{const i=this.getItemEditModalData(n,t);this.dialog.open(Pi,{data:i,width:"80vw",maxWidth:"1000px"}).afterClosed().subscribe(r=>{void 0!==r&&this.changed.emit(r)})}}take(){null!==this.item&&this.itemMoveService.hold(this.item,this.base,(t,n)=>this.moveCallback(t,n))}copy(){if(null!==this.item){const t=this.slormancerItemService.getEquipableItemClone(this.item);this.itemMoveService.hold(t,t.base)}}remove(){this.dialog.open(Si).afterClosed().subscribe(t=>{!0===t&&this.changed.emit(null)})}equip(){null!==this.item&&this.itemMoveService.equip(this.item,(t,n)=>this.moveCallback(t,n))}unequip(){null!==this.item&&this.itemMoveService.moveToStash(this.item,(t,n)=>this.moveCallback(t,n))}compareWithSlot(t){if(null!==this.item&&null!==this.character){const n=this.character.gear[t],i=this.buildStorageService.getBuild();null!==n&&null!==i&&null!==i.configuration&&this.dialog.open(La,{data:{character:this.character,slot:t,config:i.configuration,left:n,right:this.item}})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.uw),e.Y36(D),e.Y36(te.o),e.Y36(H.o),e.Y36(V.S),e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,5),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onMouseOver()})("mouseleave",function(){return n.onMouseLeave()})("mousedown",function(r){return n.onMouseDown(r)})("mouseup",function(r){return n.onMouseUp(r)})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{character:"character",item:"item",base:"base",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:5,vars:15,consts:[["cdkOverlayOrigin","",1,"item"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"src",4,"ngIf"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"matMenuTriggerFor"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],[3,"item","details"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,ki,3,2,"ng-container",2),e.YNc(3,Ti,1,1,"img",3),e.YNc(4,Qi,6,4,"ng-container",2),e.qZA()),2&t&&(e.ekj("readonly",n.readonly)("forced-base-compatible",n.isItemCompatible&&null!==n.base)("drop-compatible",!n.isDraggedItem&&n.isMouseOver&&n.isDragging&&n.isItemCompatible)("drop-incompatible",!n.isDraggedItem&&n.isMouseOver&&n.isDragging&&!n.isItemCompatible)("is-being-dragged",n.isDraggedItem&&n.isDragging)("hidden-search",n.hiddenBySearch),e.xp6(2),e.Q6J("ngIf",null!==n.item),e.xp6(1),e.Q6J("ngIf",null===n.item&&null!==n.base),e.xp6(1),e.Q6J("ngIf",n.isMouseOver||n.isMenuOpen()))},dependencies:[m.sg,m.O5,Z.Hw,x.VK,x.OP,x.p6,x.KA,A.pI,A.xu,Ce],styles:["[_nghost-%COMP%]{width:56px;min-width:56px;height:56px;min-height:56px}.item[_ngcontent-%COMP%]{width:56px;min-width:56px;min-height:56px;border:4px solid black;position:relative;background-color:#131313}.item[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.item.forced-base-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2b3}.item.drop-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2}.item.drop-incompatible[_ngcontent-%COMP%]{border-color:#f44336}.item.is-being-dragged[_ngcontent-%COMP%]{opacity:.3}.item.hidden-search[_ngcontent-%COMP%]{opacity:.2}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:0;right:0}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a})();var Qe=g(9762);function Hi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-reaper-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Reaper level (base)"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()(),e.TgZ(13,"mat-form-field",7)(14,"mat-label"),e._uU(15,"Reaper kills (base)"),e.qZA(),e._UZ(16,"input",9),e.TgZ(17,"mat-error"),e._uU(18,"Kills must be >= 0"),e.qZA()()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label"),e._uU(22,"Raper level (primordial)"),e.qZA(),e._UZ(23,"input",10),e.TgZ(24,"mat-error"),e._uU(25),e.qZA()(),e.TgZ(26,"mat-form-field",7)(27,"mat-label"),e._uU(28,"Reaper kills (primordial)"),e.qZA(),e._UZ(29,"input",11),e.TgZ(30,"mat-error"),e._uU(31,"Kills must be >= 0"),e.qZA()()(),e.TgZ(32,"div",6),e._UZ(33,"app-search-select",12),e.TgZ(34,"mat-checkbox",13),e._uU(35,"Primordial"),e.qZA()()()(),e.TgZ(36,"mat-dialog-actions")(37,"button",14),e._uU(38,"Cancel"),e.qZA(),e.TgZ(39,"button",15),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.reset())}),e._uU(40,"Reset"),e.qZA(),e.TgZ(41,"button",16),e._uU(42,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("reaper",t.reaper),e.xp6(8),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(13),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(8),e.Q6J("control",t.getReaperControl())("options",t.options)("noErrorPadding",!0)}}let Ri=(()=>{class a{constructor(t,n,i,r,l,s){this.dialogRef=t,this.slormancerReaperService=n,this.slormancerCharacterUpdaterService=i,this.formOptionsService=r,this.buildStorageService=l,this.options=[],this.originalReaper=this.slormancerReaperService.getReaperClone(s.reaper),this.character=s.character,this.reaper=s.reaper,this.reset()}reset(){this.reaper=Object.assign(this.reaper,this.originalReaper),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.reaper)}getReaperControl(){return this.form.get("reaper")}updatePreview(t){if(t.valid){const n=t.value;if(n.reaper===this.reaper.id)this.reaper.id=n.reaper,this.reaper.primordial=n.primordial,this.reaper.baseInfo.level=n.baseLevel,this.reaper.primordialInfo.level=n.primordialLevel,this.reaper.baseInfo.kills=n.baseKills,this.reaper.primordialInfo.kills=n.primordialKills;else{const r=this.slormancerReaperService.getReaperById(n.reaper,this.reaper.weaponClass,n.primordial,n.baseLevel,n.primordialLevel,n.baseKills,n.primordialKills,this.reaper.bonusLevel);null!==r&&Object.assign(this.reaper,r)}const i=this.buildStorageService.getBuild();this.slormancerReaperService.updateReaperModel(this.reaper),this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==i?i.configuration:B,!1),this.slormancerReaperService.updateReaperView(this.reaper),this.options=this.formOptionsService.getReaperOptions(this.reaper.weaponClass,this.reaper.primordial),n.baseLevel!==this.reaper.baseInfo.level&&t.patchValue({baseLevel:this.reaper.baseInfo.level},{emitEvent:!1}),n.primordialLevel!==this.reaper.primordialInfo.level&&t.patchValue({primordialLevel:this.reaper.primordialInfo.level},{emitEvent:!1})}}getReaperMaxLevelValidator(){return t=>c.kI.max(this.reaper.maxLevel)(t)}buildForm(){const t=new c.cw({baseLevel:new c.NI(this.reaper.baseInfo.level,[c.kI.required,c.kI.min(1),this.getReaperMaxLevelValidator()]),baseKills:new c.NI(this.reaper.baseInfo.kills,[c.kI.required,c.kI.min(0)]),primordialLevel:new c.NI(this.reaper.primordialInfo.level,[c.kI.required,c.kI.min(1),this.getReaperMaxLevelValidator()]),primordialKills:new c.NI(this.reaper.primordialInfo.kills,[c.kI.required,c.kI.min(0)]),primordial:new c.NI(this.reaper.primordial,c.kI.required),reaper:new c.NI(this.reaper.id,c.kI.required)});return t.valueChanges.subscribe(()=>{this.updatePreview(t)}),this.updatePreview(t),t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(ge.I),e.Y36(z.P),e.Y36(Q),e.Y36(y),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"reaper"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","baseLevel"],["matInput","","type","number","step","1","formControlName","baseKills"],["matInput","","type","number","step","1","formControlName","primordialLevel"],["matInput","","type","number","step","1","formControlName","primordialKills"],["label","Reaper base",3,"control","options","noErrorPadding"],["color","primary","formControlName","primordial"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Hi,43,7,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.reaper)},dependencies:[m.O5,S.lW,_.ZT,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,ce.oG,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,Qe.b,me],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding:8px 0}"]}),a})();function Yi(a,o){if(1&a&&e._UZ(0,"app-reaper-view",12),2&a){const t=e.oxw(2);e.Q6J("reaper",t.character.reaper)}}function Gi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3,"Add reaper"),e.qZA()}}function Vi(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3,"Edit reaper"),e.qZA()}}function Di(a,o){if(1&a&&(e.YNc(0,Gi,4,0,"button",13),e.YNc(1,Vi,4,0,"button",13)),2&a){const t=e.oxw(2);e.Q6J("ngIf",null===t.character.reaper),e.xp6(1),e.Q6J("ngIf",null!==t.character.reaper)}}function ji(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.edit())}),e._UZ(1,"div",3,4)(3,"div",5),e.ynx(4),e._UZ(5,"img",6),e.YNc(6,Yi,1,1,"ng-template",7),e.BQk(),e._UZ(7,"div",8),e.TgZ(8,"mat-menu",9,10),e.YNc(10,Di,2,2,"ng-template",11),e.qZA()()}if(2&a){const t=e.MAs(2),n=e.MAs(9),i=e.oxw();e.ekj("readonly",i.readonly),e.xp6(5),e.ekj("primordial-effect",i.character.reaper.primordial),e.Q6J("src",i.character.reaper.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",i.showOverlay)("cdkConnectedOverlayOrigin",t),e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(1),e.Q6J("overlapTrigger",!0)}}function Ki(a,o){if(1&a&&e._UZ(0,"div",15),2&a){const t=e.oxw();e.Q6J("innerHTML",t.character.reaper.levelLabel,e.oJD)}}let He=(()=>{class a{constructor(t,n,i){this.dialog=t,this.slormancerCharacterBuilderService=n,this.itemMoveService=i,this.character=null,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}ngOnInit(){}edit(){if(null!==this.character&&!this.readonly){const t=this.slormancerCharacterBuilderService.getCharacterClone(this.character);this.dialog.open(Ri,{data:{reaper:t.reaper,character:t}}).afterClosed().subscribe(i=>{i&&this.changed.emit(i)})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.uw),e.Y36(H.o),e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:2,vars:2,consts:[["class","reaper",3,"readonly","click",4,"ngIf"],["class","reaper-level",3,"innerHTML",4,"ngIf"],[1,"reaper",3,"click"],["cdkOverlayOrigin","",1,"overlay-position"],["trigger","cdkOverlayOrigin"],[1,"inner-slot"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"matMenuTriggerFor"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],[3,"reaper"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"reaper-level",3,"innerHTML"]],template:function(t,n){1&t&&(e.YNc(0,ji,11,9,"div",0),e.YNc(1,Ki,1,1,"div",1)),2&t&&(e.Q6J("ngIf",null!==n.character),e.xp6(1),e.Q6J("ngIf",null!==n.character))},dependencies:[m.O5,Z.Hw,x.VK,x.OP,x.p6,x.KA,A.pI,A.xu,Qe.b],styles:[".reaper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:124px;min-height:124px;position:relative}.reaper[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.reaper[_ngcontent-%COMP%]   .overlay-position[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.reaper[_ngcontent-%COMP%]   .inner-slot[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#1e1e1e;border:3px solid rgb(60,60,60)}.reaper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper-level[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase}app-reaper-view[_ngcontent-%COMP%]{width:350px}"]}),a})();var G=g(7255);function Xi(a,o){if(1&a&&e._UZ(0,"div",15),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.genresLabel,e.oJD)}}function zi(a,o){if(1&a&&(e.TgZ(0,"mat-icon",19),e._uU(1,"info_outline"),e.qZA()),2&a){const t=e.oxw(3);e.Q6J("matTooltip",t.skill.cooldownDetailsLabel)}}function $i(a,o){if(1&a&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.YNc(2,zi,2,1,"mat-icon",18),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.skill.cooldownLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.skill.cooldownDetailsLabel)}}function Wi(a,o){if(1&a&&e._UZ(0,"div",20),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.costLabel,e.oJD)}}function eo(a,o){if(1&a&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" + ",t.skill.bonusLevel,"")}}function to(a,o){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,Xi,1,1,"div",8),e.YNc(9,$i,3,2,"div",9),e.YNc(10,Wi,1,1,"div",10),e.qZA()(),e._UZ(11,"div",11)(12,"div",12),e.TgZ(13,"div",13),e._UZ(14,"img",6),e.YNc(15,eo,2,1,"span",14),e.qZA()()()),2&a){const t=e.oxw();e.Gre("skill slormancer-tooltip ",t.skill.damageTypes.length>0?t.skill.damageTypes[0]:"",""),e.xp6(1),e.Q6J("innerHTML",t.skill.nameLabel,e.oJD),e.xp6(5),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH),e.xp6(2),e.Q6J("ngIf",null!==t.skill.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.cooldownLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.costLabel),e.xp6(2),e.Q6J("innerHTML",t.skill.description,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",t.skill.levelIcon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",t.skill.bonusLevel>0)}}let Re=(()=>{class a{constructor(){this.skill=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-view"]],inputs:{skill:"skill"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box",3,"innerHTML"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[3,"src"],[1,"data"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[1,"bottom-level"],["class","bonus",4,"ngIf"],[1,"genre",3,"innerHTML"],[1,"cooldown"],[3,"innerHTML"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"cost",3,"innerHTML"],[1,"bonus"]],template:function(t,n){1&t&&e.YNc(0,to,16,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.skill)},dependencies:[m.O5,Z.Hw,F.gM],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;text-transform:uppercase;height:100%;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px;display:inline}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}"]}),a})();function no(a,o){if(1&a&&e._UZ(0,"app-skill-view",9),2&a){const t=e.oxw(2);e.Q6J("skill",t.skill)}}function ao(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,no,1,1,"ng-template",8),e.BQk()),2&a){const t=e.oxw(),n=e.MAs(1);e.xp6(1),e.Q6J("src","assets/img/icon/"+(t.support?t.skill.iconLarge:t.skill.icon)+".png",e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function io(a,o){if(1&a&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.specializationName)}}function oo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.updateSkill(r))}),e.TgZ(1,"div",12),e._UZ(2,"img",13),e.TgZ(3,"div",14)(4,"div",15),e._uU(5),e.qZA(),e.YNc(6,io,2,1,"div",16),e.TgZ(7,"div",17),e._uU(8),e.qZA()()()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("selected",n.isSelectedSkill(t)),e.xp6(1),e.ekj("support",n.support),e.Q6J("src","assets/img/icon/"+(n.support?t.iconLarge:t.icon)+".png",e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",null!==t.specializationName),e.xp6(2),e.lnq("",n.MASTERY_LABEL,": ",t.level," / ",n.SKILL_MAX_MASTERY,"")}}function ro(a,o){if(1&a&&e.YNc(0,oo,9,10,"button",10),2&a){const t=e.oxw();e.Q6J("ngForOf",t.getAvailableSkills())}}let Ye=(()=>{class a extends T.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerTranslateService=n,this.SKILL_MAX_MASTERY=L.DA,this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.skill=null,this.support=!1,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){}getAvailableSkills(){const t=this.buildStorageService.getLayer();let n=[];if(null!==t&&null!==t.character){const i=this.support?G.W.Support:G.W.Active;n=t.character.skills.map(r=>r.skill).filter(r=>i===r.type)}return n}isSelectedSkill(t){const n=this.buildStorageService.getLayer();return null!==n&&null!==n.character&&(n.character.primarySkill===t||n.character.secondarySkill===t||n.character.supportSkill===t)}updateSkill(t){this.skill!==t&&this.changed.emit(t)}openMenu(){return null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(Y.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{skill:"skill",support:"support",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:6,consts:[["cdkOverlayOrigin","",1,"skill",3,"contextmenu","click"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above",1,"skill-menu"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"skill"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill",3,"src"],[1,"description"],[1,"name"],["class","specialization",4,"ngIf"],[1,"mastery"],[1,"specialization"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.NdJ("contextmenu",function(){return n.openMenu()})("click",function(){return n.openMenu()}),e.YNc(2,ao,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,ro,1,1,"ng-template",6),e.qZA()()),2&t){const i=e.MAs(5);e.ekj("support",n.support)("readonly",n.readonly),e.xp6(2),e.Q6J("ngIf",null!==n.skill),e.xp6(1),e.Q6J("matMenuTriggerFor",i)}},dependencies:[m.sg,m.O5,x.VK,x.OP,x.p6,x.KA,A.pI,A.xu,Re],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){position:absolute;width:100%;height:100%}.skill[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:uppercase}.skill[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:-8px;left:0}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .mastery[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry.selected[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a})();function lo(a,o){if(1&a&&e._UZ(0,"app-ancestral-legacy-view",11),2&a){const t=e.oxw(3);e.Q6J("ancestralLegacy",t.activable)("hideNextRank",!0)}}function co(a,o){if(1&a&&e._UZ(0,"app-activable-view",12),2&a){const t=e.oxw(3);e.Q6J("activable",t.activable)}}function so(a,o){if(1&a&&(e.YNc(0,lo,1,2,"app-ancestral-legacy-view",9),e.YNc(1,co,1,1,"app-activable-view",10)),2&a){const t=e.oxw(2);e.Q6J("ngIf",t.isAncestralLegacy(t.activable)),e.xp6(1),e.Q6J("ngIf",t.isActivable(t.activable))}}function mo(a,o){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,so,2,2,"ng-template",8),e.BQk()),2&a){const t=e.oxw(),n=e.MAs(1);e.xp6(1),e.Q6J("src",t.activable.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function _o(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.updateActivable(r))}),e.TgZ(1,"div",14),e._UZ(2,"img",19),e.TgZ(3,"div",16)(4,"div",20),e._uU(5),e.qZA()()()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("selected",n.isSelectedActivable(t)),e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(3),e.Oqu(t.name)}}function go(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateActivable(null))}),e.TgZ(1,"div",14),e._UZ(2,"div",15),e.TgZ(3,"div",16)(4,"div",17),e._uU(5,"Remove activable"),e.qZA()()()(),e.YNc(6,_o,6,4,"button",18)}if(2&a){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.getAvailableActivables())}}let Ge=(()=>{class a extends T.B{constructor(t,n){super(),this.buildStorageService=t,this.itemMoveService=n,this.activable=null,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}onMouseClick(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}ngOnInit(){}isAncestralLegacy(t){return void 0!==t.element}isActivable(t){return void 0===t.element}getAvailableActivables(){let t=[];const n=this.buildStorageService.getLayer();return null!==n&&(t=[...[n.character.gear.amulet,n.character.gear.belt,n.character.gear.body,n.character.gear.boot,n.character.gear.bracer,n.character.gear.cape,n.character.gear.glove,n.character.gear.helm,n.character.gear.ring_l,n.character.gear.ring_r,n.character.gear.shoulder].map(s=>null!==s&&null!==s.legendaryEffect?s.legendaryEffect.activable:null).filter(C.BX).sort((s,d)=>-(0,C.qu)(s.level,d.level)).filter((s,d,u)=>(0,C.mr)(s,d,u,(b,P)=>b.id===P.id)),...null===n.character.reaper?[]:n.character.reaper.activables,...n.character.ancestralLegacies.activeAncestralLegacies.map(s=>n.character.ancestralLegacies.ancestralLegacies[s]).filter(C.BX).filter(s=>s.isActivable)]),t}isSelectedActivable(t){const n=this.buildStorageService.getLayer();return null!==n&&(n.character.activable1===t||n.character.activable2===t||n.character.activable3===t||n.character.activable4===t)}updateActivable(t){this.activable!==t&&this.changed.emit(t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-activable-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})("click",function(){return n.onMouseClick()})},inputs:{activable:"activable",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:2,consts:[["cdkOverlayOrigin","",1,"skill"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy","hideNextRank",4,"ngIf"],[3,"activable",4,"ngIf"],[3,"ancestralLegacy","hideNextRank"],[3,"activable"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill"],[1,"description"],[1,"subtitle"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"skill",3,"src"],[1,"name"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,mo,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,go,7,1,"ng-template",6),e.qZA()()),2&t){const i=e.MAs(5);e.xp6(2),e.Q6J("ngIf",null!==n.activable),e.xp6(1),e.Q6J("matMenuTriggerFor",i)}},dependencies:[m.sg,m.O5,x.VK,x.OP,x.p6,x.KA,A.pI,A.xu,Ne.K,pe],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;display:block;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371;line-height:0}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a})();function uo(a,o){1&a&&e._UZ(0,"img",8)}function po(a,o){1&a&&e._UZ(0,"img",8)}function fo(a,o){1&a&&e._UZ(0,"img",8)}function ho(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-skill-slot",4),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updatePrimarySkill(i))}),e.qZA()(),e.YNc(4,uo,1,0,"img",5),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"app-skill-slot",4),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSecondarySkill(i))}),e.qZA()(),e.YNc(8,po,1,0,"img",5),e.qZA(),e.TgZ(9,"div",2)(10,"div",3)(11,"app-skill-slot",6),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSupportSkill(i))}),e.qZA()(),e.YNc(12,fo,1,0,"img",5),e.qZA(),e.TgZ(13,"div",2)(14,"div",3)(15,"app-activable-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable1(i))}),e.qZA()()(),e.TgZ(16,"div",2)(17,"div",3)(18,"app-activable-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable2(i))}),e.qZA()()(),e.TgZ(19,"div",2)(20,"div",3)(21,"app-activable-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable3(i))}),e.qZA()()(),e.TgZ(22,"div",2)(23,"div",3)(24,"app-activable-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable4(i))}),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("skill",t.character.primarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.primarySkill&&t.character.primarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.secondarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.secondarySkill&&t.character.secondarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.supportSkill)("support",!0),e.xp6(1),e.Q6J("ngIf",null!==t.character.supportSkill&&t.character.supportSkill.locked),e.xp6(3),e.Q6J("activable",t.character.activable1),e.xp6(3),e.Q6J("activable",t.character.activable2),e.xp6(3),e.Q6J("activable",t.character.activable3),e.xp6(3),e.Q6J("activable",t.character.activable4)}}let Co=(()=>{class a extends T.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerCharacterModifierService=n,this.character=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.character=null!==t&&null!==t.character?t.character:null)}updatePrimarySkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t),this.buildStorageService.saveLayer())}updateSecondarySkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t),this.buildStorageService.saveLayer())}updateSupportSkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t),this.buildStorageService.saveLayer())}updateActivable1(t){null!==this.character&&this.character.activable1!==t&&(null!==t&&(this.character.activable2===t?this.character.activable2=this.character.activable1:this.character.activable3===t?this.character.activable3=this.character.activable1:this.character.activable4===t&&(this.character.activable4=this.character.activable1)),this.character.activable1=t,this.buildStorageService.saveLayer())}updateActivable2(t){null!==this.character&&this.character.activable2!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable2:this.character.activable3===t?this.character.activable3=this.character.activable2:this.character.activable4===t&&(this.character.activable4=this.character.activable2)),this.character.activable2=t,this.buildStorageService.saveLayer())}updateActivable3(t){null!==this.character&&this.character.activable3!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable3:this.character.activable2===t?this.character.activable2=this.character.activable3:this.character.activable4===t&&(this.character.activable4=this.character.activable3)),this.character.activable3=t,this.buildStorageService.saveLayer())}updateActivable4(t){null!==this.character&&this.character.activable4!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable4:this.character.activable3===t?this.character.activable3=this.character.activable4:this.character.activable2===t&&(this.character.activable2=this.character.activable4)),this.character.activable4=t,this.buildStorageService.saveLayer())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(le.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-bar"]],features:[e.qOj],decls:1,vars:1,consts:[["class","skill-bar",4,"ngIf"],[1,"skill-bar"],[1,"skill-slot"],[1,"skill-slot-border"],[3,"skill","changed"],["class","locked","src","assets/img/icon//locked.png",4,"ngIf"],[3,"skill","support","changed"],[3,"activable","changed"],["src","assets/img/icon//locked.png",1,"locked"]],template:function(t,n){1&t&&e.YNc(0,ho,25,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[m.O5,Ye,Ge],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;border:3px solid rgb(60,60,60);padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]{position:relative}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid rgb(60,60,60)}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;pointer-events:none}"]}),a})();const vo=["animation"];let bo=(()=>{class a{constructor(){this.heroClass=null,this.suffix="",this.flipAnimation=!1,this.animation=null}mouseMoved(t){if(null!==this.animation){const r=this.animation.nativeElement.getBoundingClientRect().left+this.animation.nativeElement.clientWidth/2<t.clientX;this.flipAnimation!==r&&(this.flipAnimation=r)}}ngOnInit(){}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-animation"]],viewQuery:function(t,n){if(1&t&&e.Gf(vo,5),2&t){let i;e.iGM(i=e.CRH())&&(n.animation=i.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(r){return n.mouseMoved(r)},!1,e.Jf7)},inputs:{heroClass:"heroClass",suffix:"suffix"},decls:6,vars:10,consts:[[1,"character-animation"],["animation",""],[1,"idle-1",3,"src"],[1,"idle-2",3,"src"],[1,"idle-3",3,"src"],[1,"idle-4",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"img",2)(3,"img",3)(4,"img",4)(5,"img",5),e.qZA()),2&t&&(e.ekj("flip",n.flipAnimation),e.xp6(2),e.hYB("src","assets/img/character/idle/",n.heroClass,"/0",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/1",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/2",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/3",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH))},styles:[".character-animation[_ngcontent-%COMP%]{position:relative;height:144px;width:88px}.character-animation.flip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scaleX(-1)}.character-animation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;image-rendering:pixelated;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}.character-animation[_ngcontent-%COMP%]   img.idle-1[_ngcontent-%COMP%]{animation-name:idle-1}.character-animation[_ngcontent-%COMP%]   img.idle-2[_ngcontent-%COMP%]{animation-name:idle-2}.character-animation[_ngcontent-%COMP%]   img.idle-3[_ngcontent-%COMP%]{animation-name:idle-3}.character-animation[_ngcontent-%COMP%]   img.idle-4[_ngcontent-%COMP%]{animation-name:idle-4}@keyframes idle-1{0%{opacity:1}25%{opacity:1}26%{opacity:0}99%{opacity:0}to{opacity:1}}@keyframes idle-2{0%{opacity:0}24%{opacity:0}25%{opacity:1}50%{opacity:1}51%{opacity:0}to{opacity:0}}@keyframes idle-3{0%{opacity:0}49%{opacity:0}50%{opacity:1}75%{opacity:1}76%{opacity:0}to{opacity:0}}@keyframes idle-4{0%{opacity:1}1%{opacity:0}74%{opacity:0}75%{opacity:1}to{opacity:1}}"]}),a})();function Mo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2,"Choose your hero level"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Hero level"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(9),e.hij("Level must be between 1 and ",t.MAX_HERO_LEVEL,""),e.xp6(2),e.Q6J("mat-dialog-close",null)}}let xo=(()=>{class a{constructor(t,n){this.dialogRef=t,this.MAX_HERO_LEVEL=L.AR,this.form=new c.cw({level:new c.NI(n.level,[c.kI.min(1),c.kI.max(L.AR)])})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.level)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-level-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Mo,15,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[m.O5,S.lW,_.ZT,_.uh,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),a})();function Oo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e.TgZ(1,"h2",2),e._uU(2,"Choose the new item reinforcment"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Reinforcment"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9,"Reinforcment must be positive"),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("mat-dialog-close",null)}}let yo=(()=>{class a{constructor(t,n){this.dialogRef=t,this.MAX_HERO_LEVEL=L.AR,this.form=new c.cw({reinforcment:new c.NI(n.reinforcment,[c.kI.min(0)])})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.reinforcment)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-reinforcment-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","reinforcment"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Oo,15,2,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[m.O5,S.lW,_.ZT,_.uh,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u],styles:["mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a})();function Po(a,o){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function So(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"p",10),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeStat(r))}),e._uU(1),e.qZA()}if(2&a){const t=o.$implicit,n=o.index;e.xp6(1),e.AsE("#",n+1," : ",t.label,"")}}let ko=(()=>{class a{constructor(t,n,i,r,l,s){this.dialogRef=t,this.slormancerItemService=i,this.slormancerDataService=r,this.slormancerAffixService=l,this.formOptionsService=s,this.AFFIX_OPTIONS=[],this.RARITY_OPTIONS=this.formOptionsService.getAllRaritiesOptions().filter(u=>u.value!==v.u.Legendary),this.selectedAffixes=[],this.items=n.items;const d=new c.NI;this.form=new c.cw({rarity:new c.NI(v.u.Epic,c.kI.required),affix:d}),d.valueChanges.subscribe(u=>{const b=this.AFFIX_OPTIONS.find(P=>P.value===u);void 0!==b&&(this.selectedAffixes.push(b),this.updateOptions(),d.setValue(null))}),this.updateOptions()}updateOptions(){this.AFFIX_OPTIONS=this.formOptionsService.getAllStatsoptions().filter(t=>!this.selectedAffixes.includes(t))}applyStatsToItem(t){const n=this.form.value.rarity,i=v.n.filter(u=>v.n.indexOf(u)<=v.n.indexOf(n)),r={[v.u.Normal]:this.slormancerDataService.getBaseMaxBasicStat(t.base),[v.u.Magic]:1,[v.u.Rare]:1,[v.u.Epic]:3,[v.u.Legendary]:0},l={[v.u.Normal]:this.formOptionsService.getStatsOptions(t.base,v.u.Normal),[v.u.Magic]:this.formOptionsService.getStatsOptions(t.base,v.u.Magic),[v.u.Rare]:this.formOptionsService.getStatsOptions(t.base,v.u.Rare),[v.u.Epic]:this.formOptionsService.getStatsOptions(t.base,v.u.Epic),[v.u.Legendary]:[]};t.affixes=[];for(const u of this.selectedAffixes)for(const b of i){const P=t.affixes.filter(J=>J.rarity===b).length<r[b],I=l[b];if(P&&I.includes(u)){const J=this.slormancerAffixService.getAffixFromStat(u.value,t.level,t.reinforcment,b);if(null!==J){t.affixes.push(J);break}}}const s=Math.max(...t.affixes.map(u=>v.n.indexOf(u.rarity))),d=v.n.filter(u=>u===v.u.Normal||v.n.indexOf(u)<s);for(const u of d){let b=!1;for(;!b&&t.affixes.filter(P=>P.rarity===u).length<r[u];){const P=l[u].find(I=>void 0===t.affixes.find(J=>J.craftedEffect.effect.stat===I.value));if(b=!0,void 0!==P){const I=this.slormancerAffixService.getAffixFromStat(P.value,t.level,t.reinforcment,u);null!==I&&(t.affixes.push(I),b=!1)}}}this.slormancerItemService.updateEquipableItemModel(t),this.slormancerItemService.updateEquipableItemView(t)}removeStat(t){this.selectedAffixes.splice(t,1),this.updateOptions()}getAffixControl(){return this.form.get("affix")}submit(){if(this.form.markAllAsTouched(),this.selectedAffixes.length>0&&this.form.valid){for(const t of this.items)this.applyStatsToItem(t);this.dialogRef.close(!0)}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(_.WI),e.Y36(V.S),e.Y36(W.o),e.Y36(de.l),e.Y36(Q))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-optimize-items-affixes-modal"]],decls:21,vars:10,consts:[["mat-dialog-title",""],["id","form",3,"formGroup","submit"],["appearance","outline","color","primary",1,"no-error-padding"],["formControlName","rarity"],[3,"value",4,"ngFor","ngForOf"],["class","stat",3,"click",4,"ngFor","ngForOf"],[3,"label","control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary","form","form",3,"disabled"],[3,"value"],[1,"stat",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Choose the affixes you want for your items"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1),e.NdJ("submit",function(){return n.submit()}),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Items will lose their affixes before being updated."),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Highest rarity to allow"),e.qZA(),e.TgZ(11,"mat-select",3),e.YNc(12,Po,2,2,"mat-option",4),e.qZA()(),e._UZ(13,"p"),e.YNc(14,So,2,2,"p",5),e._UZ(15,"app-search-select",6),e.qZA()(),e.TgZ(16,"mat-dialog-actions")(17,"button",7),e._uU(18,"Cancel"),e.qZA(),e.TgZ(19,"button",8),e._uU(20,"Apply"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(2),e.hij("Each affix below will be applied in order to the ",n.items.length>1?n.items.length+" selected items":"selected item"," (at maximum crafting value) using the first available affix slot."),e.xp6(7),e.Q6J("ngForOf",n.RARITY_OPTIONS),e.xp6(2),e.Q6J("ngForOf",n.selectedAffixes),e.xp6(1),e.Q6J("label",n.selectedAffixes.length>0?"Add another affix":"Choose an affix")("control",n.getAffixControl())("options",n.AFFIX_OPTIONS)("noErrorPadding",!0),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("disabled",0===n.selectedAffixes.length||!n.form.valid))},dependencies:[m.sg,S.lW,_.ZT,_.uh,_.xY,_.H8,f.KE,f.hX,U.gD,N.ey,c._Y,c.JJ,c.JL,c.sg,c.u,me],styles:[".stat[_ngcontent-%COMP%]{cursor:pointer;padding-left:4px}@media (max-width: 768px){.stat[_ngcontent-%COMP%]{padding-left:0}}.stat[_ngcontent-%COMP%]:hover{opacity:.6}mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:200px}@media (max-width: 768px){mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:100%}}"]}),a})();function To(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.optimizeReaperEnchantments())}),e._uU(1,"Optimize items for Reaper"),e.qZA()}}function wo(a,o){if(1&a&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Attribute"),e.qZA()),2&a){e.oxw(2);const t=e.MAs(6);e.Q6J("matMenuTriggerFor",t)}}function Ao(a,o){if(1&a&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Skill"),e.qZA()),2&a){e.oxw(2);const t=e.MAs(9);e.Q6J("matMenuTriggerFor",t)}}function Zo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.optimizeItemsAffixes())}),e._uU(1,"Optimise items affixes"),e.qZA()}}function Io(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.maximizeItemsLevel())}),e._uU(1,"Maximize items level"),e.qZA()}}function Eo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.changeReinforcmentLevel())}),e._uU(1,"Change items reinforcment level"),e.qZA()}}function Lo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.editCharacterLevel())}),e._uU(1,"Change hero level"),e.qZA(),e.YNc(2,To,2,0,"button",9),e.YNc(3,wo,2,1,"button",10),e.YNc(4,Ao,2,1,"button",10),e.YNc(5,Zo,2,0,"button",9),e.YNc(6,Io,2,0,"button",9),e.YNc(7,Eo,2,0,"button",9)}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!==t.character&&t.canOptimizeReaperEnchantements(t.character)&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems())}}function Jo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.optimizeAttributeEnchantments(r))}),e._UZ(1,"img",13)(2,"div",14),e.qZA()}if(2&a){const t=o.$implicit;e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.attributeName,e.oJD)}}function qo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.optimizeSkillEnchantments(r))}),e._UZ(1,"img",15)(2,"div",14),e.qZA()}if(2&a){const t=o.$implicit;e.xp6(1),e.Q6J("src","assets/img/icon/"+t.icon+".png",e.LSH),e.xp6(1),e.Q6J("innerHTML",t.name,e.oJD)}}let Uo=(()=>{class a extends T.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.dialog=n,this.messageService=i,this.slormancerItemService=r,this.character=null,this.menu=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.character=null===t?null:t.character)}openCharacterSettings(){return null!==this.menu&&this.menu.openMenu(),!1}editCharacterLevel(){null!==this.character&&this.dialog.open(xo,{data:{level:this.character.level}}).afterClosed().subscribe(t=>{t&&null!==this.character&&(this.character.level=t,this.buildStorageService.saveLayer())})}getGearItems(){let t=[];const n=this.character;return null!==n&&(t=X.PL.map(i=>n.gear[i]).filter(C.BX)),t}hasItems(){return this.getGearItems().length>0}canOptimizeReaperEnchantements(t){return null!==t.reaper&&t.reaper.smith.id!==se.Q.ReapersmithBrotherhood}optimizeReaperEnchantments(){if(null!==this.character){const t=this.slormancerItemService.getReaperEnchantment(this.character.reaper.smith.id,5);let n="";this.getGearItems().forEach(i=>{i.reaperEnchantment=this.slormancerItemService.getReaperEnchantmentClone(t),this.slormancerItemService.updateEquipableItemModel(i),this.slormancerItemService.updateEquipableItemView(i),n=i.reaperEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+n+'"> '+this.character.reaper.smith.name)}}getTraits(){let t=[];const n=this.character;return null!==n&&(t=h.A.map(i=>n.attributes.allocated[i])),t}optimizeAttributeEnchantments(t){if(null!==this.character&&null!==this.character.reaper){const n=this.slormancerItemService.getAttributeEnchantment(t.attribute,3);let i="";this.getGearItems().forEach(r=>{r.attributeEnchantment=this.slormancerItemService.getAttributeEnchantmentClone(n),this.slormancerItemService.updateEquipableItemModel(r),this.slormancerItemService.updateEquipableItemView(r),i=r.attributeEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+i+'"> '+t.attributeName)}}getSkills(){let t=[];const n=this.character;return null!==n&&(t=n.skills.map(i=>i.skill)),t}optimizeSkillEnchantments(t){if(null!==this.character){const n=this.slormancerItemService.getSkillEnchantment(t.id,2);let i="";this.getGearItems().forEach(r=>{r.skillEnchantment=this.slormancerItemService.getSkillEnchantmentClone(n),this.slormancerItemService.updateEquipableItemModel(r),this.slormancerItemService.updateEquipableItemView(r),i=r.skillEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+i+'"> '+t.name)}}maximizeItemsLevel(){if(null!==this.character){const t=this.character.level;this.getGearItems().forEach(n=>{n.level=t,this.slormancerItemService.updateEquipableItemModel(n),this.slormancerItemService.updateEquipableItemView(n)}),this.buildStorageService.saveLayer(),this.messageService.message("All equipped items level raised to "+t)}}changeReinforcmentLevel(){if(null!==this.character){const t=Math.max(...this.getGearItems().map(n=>n.reinforcment));this.dialog.open(yo,{data:{reinforcment:t}}).afterClosed().subscribe(n=>{"number"==typeof n&&(this.getGearItems().forEach(i=>{i.reinforcment=n,this.slormancerItemService.updateEquipableItemModel(i),this.slormancerItemService.updateEquipableItemView(i)}),this.buildStorageService.saveLayer(),this.messageService.message("All equipped items reinforcment raised to "+n))})}}optimizeItemsAffixes(){if(null!==this.character){const t={items:this.getGearItems()};this.dialog.open(ko,{data:t}).afterClosed().subscribe(n=>{n&&(this.buildStorageService.saveLayer(),this.messageService.message("All equipped items have been updated"))})}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(_.uw),e.Y36(R.e),e.Y36(V.S))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-settings-menu"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},features:[e.qOj],decls:11,vars:4,consts:[[3,"matMenuTriggerFor","contextmenu"],["color","primary","xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["color","primary"],["attributes","matMenu"],["mat-menu-item","","color","primary","class","menu-entry",3,"click",4,"ngFor","ngForOf"],["skills","matMenu"],["mat-menu-item","","color","primary",3,"click"],["mat-menu-item","","color","primary",3,"click",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","","color","primary",1,"menu-entry",3,"click"],[3,"src"],[3,"innerHTML"],[1,"skill-icon",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return n.openCharacterSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,Lo,8,6,"ng-template",3),e.TgZ(5,"mat-menu",4,5),e.YNc(7,Jo,3,2,"button",6),e.qZA(),e.TgZ(8,"mat-menu",4,7),e.YNc(10,qo,3,2,"button",6),e.qZA()()),2&t){const i=e.MAs(3);e.Q6J("matMenuTriggerFor",i),e.xp6(2),e.Q6J("overlapTrigger",!0),e.xp6(5),e.Q6J("ngForOf",n.getTraits()),e.xp6(3),e.Q6J("ngForOf",n.getSkills())}},dependencies:[m.sg,m.O5,Z.Hw,x.VK,x.OP,x.p6,x.KA],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}.menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}"]}),a})();function No(a,o){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"div",3)(3,"div",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e._UZ(10,"img",11),e.qZA()()()(),e.TgZ(11,"div",12)(12,"div",13)(13,"div",14),e._uU(14),e.qZA(),e._UZ(15,"div",15),e.qZA(),e.TgZ(16,"div",16)(17,"div",14),e._uU(18),e.qZA(),e._UZ(19,"div",15),e.qZA()()(),e.TgZ(20,"div",17),e._UZ(21,"img",11),e.qZA()()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.ultimatum.title,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.levelLabel,e.oJD),e.xp6(7),e.MGl("src","assets/img/icon/",t.ultimatum.icon,".png",e.LSH),e.xp6(4),e.Oqu(t.ultimatum.bonusTitle),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.bonusLabel,e.oJD),e.xp6(3),e.Oqu(t.ultimatum.malusTitle),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.malusLabel,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",t.ultimatum.levelIcon,".png",e.LSH)}}let Ve=(()=>{class a{constructor(){this.ultimatum=null}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-view"]],inputs:{ultimatum:"ultimatum"},decls:1,vars:1,consts:[["class","ultimatum slormancer-tooltip",4,"ngIf"],[1,"ultimatum","slormancer-tooltip"],[1,"head","inner-box"],[1,"title",3,"innerHTML"],[1,"level",3,"innerHTML"],[1,"content","inner-box"],[1,"data"],[1,"visual"],[1,"background"],[1,"inner-background"],[1,"ultimatum"],[3,"src"],[1,"info"],[1,"bonus"],[1,"title"],[3,"innerHTML"],[1,"malus"],[1,"bottom-level"]],template:function(t,n){1&t&&e.YNc(0,No,22,8,"div",0),2&t&&e.Q6J("ngIf",null!==n.ultimatum)},dependencies:[m.O5],styles:[".ultimatum[_ngcontent-%COMP%]{width:350px}.ultimatum[_ngcontent-%COMP%]  .value, .ultimatum[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.ultimatum[_ngcontent-%COMP%]  .range, .ultimatum[_ngcontent-%COMP%]  .range .value, .ultimatum[_ngcontent-%COMP%]  .details, .ultimatum[_ngcontent-%COMP%]  .details .value, .ultimatum[_ngcontent-%COMP%]  .formula, .ultimatum[_ngcontent-%COMP%]  .formula .value{color:#686868}.ultimatum[_ngcontent-%COMP%]  .affixes .range, .ultimatum[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:80%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{width:0;height:0}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);width:72px;height:72px;image-rendering:pixelated}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:105%}"]}),a})();function Fo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-ultimatum-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Ultimatum level"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",6),e._UZ(14,"app-search-select",9),e.qZA()()(),e.TgZ(15,"mat-dialog-actions")(16,"button",10),e._uU(17,"Cancel"),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.reset())}),e._uU(19,"Reset"),e.qZA(),e.TgZ(20,"button",12),e._uU(21,"Apply"),e.qZA()()()}if(2&a){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ultimatum",t.ultimatum),e.xp6(8),e.hij("Level must be between 1 and ",t.ULTIMATUM_MAX_LEVEL,""),e.xp6(2),e.Q6J("control",t.getTypeControl())("options",t.options)("noErrorPadding",!0)}}let Bo=(()=>{class a{constructor(t,n,i,r){this.dialogRef=t,this.slormancerUltimatumService=n,this.formOptionsService=i,this.ULTIMATUM_MAX_LEVEL=L.cK,this.options=[],this.originalUltimatum=null===r.ultimatum?this.slormancerUltimatumService.getUltimatum(Fe.R.AdamantAbundance,1):this.slormancerUltimatumService.getUltimatumClone(r.ultimatum),this.options=this.formOptionsService.getUltimatumOptions(),this.reset()}reset(){this.ultimatum=this.slormancerUltimatumService.getUltimatumClone(this.originalUltimatum),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.ultimatum)}updatePreview(t){if(t.valid){const n=t.value;this.ultimatum=this.slormancerUltimatumService.getUltimatum(n.type,n.level)}}getTypeControl(){return this.form.get("type")}buildForm(){const t=new c.cw({level:new c.NI(this.ultimatum.level,[c.kI.required,c.kI.min(1),c.kI.max(L.cK)]),type:new c.NI(this.ultimatum.type,[c.kI.required])});return t.valueChanges.subscribe(()=>{this.updatePreview(t)}),this.updatePreview(t),t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.so),e.Y36(xe.h),e.Y36(Q),e.Y36(_.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"ultimatum"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["label","Ultimatum type",3,"control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Fo,22,6,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.ultimatum)},dependencies:[m.O5,S.lW,_.ZT,_.xY,_.H8,f.TO,f.KE,f.hX,q.Nt,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.sg,c.u,Ve,me],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1;width:240px}"]}),a})();function Qo(a,o){1&a&&e._UZ(0,"img",8)}function Ho(a,o){if(1&a&&e._UZ(0,"app-ultimatum-view",10),2&a){const t=e.oxw(3);e.Q6J("ultimatum",t.ultimatum)}}function Ro(a,o){if(1&a&&e.YNc(0,Ho,1,1,"ng-template",9),2&a){e.oxw(2);const t=e.MAs(1);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",t)}}function Yo(a,o){if(1&a&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.YNc(2,Qo,1,0,"img",6),e.YNc(3,Ro,1,2,null,7),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.ekj("disabled",t.ultimatum.locked),e.MGl("src","assets/img/icon/",t.ultimatum.icon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",t.ultimatum.locked),e.xp6(1),e.Q6J("ngIf",t.overlay&&t.showOverlay)}}let Go=(()=>{class a{constructor(t,n){this.dialog=t,this.itemMoveService=n,this.ultimatum=null,this.overlay=!0,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}edit(){this.readonly||this.dialog.open(Bo,{data:{ultimatum:this.ultimatum}}).afterClosed().subscribe(n=>{n&&this.changed.emit(n)})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(_.uw),e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{ultimatum:"ultimatum",overlay:"overlay",readonly:"readonly"},outputs:{changed:"changed"},decls:4,vars:3,consts:[["cdkOverlayOrigin","",1,"background",3,"click"],["trigger","cdkOverlayOrigin"],[1,"inner-background"],["class","ultimatum",4,"ngIf"],[1,"ultimatum"],[1,"icon",3,"src"],["class","locked","src","assets/img/icon/locked.png",4,"ngIf"],[4,"ngIf"],["src","assets/img/icon/locked.png",1,"locked"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ultimatum"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(){return!n.readonly&&n.edit()}),e.TgZ(2,"div",2),e.YNc(3,Yo,4,5,"div",3),e.qZA()()),2&t&&(e.ekj("readonly",n.readonly),e.xp6(3),e.Q6J("ngIf",null!==n.ultimatum))},dependencies:[m.O5,A.pI,A.xu,Ve],styles:[".background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.background[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{position:relative;width:0;height:0}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);image-rendering:pixelated;position:absolute}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){width:72px;height:72px}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked).disabled{opacity:.5}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px}"]}),a})();function Vo(a,o){if(1&a&&(e.TgZ(0,"div",25),e._uU(1),e.TgZ(2,"mat-icon",26),e._uU(3,"info_outline"),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.character.importVersion," ")}}function Do(a,o){1&a&&e._UZ(0,"app-character-settings-menu")}function jo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"app-item-slot",3),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Helm,i))}),e.qZA(),e.TgZ(3,"app-item-slot",4),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Amulet,i))}),e.qZA()(),e.TgZ(4,"div",5)(5,"div",6)(6,"app-item-slot",7),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Shoulder,i))}),e.qZA(),e.TgZ(7,"app-item-slot",8),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Bracer,i))}),e.qZA(),e.TgZ(8,"app-item-slot",9),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Glove,i))}),e.qZA()(),e.TgZ(9,"div",10)(10,"div",11),e.YNc(11,Vo,4,1,"div",12),e.YNc(12,Do,1,0,"app-character-settings-menu",13),e.qZA(),e._UZ(13,"app-character-animation",14),e.qZA(),e.TgZ(14,"div",15)(15,"app-item-slot",16),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Body,i))}),e.qZA(),e.TgZ(16,"app-item-slot",17),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Cape,i))}),e.qZA(),e.TgZ(17,"app-item-slot",18),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Belt,i))}),e.qZA()()(),e.TgZ(18,"div",19),e._UZ(19,"div",20),e.TgZ(20,"app-item-slot",21),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.LeftRing,i))}),e.qZA(),e.TgZ(21,"app-item-slot",22),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Boot,i))}),e.qZA(),e.TgZ(22,"app-item-slot",23),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.RightRing,i))}),e.qZA(),e.TgZ(23,"app-ultimatum-slot",24),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateUltimatum(i))}),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Helm)("item",t.character.gear[t.gearSlot.Helm])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Amulet)("item",t.character.gear[t.gearSlot.Amulet])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Shoulder)("item",t.character.gear[t.gearSlot.Shoulder])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Bracer)("item",t.character.gear[t.gearSlot.Bracer])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Glove)("item",t.character.gear[t.gearSlot.Glove])("character",t.character),e.xp6(3),e.Q6J("ngIf",null!==t.character.importVersion&&t.character.version!==t.character.importVersion),e.xp6(1),e.Q6J("ngIf",!t.readonly),e.xp6(1),e.Q6J("heroClass",t.character.heroClass),e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Body)("item",t.character.gear[t.gearSlot.Body])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Cape)("item",t.character.gear[t.gearSlot.Cape])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Belt)("item",t.character.gear[t.gearSlot.Belt])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.LeftRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Boot)("item",t.character.gear[t.gearSlot.Boot])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.RightRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("ultimatum",t.character.ultimatum)}}let De=(()=>{class a{constructor(){this.gearSlot=X.SH,this.bases=M.J,this.character=null,this.readonly=!1,this.changed=new e.vpe}updateItem(t,n){null!==this.character&&(this.character.gear[t]=n,this.changed.emit(this.character))}updateUltimatum(t){null!==this.character&&(this.character.ultimatum=t,this.changed.emit(this.character))}}return a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-equipment"]],inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["class","equipment",4,"ngIf"],[1,"equipment"],[1,"top-equipment"],[1,"helm",3,"readonly","base","item","character","changed"],[1,"amulet",3,"readonly","base","item","character","changed"],[1,"center-equipment"],[1,"left-equipment"],[1,"shoulder",3,"readonly","base","item","character","changed"],[1,"bracer",3,"readonly","base","item","character","changed"],[1,"glove",3,"readonly","base","item","character","changed"],[1,"character-preview"],[1,"preview-header"],["class","original-version",4,"ngIf"],[4,"ngIf"],[3,"heroClass"],[1,"right-equipment"],[1,"body",3,"readonly","base","item","character","changed"],[1,"cape",3,"readonly","base","item","character","changed"],[1,"belt",3,"readonly","base","item","character","changed"],[1,"bottom-equipment"],[1,"empty"],[1,"ring_l",3,"readonly","base","item","character","changed"],[1,"boot",3,"readonly","base","item","character","changed"],[1,"ring_r",3,"readonly","base","item","character","changed"],[3,"readonly","ultimatum","changed"],[1,"original-version"],["matTooltip","This build has been made for an older version of the game"]],template:function(t,n){1&t&&e.YNc(0,jo,24,49,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[m.O5,Z.Hw,F.gM,Be,bo,Uo,Go],styles:[".equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;min-height:380px}.equipment[_ngcontent-%COMP%]   .top-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:20px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .left-equipment[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .right-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]{width:150px;height:200px;border:3px solid rgb(60,60,60);padding:8px;background-color:#000;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;justify-content:space-between;width:100%}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;gap:4px;color:#ce4607}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   app-character-settings-menu[_ngcontent-%COMP%]{margin-left:auto}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:16px;flex-grow:1;overflow:hidden}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_l[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_r[_ngcontent-%COMP%]{margin-bottom:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .boot[_ngcontent-%COMP%]{margin-top:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{width:56px}"]}),a})();function Ko(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dragInItemsGroup(i.character.inventory))})("mouseleave",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dragOutItemsGroup())})("mouseup",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.dragDrop(i.character.inventory))}),e._uU(1,"Bag"),e.qZA()}if(2&a){const t=e.oxw(2);e.ekj("drag-on",t.isDragging&&t.itemGroupBeingDraggedOn===t.character.inventory)("drag-possible",t.itemGroupDragDropPossible)("drag-impossible",!t.itemGroupDragDropPossible)}}function Xo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(i){const l=e.CHM(t).index,s=e.oxw(2);return e.KtG(s.updateIventoryItem(l,i))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.Q6J("item",t)("character",n.character)}}function zo(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dragInItemsGroup(i))})("mouseleave",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i.dragOutItemsGroup())})("mouseup",function(){e.CHM(t);const i=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dragDrop(i))}),e._uU(1),e.qZA()}if(2&a){const t=e.oxw(),n=t.$implicit,i=t.index,r=e.oxw(2);e.ekj("drag-on",r.isDragging&&r.itemGroupBeingDraggedOn===n)("drag-possible",r.itemGroupDragDropPossible)("drag-impossible",!r.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",i+1,"")}}function $o(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(i){const l=e.CHM(t).index,s=e.oxw().index,d=e.oxw(2);return e.KtG(d.updateSharedInventoryItem(s,l,i))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(3);e.Q6J("item",t)("character",n.character)}}function Wo(a,o){if(1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,zo,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,$o,1,2,"app-item-slot",9),e.qZA()()),2&a){const t=o.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function er(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content")(5,"app-character-equipment",2),e.NdJ("changed",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.gearChanged())}),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3)(8,"app-reaper-slot",2),e.NdJ("changed",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.updateReaper(i))}),e.qZA()(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA()()(),e.TgZ(11,"mat-card",5)(12,"mat-card-content")(13,"mat-tab-group",6)(14,"mat-tab"),e.YNc(15,Ko,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,Xo,1,2,"app-item-slot",9),e.qZA()(),e.YNc(18,Wo,4,1,"mat-tab",10),e.qZA()()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Oqu(t.character.fullName),e.xp6(2),e.Q6J("character",t.character),e.xp6(3),e.Q6J("character",t.character),e.xp6(9),e.Q6J("ngForOf",t.character.inventory),e.xp6(1),e.Q6J("ngForOf",t.character.sharedInventory)}}let tr=(()=>{class a extends T.B{constructor(t,n){super(),this.buildStorageService=t,this.itemMoveService=n,this.character=null,this.isDragging=!1,this.itemGroupBeingDraggedOn=null,this.itemGroupDragDropPossible=!1,this.itemMoveService.draggingItem.pipe((0,k.R)(this.unsubscribe)).subscribe(i=>this.isDragging=i)}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.character=null===t?null:t.character)}dragInItemsGroup(t){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==t.find(n=>null===n),this.itemGroupBeingDraggedOn=t)}dragOutItemsGroup(){this.itemGroupBeingDraggedOn=null}dragDrop(t){this.itemMoveService.moveDraggedItemToItemGroup(t)}gearChanged(){this.buildStorageService.saveLayer()}updateReaper(t){null!==this.character&&(this.character.reaper=t,this.buildStorageService.saveLayer())}updateIventoryItem(t,n){null!==this.character&&(this.character.inventory[t]=n,this.buildStorageService.saveLayer())}updateSharedInventoryItem(t,n,i){if(null!==this.character){const r=this.character.sharedInventory[t];r&&(r[n]=i,this.buildStorageService.saveBuild())}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(D))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(t,n){1&t&&e.YNc(0,er,19,5,"main",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[m.sg,m.O5,ee.SP,ee.uD,ee.uX,w.a8,w.dn,Be,He,Co,De],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:12px;background-color:#161412;border:3px solid rgb(60,60,60)}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),a})();var je=g(5016);function nr(a,o){if(1&a&&e._UZ(0,"div",18),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.upgrade.genresLabel,e.oJD)}}function ar(a,o){if(1&a&&e._UZ(0,"div",19),2&a){const t=e.oxw(2);e.Q6J("innerHTML",t.upgrade.costLabel,e.oJD)}}function ir(a,o){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9),e._uU(11),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e.YNc(14,nr,1,1,"div",11),e.TgZ(15,"div",12),e._uU(16),e.TgZ(17,"span",13),e._uU(18),e.qZA(),e._uU(19),e.qZA(),e.YNc(20,ar,1,1,"div",14),e.qZA()(),e._UZ(21,"div",15)(22,"div",16)(23,"app-mechanics-view",17),e.qZA()()),2&a){const t=e.oxw();e.Gre("skill slormancer-tooltip ",t.upgrade.damageTypes.length>0?t.upgrade.damageTypes[0]:"",""),e.xp6(2),e.AsE("",t.getTypeLabel(t.upgrade.type),": ",t.upgrade.name,""),e.xp6(6),e.Q6J("src",t.upgrade.icon,e.LSH),e.xp6(3),e.AsE("",t.MASTERY_LABEL," ",t.upgrade.masteryRequired,""),e.xp6(2),e.Oqu(t.getTypeLabel(t.upgrade.type)),e.xp6(1),e.Q6J("ngIf",null!==t.upgrade.genresLabel),e.xp6(2),e.hij("",t.RANK_LABEL,": "),e.xp6(2),e.Oqu(t.upgrade.rank),e.xp6(1),e.hij("/",t.upgrade.maxRank,""),e.xp6(1),e.Q6J("ngIf",null!==t.upgrade.costLabel),e.xp6(2),e.Q6J("innerHTML",t.upgrade.description,e.oJD),e.xp6(1),e.Q6J("classMechanics",t.upgrade.relatedClassMechanics)("mechanics",t.upgrade.relatedMechanics)("buffs",t.upgrade.relatedBuffs)}}let Ke=(()=>{class a{constructor(t){this.slormancerTranslateService=t,this.RANK_LABEL=this.slormancerTranslateService.translate("tt_rank"),this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.upgrade=null,this.mouseOverElement=null}getTypeLabel(t){return this.slormancerTranslateService.translate("tt_"+t)}showMechanicOverlay(t){this.mouseOverElement=t}hideMechanicOverlay(){this.mouseOverElement=null}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Y.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-upgrade-view"]],inputs:{upgrade:"upgrade"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"mastery"],[1,"type"],["class","genre",3,"innerHTML",4,"ngIf"],[1,"rank"],[1,"current"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"classMechanics","mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,ir,24,18,"div",0),2&t&&e.Q6J("ngIf",null!==n.upgrade)},dependencies:[m.O5,Ie],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current, .skill[_ngcontent-%COMP%]  .head{color:#ce4607}.skill[_ngcontent-%COMP%]  .mag .value{color:#bb1fe2}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .value.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current, .skill.mag[_ngcontent-%COMP%]  .head{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana, .skill.mag[_ngcontent-%COMP%]  .head.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life, .skill.mag[_ngcontent-%COMP%]  .head.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),a})();function or(a,o){if(1&a&&e._UZ(0,"app-skill-upgrade-view",8),2&a){const t=e.oxw(3);e.Q6J("upgrade",t.upgrade)}}function rr(a,o){if(1&a&&e.YNc(0,or,1,1,"ng-template",7),2&a){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function lr(a,o){if(1&a&&(e.TgZ(0,"div",1,2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,rr,1,2,null,6),e.qZA()),2&a){const t=e.oxw();e.ekj("hidden-search",t.hiddenBySearch)("passive",t.isPassive(t.upgrade))("readonly",t.readonly),e.xp6(2),e.ekj("equipped",t.equipped),e.xp6(1),e.Q6J("src",t.upgrade.icon,e.LSH),e.xp6(1),e.ekj("max",t.upgrade.rank===t.upgrade.maxRank),e.xp6(1),e.Oqu(t.upgrade.rank===t.upgrade.maxRank?"Max":t.upgrade.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}let Xe=(()=>{class a extends T.B{constructor(t){super(),this.searchService=t,this.upgrade=null,this.selected=!1,this.equipped=!1,this.overlay=!1,this.readonly=!1,this.hiddenBySearch=!1,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>this.hiddenBySearch=null!==t&&null!==this.upgrade&&!this.searchService.upgradeMatchSearch(this.upgrade))}isPassive(t){return t.type===G.W.Passive}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(te.o))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-upgrade-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{upgrade:"upgrade",selected:"selected",equipped:"equipped",overlay:"overlay",readonly:"readonly"},features:[e.qOj],decls:1,vars:1,consts:[["class","upgrade","cdkOverlayOrigin","",3,"hidden-search","passive","readonly",4,"ngIf"],["cdkOverlayOrigin","",1,"upgrade"],["trigger","cdkOverlayOrigin"],[1,"equipped-border"],[1,"skill-icon",3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"upgrade"]],template:function(t,n){1&t&&e.YNc(0,lr,7,13,"div",0),2&t&&e.Q6J("ngIf",null!==n.upgrade)},dependencies:[m.O5,A.pI,A.xu,Ke],styles:[".upgrade[_ngcontent-%COMP%]{background-color:#101010;position:relative;z-index:1}.upgrade.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.2}.upgrade.passive[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.upgrade[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:10px;border-radius:4px}.upgrade[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{width:46px;height:46px;position:relative;border:3px solid black;padding:2px;background-color:#202020}.upgrade[_ngcontent-%COMP%]   .equipped-border.equipped[_ngcontent-%COMP%]{background-color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black}.upgrade[_ngcontent-%COMP%]:not(.readonly)   .equipped-border[_ngcontent-%COMP%]{cursor:pointer}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{padding:0;border-width:4px;width:44px;height:44px}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0}"]}),a})();function cr(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.maximize(i.selectedSkill))}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function sr(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.equipSupport(i.selectedSkill))}),e._uU(1," Equip as Support skill "),e.qZA()}}function mr(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.equipPrimary(i.selectedSkill))}),e._uU(1," Equip as Primary skill "),e.qZA()}}function _r(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.equipSecondary(i.selectedSkill))}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function dr(a,o){if(1&a&&(e.YNc(0,cr,2,0,"button",4),e.YNc(1,sr,2,0,"button",4),e.YNc(2,mr,2,0,"button",4),e.YNc(3,_r,2,0,"button",4)),2&a){const t=e.oxw();e.Q6J("ngIf",null!==t.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSupportSkill(t.selectedSkill)&&t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedPrimarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSecondarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill))}}let gr=(()=>{class a extends T.B{constructor(t,n,i,r){super(),this.buildStorageService=t,this.messageService=n,this.slormancerSkillService=i,this.slormancerCharacterModifierService=r,this.selectedSkill=null,this.menu=null}ngOnInit(){}openSettings(){return null!==this.menu&&this.menu.openMenu(),!1}isSupport(t){return t.skill.type===G.W.Support}maximize(t){if(null!==this.buildStorageService.getLayer()){t.skill.baseLevel=t.skill.maxLevel,this.slormancerSkillService.updateSkillModel(t.skill);for(const i of t.upgrades)i.baseRank=i.maxRank,this.slormancerSkillService.updateUpgradeModel(i);this.buildStorageService.saveLayer(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name)}}equipSupport(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setSupportSkill(n.character,t.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.buildStorageService.saveLayer())}equipPrimary(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setPrimarySkill(n.character,t.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.buildStorageService.saveLayer())}equipSecondary(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setSecondarySkill(n.character,t.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.buildStorageService.saveLayer())}isEquippedSupportSkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.supportSkill===t.skill}isEquippedPrimarySkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.primarySkill===t.skill}isEquippedSecondarySkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.secondarySkill===t.skill}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(R.e),e.Y36(je.A),e.Y36(le.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-settings-skills"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let i;e.iGM(i=e.CRH())&&(n.menu=i.first)}},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return n.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,dr,4,4,"ng-template",3),e.qZA()),2&t){const i=e.MAs(3);e.Q6J("matMenuTriggerFor",i),e.xp6(2),e.Q6J("overlapTrigger",!0)}},dependencies:[m.O5,Z.Hw,x.VK,x.OP,x.p6,x.KA],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),a})();function ur(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"img",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.incrementSkill(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.decrementSkill(r))}),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.ekj("selected",n.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",n.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.iconLarge+".png",e.LSH)}}function pr(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"div",4)(1,"img",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.incrementSkill(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.decrementSkill(r))}),e.qZA()()}if(2&a){const t=o.$implicit,n=e.oxw(2);e.ekj("selected",n.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",n.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH)}}function fr(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.incrementUpgrade(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.decrementUpgrade(r))}),e.qZA()}if(2&a){const t=o.$implicit,n=e.oxw(4);e.Q6J("upgrade",t)("equipped",n.isUpgradeEquipped(t))}}function hr(a,o){if(1&a&&(e.TgZ(0,"div",16)(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,fr,1,2,"app-upgrade-slot",19),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",t," "),e.xp6(2),e.Q6J("ngForOf",n.getLineUpgrades(t))}}function Cr(a,o){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"app-settings-skills",9)(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11)(5,"div",12),e.YNc(6,hr,5,2,"div",13),e.qZA()(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",t.selectedSkill),e.xp6(1),e.Q6J("skill",t.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",t.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",t.selectedUpgrade)}}function vr(a,o){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",1),e.YNc(3,ur,2,5,"div",2),e.YNc(4,pr,2,5,"div",2),e.qZA(),e.YNc(5,Cr,9,4,"div",3),e.qZA()()),2&a){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.getSupportSkills(t.character)),e.xp6(1),e.Q6J("ngForOf",t.getActiveSkills(t.character)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill)}}let br=(()=>{class a extends T.B{constructor(t,n,i){super(),this.buildStorageService=t,this.slormancerSkillService=n,this.slormancerCharacterModifierService=i,this.character=null,this.selectedSkill=null,this.selectedUpgrade=null,this.selectedSkillLines=[]}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.updateSelectedSkill()})}updateSelectedSkill(){const t=this.character,n=this.selectedSkill;let i=null;null===t?i=null:null===n?i=(0,C.lA)(null!==t.supportSkill?t.skills.find(r=>r.skill===t.supportSkill):t.skills[0]):(i=(0,C.lA)(t.skills.find(r=>r.skill.id===n.skill.id)),null===i&&(i=(0,C.lA)(t.skills[0]))),this.selectSkill(i)}getSupportSkills(t){return t.skills.filter(n=>n.skill.type===G.W.Support)}getActiveSkills(t){return t.skills.filter(n=>n.skill.type===G.W.Active)}isSkillEquipped(t){return null!==this.character&&(this.character.primarySkill===t.skill||this.character.secondarySkill===t.skill||this.character.supportSkill===t.skill)}isEquippedSupportSkill(t){return null!==this.character&&this.character.supportSkill===t.skill}isEquippedPrimarySkill(t){return null!==this.character&&this.character.primarySkill===t.skill}isEquippedSecondarySkill(t){return null!==this.character&&this.character.secondarySkill===t.skill}isSkillSelected(t){return this.selectedSkill===t}selectSkill(t){this.selectedSkill!==t&&(this.selectedSkill=t,this.selectedSkillLines=null===t?[]:t.upgrades.map(n=>n.line).filter(C.mr).sort(),this.selectedUpgrade=null===t?null:(0,C.lA)(t.upgrades[0]))}incrementSkill(t){return this.selectedSkill===t?t.skill.baseLevel<t.skill.maxLevel&&(t.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(t.skill),this.buildStorageService.saveLayer(),console.log(t)):this.selectSkill(t),!1}decrementSkill(t){return this.selectedSkill===t?t.skill.baseLevel>1&&(t.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(t.skill),this.buildStorageService.saveLayer(),console.log(t)):this.selectSkill(t),!1}getLineUpgrades(t){let n=[];return null!==this.selectedSkill&&(n=this.selectedSkill.upgrades.filter(i=>i.line===t)),n}isUpgradeEquipped(t){let n=!1;return null!==this.selectedSkill&&(n=void 0!==this.selectedSkill.selectedUpgrades.find(i=>t.id===i)),n}incrementUpgrade(t){if(null!==this.selectedSkill&&null!==this.character){let n=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,n=!0),this.isUpgradeEquipped(t)?!n&&t.baseRank<t.maxRank&&(t.baseRank++,this.slormancerSkillService.updateUpgradeModel(t),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),0===t.baseRank&&(t.baseRank=1,this.slormancerSkillService.updateUpgradeModel(t)),this.buildStorageService.saveLayer()),console.log(t)}return!1}decrementUpgrade(t){if(null!==this.selectedSkill&&null!==this.character){let n=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,n=!0),this.isUpgradeEquipped(t)?!n&&t.baseRank>1&&(t.baseRank--,this.slormancerSkillService.updateUpgradeModel(t),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),this.buildStorageService.saveLayer()),console.log(t)}return!1}isSupport(t){return t.skill.type===G.W.Support}equipSupport(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t.skill),this.buildStorageService.saveLayer())}equipPrimary(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t.skill),this.buildStorageService.saveLayer())}equipSecondary(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t.skill),this.buildStorageService.saveLayer())}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y),e.Y36(je.A),e.Y36(le.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(t,n){1&t&&e.YNc(0,vr,6,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[m.sg,m.O5,w.a8,w.dn,Re,Ke,Xe,gr],styles:['[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),a})();var Mr=g(8376);function xr(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Or(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function yr(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function Pr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,yr,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Sr(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Pr,10,4,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function kr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Tr(a,o){if(1&a&&(e.ynx(0),e.YNc(1,kr,10,3,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function wr(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," ")}}function Ar(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,xr,2,0,"span",2),e.qZA(),e.YNc(9,Or,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Sr,2,1,"ng-container",12),e.YNc(15,Tr,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,wr,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Zr(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Ir(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Er(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function Lr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Er,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Jr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,"%")," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function qr(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," ")}}function Ur(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Zr,2,0,"span",2),e.qZA(),e.YNc(9,Ir,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Lr,10,4,"div",15),e.YNc(15,Jr,10,3,"div",15),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,qr,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Nr(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Fr(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Br(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function Qr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Br,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Hr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=o.$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",t.value,"% "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Rr(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Nr,2,0,"span",2),e.qZA(),e.YNc(9,Fr,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Qr,10,4,"div",15),e.YNc(15,Hr,10,3,"div",15),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function Yr(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Gr(a,o){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Vr(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function Dr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Vr,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function jr(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Dr,10,4,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function Kr(a,o){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Xr(a,o){if(1&a&&(e.ynx(0),e.YNc(1,Kr,10,3,"div",13),e.BQk()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function zr(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," ")}}function $r(a,o){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Yr,2,0,"span",2),e.qZA(),e.YNc(9,Gr,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,jr,2,1,"ng-container",12),e.YNc(15,Xr,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,zr,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Wr(a,o){1&a&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function el(a,o){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula"),e.YNc(3,Wr,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.totalHasMinMax(t.mergedStat)),e.xp6(2),e.hij(" ",t.getMinFormula(t.mergedStat)," ")}}function tl(a,o){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA()()),2&a){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.getMaxFormula(t.mergedStat)," ")}}function nl(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.total,t.mergedStat.suffix)," ")}}function al(a,o){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.totalDisplayed,t.mergedStat.suffix)," ")}}function il(a,o){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Total (shown in stats)"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,al,2,1,"div",8),e._UZ(6,"div",9)(7,"div",10),e.qZA()),2&a){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.minValueToString(t.mergedStat.totalDisplayed,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function ol(a,o){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,Ar,24,7,"ng-container",2),e.YNc(2,Ur,24,7,"ng-container",2),e.YNc(3,Rr,16,5,"ng-container",2),e.YNc(4,$r,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,el,6,2,"div",4),e.YNc(8,tl,5,1,"div",4),e.TgZ(9,"div",5)(10,"div",6),e._uU(11,"Total"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,nl,2,1,"div",8),e._UZ(15,"div",9)(16,"div",10),e.qZA(),e.YNc(17,il,8,2,"div",4),e.qZA()),2&a){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasFlatValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.percent.length>0||t.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.multiplier.length>0||t.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",t.hasFlatExtraValues(t.mergedStat)),e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)&&t.totalHasMinMax(t.mergedStat)),e.xp6(5),e.hij(" ",t.minValueToString(t.mergedStat.total,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(3),e.Q6J("ngIf",t.hasDisplayPrecision(t.mergedStat))}}let rl=(()=>{class a{constructor(t,n){this.slormancerTranslateService=t,this.slormancerStatUpdaterService=n,this.mergedStat=null,this.percent=!1}translate(t){return this.slormancerTranslateService.translate(t)}getSource(t){let n="";return"synergy"in t?n="Synergy":"character"in t?n="Character":"skill"in t?n="Skill":"upgrade"in t?n="Upgrade":"item"in t?n="Item":"ancestralLegacy"in t?n="Ancestral Legacy":"attribute"in t?n="Attribute":"reaper"in t?n="Reaper":"activable"in t?n="Activable":"mechanic"in t?n="Mechanic":"classMechanic"in t?n="Class Mechanic":"ultimatum"in t&&(n="Ultimatum"),n}getSourceName(t){let n="";return"synergy"in t?n=t.synergy:"skill"in t?n=t.skill.nameLabel:"upgrade"in t?n=t.upgrade.name:"item"in t?n=t.item.name:"ancestralLegacy"in t?n=t.ancestralLegacy.name:"attribute"in t?n=t.attribute.attributeName:"reaper"in t?n=t.reaper.name:"activable"in t?n=t.activable.name:"mechanic"in t?n=t.mechanic.name:"classMechanic"in t?n=t.classMechanic.name:"ultimatum"in t&&(n=t.ultimatum.title),n}valueToString(t,n){return"number"==typeof t?(0,O.NM)(t,5)+n:(0,O.NM)(t.min,5)+n+"-"+(0,O.NM)(t.max,5)+n}minValueToString(t,n,i=!1){const r=(0,O.NM)("number"==typeof t?t:t.min,5);return(r>=0&&i?"+":"")+r+n}maxValueToString(t,n,i=!1){const r=(0,O.NM)("number"==typeof t?t:t.max,5);return(r>=0&&i?"+":"")+r+n}getTotalFlat(t){return this.slormancerStatUpdaterService.getTotalFlat(t)}getTotalFlatExtra(t){return this.slormancerStatUpdaterService.getTotalFlatExtra(t)}getTotalPercent(t){const n=this.slormancerStatUpdaterService.addNumberValues(t.values.percent.map(r=>r.value)),i=n+this.slormancerStatUpdaterService.addNumberValues(t.values.maxPercent.map(r=>r.value));return n!==i?{min:n,max:i}:n}getTotalFlatPercent(t){const n=this.slormancerStatUpdaterService.getTotalFlatAndPercent(t);return this.valueToString(n,t.suffix)}getTotal(t){const n=this.slormancerStatUpdaterService.getTotal(t);return this.valueToString(n,t.suffix)}hasFlatValues(t){return t.values.flat.filter(n=>!n.extra).length>0||t.values.max.filter(n=>!n.extra).length>0}hasFlatExtraValues(t){return t.values.flat.filter(n=>n.extra).length>0||t.values.max.filter(n=>n.extra).length>0}hasPercentValues(t){return t.values.percent.length>0||t.values.maxPercent.length>0}hasMultiplierValues(t){return t.values.multiplier.length>0||t.values.maxMultiplier.length>0}showFormula(t){return(t.values.flat.filter(d=>!d.extra).length>0||t.values.max.filter(d=>!d.extra).length>0?1:0)+(t.values.percent.length>0||t.values.maxPercent.length>0?1:0)+(t.values.multiplier.length>0||t.values.maxMultiplier.length>0?1:0)+(t.values.flat.filter(d=>d.extra).length>0||t.values.max.filter(d=>d.extra).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?1:0)>=2}totalHasMinMax(t){return"number"!=typeof t.total}getMinFormula(t){let n=this.slormancerStatUpdaterService.getTotal(t),i=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),l=t.values.multiplier.map(u=>u.value),s=this.slormancerStatUpdaterService.getTotalFlatExtra(t);i="number"==typeof i?i:i.min,r="number"==typeof r?r:r.min,s="number"==typeof s?s:s.min;let d=(0,O.NM)("number"==typeof n?n:n.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?d+="(1 - "+[i,r,...l].filter(u=>0!==u).map(u=>Math.max(0,100-u)/100).join(" * ")+") * 100":(d+="round( "+this.valueToString(i,t.suffix)+[r,...l].filter(u=>0!==u).map(u=>" * "+(u+100)/100).join("")+" )",0!==s&&(d+=s>0?" + "+s:" - "+Math.abs(s))),d}getMaxFormula(t){let n=this.slormancerStatUpdaterService.getTotal(t),i=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),l=this.slormancerStatUpdaterService.getTotalFlatExtra(t);const s=t.values.multiplier.map(u=>u.value);i="number"==typeof i?i:i.max,r="number"==typeof r?r:r.max,l="number"==typeof l?l:l.max;let d=(0,O.NM)("number"==typeof n?n:n.max,5)+" = ";return d+="round( "+this.valueToString(i,t.suffix)+[r,...s].filter(u=>0!==u).map(u=>" * "+(u+100)/100).join("")+" )",0!==l&&(d+=l>0?" + "+l:" - "+Math.abs(l)),d}hasDisplayPrecision(t){return t.totalDisplayed!==t.total}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(Y.n),e.Y36(Mr.C))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(t,n){1&t&&e.YNc(0,ol,18,10,"div",0),2&t&&e.Q6J("ngIf",null!==n.mergedStat)},dependencies:[m.sg,m.O5],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),a})();function ll(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"app-main-stats",2),e.NdJ("selected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.selectMergedStat(i))}),e.qZA()()(),e.TgZ(4,"mat-card")(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA()()()}if(2&a){const t=e.oxw();e.xp6(3),e.Q6J("stats",t.stats),e.xp6(3),e.Q6J("mergedStat",t.selectedMergedStat)}}const cl=[{path:"",component:Ft,children:[{path:"inventory",component:tr},{path:"skills",component:br},{path:"ancestral-legacies",component:ln},{path:"attributes",component:wn},{path:"stats",component:(()=>{class a extends T.B{constructor(t){super(),this.buildStorageService=t,this.stats=null,this.selectedMergedStat=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,k.R)(this.unsubscribe)).subscribe(t=>{this.stats=null===t?null:t.character.stats})}selectMergedStat(t){this.selectedMergedStat=t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(t,n){1&t&&e.YNc(0,ll,7,2,"main",0),2&t&&e.Q6J("ngIf",null!==n.stats)},dependencies:[m.O5,w.a8,w.dn,he,rl],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a})()},{path:"config",component:fa},{path:"compare",component:Kn},{path:"calcs",component:Un},{path:"**",redirectTo:"inventory"}]}];let sl=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[E.Bz.forChild(cl),E.Bz]}),a})(),ze=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,ae.m,sl]}),a})();const ml=[{path:"",component:(()=>{class a{constructor(t){this.router=t,this.created=new e.vpe}redirectToBuild(){this.router.navigate(["slorm-planner","build"])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(E.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-first-build"]],decls:4,vars:0,consts:[[3,"created"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"app-create-build",0),e.NdJ("created",function(){return n.redirectToBuild()}),e.qZA()()()())},dependencies:[w.a8,w.dn,we],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;padding:20px;width:380px}@media (max-width: 374px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a})()}];let _l=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[E.Bz.forChild(ml),E.Bz]}),a})(),$e=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,ae.m,_l,A.U8]}),a})();var dl=g(1828);function gl(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!i.showSummary)}),e._uU(1,"Show Stats"),e.qZA()}}function ul(a,o){if(1&a){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.showSummary=!i.showSummary)}),e._uU(1,"Show Summary"),e.qZA()}}function pl(a,o){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function fl(a,o){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function hl(a,o){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Cl(a,o){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"app-ancestral-legacy-slot",41),e.qZA()),2&a){const t=o.$implicit;e.xp6(1),e.Q6J("ancestralLegacy",t)("readonly",!0)("overlay",!0)}}function vl(a,o){if(1&a&&e._UZ(0,"app-attribute-line",43),2&a){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("short",!0)("readonly",!0)("iconShift",!0)("attribute",n.character.attributes.allocated[t])("remainingPoints",n.character.attributes.remainingPoints)}}function bl(a,o){if(1&a&&(e.ynx(0),e.YNc(1,vl,1,5,"app-attribute-line",42),e.BQk()),2&a){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.showAttribute(t))}}function Ml(a,o){if(1&a&&(e.TgZ(0,"mat-card",9)(1,"mat-card-content")(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13),e._uU(6),e.qZA(),e._UZ(7,"img",14),e.qZA(),e.TgZ(8,"div",12)(9,"div",13),e._uU(10),e.qZA(),e._UZ(11,"img",15),e.qZA()(),e.TgZ(12,"div",16)(13,"div",12)(14,"div",13),e._uU(15),e.qZA(),e._UZ(16,"img",17),e.qZA(),e.TgZ(17,"div",12)(18,"div",13),e._uU(19),e.qZA(),e._UZ(20,"img",18),e.qZA()(),e.TgZ(21,"div",19)(22,"div",12)(23,"div",13),e._uU(24),e.qZA(),e._UZ(25,"img",20),e.qZA(),e.TgZ(26,"div",12)(27,"div",13),e._uU(28),e.qZA(),e._UZ(29,"img",21),e.qZA(),e.TgZ(30,"div",12)(31,"div",13),e._uU(32),e.qZA(),e._UZ(33,"img",22),e.qZA()()(),e.TgZ(34,"div",23)(35,"h4"),e._uU(36,"Support Skill"),e.qZA(),e.TgZ(37,"div",24)(38,"div",25),e._UZ(39,"app-skill-slot",26),e.qZA(),e.TgZ(40,"div",27),e.YNc(41,pl,2,5,"div",28),e.qZA()()(),e.TgZ(42,"div",23)(43,"h4"),e._uU(44,"Primary Skill"),e.qZA(),e.TgZ(45,"div",24)(46,"div",25),e._UZ(47,"app-skill-slot",29),e.qZA(),e.TgZ(48,"div",27),e.YNc(49,fl,2,5,"div",28),e.qZA()()(),e.TgZ(50,"div",23)(51,"h4"),e._uU(52,"Secondary Skill"),e.qZA(),e.TgZ(53,"div",24)(54,"div",25),e._UZ(55,"app-skill-slot",29),e.qZA(),e.TgZ(56,"div",27),e.YNc(57,hl,2,5,"div",28),e.qZA()()(),e.TgZ(58,"div",30)(59,"div",31)(60,"h4"),e._uU(61,"Activables"),e.qZA(),e.TgZ(62,"div",32)(63,"div",33),e._UZ(64,"app-activable-slot",34),e.qZA(),e.TgZ(65,"div",33),e._UZ(66,"app-activable-slot",34),e.qZA(),e.TgZ(67,"div",33),e._UZ(68,"app-activable-slot",34),e.qZA(),e.TgZ(69,"div",33),e._UZ(70,"app-activable-slot",34),e.qZA()()(),e.TgZ(71,"div",35)(72,"h4"),e._uU(73,"Ancestral Legacies"),e.qZA(),e.TgZ(74,"div",32),e.YNc(75,Cl,2,3,"div",36),e.qZA()()(),e.TgZ(76,"div",37),e.YNc(77,bl,2,1,"ng-container",38),e.qZA()()()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("matTooltip",t.PHYSICAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(t.getPhysicalDamages()),e.xp6(3),e.Q6J("matTooltip",t.ELEMENTAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(t.getElementalDamages()),e.xp6(4),e.Q6J("matTooltip",t.MAX_LIFE_LABEL),e.xp6(1),e.Oqu(t.getMaximumLife()),e.xp6(3),e.Q6J("matTooltip",t.MAX_MANA_LABEL),e.xp6(1),e.Oqu(t.getMaximumMana()),e.xp6(4),e.Q6J("matTooltip",t.MAX_ARMOR_LABEL),e.xp6(1),e.Oqu(t.getArmor()),e.xp6(3),e.Q6J("matTooltip",t.MAX_ELEMENTAL_RESISTANCE_LABEL),e.xp6(1),e.Oqu(t.getElementalResistance()),e.xp6(3),e.Q6J("matTooltip",t.MAX_DODGE_LABEL),e.xp6(1),e.Oqu(t.getDodge()),e.xp6(7),e.Q6J("readonly",!0)("skill",t.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.supportSkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",t.character.primarySkill),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.primarySkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",t.character.secondarySkill),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.secondarySkill)),e.xp6(7),e.Q6J("activable",t.character.activable1)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable2)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable3)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable4)("readonly",!0),e.xp6(5),e.Q6J("ngForOf",t.getAncestralLegacies()),e.xp6(2),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}function xl(a,o){if(1&a&&(e.TgZ(0,"mat-card",44)(1,"mat-card-content"),e._UZ(2,"app-main-stats",45),e.qZA()()),2&a){const t=e.oxw();e.xp6(2),e.Q6J("stats",t.character.stats)}}let Ol=(()=>{class a{constructor(t,n,i,r,l,s,d){this.router=n,this.buildStorageService=i,this.buildService=r,this.slormancerCharacterUpdaterService=l,this.slormancerDpsService=s,this.slormancerTranslateService=d,this.PHYSICAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_physical_damage"),this.ELEMENTAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_elemental_damage"),this.MAX_LIFE_LABEL=this.slormancerTranslateService.translate("max_health"),this.MAX_MANA_LABEL=this.slormancerTranslateService.translate("max_mana"),this.MAX_ARMOR_LABEL=this.slormancerTranslateService.translate("armor"),this.MAX_DODGE_LABEL=this.slormancerTranslateService.translate("dodge"),this.MAX_ELEMENTAL_RESISTANCE_LABEL=this.slormancerTranslateService.translate("elemental_resist"),this.ALL_ATTRIBUTES=h.A,this.showSummary=!0,this.combatBuffControl=new c.NI(!1),this.character=t.snapshot.data.character,this.combatBuffControl.valueChanges.subscribe(()=>this.updateConfiguration()),this.updateConfiguration()}updateConfiguration(){let t=Object.assign({},this.combatBuffControl.value?ot:B);const n=[this.character.primarySkill,this.character.secondarySkill,this.character.activable1,this.character.activable2,this.character.activable3,this.character.activable4].filter(C.BX).map(i=>"manaCost"in i?i.manaCost:i.cost).filter(C.BX);t.minimum_unreserved_mana=Math.max(...n,0),this.slormancerCharacterUpdaterService.updateCharacter(this.character,t)}getStat(t){let n=0;const i=this.character.stats.find(r=>r.stat===t);return i&&(n=i.total),n}valueToString(t){return"number"==typeof t?t.toString():t.min+"-"+t.max}getPhysicalDamages(){const t=this.getStat("critical_chance"),n=this.getStat("critical_damage"),i=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),l=this.getStat("physical_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(l,t,i,n,r)))}getElementalDamages(){const t=this.getStat("critical_chance"),n=this.getStat("critical_damage"),i=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),l=this.getStat("elemental_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(l,t,i,n,r)))}getMaximumLife(){return this.valueToString(this.getStat("max_health"))}getMaximumMana(){return this.valueToString(this.getStat("max_mana"))}getArmor(){return this.valueToString(this.getStat("armor"))}getDodge(){return this.valueToString(this.getStat("dodge"))}getElementalResistance(){return this.valueToString(this.getStat("elemental_resist"))}getSkillUpgrades(t){let n=[];const i=this.character.skills.find(r=>r.skill===t);return i&&(n=i.upgrades.filter(r=>i.selectedUpgrades.includes(r.id))),n}getAncestralLegacies(){return this.character.ancestralLegacies.ancestralLegacies.filter(t=>this.character.ancestralLegacies.activeAncestralLegacies.includes(t.id))}showAttribute(t){const n=this.character.attributes.allocated[t];return n.rank>0||n.bonusRank>0}import(){const t=this.buildService.createBuildWithCharacter("Imported build","Imported layer",this.character);this.buildStorageService.addBuild(t),this.router.navigate(["slorm-planner","build"])}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(E.gz),e.Y36(E.F0),e.Y36(y),e.Y36(j),e.Y36(z.P),e.Y36(dl.v),e.Y36(Y.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-character"]],decls:18,vars:10,consts:[[1,"equipment"],[3,"character","readonly"],[1,"weapon"],[3,"readonly","character"],["color","primary",3,"formControl"],["color","primary","mat-flat-button","",3,"click"],["color","primary","mat-flat-button","",3,"click",4,"ngIf"],["class","summary",4,"ngIf"],["class","stats",4,"ngIf"],[1,"summary"],[1,"stats-summary"],[1,"damages"],[1,"cell"],[1,"value",3,"matTooltip"],["src","assets/img/icon/stat/physical.png"],["src","assets/img/icon/stat/magical.png"],[1,"ressources"],["src","assets/img/icon/stat/life.png"],["src","assets/img/icon/stat/mana.png"],[1,"defenses"],["src","assets/img/icon/stat/armor.png"],["src","assets/img/icon/stat/elemental_resistance.png"],["src","assets/img/icon/stat/dodge.png"],[1,"skill-info"],[1,"skill-line"],[1,"skill"],[3,"readonly","skill","support"],[1,"upgrades"],["class","upgrade",4,"ngFor","ngForOf"],[3,"readonly","skill"],[1,"activables-ancestral-legacies"],[1,"activables"],[1,"slots"],[1,"slot"],[3,"activable","readonly"],[1,"ancestral-legacies"],["class","slot",4,"ngFor","ngForOf"],[1,"attributes"],[4,"ngFor","ngForOf"],[1,"upgrade"],[3,"upgrade","readonly","overlay","equipped","selected"],[3,"ancestralLegacy","readonly","overlay"],[3,"short","readonly","iconShift","attribute","remainingPoints",4,"ngIf"],[3,"short","readonly","iconShift","attribute","remainingPoints"],[1,"stats"],[3,"stats"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"mat-card",0)(2,"mat-card-content")(3,"h3"),e._uU(4),e.qZA(),e._UZ(5,"app-character-equipment",1)(6,"hr"),e.TgZ(7,"div",2),e._UZ(8,"app-reaper-slot",3),e.qZA()(),e.TgZ(9,"mat-card-actions")(10,"mat-checkbox",4),e._uU(11,"Activate combat buffs"),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){return n.import()}),e._uU(13,"Import"),e.qZA(),e.YNc(14,gl,2,0,"button",6),e.YNc(15,ul,2,0,"button",6),e.qZA()(),e.YNc(16,Ml,78,34,"mat-card",7),e.YNc(17,xl,3,1,"mat-card",8),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.character.fullName),e.xp6(1),e.Q6J("character",n.character)("readonly",!0),e.xp6(3),e.Q6J("readonly",!0)("character",n.character),e.xp6(2),e.Q6J("formControl",n.combatBuffControl),e.xp6(4),e.Q6J("ngIf",n.showSummary),e.xp6(1),e.Q6J("ngIf",!n.showSummary),e.xp6(1),e.Q6J("ngIf",n.showSummary),e.xp6(1),e.Q6J("ngIf",!n.showSummary))},dependencies:[m.sg,m.O5,S.lW,w.a8,w.dn,w.hq,ce.oG,F.gM,c.JJ,c.oH,He,Ge,Ye,De,Xe,Le,Je,he],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{min-width:490px;max-width:490px;width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:20px;background-color:#161412;border:3px solid rgb(60,60,60)}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:auto}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:400}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;font-size:large}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;flex-grow:1;flex-basis:0;border-radius:16px;border:4px solid black;background-color:#202020;height:56px;padding:8px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;text-align:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;min-height:60px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{width:80px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]{flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%]{padding:4px;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px;display:block;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{min-height:60px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%]{float:left}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:725px;padding-right:16px;overflow:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:auto}}"]}),a})(),We=(()=>{class a{constructor(t,n,i){this.importExportService=t,this.messageService=n,this.router=i}back(){this.router.navigateByUrl("/")}resolve(t){return new Promise(n=>{const i=(0,C.lA)(t.params.key);if(null!==i){const r=this.importExportService.import(i);null!==r.character?n(r.character):(this.messageService.error("Failed to load shared character"),this.back())}else this.back()})}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(re),e.LFG(R.e),e.LFG(E.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})();const yl=[{path:"build/:key",component:Ol,resolve:{character:We}}];let Pl=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[We],imports:[E.Bz.forChild(yl),E.Bz]}),a})(),et=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,ae.m,Pl,A.U8]}),a})(),tt=(()=>{class a{constructor(t,n){this.buildStorageService=t,this.router=n}canActivate(){return 0!==this.buildStorageService.getBuilds().length||(this.router.navigate(["slorm-planner","create"]),!1)}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y),e.LFG(E.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})(),nt=(()=>{class a{constructor(t,n){this.buildStorageService=t,this.router=n}canActivate(){return!(this.buildStorageService.getBuilds().length>0&&(this.router.navigate(["slorm-planner","build"]),1))}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(y),e.LFG(E.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a})();const Sl=[{path:"build",canActivate:[tt],loadChildren:()=>ze},{path:"view",loadChildren:()=>et},{path:"create",canActivate:[nt],loadChildren:()=>$e},{path:"**",pathMatch:"full",redirectTo:"build"}];let kl=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[tt,nt],imports:[E.Bz.forChild(Sl),E.Bz]}),a})(),Tl=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[m.ez,ae.m,kl,ze,et,$e]}),a})()}}]);