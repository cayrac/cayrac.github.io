"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[302],{302:function(sc,Qe,h){h.r(Qe),h.d(Qe,{SlormPlannerModule:function(){return lc}});var g=h(3144),p=h(5671),_=h(9808),Re=h(9881),e=h(5542),ke=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[_.ez,Re.q],Re.q]}),a}(),Y=h(1083),J=h(136),q=h(7777),Ye=h(7579),U=function(){var a=function(){function l(){(0,p.Z)(this,l),this.unsubscribe=new Ye.x}return(0,g.Z)(l,[{key:"ngOnDestroy",value:function(){this.unsubscribe.next(),this.unsubscribe.complete()}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["ng-component"]],decls:0,vars:0,template:function(n,t){},encapsulation:2}),a}(),I=h(4902),T=h(4456),xe=h(1135),B=h(7762),fe=h(5457),O=h(5581),kt=h(8372),ce=h(2340),D=h(4373),ve=h(2469),ee={attunment_pulse_current_school:ve.H.Arcanic,completed_achievements:0,elder_slorms:0,active_inner_fire:0,mana_lost_last_second:0,mana_gained_last_second:0,knight_other_level:D.AR,enemy_under_command:0,enemies_in_breach_range:0,elite_under_command:0,totems_under_control:0,traps_nearby:0,serenity:0,arcanic_emblems:0,temporal_emblems:0,obliteration_emblems:0,last_cast_tormented:!1,last_cast_delighted:!1,next_cast_is_fortunate:!1,next_cast_is_perfect:!1,next_cast_is_new_emblem:!0,use_enemy_state:!1,enemy_percent_missing_health:0,percent_missing_health:0,percent_missing_mana:0,overall_reputation:0,crit_recently:!1,dodge_recently:!1,hits_taken_recently:0,skill_cast_recently:0,frostbolt_shot_recently:0,slormocide_60:0,goldbane_5:0,rebounds_before_hit:0,pierces_before_hit:0,enemies_in_rain_of_arrow:0,enemies_affected_by_latent_storm:0,clone_is_in_breach_range:!1,target_is_close:!1,target_is_isolated:!1,target_is_tracked:!1,target_is_time_locked:!1,target_is_in_breach_range:!1,enemy_is_poisoned:!1,enemy_has_military_oppression:!1,target_has_negative_effect:!1,target_is_skewered:!1,enemy_splintered_stacks:0,revengeance_stacks:0,target_has_broken_armor:!1,target_has_remnant_vulnerability:!1,target_has_arcane_discordance:!1,target_has_temporal_discordance:!1,target_has_obliteration_discordance:!1,is_first_arrow_shot_hit:!1,is_hit_blocked:!1,is_last_volley:!1,is_channeling_whirlwind:!1,is_channeling_arcane_barrier:!1,is_channeling_ray_of_obliteration:!1,is_channeling_focus:!1,is_remnant:!1,ray_of_obliteration_is_short:!1,void_arrow_fully_charged:!1,rift_nova_fully_charged:!1,elites_in_radius:0,ennemies_in_radius:0,negative_effects_on_ennemies_in_radius:0,enfeeble_stacks_in_radius:0,poison_enemies:0,trap_triggered_recently:!1,took_elemental_damage_recently:!1,took_physical_damage_recently:!1,cast_support_before_next_cast:!1,victims_reaper_104:0,banners_nearby:0,controlled_minions:0,has_elemental_prowess_buff:!1,totem_dexterity_stacks:0,greed_stacks:0,strider_stacks:0,merchant_stacks:0,nimble_champion_stacks:0,ancestral_legacy_stacks:0,conquest_stacks:0,stability_stacks:0,enlightenment_stacks:0,delightful_rain_stacks:0,target_latent_storm_stacks:0,exhilerating_senses_stacks:0,impatient_arrow_stacks:0,frenzy_stacks:0,oak_bark_armor_stacks:0,enemy_bleed_stacks:0,enemy_enfeeble_stacks:0,block_stacks:0,melee_defense_stacks:0,projectile_defense_stacks:0,aoe_defense_stacks:0,vitality_stacks:0,cosmic_stacks:0,invigorate_stacks:0,arcane_stacks:0,ray_of_obliteration_grow_stacks:0,high_spirit_stacks:0,chrono_manamorphosis_stacks:0,chrono_armor_stacks:0,chrono_empower_stacks:0,chrono_speed_stacks:0,enemy_traumatized_stacks:0,arcane_flux_stacks:0,arcane_breach_collision_stacks:0,temporal_breach_collision_stacks:0,obliteration_breach_collision_stacks:0,elemental_weakness_stacks:0,high_voltage_stacks:0,elemental_spirit_stacks:0,fulgurorn_dedication_stacks:0,enemy_inner_weakness_stacks:0,apex_predator_stacks:0,distance_with_target:0,has_elemental_temper_buff:!1,has_splash_splash_buff:!1,has_burning_shadow_buff:!1,has_gold_armor_buff:!1,has_soul_bound_buff:!1,has_adam_blessing_buff:!1,has_manabender_buff:!1,has_nimble_buff:!1,has_ancient_recognition_buff:!1,has_elemental_fervor_buff:!1,has_ancestral_fervor_buff:!1,has_assassin_haste_buff:!1,has_smoke_screen_buff:!1,has_ancestral_stab_slash_buff:!1,has_banner_regeneration_buff:!1,has_banner_haste_buff:!1,has_enduring_protector_buff:!1,has_speed_gate_buff:!1,has_shadow_repercussion_buff:!1,has_booster_max_buff:!1,has_electrify_buff:!1,concentration_buff:!1,ultima_momentum_buff:!1,exposed_armor_buff:!1,all_other_characters_level:100,idle:!1,damage_stored:0,overdrive_bounces_left:0,time_spend_channeling:0,overdrive_last_bounce:!1,hero_close_to_turret_syndrome:!1,turret_syndrome_on_cooldown:!1,projectile_passed_through_wall_of_omen:!1,summoned_skeleton_squires:0,always_summon_maximum_skeleton_squires:!1,minimum_unreserved_mana:0,add_totem_tag_to_prime_totem_skills:!1,highest_slorm_temple_floor:0,show_temple_keeper_as_totem:!1,show_elder_inner_fire_damage:!1,chilled_enemy_nearby:0,in_combat:!1},xt={attunment_pulse_current_school:ve.H.Arcanic,completed_achievements:0,elder_slorms:0,active_inner_fire:0,mana_lost_last_second:0,mana_gained_last_second:0,knight_other_level:D.AR,enemy_under_command:0,enemies_in_breach_range:0,elite_under_command:0,totems_under_control:0,traps_nearby:0,serenity:6,arcanic_emblems:0,temporal_emblems:0,obliteration_emblems:0,last_cast_tormented:!1,last_cast_delighted:!1,next_cast_is_fortunate:!1,next_cast_is_perfect:!1,next_cast_is_new_emblem:!0,use_enemy_state:!1,enemy_percent_missing_health:0,percent_missing_health:0,percent_missing_mana:0,overall_reputation:0,crit_recently:!1,dodge_recently:!1,hits_taken_recently:0,skill_cast_recently:0,frostbolt_shot_recently:0,slormocide_60:0,goldbane_5:0,rebounds_before_hit:0,pierces_before_hit:0,enemies_in_rain_of_arrow:0,enemies_affected_by_latent_storm:1,clone_is_in_breach_range:!0,target_is_close:!1,target_is_isolated:!1,target_is_tracked:!1,target_is_time_locked:!1,target_is_in_breach_range:!0,enemy_is_poisoned:!1,enemy_has_military_oppression:!0,target_has_negative_effect:!1,target_is_skewered:!1,enemy_splintered_stacks:3,target_has_broken_armor:!1,target_has_remnant_vulnerability:!1,target_has_arcane_discordance:!0,target_has_temporal_discordance:!0,target_has_obliteration_discordance:!0,is_first_arrow_shot_hit:!1,is_hit_blocked:!1,is_last_volley:!1,is_channeling_whirlwind:!0,is_channeling_arcane_barrier:!1,is_channeling_ray_of_obliteration:!0,is_channeling_focus:!1,is_remnant:!1,ray_of_obliteration_is_short:!1,void_arrow_fully_charged:!1,rift_nova_fully_charged:!1,elites_in_radius:0,ennemies_in_radius:0,negative_effects_on_ennemies_in_radius:0,enfeeble_stacks_in_radius:0,poison_enemies:0,trap_triggered_recently:!0,took_elemental_damage_recently:!0,took_physical_damage_recently:!1,cast_support_before_next_cast:!1,victims_reaper_104:0,banners_nearby:0,controlled_minions:0,has_elemental_prowess_buff:!0,totem_dexterity_stacks:200,greed_stacks:0,strider_stacks:0,merchant_stacks:0,nimble_champion_stacks:10,ancestral_legacy_stacks:0,conquest_stacks:100,stability_stacks:100,enlightenment_stacks:999,delightful_rain_stacks:100,target_latent_storm_stacks:0,exhilerating_senses_stacks:0,impatient_arrow_stacks:20,frenzy_stacks:15,oak_bark_armor_stacks:10,enemy_bleed_stacks:0,enemy_enfeeble_stacks:0,block_stacks:0,melee_defense_stacks:0,projectile_defense_stacks:0,aoe_defense_stacks:0,vitality_stacks:10,cosmic_stacks:0,invigorate_stacks:5,arcane_stacks:5,ray_of_obliteration_grow_stacks:3,high_spirit_stacks:10,chrono_manamorphosis_stacks:25,chrono_armor_stacks:25,chrono_empower_stacks:25,chrono_speed_stacks:25,enemy_traumatized_stacks:8,arcane_flux_stacks:25,arcane_breach_collision_stacks:10,temporal_breach_collision_stacks:10,obliteration_breach_collision_stacks:10,elemental_weakness_stacks:12,high_voltage_stacks:0,revengeance_stacks:0,elemental_spirit_stacks:0,fulgurorn_dedication_stacks:165,enemy_inner_weakness_stacks:10,apex_predator_stacks:0,distance_with_target:0,has_elemental_temper_buff:!0,has_splash_splash_buff:!0,has_burning_shadow_buff:!0,has_gold_armor_buff:!0,has_soul_bound_buff:!0,has_adam_blessing_buff:!0,has_manabender_buff:!0,has_nimble_buff:!0,has_ancient_recognition_buff:!0,has_elemental_fervor_buff:!0,has_ancestral_fervor_buff:!0,has_assassin_haste_buff:!0,has_smoke_screen_buff:!0,has_ancestral_stab_slash_buff:!0,has_banner_regeneration_buff:!0,has_banner_haste_buff:!0,has_enduring_protector_buff:!0,has_speed_gate_buff:!0,has_shadow_repercussion_buff:!0,has_booster_max_buff:!0,has_electrify_buff:!0,concentration_buff:!0,ultima_momentum_buff:!0,exposed_armor_buff:!0,all_other_characters_level:100,idle:!0,damage_stored:0,overdrive_bounces_left:0,time_spend_channeling:20,overdrive_last_bounce:!1,hero_close_to_turret_syndrome:!0,turret_syndrome_on_cooldown:!0,projectile_passed_through_wall_of_omen:!0,summoned_skeleton_squires:0,always_summon_maximum_skeleton_squires:!0,minimum_unreserved_mana:0,add_totem_tag_to_prime_totem_skills:!0,highest_slorm_temple_floor:0,show_temple_keeper_as_totem:!1,show_elder_inner_fire_damage:!0,chilled_enemy_nearby:0,in_combat:!0},St=function(){var a=function(){function l(){(0,p.Z)(this,l),this.CHANGES=[{version:"0.0.2",update:function(t){t.configuration.frostbolt_shot_recently=0,t.configuration.has_elemental_prowess_buff=!1,t.configuration.has_splash_splash_buff=!1,t.configuration.has_booster_max_buff=!1,t.version="0.0.2"}},{version:"0.0.4",update:function(t){t.configuration.use_enemy_state=!1,t.version="0.0.4"}},{version:"0.0.8",update:function(t){t.version="0.0.8";var i,o=(0,B.Z)(t.layers);try{for(o.s();!(i=o.n()).done;){var r=i.value;r.character.originalVersion=r.character.version,r.character.version=D.ve}}catch(c){o.e(c)}finally{o.f()}t.configuration.has_electrify_buff=!1,t.configuration.elemental_spirit_stacks=0,t.configuration.is_channeling_focus=!1}},{version:"0.0.9",update:function(t){t.version="0.0.9";var i,o=(0,B.Z)(t.layers);try{for(o.s();!(i=o.n()).done;)i.value.character.version=D.ve}catch(c){o.e(c)}finally{o.f()}}},{version:"0.0.10",update:function(t){t.version="0.0.10"}},{version:"0.0.11",update:function(t){t.version="0.0.11",t.name="New build"}},{version:"0.0.12",update:function(t){t.version="0.0.12";var i,o=(0,B.Z)(t.layers);try{for(o.s();!(i=o.n()).done;)i.value.character.importVersion=null}catch(c){o.e(c)}finally{o.f()}}},{version:"0.1.0",update:function(t){t.version="0.1.0",void 0===t.configuration.concentration_buff&&(t.configuration.concentration_buff=!1),void 0===t.configuration.summoned_skeleton_squires&&(t.configuration.summoned_skeleton_squires=0),void 0===t.configuration.always_summon_maximum_skeleton_squires&&(t.configuration.always_summon_maximum_skeleton_squires=!1),void 0===t.configuration.minimum_unreserved_mana&&(t.configuration.minimum_unreserved_mana=0),void 0===t.configuration.fulgurorn_dedication_stacks&&(t.configuration.fulgurorn_dedication_stacks=0),void 0===t.configuration.enemy_inner_weakness_stacks&&(t.configuration.enemy_inner_weakness_stacks=0),void 0===t.configuration.add_totem_tag_to_prime_totem_skills&&(t.configuration.add_totem_tag_to_prime_totem_skills=!1),void 0===t.configuration.highest_slorm_temple_floor&&(t.configuration.highest_slorm_temple_floor=0),void 0===t.configuration.show_temple_keeper_as_totem&&(t.configuration.show_temple_keeper_as_totem=!1),void 0===t.configuration.ultima_momentum_buff&&(t.configuration.ultima_momentum_buff=!1),void 0===t.configuration.elder_slorms&&(t.configuration.elder_slorms=0),void 0===t.configuration.show_elder_inner_fire_damage&&(t.configuration.show_elder_inner_fire_damage=!1),void 0===t.configuration.exposed_armor_buff&&(t.configuration.exposed_armor_buff=!1),void 0===t.configuration.apex_predator_stacks&&(t.configuration.apex_predator_stacks=0),void 0===t.configuration.enemy_enfeeble_stacks&&(t.configuration.enemy_enfeeble_stacks=0),void 0===t.configuration.enfeeble_stacks_in_radius&&(t.configuration.enfeeble_stacks_in_radius=0),"all_characters_level"in t.configuration&&(t.configuration.all_characters_level=void 0,t.configuration.all_other_characters_level=100)}},{version:"0.1.1",update:function(t){t.version="0.1.1"}},{version:"0.1.2",update:function(t){t.version="0.1.2",void 0===t.configuration.chilled_enemy_nearby&&(t.configuration.chilled_enemy_nearby=ee.chilled_enemy_nearby),void 0===t.configuration.in_combat&&(t.configuration.in_combat=ee.in_combat)}},{version:"0.1.3",update:function(t){t.version="0.1.3"}}]}return(0,g.Z)(l,[{key:"updateToLatestVersion",value:function(t){void 0===t.version&&(t.version="0.0.1",t.configuration=ee);var i,o=(0,B.Z)(this.CHANGES);try{for(o.s();!(i=o.n()).done;){var r=i.value;(0,O.n4)(r.version,t.version)>0&&r.update(t)}}catch(c){o.e(c)}finally{o.f()}}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),S=h(4942),y=h(7399),P=h(5904),Le=h(9377),he=h(5351),se=h(5832),Ve=h(7189),Je=h(3790),De=h(1682),ie=h(2473),w=h(4713),je=function(){var a=function(){function l(n,t,o,i,r,c,s){(0,p.Z)(this,l),this.slormancerDataService=n,this.slormancerCharacterBuilderService=t,this.slormancerItemService=o,this.slormancerLegendaryService=i,this.slormancerAffixService=r,this.slormancerReaperService=c,this.slormancerUltimatumService=s,this.RARITY_MAPPING=[{rarity:P.u.Normal,mapping:0},{rarity:P.u.Magic,mapping:1},{rarity:P.u.Rare,mapping:2},{rarity:P.u.Epic,mapping:3},{rarity:P.u.Legendary,mapping:4}],this.STAT_MAPPING={},this.REVERSE_STAT_MAPPING={};var d,m=(0,B.Z)(n.getGameDataStats());try{for(m.s();!(d=m.n()).done;){var f=d.value;this.STAT_MAPPING[f.REF_NB]=f.REF,this.REVERSE_STAT_MAPPING[f.REF]=f.REF_NB}}catch(C){m.e(C)}finally{m.f()}}return(0,g.Z)(l,[{key:"rarityToNumber",value:function(t){var o=this.RARITY_MAPPING.find(function(i){return i.rarity===t});return o?o.mapping:0}},{key:"numberToRarity",value:function(t){var o=this.RARITY_MAPPING.find(function(i){return i.mapping===t});return o?o.rarity:P.u.Normal}},{key:"itemToJson",value:function(t,o){var i=this;return null===t?null:{base:o?t.base:null,level:t.level,reinforcment:t.reinforcment,affixes:t.affixes.map(function(r){return{rarity:i.rarityToNumber(r.rarity),pure:100===r.pure?0:r.pure,stat:(0,O.Be)(i.REVERSE_STAT_MAPPING[r.craftedEffect.effect.stat],0),craftedValue:r.craftedEffect.craftedValue}}),legendaryEffect:null===t.legendaryEffect?null:{craftedValue:t.legendaryEffect.value,id:t.legendaryEffect.id},reaperEnchantment:null===t.reaperEnchantment?null:{craftedValue:t.reaperEnchantment.craftedValue,reaperSmith:t.reaperEnchantment.craftedReaperSmith},skillEnchantment:null===t.skillEnchantment?null:{craftedValue:t.skillEnchantment.craftedValue,skill:t.skillEnchantment.craftedSkill},attributeEnchantment:null===t.attributeEnchantment?null:{craftedValue:t.attributeEnchantment.craftedValue,attribute:t.attributeEnchantment.craftedAttribute}}}},{key:"ancestralLegacyToJson",value:function(t){return{id:t.id,rank:t.baseRank}}},{key:"reaperToJson",value:function(t){return{id:t.id,level:t.baseInfo.level,primordialLevel:t.primordialInfo.level,kills:t.baseInfo.kills,primordialKills:t.primordialInfo.kills,primordial:t.primordial?1:0}}},{key:"ultimatumToJson",value:function(t){var o=null;return null!==t&&(o={level:t.level,type:t.type}),o}},{key:"skillToJson",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{id:t.skill.id,rank:t.skill.baseLevel,upgrades:t.upgrades.map(function(i){return{id:i.id,rank:i.baseRank,selected:-1!==t.selectedUpgrades.indexOf(i.id)?1:0}}).filter(function(i){return!o||i.selected})}}},{key:"getActivableId",value:function(t){var o=null;return null!==t&&(o="isActivable"in t?t.id:200+t.id),o}},{key:"characterToJson",value:function(t){var i,o=this;return{type:"c",level:t.level,version:t.version,originalVersion:t.originalVersion,heroClass:t.heroClass,gear:{helm:this.itemToJson(t.gear.helm,!1),body:this.itemToJson(t.gear.body,!1),shoulder:this.itemToJson(t.gear.shoulder,!1),bracer:this.itemToJson(t.gear.bracer,!1),glove:this.itemToJson(t.gear.glove,!1),boot:this.itemToJson(t.gear.boot,!1),ring_l:this.itemToJson(t.gear.ring_l,!1),ring_r:this.itemToJson(t.gear.ring_r,!1),amulet:this.itemToJson(t.gear.amulet,!1),belt:this.itemToJson(t.gear.belt,!1),cape:this.itemToJson(t.gear.cape,!1)},inventory:t.inventory.map(function(r){return o.itemToJson(r,!0)}),sharedInventory:t.sharedInventory.map(function(r){return r.map(function(c){return o.itemToJson(c,!0)})}),ultimatum:this.ultimatumToJson(t.ultimatum),ancestralLegacies:{ancestralLegacies:t.ancestralLegacies.ancestralLegacies.map(function(r){return o.ancestralLegacyToJson(r)}),nodes:t.ancestralLegacies.activeNodes},reaper:this.reaperToJson(t.reaper),skills:t.skills.map(function(r){return o.skillToJson(r)}),attributes:(i={},(0,S.Z)(i,y.a.Toughness,t.attributes.allocated[y.a.Toughness].rank),(0,S.Z)(i,y.a.Savagery,t.attributes.allocated[y.a.Savagery].rank),(0,S.Z)(i,y.a.Fury,t.attributes.allocated[y.a.Fury].rank),(0,S.Z)(i,y.a.Determination,t.attributes.allocated[y.a.Determination].rank),(0,S.Z)(i,y.a.Zeal,t.attributes.allocated[y.a.Zeal].rank),(0,S.Z)(i,y.a.Willpower,t.attributes.allocated[y.a.Willpower].rank),(0,S.Z)(i,y.a.Dexterity,t.attributes.allocated[y.a.Dexterity].rank),(0,S.Z)(i,y.a.Bravery,t.attributes.allocated[y.a.Bravery].rank),i),support:null===t.supportSkill?null:t.supportSkill.id,primary:null===t.primarySkill?null:t.primarySkill.id,secondary:null===t.secondarySkill?null:t.secondarySkill.id,activable1:this.getActivableId(t.activable1),activable2:this.getActivableId(t.activable2),activable3:this.getActivableId(t.activable3),activable4:this.getActivableId(t.activable4)}}},{key:"characterToMinimalJson",value:function(t){var i,o=this;return{type:"c",level:t.level,version:t.version,originalVersion:t.originalVersion,heroClass:t.heroClass,gear:{helm:this.itemToJson(t.gear.helm,!1),body:this.itemToJson(t.gear.body,!1),shoulder:this.itemToJson(t.gear.shoulder,!1),bracer:this.itemToJson(t.gear.bracer,!1),glove:this.itemToJson(t.gear.glove,!1),boot:this.itemToJson(t.gear.boot,!1),ring_l:this.itemToJson(t.gear.ring_l,!1),ring_r:this.itemToJson(t.gear.ring_r,!1),amulet:this.itemToJson(t.gear.amulet,!1),belt:this.itemToJson(t.gear.belt,!1),cape:this.itemToJson(t.gear.cape,!1)},inventory:null,sharedInventory:null,ultimatum:this.ultimatumToJson(t.ultimatum),ancestralLegacies:{ancestralLegacies:t.ancestralLegacies.ancestralLegacies.filter(function(r){return-1!==t.ancestralLegacies.activeAncestralLegacies.indexOf(r.id)}).map(function(r){return o.ancestralLegacyToJson(r)}),nodes:t.ancestralLegacies.activeNodes},reaper:this.reaperToJson(t.reaper),skills:t.skills.filter(function(r){return r.skill===t.supportSkill||r.skill===t.primarySkill||r.skill===t.secondarySkill}).map(function(r){return o.skillToJson(r,!0)}),attributes:(i={},(0,S.Z)(i,y.a.Toughness,t.attributes.allocated[y.a.Toughness].rank),(0,S.Z)(i,y.a.Savagery,t.attributes.allocated[y.a.Savagery].rank),(0,S.Z)(i,y.a.Fury,t.attributes.allocated[y.a.Fury].rank),(0,S.Z)(i,y.a.Determination,t.attributes.allocated[y.a.Determination].rank),(0,S.Z)(i,y.a.Zeal,t.attributes.allocated[y.a.Zeal].rank),(0,S.Z)(i,y.a.Willpower,t.attributes.allocated[y.a.Willpower].rank),(0,S.Z)(i,y.a.Dexterity,t.attributes.allocated[y.a.Dexterity].rank),(0,S.Z)(i,y.a.Bravery,t.attributes.allocated[y.a.Bravery].rank),i),support:null===t.supportSkill?null:t.supportSkill.id,primary:null===t.primarySkill?null:t.primarySkill.id,secondary:null===t.secondarySkill?null:t.secondarySkill.id,activable1:this.getActivableId(t.activable1),activable2:this.getActivableId(t.activable2),activable3:this.getActivableId(t.activable3),activable4:this.getActivableId(t.activable4)}}},{key:"layerToJson",value:function(t){return{type:"l",character:this.characterToJson(t.character),name:t.name}}},{key:"buildToJson",value:function(t){var o=this;return{type:"p",version:t.version,heroClass:t.heroClass,name:t.name,layers:t.layers.map(function(i){return o.layerToJson(i)}),configuration:Object.assign({},t.configuration)}}},{key:"jsonToItem",value:function(t,o){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=null;if(null!==t){var s=t.affixes.map(function(x){return i.slormancerAffixService.getAffixFromStat(i.STAT_MAPPING[x.stat],t.level,t.reinforcment,i.numberToRarity(x.rarity),x.craftedValue,x.pure)}).filter(O.BX),m=r;null===m&&(m=null===t.base?T.J.Amulet:t.base);var d=null===t.legendaryEffect?null:this.slormancerLegendaryService.getLegendaryEffectById(t.legendaryEffect.id,t.legendaryEffect.craftedValue,t.reinforcment,o),f=null===t.reaperEnchantment?null:this.slormancerItemService.getReaperEnchantment(t.reaperEnchantment.reaperSmith,t.reaperEnchantment.craftedValue),C=null===t.skillEnchantment?null:this.slormancerItemService.getSkillEnchantment(t.skillEnchantment.skill,t.skillEnchantment.craftedValue),k=null===t.attributeEnchantment?null:this.slormancerItemService.getAttributeEnchantment(t.attributeEnchantment.attribute,t.attributeEnchantment.craftedValue);c=this.slormancerItemService.getEquipableItem(m,o,t.level,s,t.reinforcment,d,f,C,k)}return c}},{key:"normalizeJsonCharacter",value:function(t){"0.2.152"===t.version&&(t.originalVersion=t.version,t.ultimatum=null)}},{key:"jsonToCharacter",value:function(t){var o=this;this.normalizeJsonCharacter(t);var i=this.slormancerReaperService.getReaperById(t.reaper.id,t.heroClass,1===t.reaper.primordial,t.reaper.level,t.reaper.primordialLevel,t.reaper.kills,t.reaper.primordialKills),r=null===t.ultimatum?null:this.slormancerUltimatumService.getUltimatum(t.ultimatum.type,t.ultimatum.level),c=this.slormancerDataService.getGameDataAncestralLegacyIds().map(function(f,C){return t.ancestralLegacies.ancestralLegacies.find(function(k){return k.id===C})}).map(function(f){return f?f.rank:0}),s=this.slormancerDataService.getGameDataSkills(t.heroClass).map(function(f,C){var k=0,x=t.skills.find(function(Q){return Q.id===C});if(x)k=(0,w.NM)(x.rank);else{var j=t.skills.map(function(Q){return Q.upgrades}).flat().find(function(Q){return Q.id===C});j&&(k=j.rank)}return k}),m=this.slormancerDataService.getGameDataSkills(t.heroClass).map(function(f,C){var k=t.skills.map(function(x){return x.upgrades}).flat().find(function(x){return x.id===C});return k?k.selected:0});return this.slormancerCharacterBuilderService.getCharacter(t.heroClass,t.level,t.version,t.originalVersion,null,i,r,t.ancestralLegacies.nodes,c,m,s,this.jsonToItem(t.gear.helm,t.heroClass,T.J.Helm),this.jsonToItem(t.gear.body,t.heroClass,T.J.Body),this.jsonToItem(t.gear.shoulder,t.heroClass,T.J.Shoulder),this.jsonToItem(t.gear.bracer,t.heroClass,T.J.Bracer),this.jsonToItem(t.gear.glove,t.heroClass,T.J.Glove),this.jsonToItem(t.gear.boot,t.heroClass,T.J.Boot),this.jsonToItem(t.gear.ring_l,t.heroClass,T.J.Ring),this.jsonToItem(t.gear.ring_r,t.heroClass,T.J.Ring),this.jsonToItem(t.gear.amulet,t.heroClass,T.J.Amulet),this.jsonToItem(t.gear.belt,t.heroClass,T.J.Belt),this.jsonToItem(t.gear.cape,t.heroClass,T.J.Cape),null===t.inventory?null:t.inventory.map(function(f){return o.jsonToItem(f,t.heroClass,null)}),null===t.sharedInventory?null:t.sharedInventory.map(function(f){return f.map(function(C){return o.jsonToItem(C,t.heroClass,null)})}),t.attributes[y.a.Toughness],t.attributes[y.a.Savagery],t.attributes[y.a.Fury],t.attributes[y.a.Determination],t.attributes[y.a.Zeal],t.attributes[y.a.Willpower],t.attributes[y.a.Dexterity],t.attributes[y.a.Bravery],t.primary,t.secondary,t.support,t.activable1,t.activable2,t.activable3,t.activable4)}},{key:"jsonToLayer",value:function(t){return{name:t.name,character:this.jsonToCharacter(t.character)}}},{key:"jsonToBuild",value:function(t){var o=this;return{version:t.version,heroClass:t.heroClass,name:t.name?t.name:"Default name",layers:t.layers.map(function(i){return o.jsonToLayer(i)}),configuration:Object.assign({},t.configuration)}}},{key:"jsonToSharedData",value:function(t){return{character:"c"===t.type?this.jsonToCharacter(t):null,layer:"l"===t.type?this.jsonToLayer(t):null,planner:"p"===t.type?this.jsonToBuild(t):null}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(he.o),e.LFG(ie.o),e.LFG(se.S),e.LFG(Ve.A),e.LFG(Le.l),e.LFG(Je.I),e.LFG(De.h))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),A=function(){var a=function(){function l(n,t,o){var i=this;(0,p.Z)(this,l),this.jsonConverterService=n,this.buildRetrocompatibilityService=t,this.slormancerCharacterUpdaterService=o,this.MAX_LAYERS=10,this.BUILDS_STORAGE_KEY="builds",this.CURRENT_BUILD_STORAGE_KEY="current-build",this.CURRENT_LAYER_STORAGE_KEY="current-layer",this.builds=[],this.build=null,this.layer=null,this.buildChanged=new xe.X(null),this.layerChanged=new xe.X(null),this.saveTrigger=new Ye.x,this.reload(),this.oldFormatTransition(),this.saveTrigger.pipe((0,kt.b)(500)).subscribe(function(){return i.saveToStorage()})}return(0,g.Z)(l,[{key:"getCurrentLayerIndex",value:function(){var t=localStorage.getItem(this.CURRENT_LAYER_STORAGE_KEY),o=null===t?0:parseInt(t,10);return Number.isNaN(o)?0:o}},{key:"oldFormatTransition",value:function(){var t="slorm-planner-build",o=localStorage.getItem(t);if(null!==o&&0===this.builds.length){var i=this.jsonConverterService.jsonToBuild(JSON.parse(o));this.addBuild(i),localStorage.removeItem(t),this.saveToStorage()}}},{key:"reload",value:function(){this.builds=[],this.build=null,this.layer=null;try{var t=localStorage.getItem(this.BUILDS_STORAGE_KEY),o=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY),i=this.getCurrentLayerIndex();if(null!==t&&(this.builds=JSON.parse(t)),null!==o){var r=localStorage.getItem(o);null!==r&&(this.build=this.jsonConverterService.jsonToBuild(JSON.parse(r)),this.buildRetrocompatibilityService.updateToLatestVersion(this.build))}if(null!==this.build){var c=(0,O.Be)(this.build.layers[i],this.build.layers[0]);void 0!==c&&(this.layer=c);var m,s=(0,B.Z)(this.build.layers);try{for(s.s();!(m=s.n()).done;)this.slormancerCharacterUpdaterService.updateCharacter(m.value.character,this.build.configuration)}catch(f){s.e(f)}finally{s.f()}}}catch(f){console.error("Failed to reload build : ",f)}this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}},{key:"saveToStorage",value:function(){localStorage.setItem(this.BUILDS_STORAGE_KEY,JSON.stringify(this.builds));var t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==t&&null!==this.build){localStorage.setItem(t,JSON.stringify(this.jsonConverterService.buildToJson(this.build)));var o=0;null!==this.layer&&(o=this.build.layers.indexOf(this.layer)),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,o<0?"0":o.toString())}}},{key:"saveBuild",value:function(){if(null!==this.build){var o,t=(0,B.Z)(this.build.layers);try{for(t.s();!(o=t.n()).done;)this.slormancerCharacterUpdaterService.updateCharacter(o.value.character,this.build.configuration)}catch(m){t.e(m)}finally{t.f()}var r=this.getBuildPreview();if(null!==r&&(r.name=this.build.name),null!==this.build){var c=this.getCurrentLayerIndex(),s=null===this.layer?-1:this.build.layers.indexOf(this.layer);c=-1!==s?s:Math.min(c,this.build.layers.length-1),this.layer=(0,O.lA)(this.build.layers[c])}this.saveTrigger.next(),this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}}},{key:"saveLayer",value:function(){null!==this.build&&null!==this.layer&&(this.slormancerCharacterUpdaterService.updateCharacter(this.layer.character,this.build.configuration),this.saveTrigger.next())}},{key:"loadBuild",value:function(t){localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,t.storageKey),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,"0"),this.reload()}},{key:"deleteBuild",value:function(){var t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==t){var o=this.builds.findIndex(function(c){return c.storageKey===t});if(-1!==o){this.builds.splice(o,1),localStorage.removeItem(t),localStorage.removeItem(this.CURRENT_BUILD_STORAGE_KEY),this.saveToStorage();var i=Math.min(o,this.builds.length-1),r=this.builds[i];r?this.loadBuild(r):this.reload()}}}},{key:"loadLayer",value:function(t){null!==this.build&&-1!==this.build.layers.indexOf(t)&&(this.layer=t,this.saveBuild())}},{key:"addBuild",value:function(t){null!==t&&this.buildRetrocompatibilityService.updateToLatestVersion(t);var o={heroClass:t.heroClass,name:t.name,storageKey:"build-"+(new Date).getTime(),version:ce.N.version};this.builds.push(o),this.build=t,this.layer=(0,O.Be)(t.layers[0],null),localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,o.storageKey),this.saveBuild()}},{key:"getBuilds",value:function(){return this.builds}},{key:"getBuild",value:function(){return this.build}},{key:"getBuildPreview",value:function(){var t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);return(0,O.lA)(this.builds.find(function(o){return o.storageKey===t}))}},{key:"getLayer",value:function(){return this.layer}},{key:"hasRoomForAnotherLayer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===this.build||this.build.layers.length<this.MAX_LAYERS&&(null===t||this.build.heroClass===t.heroClass)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(je),e.LFG(St),e.LFG(fe.P))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),ue=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.buildStorageService=n,this.draggingItem=new xe.X(!1),this.dragCount=0,this.item=null,this.requiredBase=null,this.callback=null}return(0,g.Z)(l,[{key:"hold",value:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.dragCount=0,this.item=t,this.requiredBase=o,this.callback=i}},{key:"startDragging",value:function(){this.draggingItem.getValue()||(this.dragCount++,null!==this.item&&this.dragCount>5&&this.draggingItem.next(!0))}},{key:"isDragItemCompatible",value:function(t,o){return!(null!==t&&null!==this.requiredBase&&t.base!==this.requiredBase||null===this.item||null!==o&&this.item.base!==o)}},{key:"isHoldItem",value:function(t){return t===this.item&&null!==t}},{key:"getHoldItem",value:function(){return this.item}},{key:"releaseHoldItem",value:function(){this.item=null,this.requiredBase=null,this.callback=null,this.draggingItem.next(!1)}},{key:"swap",value:function(t,o,i){var r=this.item,c=this.callback,s=this.isDragItemCompatible(t,o);this.releaseHoldItem(),t!==r&&(s?(c&&c(!0,t),i&&i(!0,r)):(c&&c(!1,null),i&&i(!1,null)))}},{key:"moveDraggedItemToItemGroup",value:function(t){var o=this.item,i=this.callback,r=t.indexOf(null),c=t.indexOf(o);if(this.releaseHoldItem(),-1!==r||-1!==c){i&&i(!0,null);var s=Math.min.apply(Math,(0,I.Z)([r,c].filter(function(m){return-1!==m})));t.splice(s,1,o)}else i&&i(!1,null)}},{key:"equip",value:function(t,o){var i=this.buildStorageService.getLayer();if(null!==i&&null!==i.character){var r=t.base;switch(this.hold(t,r,o),r){case T.J.Amulet:this.swap(i.character.gear.amulet,r,function(c,s){return c?i.character.gear.amulet=s:null});break;case T.J.Belt:this.swap(i.character.gear.belt,r,function(c,s){return c?i.character.gear.belt=s:null});break;case T.J.Body:this.swap(i.character.gear.body,r,function(c,s){return c?i.character.gear.body=s:null});break;case T.J.Boot:this.swap(i.character.gear.boot,r,function(c,s){return c?i.character.gear.boot=s:null});break;case T.J.Bracer:this.swap(i.character.gear.bracer,r,function(c,s){return c?i.character.gear.bracer=s:null});break;case T.J.Cape:this.swap(i.character.gear.cape,r,function(c,s){return c?i.character.gear.cape=s:null});break;case T.J.Glove:this.swap(i.character.gear.glove,r,function(c,s){return c?i.character.gear.glove=s:null});break;case T.J.Helm:this.swap(i.character.gear.helm,r,function(c,s){return c?i.character.gear.helm=s:null});break;case T.J.Shoulder:this.swap(i.character.gear.shoulder,r,function(c,s){return c?i.character.gear.shoulder=s:null});break;case T.J.Ring:null===i.character.gear.ring_r?this.swap(i.character.gear.ring_r,r,function(c,s){return c?i.character.gear.ring_r=s:null}):this.swap(i.character.gear.ring_l,r,function(c,s){return c?i.character.gear.ring_l=s:null})}}}},{key:"moveToStash",value:function(t,o){var i=this.buildStorageService.getLayer();if(null!==i&&null!==i.character){var r=[i.character.inventory].concat((0,I.Z)(i.character.sharedInventory)).filter(function(c){return void 0!==c.find(function(s){return null===s})})[0];r&&(this.hold(t,null,o),this.moveDraggedItemToItemGroup(r))}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(A))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),L=h(2722),H=h(5245),Ce=h(3251),qe=h(2638),u=h(3075),v=h(8966),me=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.slormancerCharacterBuilderService=n}return(0,g.Z)(l,[{key:"createBuild",value:function(t,o){return{version:ce.N.version,name:o,heroClass:t,layers:[],configuration:ee}}},{key:"createBuildWithCharacter",value:function(t,o,i){var r={version:ce.N.version,name:t,heroClass:i.heroClass,layers:[],configuration:ee},c=this.slormancerCharacterBuilderService.getCharacterClone(i);return c.importVersion=null,this.addLayer(r,o,c),r}},{key:"addLayer",value:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r={name:o,character:null!==i?i:this.slormancerCharacterBuilderService.getCharacter(t.heroClass)};return t.layers.push(r),r}},{key:"duplicateLayer",value:function(t,o,i){return this.addLayer(t,i,this.slormancerCharacterBuilderService.getCharacterClone(o.character))}},{key:"deleteLayer",value:function(t,o){var i=t.layers.indexOf(o);-1!==i&&t.layers.splice(i,1)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(ie.o))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),M=h(2107),Ge=h(7106),Tt=h(7757),Xe=h.n(Tt),Zt=h(655),ze=function(){var a=function(){function l(){(0,p.Z)(this,l)}return(0,g.Z)(l,[{key:"copyToClipboard",value:function(t){var o=null;try{return(o=document.createElement("textarea")).style.position="fixed",o.style.left="0",o.style.top="0",o.style.opacity="0",o.value=t,document.body.appendChild(o),o.focus(),o.select(),document.execCommand("copy"),document.body.removeChild(o),!0}catch(i){null!==o&&document.body.contains(o)&&document.body.removeChild(o)}return!1}},{key:"getClipboardText",value:function(){return(0,Zt.mG)(this,void 0,void 0,Xe().mark(function t(){var o;return Xe().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=null,!navigator.clipboard){r.next=10;break}return r.prev=2,r.next=5,navigator.clipboard.readText();case 5:o=r.sent,r.next=10;break;case 8:r.prev=8,r.t0=r.catch(2);case 10:return r.abrupt("return",o);case 11:case"end":return r.stop()}},t,null,[[2,8]])}))}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),wt=h(5458),Se=function(){var a=function(){function l(n,t,o,i){(0,p.Z)(this,l),this.slormancerCharacterBuilderService=n,this.slormancerSaveParserService=t,this.slormancerShortDataService=o,this.jsonConverterService=i;var r=document.getElementsByTagName("base")[0],c="/";if(void 0!==r){var s=r.getAttribute("href");null!==s&&(c=s)}this.VIEW_BUILD_PATH=window.origin+c+"slorm-planner/view/build/"}return(0,g.Z)(l,[{key:"parseSaveData",value:function(t,o){var i=this.slormancerSaveParserService.parseSaveFile(t);return this.slormancerCharacterBuilderService.getCharacterFromSave(i,o)}},{key:"parseUrlData",value:function(t){var o={character:null,layer:null,planner:null},i=null;try{var c=new URL(t).pathname.split("/");i=(0,O.lA)(c[c.length-1])}catch(s){}return null!==i&&(o=this.importFromShortData(i)),o}},{key:"parseJsonData",value:function(t){var o=JSON.parse(t);return this.jsonConverterService.jsonToSharedData(o)}},{key:"import",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i={character:null,layer:null,planner:null};if(null!==o)try{return i.character=this.parseSaveData(t,o),i}catch(r){console.error("Error when parsing save file : ",r)}try{return this.parseJsonData(atob(t))}catch(r){}try{return this.parseJsonData(t)}catch(r){}return null===(i=this.importFromShortData(t)).character&&(i=this.parseUrlData(t)),console.log("data parsed : ",i),i}},{key:"exportCharacter",value:function(t){return btoa(JSON.stringify(this.jsonConverterService.characterToJson(t)))}},{key:"exportLayer",value:function(t){return btoa(JSON.stringify(this.jsonConverterService.layerToJson(t)))}},{key:"exportBuild",value:function(t){return btoa(JSON.stringify(this.jsonConverterService.buildToJson(t)))}},{key:"exportCharacterAsLink",value:function(t){var o=this.slormancerShortDataService.characterToShortData(t);return this.VIEW_BUILD_PATH+o}},{key:"importFromShortData",value:function(t){return{character:this.slormancerShortDataService.shortDataToCharacter(t),layer:null,planner:null}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(ie.o),e.LFG(Ge.X),e.LFG(wt.q),e.LFG(je))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),oe=h(8223),E=h(7423),z=h(7238);function At(a,l){if(1&a&&(e.TgZ(0,"mat-icon",5),e._uU(1,"help_outline"),e.qZA()),2&a){var n=e.oxw(2);e.Q6J("matTooltip",n.help)}}function It(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"mat-icon"),e._uU(2,"file_upload"),e.qZA(),e._uU(3),e.YNc(4,At,2,1,"mat-icon",4),e.BQk()),2&a){var n=e.oxw();e.xp6(3),e.hij("",n.label," "),e.xp6(1),e.Q6J("ngIf",null!==n.help)}}function Et(a,l){1&a&&(e.ynx(0),e.TgZ(1,"mat-icon",6),e._uU(2,"sync"),e.qZA(),e._uU(3,"Uploading..."),e.BQk())}var $e=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.messageService=n,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.label=null,this.help=null,this.upload=new e.vpe,this.busy=!1,this.parsing=!1}return(0,g.Z)(l,[{key:"uploadFile",value:function(t){return new Promise(function(o,i){var r=new FileReader;r.onerror=function(){r=null,i()},r.onloadend=function(){null!==r&&null!==r.result&&(o(r.result.toString()),r=null)},r.readAsText(t)})}},{key:"startUpload",value:function(t){var o=this,i=t.target;if(null!==i&&!this.busy){var r=i.files,c=null===r?null:(0,O.lA)(r[0]);null!==c&&(c.size<=this.MAX_UPLOAD_FILE_SIZE?(this.busy=!0,this.uploadFile(c).then(function(s){o.upload.emit(s),i.value="",o.busy=!1},function(){i.value="",o.messageService.error("Failed to upload this file"),o.busy=!1})):this.messageService.error("Cannot upload files bigger than "+this.MAX_UPLOAD_FILE_SIZE_MO+"Mo"))}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(oe.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-file-upload-button"]],inputs:{label:"label",help:"help"},outputs:{upload:"upload"},decls:5,vars:2,consts:[["type","file",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"animation-rotation"]],template:function(n,t){if(1&n){var o=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(r){return t.startUpload(r)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){return e.CHM(o),e.MAs(1).click()}),e.YNc(3,It,5,2,"ng-container",3),e.YNc(4,Et,4,0,"ng-container",3),e.qZA()}2&n&&(e.xp6(3),e.Q6J("ngIf",!t.busy),e.xp6(1),e.Q6J("ngIf",t.busy))},directives:[E.lW,_.O5,H.Hw,z.gM],styles:["input[type=file][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{width:100%}"]}),a}();function Lt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw().selectedClass=c}),e._UZ(1,"img",9),e.TgZ(2,"div",10),e._uU(3),e.qZA()()}if(2&a){var t=l.$implicit,o=e.oxw();e.ekj("selected",o.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH),e.xp6(2),e.Oqu(o.getLevel(t))}}var Jt=function(){var a=function(){function l(n,t,o,i,r,c,s){(0,p.Z)(this,l),this.messageService=n,this.buildStorageService=t,this.buildService=o,this.slormancerSaveParserService=i,this.slormancerCharacterBuilderService=r,this.importExportService=c,this.clipboardService=s,this.HERO_CLASSES=[M.i.Warrior,M.i.Huntress,M.i.Mage],this.created=new e.vpe,this.name="Default name",this.characters=null,this.selectedClass=null}return(0,g.Z)(l,[{key:"parseGameSave",value:function(t){try{var o,i=this.slormancerSaveParserService.parseSaveFile(t);this.characters=((0,S.Z)(o={},M.i.Warrior,this.slormancerCharacterBuilderService.getCharacterFromSave(i,M.i.Warrior)),(0,S.Z)(o,M.i.Huntress,this.slormancerCharacterBuilderService.getCharacterFromSave(i,M.i.Huntress)),(0,S.Z)(o,M.i.Mage,this.slormancerCharacterBuilderService.getCharacterFromSave(i,M.i.Mage)),o),this.selectedClass=null}catch(r){console.error(r),this.messageService.error("An error occured while parsing this save file")}}},{key:"getLevel",value:function(t){var o="";return null!==this.characters&&(o=this.characters[t].level.toString()),o}},{key:"createBuild",value:function(){if(null!==this.selectedClass&&null!==this.characters){var t=this.buildService.createBuildWithCharacter(this.name,"New layer",this.characters[this.selectedClass]);this.buildStorageService.addBuild(t),this.created.emit()}}},{key:"copyExternalLink",value:function(){if(null!==this.selectedClass&&null!==this.characters){var t=this.importExportService.exportCharacterAsLink(this.characters[this.selectedClass]);this.clipboardService.copyToClipboard(t)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(oe.e),e.Y36(A),e.Y36(me),e.Y36(Ge.X),e.Y36(ie.o),e.Y36(Se),e.Y36(ze))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-from-game"]],inputs:{name:"name"},outputs:{created:"created"},decls:13,vars:7,consts:[[1,"import-game"],["label","Upload a Slormancer save file","help","Save files are located in :\n        C:\\Users\\[User]\\AppData\\Local\\The_Slormancer",3,"upload"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",1,"create",3,"disabled","click"],["mat-icon-button","","matTooltip","Generate an external link of this build",3,"disabled","click"],[1,"head",3,"click"],[3,"src"],[1,"level"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(i){return t.parseGameSave(i)}),e.qZA(),e.TgZ(2,"div",2)(3,"p"),e._uU(4,"Choose which character you want to upload"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,Lt,4,4,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return t.createBuild()}),e._uU(9,"Create build"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return t.copyExternalLink()}),e.TgZ(11,"mat-icon"),e._uU(12,"share"),e.qZA()()()()),2&n&&(e.xp6(2),e.ekj("disabled",null===t.characters),e.xp6(1),e.ekj("disabled",null===t.characters),e.xp6(3),e.Q6J("ngForOf",t.HERO_CLASSES),e.xp6(2),e.Q6J("disabled",null===t.characters||null===t.selectedClass),e.xp6(2),e.Q6J("disabled",null===t.characters||null===t.selectedClass))},directives:[$e,_.sg,E.lW,z.gM,H.Hw],styles:[".import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:24px;height:24px;line-height:8px;font-size:12px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.1}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{border-color:#b7b7b7}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{flex-grow:1}"]}),a}(),b=h(7322),G=h(7531);function qt(a,l){1&a&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a save, build, layer or link"),e.qZA())}function Ut(a,l){1&a&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a build, layer or link"),e.qZA())}function Nt(a,l){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Character found"),e.qZA())}function Ft(a,l){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Layer found"),e.qZA())}function Bt(a,l){1&a&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Build found"),e.qZA())}function Ht(a,l){1&a&&(e.TgZ(0,"mat-hint",10),e._uU(1,"No valid data found"),e.qZA())}var We=function(){var a=function(){function l(n){var t=this;(0,p.Z)(this,l),this.importExportService=n,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.uploadLabel=null,this.importLabel=null,this.heroClass=null,this.import=new e.vpe,this.sharedData=null,this.importContent=new u.NI(null,u.kI.maxLength(this.MAX_UPLOAD_FILE_SIZE)),this.importContent.valueChanges.subscribe(function(o){null===o||0===o.length?t.sharedData=null:t.parseExportedData(o)})}return(0,g.Z)(l,[{key:"parseExportedData",value:function(t){this.sharedData=this.importExportService.import(t,this.heroClass),console.log("parse exported data : ",this.sharedData)}},{key:"hasValidSharedData",value:function(){return null!==this.sharedData&&(null!==this.sharedData.character&&(null===this.heroClass||this.sharedData.character.heroClass===this.heroClass)||null!==this.sharedData.layer&&(null===this.heroClass||this.sharedData.layer.character.heroClass===this.heroClass)||null!==this.sharedData.planner&&(null===this.heroClass||this.sharedData.planner.heroClass===this.heroClass))}},{key:"upload",value:function(t){this.importContent.setValue(t)}},{key:"importData",value:function(){null!==this.sharedData&&(this.import.emit(this.sharedData),this.importContent.setValue(""),this.sharedData=null)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(Se))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-import-data"]],inputs:{uploadLabel:"uploadLabel",importLabel:"importLabel",heroClass:"heroClass"},outputs:{import:"import"},decls:16,vars:11,consts:[[1,"import"],[3,"label","upload"],["appearance","outline","color","primary","floatLabel","never"],["matInput","",3,"formControl"],["align","end",4,"ngIf"],["align","end","class","success",4,"ngIf"],["align","end","class","error",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["align","end"],["align","end",1,"success"],["align","end",1,"error"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(i){return t.upload(i)}),e.qZA(),e.TgZ(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Import content..."),e.qZA(),e._UZ(5,"textarea",3),e.YNc(6,qt,2,0,"mat-hint",4),e.YNc(7,Ut,2,0,"mat-hint",4),e.YNc(8,Nt,2,0,"mat-hint",5),e.YNc(9,Ft,2,0,"mat-hint",5),e.YNc(10,Bt,2,0,"mat-hint",5),e.YNc(11,Ht,2,0,"mat-hint",6),e.TgZ(12,"mat-error"),e._uU(13),e.qZA()(),e.TgZ(14,"button",7),e.NdJ("click",function(){return t.importData()}),e._uU(15),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("label",t.uploadLabel),e.xp6(4),e.Q6J("formControl",t.importContent),e.xp6(1),e.Q6J("ngIf",null===t.sharedData&&null!==t.heroClass),e.xp6(1),e.Q6J("ngIf",null===t.sharedData&&null===t.heroClass),e.xp6(1),e.Q6J("ngIf",null!==t.sharedData&&t.hasValidSharedData()&&null!==t.sharedData.character),e.xp6(1),e.Q6J("ngIf",null!==t.sharedData&&t.hasValidSharedData()&&null!==t.sharedData.layer),e.xp6(1),e.Q6J("ngIf",null!==t.sharedData&&t.hasValidSharedData()&&null!==t.sharedData.planner),e.xp6(1),e.Q6J("ngIf",null!==t.sharedData&&!t.hasValidSharedData()),e.xp6(2),e.hij("Cannot parse files bigger than ",t.MAX_UPLOAD_FILE_SIZE_MO,"Mo"),e.xp6(1),e.Q6J("disabled",!t.hasValidSharedData()),e.xp6(1),e.Oqu(t.importLabel))},directives:[$e,b.KE,b.hX,G.Nt,u.Fj,u.JJ,u.oH,_.O5,b.bx,b.TO,E.lW],styles:[".import[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;width:100%}.import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px;max-height:60px}"]}),a}(),Qt=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.buildStorageService=n,this.buildService=t,this.created=new e.vpe,this.name="Default name"}return(0,g.Z)(l,[{key:"createBuild",value:function(t){if(null!==t.character){var o=this.buildService.createBuildWithCharacter(this.name,"Imported layer",t.character);this.buildStorageService.addBuild(o),this.created.emit()}else if(null!==t.layer){var i=this.buildService.createBuildWithCharacter(this.name,t.layer.name,t.layer.character);this.buildStorageService.addBuild(i),this.created.emit()}else null!==t.planner&&(this.buildStorageService.addBuild(t.planner),this.created.emit())}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(me))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-from-export"]],inputs:{name:"name"},outputs:{created:"created"},decls:2,vars:0,consts:[[1,"import-game"],["uploadLabel","Upload an exported file","importLabel","Create build",3,"import"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"app-import-data",1),e.NdJ("import",function(i){return t.createBuild(i)}),e.qZA()())},directives:[We],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}"]}),a}();function Rt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw().selectedClass=c}),e._UZ(1,"img",6),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw();e.ekj("selected",o.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH)}}var Yt=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.buildService=n,this.buildStorageService=t,this.HERO_CLASSES=[M.i.Warrior,M.i.Huntress,M.i.Mage],this.created=new e.vpe,this.name="Default name",this.selectedClass=null}return(0,g.Z)(l,[{key:"createBuild",value:function(){if(null!==this.selectedClass){var t=this.buildService.createBuild(this.selectedClass,this.name);this.buildService.addLayer(t,this.name),this.buildStorageService.addBuild(t),this.created.emit()}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(me),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-empty"]],inputs:{name:"name"},outputs:{created:"created"},decls:8,vars:2,consts:[[1,"import-game"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"head",3,"click"],[3,"src"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3,"Choose which character you want to build"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,Rt,2,3,"div",3),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return t.createBuild()}),e._uU(7,"Create build"),e.qZA()()),2&n&&(e.xp6(5),e.Q6J("ngForOf",t.HERO_CLASSES),e.xp6(1),e.Q6J("disabled",null===t.selectedClass))},directives:[_.sg,E.lW],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:16px;height:16px;line-height:14px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]{border-color:#b7b7b7}"]}),a}(),Ke=function(){var a=function(){function l(){(0,p.Z)(this,l),this.created=new e.vpe,this.buildName="My build"}return(0,g.Z)(l,[{key:"passCreatedEvent",value:function(){this.created.emit()}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build"]],outputs:{created:"created"},decls:16,vars:4,consts:[[3,"name","created"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","text",3,"ngModel","ngModelChange"]],template:function(n,t){1&n&&(e.TgZ(0,"h2"),e._uU(1,"Create build from a Slormancer save"),e.qZA(),e.TgZ(2,"app-create-build-from-game",0),e.NdJ("created",function(){return t.passCreatedEvent()}),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"h2"),e._uU(5,"Create build from exported data"),e.qZA(),e.TgZ(6,"app-create-build-from-export",0),e.NdJ("created",function(){return t.passCreatedEvent()}),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"h2"),e._uU(9,"Create empty build"),e.qZA(),e.TgZ(10,"app-create-build-empty",0),e.NdJ("created",function(){return t.passCreatedEvent()}),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"mat-form-field",1)(13,"mat-label"),e._uU(14,"Build name"),e.qZA(),e.TgZ(15,"input",2),e.NdJ("ngModelChange",function(i){return t.buildName=i}),e.qZA()()),2&n&&(e.xp6(2),e.Q6J("name",t.buildName),e.xp6(4),e.Q6J("name",t.buildName),e.xp6(4),e.Q6J("name",t.buildName),e.xp6(5),e.Q6J("ngModel",t.buildName))},directives:[Jt,Qt,Yt,b.KE,b.hX,G.Nt,u.Fj,u.JJ,u.On],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}"]}),a}(),Vt=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.dialog=n}return(0,g.Z)(l,[{key:"created",value:function(){this.dialog.close()}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-build-modal"]],decls:2,vars:0,consts:[[3,"created"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-dialog-content")(1,"app-create-build",0),e.NdJ("created",function(){return t.created()}),e.qZA()())},directives:[v.xY,Ke],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a}(),Dt=function(){var a=(0,g.Z)(function l(n){(0,p.Z)(this,l),this.name=n.name});return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-build-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a build"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&n&&(e.xp6(3),e.hij(" You're about to delete the build ",t.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[v.uh,v.xY,v.H8,E.lW,v.ZT],styles:[""]}),a}();function jt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Build name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A build name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var Gt=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.dialog=n,this.title=t.title,this.form=new u.cw({name:new u.NI(t.name,u.kI.required)})}return(0,g.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-build-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,t){1&n&&e.YNc(0,jt,16,3,"form",0),2&n&&e.Q6J("ngIf",null!==t.form)},directives:[_.O5,u._Y,u.JL,u.sg,v.uh,v.xY,b.KE,b.hX,G.Nt,u.Fj,u.JJ,u.u,b.TO,v.H8,E.lW,v.ZT],styles:[""]}),a}();function Xt(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}var Te=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.dialog=n,this.title=t.title,this.form=new u.cw({name:new u.NI(t.name,u.kI.required)})}return(0,g.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,t){1&n&&e.YNc(0,Xt,16,3,"form",0),2&n&&e.Q6J("ngIf",null!==t.form)},directives:[_.O5,u._Y,u.JL,u.sg,v.uh,v.xY,b.KE,b.hX,G.Nt,u.Fj,u.JJ,u.u,b.TO,v.H8,E.lW,v.ZT],styles:[""]}),a}(),zt=function(){var a=function(){function l(){(0,p.Z)(this,l)}return(0,g.Z)(l,[{key:"downloadFile",value:function(t,o){var i=document.createElement("a"),r=new Blob([t],{type:"text/plain"}),c=window.URL.createObjectURL(r);i.href=c,i.download=o,i.click(),window.URL.revokeObjectURL(c),i.remove()}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),X=h(4102),$=h(508);function $t(a,l){if(1&a&&(e.TgZ(0,"mat-select-trigger"),e._UZ(1,"img",21),e._uU(2),e.qZA()),2&a){var n=e.oxw();e.xp6(1),e.MGl("src","assets/img/character/icon/",n.buildControl.value.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",n.buildControl.value.name," ")}}function Wt(a,l){if(1&a&&(e.TgZ(0,"mat-option",22),e._UZ(1,"img",21),e._uU(2),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.MGl("src","assets/img/character/icon/",n.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",n.name," ")}}var Kt=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r,c,s,m,d,f){var C;return(0,p.Z)(this,t),(C=n.call(this)).messageService=o,C.downloadService=i,C.clipboardService=r,C.importExportService=c,C.buildStorageService=s,C.buildService=m,C.router=d,C.dialog=f,C.VERSION=ce.N.version,C.GITHUB_LINK=ce.N.githublink,C.GAME_LINK=ce.N.gameLink,C.sidenav=null,C.busy=!1,C.buildControl=new u.NI(C.buildStorageService.getBuildPreview()),C.buildControl.valueChanges.pipe((0,L.R)(C.unsubscribe)).subscribe(function(k){return C.buildStorageService.loadBuild(k)}),C.buildStorageService.buildChanged.pipe((0,L.R)(C.unsubscribe)).subscribe(function(){C.buildControl.setValue(C.buildStorageService.getBuildPreview(),{emitEvent:!1})}),C}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){}},{key:"closeSideNav",value:function(){null!==this.sidenav&&this.sidenav.close()}},{key:"getBuilds",value:function(){return this.buildStorageService.getBuilds()}},{key:"getHeroClass",value:function(){var i=M.i.Warrior,r=this.buildStorageService.getBuild();return null!==r&&(i=r.heroClass),i}},{key:"import",value:function(i){var r=this,c=this.buildStorageService.getBuild();if(null!==i&&null!==c)if(null!==i.character)this.dialog.open(Te,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(function(x){if(x){var j=r.buildService.addLayer(c,x,i.character);r.buildStorageService.loadLayer(j),r.closeSideNav()}});else if(null!==i.layer){var m=this.buildService.addLayer(c,i.layer.name,i.layer.character);this.buildStorageService.loadLayer(m),this.closeSideNav()}else if(null!==i.planner){var C,d=null,f=(0,B.Z)(i.planner.layers);try{for(f.s();!(C=f.n()).done;){var k=C.value;d=this.buildService.addLayer(c,k.name,k.character)}}catch(x){f.e(x)}finally{f.f()}null!==d&&this.buildStorageService.loadLayer(d),this.closeSideNav()}}},{key:"downloadLayer",value:function(){var i=this.buildStorageService.getLayer();if(null!==i){var r=this.importExportService.exportLayer(i);this.downloadService.downloadFile(r,i.name)}}},{key:"copyLayer",value:function(){var i=this.buildStorageService.getLayer();if(null!==i){var r=this.importExportService.exportLayer(i);this.clipboardService.copyToClipboard(r)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}},{key:"downloadBuild",value:function(){var i=this.buildStorageService.getBuild();if(null!==i){var r=this.importExportService.exportBuild(i);this.downloadService.downloadFile(r,"build.sav")}}},{key:"copyBuild",value:function(){var i=this.buildStorageService.getBuild();if(null!==i){var r=this.importExportService.exportBuild(i);this.clipboardService.copyToClipboard(r)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}},{key:"copyExternalLink",value:function(){var i=this.buildStorageService.getLayer();if(null!==i){var r=this.importExportService.exportCharacterAsLink(i.character);this.clipboardService.copyToClipboard(r)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}},{key:"deleteBuild",value:function(){var i=this,r=this.buildStorageService.getBuild();null!==r&&this.dialog.open(Dt,{data:{name:r.name}}).afterClosed().subscribe(function(s){s&&(i.buildStorageService.deleteBuild(),0===i.buildStorageService.getBuilds().length&&(console.log("redirection : "),i.router.navigate(["slorm-planner","create"])))})}},{key:"editBuild",value:function(){var i=this,r=this.buildStorageService.getBuild();null!==r&&this.dialog.open(Gt,{data:{title:"Edit build name",name:r.name}}).afterClosed().subscribe(function(s){s&&(r.name=s,i.buildStorageService.saveBuild())})}},{key:"createNewBuild",value:function(){this.dialog.open(Vt)}},{key:"trackbyBuildPreview",value:function(i,r){return r.storageKey}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(oe.e),e.Y36(zt),e.Y36(ze),e.Y36(Se),e.Y36(A),e.Y36(me),e.Y36(Y.F0),e.Y36(v.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:59,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"build"],[1,"build-selection"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit build name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete build",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"info"],["target","blank",3,"href"],[1,"hero-icon",3,"src"],[3,"value"]],template:function(n,t){1&n&&(e._UZ(0,"input",0),e.TgZ(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Builds"),e.qZA(),e.TgZ(5,"div",3)(6,"mat-form-field",4)(7,"mat-label"),e._uU(8,"Current build"),e.qZA(),e.TgZ(9,"mat-select",5),e.YNc(10,$t,3,2,"mat-select-trigger",6),e.YNc(11,Wt,3,3,"mat-option",7),e.qZA()(),e.TgZ(12,"button",8),e.NdJ("click",function(){return t.editBuild()}),e.TgZ(13,"mat-icon"),e._uU(14,"edit"),e.qZA()(),e.TgZ(15,"button",9),e.NdJ("click",function(){return t.deleteBuild()}),e.TgZ(16,"mat-icon"),e._uU(17,"delete"),e.qZA()()(),e.TgZ(18,"button",10),e.NdJ("click",function(){return t.createNewBuild()}),e._uU(19,"New build"),e.qZA()(),e._UZ(20,"hr"),e.TgZ(21,"div",11)(22,"h3"),e._uU(23,"Import"),e.qZA(),e.TgZ(24,"app-import-data",12),e.NdJ("import",function(i){return t.import(i)}),e.qZA()(),e._UZ(25,"hr"),e.TgZ(26,"div",13)(27,"h3"),e._uU(28,"Export"),e.qZA(),e.TgZ(29,"div",14)(30,"p"),e._uU(31,"Current layer"),e.qZA(),e.TgZ(32,"div",15)(33,"button",16),e.NdJ("click",function(){return!t.busy&&t.downloadLayer()}),e.TgZ(34,"mat-icon"),e._uU(35,"file_download"),e.qZA()(),e.TgZ(36,"button",17),e.NdJ("click",function(){return!t.busy&&t.copyLayer()}),e.TgZ(37,"mat-icon"),e._uU(38,"content_copy"),e.qZA()(),e.TgZ(39,"button",18),e.NdJ("click",function(){return!t.busy&&t.copyExternalLink()}),e.TgZ(40,"mat-icon"),e._uU(41,"share"),e.qZA()()()(),e.TgZ(42,"div",14)(43,"p"),e._uU(44,"Current build"),e.qZA(),e.TgZ(45,"div",15)(46,"button",16),e.NdJ("click",function(){return!t.busy&&t.downloadBuild()}),e.TgZ(47,"mat-icon"),e._uU(48,"file_download"),e.qZA()(),e.TgZ(49,"button",17),e.NdJ("click",function(){return!t.busy&&t.copyBuild()}),e.TgZ(50,"mat-icon"),e._uU(51,"content_copy"),e.qZA()()()()(),e.TgZ(52,"div",19),e._uU(53),e.TgZ(54,"a",20),e._uU(55,"Github"),e.qZA(),e._uU(56," - "),e.TgZ(57,"a",20),e._uU(58,"The Slormancer"),e.qZA()()()),2&n&&(e.xp6(9),e.Q6J("formControl",t.buildControl),e.xp6(1),e.Q6J("ngIf",null!==t.buildControl.value),e.xp6(1),e.Q6J("ngForOf",t.getBuilds()),e.xp6(13),e.Q6J("heroClass",t.getHeroClass()),e.xp6(29),e.hij(" Slorm Planner ",t.VERSION," - "),e.xp6(1),e.Q6J("href",t.GITHUB_LINK,e.LSH),e.xp6(3),e.Q6J("href",t.GAME_LINK,e.LSH))},directives:[b.KE,b.hX,X.gD,u.JJ,u.oH,_.O5,X.$L,_.sg,$.ey,E.lW,z.gM,H.Hw,We],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),a}(),en=function(){var a=(0,g.Z)(function l(n){(0,p.Z)(this,l),this.name=n.name});return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-delete-layer-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&n&&(e.xp6(3),e.hij(" You're about to delete layer ",t.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[v.uh,v.xY,v.H8,E.lW,v.ZT],styles:[""]}),a}(),Me=function(){var a=function(){function l(){(0,p.Z)(this,l),this.search=null,this.dom=document.createElement("div"),this.searchChanged=new xe.X(null)}return(0,g.Z)(l,[{key:"hasSearch",value:function(){return null!==this.search}},{key:"setSearch",value:function(t){this.search=null!==t&&t.length>0?t:null,this.searchChanged.next(this.search)}},{key:"getCleanSearchValue",value:function(){return null===this.search?null:this.search.toLowerCase().trim()}},{key:"removeHtmlTags",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=t;if(null!==i){if(this.dom.innerHTML=i.toLowerCase(),o.length>0){var c,r=(0,B.Z)(o);try{for(r.s();!(c=r.n()).done;)for(var s=c.value,m=this.dom.getElementsByClassName(s),d=0,f=m.length;d<f;d++){var C=m.item(d);C&&C.remove()}}catch(k){r.e(k)}finally{r.f()}}i=this.dom.textContent}return i}},{key:"stringsMatchSearch",value:function(t){var o=!0,i=this.getCleanSearchValue();return null!==i&&(o=null===this.search||void 0!==t.find(function(r){return(0,O.BX)(r)&&-1!==r.toLowerCase().indexOf(i)})),o}},{key:"itemMatchSearch",value:function(t){var o=this;return this.stringsMatchSearch([t.level.toString(),t.name,t.base,t.rarity].concat((0,I.Z)(t.affixes.map(function(i){return[i.isPure?"pure":null,o.removeHtmlTags(i.valueLabel+" "+i.statLabel,["details"])]}).flat()),[null===t.legendaryEffect?null:this.removeHtmlTags(t.legendaryEffect.description,["details"]),null!==t.reaperEnchantment?this.removeHtmlTags(t.reaperEnchantment.label,["details"]):null,null!==t.skillEnchantment?this.removeHtmlTags(t.skillEnchantment.label,["details"]):null,null!==t.attributeEnchantment?this.removeHtmlTags(t.attributeEnchantment.label,["details"]):null]))}},{key:"upgradeMatchSearch",value:function(t){return this.stringsMatchSearch([t.name,t.type,this.removeHtmlTags(t.description)].concat((0,I.Z)(t.genres),[t.genresLabel,this.removeHtmlTags(t.costLabel),this.removeHtmlTags(t.costType)],(0,I.Z)(t.relatedBuffs.map(function(o){return o.name})),(0,I.Z)(t.relatedClassMechanics.map(function(o){return o.name})),(0,I.Z)(t.relatedMechanics.map(function(o){return o.name}))))}},{key:"ancestralLegacyMatchSearch",value:function(t){return this.stringsMatchSearch([t.name,t.costType].concat((0,I.Z)(t.genres),[t.isActivable?"activable":null,this.removeHtmlTags(t.description)],(0,I.Z)(t.relatedBuffs.map(function(o){return o.name})),(0,I.Z)(t.relatedMechanics.map(function(o){return o.name})),(0,I.Z)(t.types),[t.typeLabel,t.genresLabel,t.costLabel]))}},{key:"traitMatchSearch",value:function(t){return this.stringsMatchSearch([t.rankLabel,this.removeHtmlTags(t.cumulativeStats),this.removeHtmlTags(t.description),t.traitLevelLabel])}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}(),N=h(9224);function tn(a,l){if(1&a&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.label," ")}}function nn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeSearch()}),e._uU(1,"close"),e.qZA()}}var an=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r,c){var s;return(0,p.Z)(this,t),(s=n.call(this)).buildStorageService=o,s.buildService=i,s.searchService=r,s.dialog=c,s.searchControl=new u.NI(""),s.layerControl=new u.NI(null),s.layerOptions=[],s}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.layerControl.setValue(r,{emitEvent:!1})}),this.buildStorageService.buildChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){i.layerOptions=null===r?[]:r.layers.map(function(c){return{label:c.name,value:c}})}),this.searchService.searchChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.searchControl.setValue(r,{emitEvent:!1})}),this.layerControl.setValue(this.buildStorageService.getLayer(),{emitEvent:!1}),this.layerControl.valueChanges.subscribe(function(r){return i.buildStorageService.loadLayer(r)}),this.searchControl.valueChanges.subscribe(function(r){return i.searchService.setSearch(r)})}},{key:"hasSearch",value:function(){return this.searchService.hasSearch()}},{key:"removeSearch",value:function(){this.searchService.setSearch(null)}},{key:"editLayer",value:function(){var i=this,r=this.buildStorageService.getLayer();null!==r&&this.dialog.open(Te,{data:{title:"Edit layer name",name:r.name}}).afterClosed().subscribe(function(s){s&&(r.name=s,i.buildStorageService.saveLayer())})}},{key:"addLayer",value:function(){var i=this;this.dialog.open(Te,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(c){var s=i.buildStorageService.getBuild();if(c&&null!==s){var m=i.buildService.addLayer(s,c);i.buildStorageService.loadLayer(m)}})}},{key:"duplicateLayer",value:function(){var i=this;this.dialog.open(Te,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(function(c){var s=i.buildStorageService.getBuild(),m=i.buildStorageService.getLayer();if(c&&null!==s&&null!==m){var d=i.buildService.duplicateLayer(s,m,c);i.buildStorageService.loadLayer(d)}})}},{key:"removeLayer",value:function(){var i=this,r=this.buildStorageService.getLayer(),c=this.buildStorageService.getBuild();null!==r&&this.dialog.open(en,{data:{name:r.name}}).afterClosed().subscribe(function(m){m&&null!==c&&(i.buildService.deleteLayer(c,r),i.buildStorageService.saveBuild())})}},{key:"hasRoomForMoreLayer",value:function(){return this.buildStorageService.hasRoomForAnotherLayer()}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(me),e.Y36(Me),e.Y36(v.uw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Duplicate this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(n,t){1&n&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card")(2,"mat-card-content")(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,tn,2,2,"mat-option",4),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){return t.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA()(),e.TgZ(12,"button",6),e.NdJ("click",function(){return t.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()(),e.TgZ(15,"button",7),e.NdJ("click",function(){return t.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA()(),e.TgZ(18,"button",8),e.NdJ("click",function(){return t.duplicateLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA()()(),e.TgZ(21,"div",9)(22,"mat-form-field",2)(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,nn,2,0,"mat-icon",11),e.qZA()()()()),2&n&&(e.xp6(7),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layerOptions),e.xp6(4),e.Q6J("disabled",t.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!t.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!t.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",t.searchControl),e.xp6(1),e.Q6J("ngIf",t.hasSearch()))},directives:[N.a8,N.dn,b.KE,b.hX,X.gD,u.JJ,u.oH,_.sg,$.ey,E.lW,z.gM,H.Hw,G.Nt,u.Fj,_.O5,b.R9],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),a}(),on=["dragImage"],rn=["dragBackground"];function ln(a,l){if(1&a&&(e.TgZ(0,"a",11,12)(2,"span",13),e._uU(3),e.qZA()()),2&a){var n=l.$implicit,t=e.MAs(1);e.Q6J("routerLink",n.route)("active",t.isActive),e.xp6(3),e.Oqu(n.name)}}var cn=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).itemMoveService=o,i.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],i.isDragging=!1,i.dragImage=null,i.dragBackground=null,i.itemMoveService.draggingItem.pipe((0,L.R)(i.unsubscribe)).subscribe(function(r){i.isDragging=r;var c=i.itemMoveService.getHoldItem();null!==c&&i.dragImage&&i.dragBackground&&(i.dragImage.nativeElement.src=c.icon,i.dragBackground.nativeElement.src=c.itemIconBackground)}),i}return(0,g.Z)(t,[{key:"onMouseMove",value:function(i){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){var r=i.clientY-this.dragImage.nativeElement.height/2+"px",c=i.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=r,this.dragImage.nativeElement.style.left=c,this.dragBackground.nativeElement.style.top=r,this.dragBackground.nativeElement.style.left=c}}},{key:"onMouseUp",value:function(){this.itemMoveService.releaseHoldItem()}},{key:"onMouseContextMenu",value:function(){this.itemMoveService.releaseHoldItem()}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(ue))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-build"]],viewQuery:function(n,t){var o;1&n&&(e.Gf(on,5),e.Gf(rn,5)),2&n&&(e.iGM(o=e.CRH())&&(t.dragImage=o.first),e.iGM(o=e.CRH())&&(t.dragBackground=o.first))},hostBindings:function(n,t){1&n&&e.NdJ("mousemove",function(i){return t.onMouseMove(i)})("mouseup",function(){return t.onMouseUp()})("contextmenu",function(){return t.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(n,t){if(1&n){var o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),e.NdJ("click",function(){return e.CHM(o),e.MAs(8).toggle()}),e._uU(3,"menu"),e.qZA()(),e.TgZ(4,"nav",3),e.YNc(5,ln,4,3,"a",4),e.qZA()(),e.TgZ(6,"mat-sidenav-container")(7,"mat-sidenav",null,5),e._UZ(9,"app-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header")(12,"router-outlet")(13,"img",7,8)(15,"img",9,10),e.qZA()()}if(2&n){var i=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",t.ROUTES),e.xp6(4),e.Q6J("sidenav",i),e.xp6(4),e.ekj("dragging",t.isDragging),e.xp6(2),e.ekj("dragging",t.isDragging)}},directives:[H.Hw,Ce.BU,_.sg,Y.yS,Ce.Nj,Y.Od,qe.TM,qe.JX,Kt,qe.Rh,an,Y.lC],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),a}(),et=h(9184),tt=h(7438),Ze=h(7201),F=h(9776),re=h(8313);function sn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){var r=e.CHM(n).$implicit,c=e.MAs(1);return e.oxw(2).showOverlay(c,r)})("mouseleave",function(){return e.CHM(n),e.oxw(2).hideOverlay()}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){var t=l.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function un(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){var r=e.CHM(n).$implicit,c=e.MAs(1);return e.oxw(2).showOverlay(c,r)})("mouseleave",function(){return e.CHM(n),e.oxw(2).hideOverlay()}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){var t=l.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function mn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){var r=e.CHM(n).$implicit,c=e.MAs(1);return e.oxw(2).showOverlay(c,r)})("mouseleave",function(){return e.CHM(n),e.oxw(2).hideOverlay()}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&a){var t=l.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function dn(a,l){if(1&a&&(e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"h3",12)(3,"p",12),e.qZA()()),2&a){var n=e.oxw(3);e.xp6(2),e.Q6J("innerHTML",n.overlayMechanic.name,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.overlayMechanic.description,e.oJD)}}function gn(a,l){if(1&a&&e.YNc(0,dn,4,2,"ng-template",9),2&a){var n=e.oxw(2);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",n.overlayTrigger)}}function pn(a,l){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,sn,6,2,"div",2),e.YNc(2,un,6,2,"div",2),e.YNc(3,mn,6,2,"div",2),e.YNc(4,gn,1,2,null,3),e.qZA()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.classMechanics),e.xp6(1),e.Q6J("ngForOf",n.mechanics),e.xp6(1),e.Q6J("ngForOf",n.buffs),e.xp6(1),e.Q6J("ngIf",null!==n.overlayMechanic&&null!==n.overlayTrigger)}}var nt=function(){var a=function(){function l(){(0,p.Z)(this,l),this.classMechanics=[],this.mechanics=[],this.buffs=[],this.overlayTrigger=null,this.overlayMechanic=null}return(0,g.Z)(l,[{key:"showOverlay",value:function(t,o){this.overlayMechanic=o,this.overlayTrigger=t}},{key:"hideOverlay",value:function(){this.overlayTrigger=null,this.overlayMechanic=null}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-mechanics-view"]],inputs:{classMechanics:"classMechanics",mechanics:"mechanics",buffs:"buffs"},decls:1,vars:1,consts:[["class","mechanics",4,"ngIf"],[1,"mechanics"],["class","mechanic","cdkOverlayOrigin","",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[4,"ngIf"],["cdkOverlayOrigin","",1,"mechanic",3,"mouseenter","mouseleave"],["trigger","cdkOverlayOrigin"],[1,"mechanic-icon"],[3,"src"],[1,"mechanic-name"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[1,"slormancer-tooltip"],[1,"inner-box"],[3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,pn,5,4,"div",0),2&n&&e.Q6J("ngIf",t.classMechanics.length>0||t.mechanics.length>0||t.buffs.length>0)},directives:[_.O5,_.sg,F.xu,F.pI],styles:[".mechanics[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;background-color:#000;padding:4px;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:36px;min-height:36px;width:36px;height:36px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-name[_ngcontent-%COMP%]{background-color:#141310;padding:8px;display:flex;flex-direction:row;align-items:center;flex-grow:1}.slormancer-tooltip[_ngcontent-%COMP%]{max-width:350px}.slormancer-tooltip[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0;font-weight:400;color:#ce4607}.slormancer-tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.slormancer-tooltip[_ngcontent-%COMP%]     .value{color:#ce4607}"]}),a}();function _n(a,l){if(1&a&&e._UZ(0,"div",17),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.ancestralLegacy.genresLabel,e.oJD)}}function fn(a,l){if(1&a&&e._UZ(0,"div",18),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.ancestralLegacy.cooldownLabel,e.oJD)}}function vn(a,l){if(1&a&&e._UZ(0,"div",19),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.ancestralLegacy.costLabel,e.oJD)}}function hn(a,l){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8),e._UZ(10,"div",9),e.YNc(11,_n,1,1,"div",10),e.YNc(12,fn,1,1,"div",11),e._UZ(13,"div",12),e.YNc(14,vn,1,1,"div",13),e.qZA()(),e._UZ(15,"div",14)(16,"div",15)(17,"app-mechanics-view",16),e.qZA()()),2&a){var n=e.oxw();e.Gre("ancestral-legacy ",n.ancestralLegacy.damageTypes.length>0?n.ancestralLegacy.damageTypes[0]:"",""),e.xp6(2),e.Oqu(n.ancestralLegacy.name),e.xp6(6),e.Q6J("src",n.ancestralLegacy.icon,e.LSH),e.xp6(2),e.Q6J("innerHTML",n.ancestralLegacy.typeLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==n.ancestralLegacy.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==n.ancestralLegacy.cooldownLabel),e.xp6(1),e.Q6J("innerHTML",n.ancestralLegacy.rankLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==n.ancestralLegacy.costLabel),e.xp6(2),e.Q6J("innerHTML",n.ancestralLegacy.description,e.oJD),e.xp6(1),e.Q6J("mechanics",n.ancestralLegacy.relatedMechanics)("buffs",n.ancestralLegacy.relatedBuffs)}}var Ue=function(){var a=(0,g.Z)(function l(n){(0,p.Z)(this,l),this.slormancerTranslateService=n,this.NEXT_RANK_LABEL=this.slormancerTranslateService.translate("tt_next_rank"),this.MAX_RANK_LABEL=this.slormancerTranslateService.translate("tt_max_rank"),this.ancestralLegacy=null,this.hideNextRank=!1});return a.\u0275fac=function(n){return new(n||a)(e.Y36(re.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-view"]],inputs:{ancestralLegacy:"ancestralLegacy",hideNextRank:"hideNextRank"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"content"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"type",3,"innerHTML"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],[1,"rank",3,"innerHTML"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,hn,18,13,"div",0),2&n&&e.Q6J("ngIf",null!==t.ancestralLegacy)},directives:[_.O5,nt],styles:[".ancestral-legacy[_ngcontent-%COMP%]{background-color:#090909;border:3px solid black;color:#fff;display:flex;flex-direction:column;max-width:400px}.ancestral-legacy[_ngcontent-%COMP%]  .description .value{color:#ce4607}.ancestral-legacy[_ngcontent-%COMP%]  .next-rank .value, .ancestral-legacy[_ngcontent-%COMP%]  .head, .ancestral-legacy[_ngcontent-%COMP%]  .rank .current, .ancestral-legacy[_ngcontent-%COMP%]  .cooldown .value{color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]  .range, .ancestral-legacy[_ngcontent-%COMP%]  .range .value, .ancestral-legacy[_ngcontent-%COMP%]  .details, .ancestral-legacy[_ngcontent-%COMP%]  .details .value, .ancestral-legacy[_ngcontent-%COMP%]  .formula, .ancestral-legacy[_ngcontent-%COMP%]  .formula .value{color:#686868}.ancestral-legacy[_ngcontent-%COMP%]  .affixes .range, .ancestral-legacy[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ancestral-legacy[_ngcontent-%COMP%]  .life{color:#257539}.ancestral-legacy[_ngcontent-%COMP%]  .mana{color:#3397dd}.ancestral-legacy.mag[_ngcontent-%COMP%]  .value:not(.mana){color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid #3c3931}.ancestral-legacy[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid #be871f;min-width:60px;min-height:60px;width:60px;height:60px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),a}();function Cn(a,l){if(1&a&&e._UZ(0,"app-ancestral-legacy-view",8),2&a){var n=e.oxw(3);e.Q6J("ancestralLegacy",n.ancestralLegacy)}}function Mn(a,l){if(1&a&&e.YNc(0,Cn,1,1,"ng-template",7),2&a){e.oxw();var n=e.MAs(1),t=e.oxw();e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function bn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",1,2),e.NdJ("click",function(){return e.CHM(n),e.oxw().increasesRank()})("contextmenu",function(){return e.CHM(n),e.oxw().decreasesRank()}),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,Mn,1,2,null,6),e.qZA()}if(2&a){var t=e.oxw();e.ekj("ranked",t.ancestralLegacy.baseRank>0)("equipped",t.equipped)("selected",t.selected)("readonly",t.readonly)("hidden-search",t.hiddenBySearch),e.xp6(3),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(1),e.ekj("max",t.ancestralLegacy.rank===t.ancestralLegacy.maxRank),e.xp6(1),e.Oqu(t.ancestralLegacy.rank===t.ancestralLegacy.maxRank?"Max":t.ancestralLegacy.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}var at=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r){var c;return(0,p.Z)(this,t),(c=n.call(this)).searchService=o,c.slormancerAncestralLegacyService=i,c.buildStorageService=r,c.ancestralLegacy=null,c.equipped=!1,c.selected=!1,c.readonly=!1,c.overlay=!1,c.changed=new e.vpe,c.showOverlay=!1,c.hiddenBySearch=!1,c}return(0,g.Z)(t,[{key:"onOver",value:function(){this.showOverlay=!0}},{key:"onLeave",value:function(){this.showOverlay=!1}},{key:"ngOnInit",value:function(){var i=this;this.searchService.searchChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.hiddenBySearch=null!==r&&null!==i.ancestralLegacy&&!i.searchService.ancestralLegacyMatchSearch(i.ancestralLegacy)})}},{key:"setRank",value:function(i,r){i.baseRank!==r&&this.selected&&(this.slormancerAncestralLegacyService.updateAncestralLegacyModel(i,r),this.slormancerAncestralLegacyService.updateAncestralLegacyView(i),this.buildStorageService.saveLayer())}},{key:"increasesRank",value:function(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank+1)),this.changed.emit(this.ancestralLegacy)),!1}},{key:"decreasesRank",value:function(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank-1)),this.changed.emit(this.ancestralLegacy)),!1}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(Me),e.Y36(et.O),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-slot"]],hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onOver()})("mouseleave",function(){return t.onLeave()})},inputs:{ancestralLegacy:"ancestralLegacy",equipped:"equipped",selected:"selected",readonly:"readonly",overlay:"overlay"},outputs:{changed:"changed"},features:[e.qOj],decls:1,vars:1,consts:[["class","ancestral-legacy","cdkOverlayOrigin","",3,"ranked","equipped","selected","readonly","hidden-search","click","contextmenu",4,"ngIf"],["cdkOverlayOrigin","",1,"ancestral-legacy",3,"click","contextmenu"],["trigger","cdkOverlayOrigin"],[1,"inner"],[3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy"]],template:function(n,t){1&n&&e.YNc(0,bn,7,15,"div",0),2&n&&e.Q6J("ngIf",null!==t.ancestralLegacy)},directives:[_.O5,F.xu,F.pI,Ue],styles:[".ancestral-legacy[_ngcontent-%COMP%]{position:relative;z-index:1;border-radius:50%;border:1px solid transparent}.ancestral-legacy[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.ancestral-legacy.selected[_ngcontent-%COMP%]{border:1px solid #841e06}.ancestral-legacy.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.1}.ancestral-legacy.ranked.equipped[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background-color:#d5ad48}.ancestral-legacy[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:4px;border-radius:4px}.ancestral-legacy[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#202020;border:1px solid black;border-radius:50%;width:16px;height:16px}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid black;width:12px;height:12px;border-radius:50%;overflow:hidden}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:4px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0;width:34px;height:34px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:10px}"]}),a}();function yn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(c){return e.CHM(n),e.oxw(2).selectAncestralLegacy(c)}),e._uU(1,"> "),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw().$implicit,i=e.oxw();e.Akn(o.iconStyle),e.Q6J("ancestralLegacy",i.getAncestralLegacy(t))("equipped",i.isAncestralLegacyEquipped(t))("selected",i.isNodeSelected(t))}}function On(a,l){if(1&a&&(e.TgZ(0,"div")(1,"div",10),e.YNc(2,yn,2,5,"app-ancestral-legacy-slot",11),e.qZA()()),2&a){var n=l.$implicit,t=e.oxw();e.Akn(n.style),e.MT6("zone absolute color-",n.color," size-",n.size,""),e.ekj("active",t.isRealmActive(n.realmId)),e.xp6(2),e.Q6J("ngForOf",n.ancestralLegacies)}}function Pn(a,l){1&a&&e._UZ(0,"div",13),2&a&&e.Akn(l.$implicit.style)}function kn(a,l){1&a&&e._UZ(0,"div",14),2&a&&e.Akn(l.$implicit.style)}function xn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw().toggleNode(c.nodeId)}),e._UZ(1,"div",16),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw();e.Akn(t.style),e.ekj("active",o.isNodeActive(t.nodeId))("available",o.isNodeAvailable(t.nodeId))}}var Sn=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r){var c;return(0,p.Z)(this,t),(c=n.call(this)).buildStorageService=o,c.slormancerDataService=i,c.slormancerCharacterModifierService=r,c.selectedAncestralLegacy=null,c.selectedAncestralLegacyChange=new e.vpe,c.BOUNDS_X={min:-500,max:500},c.BOUNDS_Y={min:-500,max:500},c.availableNodes=[],c.activeRealms=[],c.weldingShapes=[],c.lineShapes=[],c.zoneShapes=[],c.nodeShapes=[],c.character=null,c.position={x:0,y:0},c.scale=2,c.grabbed=!1,c.drawMap(),c}return(0,g.Z)(t,[{key:"onWheelUp",value:function(i){return this.scale=Math.max(1,Math.min(2,this.scale+(i.deltaY>0?-.2:.2))),!1}},{key:"onMouseDown",value:function(){this.grabbed=!0}},{key:"onMouseUp",value:function(){this.grabbed=!1}},{key:"onMouseMouve",value:function(i){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+i.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+i.movementY)))}},{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){i.character=null===r?null:r.character,i.updateMap()})}},{key:"drawMap",value:function(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,w.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,w.pb)(0,9),-72,52),this.addNodeShapes((0,w.pb)(0,9).map(function(i){return 10+2*i}),-82.8,92),this.addNodeShapes((0,w.pb)(0,9).map(function(i){return 11+2*i}),-61.2,92),this.addZoneShapes((0,w.pb)(10,19),-54,112),this.addZoneShapes((0,w.pb)(20,29),-72,150,2),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,w.pb)(0,9).map(function(i){return 31+3*i}),-72,120),this.addNodeShapes((0,w.pb)(10,19).map(function(i){return 3*i}),-81,127),this.addNodeShapes((0,w.pb)(10,19).map(function(i){return 2+3*i}),-63,127),this.addZoneShapes((0,w.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,w.pb)(0,4).map(function(i){return 61+5*i}),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,45,49,53,57],-71,204),this.addZoneShapes([42,46,50,54,58],-37,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181),this.addZoneShapes((0,w.pb)(10,14).map(function(i){return 4*i+3}),-24.5,216),this.addNodeShapes([90,95,100,105,85],-22,194),this.addNodeShapes([115,121,127,133,139],-30.5,209),this.addZoneShapes((0,w.pb)(10,14).map(function(i){return 4*i}),-83.35714285714286,216),this.addNodeShapes([86,91,96,101,106],-86.35714285714286,194),this.addNodeShapes([112,118,124,130,136],-77.35714285714286,209),this.addZoneShapes((0,w.pb)(60,64),-54,238,3),this.addNodeShapes([88,93,98,103,108],-54,198),this.addZoneShapes((0,w.pb)(22,26).map(function(i){return 3*i}),-70,258,2),this.addNodeShapes([113,119,125,131,137],-70.5,228),this.addZoneShapes((0,w.pb)(22,26).map(function(i){return 3*i+1}),-38,258,2),this.addNodeShapes([114,120,126,132,138],-37.5,228)}},{key:"updateMap",value:function(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){var i=null!==this.character?this.character.ancestralLegacies.activeNodes:[],r=tt.R.filter(function(c){return void 0!==c.nodes.find(function(s){return-1!==i.indexOf(s)})});this.character.ancestralLegacies.activeNodes.length<D.sD&&(this.availableNodes=[].concat((0,I.Z)(tt.m),(0,I.Z)(r.map(function(c){return c.nodes}).flat())).filter(O.mr)),this.activeRealms=r.map(function(c){return c.realm})}}},{key:"isNodeActive",value:function(i){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(i)}},{key:"isRealmActive",value:function(i){return-1!==this.activeRealms.indexOf(i)}},{key:"isNodeAvailable",value:function(i){return-1!==this.availableNodes.indexOf(i)}},{key:"isNodeSelected",value:function(i){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===i}},{key:"isAncestralLegacyEquipped",value:function(i){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(i)}},{key:"getAncestralLegacy",value:function(i){var r=null;return null!==this.character&&(r=(0,O.lA)(this.character.ancestralLegacies.ancestralLegacies.find(function(c){return c.id==i}))),r}},{key:"toggleNode",value:function(i){if(null!==this.character){var r;r=this.isNodeActive(i)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,i):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,i),this.buildStorageService.saveLayer(),r&&this.updateMap()}return!1}},{key:"selectAncestralLegacy",value:function(i){console.log(i),this.selectedAncestralLegacyChange.emit(i)}},{key:"addLineShapes",value:function(i,r,c,s){var m,d=360/i;(m=this.lineShapes).push.apply(m,(0,I.Z)((0,w.pb)(i).map(function(f){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(r+f*d)+"deg) translateX("+c+"px)"}}})))}},{key:"addWeldinghapes",value:function(i,r,c,s){var m,d=360/i;(m=this.weldingShapes).push.apply(m,(0,I.Z)((0,w.pb)(i).map(function(f){return{style:{width:s+"px",transform:"translate(-50%, -50%) rotate("+(r+f*d)+"deg) translateX("+c+"px)"}}})))}},{key:"addZoneShapes",value:function(i,r,c){var s,m=this,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,f=360/i.length;(s=this.zoneShapes).push.apply(s,(0,I.Z)(i.map(function(C,k){var x=m.slormancerDataService.getAncestralRealmColor(C),j=m.slormancerDataService.getAncestralLegacyIdsFromRealm(C),Q=r+k*f;return{style:{transform:"translate(-50%, -50%) rotate("+Q+"deg) translateX("+c+"px)"},iconStyle:{transform:"rotate("+-Q+"deg)"},size:d,realmId:C,ancestralLegacies:j,color:x}})))}},{key:"addNodeShapes",value:function(i,r,c){var s,m=i.length,d=360/m;(s=this.nodeShapes).push.apply(s,(0,I.Z)((0,w.pb)(m).map(function(f){return{style:{transform:"translate(-50%, -50%) rotate("+(r+f*d)+"deg) translateX("+c+"px)"},nodeId:(0,O.Be)(i[f],0)}})))}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(he.o),e.Y36(Ze.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(n,t){1&n&&e.NdJ("wheel",function(i){return t.onWheelUp(i)})("mousedown",function(){return t.onMouseDown()})("mouseup",function(){return t.onMouseUp()})("mouseleave",function(){return t.onMouseUp()})("mousemove",function(i){return t.onMouseMouve(i)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA()()(),e.YNc(6,On,3,9,"div",6),e.YNc(7,Pn,1,2,"div",7),e.YNc(8,kn,1,2,"div",8),e.YNc(9,xn,2,6,"div",9),e.qZA()()),2&n&&(e.ekj("grabbed",t.grabbed),e.xp6(1),e.Udp("top",t.position.y+"px")("left",t.position.x+"px")("transform","scale("+t.scale+")"),e.xp6(5),e.Q6J("ngForOf",t.zoneShapes),e.xp6(1),e.Q6J("ngForOf",t.lineShapes),e.xp6(1),e.Q6J("ngForOf",t.weldingShapes),e.xp6(1),e.Q6J("ngForOf",t.nodeShapes))},directives:[_.sg,at],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid #d5ad48;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]{width:82px;height:82px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:76px;height:76px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),a}();function Tn(a,l){if(1&a&&e._UZ(0,"div",9),2&a){var n=l.$implicit,t=e.oxw();e.ekj("unlocked",t.isPointUnlock(n))}}var Zn=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r){var c;return(0,p.Z)(this,t),(c=n.call(this)).buildStorageService=o,c.slormancerAncestralLegacyService=i,c.messageService=r,c.ANCESTRAL_LEGACY_POINTS=(0,w.pb)(D.JY),c.character=null,c.selectedAncestralLegacy=null,c}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){i.character=null===r?null:r.character,i.selectDefaultAncestralLegacy()})}},{key:"selectDefaultAncestralLegacy",value:function(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){var i=(0,O.lA)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===i?null:(0,O.lA)(this.character.ancestralLegacies.ancestralLegacies[i])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,O.lA)(this.character.ancestralLegacies.ancestralLegacies[0]))}}},{key:"isPointUnlock",value:function(i){return i<D.sD}},{key:"optimizeAncestralLegacies",value:function(){if(null!==this.character){var r,i=(0,B.Z)(this.character.ancestralLegacies.ancestralLegacies);try{for(i.s();!(r=i.n()).done;){var c=r.value;c.baseRank=c.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(c,c.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(c)}}catch(s){i.e(s)}finally{i.f()}this.buildStorageService.saveLayer(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(et.O),e.Y36(oe.e))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div",1),e.YNc(4,Tn,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return t.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(i){return t.selectedAncestralLegacy=i}),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA()()()()),2&n&&(e.xp6(4),e.Q6J("ngForOf",t.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",t.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",t.selectedAncestralLegacy))},directives:[N.a8,N.dn,_.sg,H.Hw,z.gM,Sn,Ue],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:100%}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:550px}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),a}(),wn=h(2652),Ne=h(2031);function An(a,l){if(1&a&&e._UZ(0,"div",9),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.trait.cumulativeStats,e.oJD)}}function In(a,l){if(1&a&&e._UZ(0,"div",9),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.trait.description,e.oJD)}}function En(a,l){if(1&a&&(e.ynx(0),e._UZ(1,"div",10)(2,"div",11),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",n.trait.unlockLabel,e.oJD)}}function Ln(a,l){if(1&a&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"span",4),e._uU(6),e.qZA(),e._uU(7," - "),e.TgZ(8,"span",5),e._uU(9),e.qZA()()(),e.TgZ(10,"div",6),e.YNc(11,An,1,1,"div",7),e.YNc(12,In,1,1,"div",7),e.YNc(13,En,3,1,"ng-container",8),e.qZA()()),2&a){var n=e.oxw();e.Gre("trait attribute-",n.trait.attribute,""),e.xp6(3),e.Oqu(n.trait.attributeName),e.xp6(3),e.Oqu(n.trait.rankLabel),e.xp6(3),e.Oqu(n.trait.traitLevelLabel),e.xp6(2),e.Q6J("ngIf",null!==n.trait.cumulativeStats),e.xp6(1),e.Q6J("ngIf",null!==n.trait.description),e.xp6(1),e.Q6J("ngIf",null!==n.trait.unlockLabel)}}var Jn=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.trait=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-trait-view"]],inputs:{trait:"trait"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"rank"],[1,"level"],[1,"content"],["class","description",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"description",3,"innerHTML"],[1,"separator"],[1,"unlock",3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,Ln,14,9,"div",0),2&n&&e.Q6J("ngIf",null!==t.trait)},directives:[_.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid #3c3931}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a}();function qn(a,l){1&a&&e._UZ(0,"div",7)}function Un(a,l){if(1&a&&e._UZ(0,"app-trait-view",9),2&a){var n=e.oxw(3);e.Q6J("trait",n.trait)}}function Nn(a,l){if(1&a&&e.YNc(0,Un,1,1,"ng-template",8),2&a){e.oxw();var n=e.MAs(1),t=e.oxw();e.Q6J("cdkConnectedOverlayOpen",t.isMouseOver)("cdkConnectedOverlayOrigin",n)}}function Fn(a,l){if(1&a&&(e.TgZ(0,"div",1,2),e.YNc(2,qn,1,0,"div",3),e.TgZ(3,"div",4),e._UZ(4,"div",5),e.qZA(),e.YNc(5,Nn,1,2,null,6),e.qZA()),2&a){var n=e.oxw();e.Gre("trait attribute-",n.trait.attribute,""),e.ekj("first",n.first)("last",n.last)("minor",n.isMinor(n.trait))("major",n.isMajor(n.trait))("greater",n.isGreater(n.trait))("active",n.unlocked)("bonus",n.bonus)("highlight",n.highlight)("hidden-by-search",n.isHiddenBySearch),e.xp6(2),e.Q6J("ngIf",n.trait.additive),e.xp6(3),e.Q6J("ngIf",n.isMouseOver)}}var Bn=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).searchService=o,i.trait=null,i.first=!1,i.last=!1,i.highlight=!1,i.unlocked=!1,i.bonus=!1,i.isMouseOver=!1,i.isHiddenBySearch=!1,i}return(0,g.Z)(t,[{key:"onMouseEnter",value:function(){this.isMouseOver=!0}},{key:"onMouseLeave",value:function(){this.isMouseOver=!1}},{key:"ngOnInit",value:function(){var i=this;this.searchService.searchChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(){return i.isHiddenBySearch=null!==i.trait&&!i.searchService.traitMatchSearch(i.trait)})}},{key:"isMinor",value:function(i){return i.traitLevel===Ne.y.Minor}},{key:"isMajor",value:function(i){return i.traitLevel===Ne.y.Major}},{key:"isGreater",value:function(i){return i.traitLevel===Ne.y.Greater}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(Me))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-trait"]],hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onMouseEnter()})("mouseleave",function(){return t.onMouseLeave()})},inputs:{trait:"trait",first:"first",last:"last",highlight:"highlight",unlocked:"unlocked",bonus:"bonus"},features:[e.qOj],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","first","last","minor","major","greater","active","bonus","highlight","hidden-by-search",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],["class","additive",4,"ngIf"],[1,"content"],[1,"node"],[4,"ngIf"],[1,"additive"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"trait"]],template:function(n,t){1&n&&e.YNc(0,Fn,6,23,"div",0),2&n&&e.Q6J("ngIf",null!==t.trait)},directives:[_.O5,F.xu,F.pI,Jn],styles:[".trait[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;position:relative;height:54px;width:8px;overflow:hidden;cursor:pointer}.trait.hidden-by-search[_ngcontent-%COMP%]{opacity:.2}.trait[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{position:absolute;width:4px;height:36px;left:4px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;border:4px solid black;background-color:#353535;overflow:hidden;border-left-width:0;border-right-width:0;height:30px;z-index:1}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border:2px solid black;background-color:#202020;height:14px}.trait.attribute-0.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#2f5996}.trait.attribute-0.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#2f59964d}.trait.attribute-1.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#a83007}.trait.attribute-1.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#a830074d}.trait.attribute-2.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#79b549}.trait.attribute-2.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#79b5494d}.trait.attribute-3.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#d0b545}.trait.attribute-3.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#d0b5454d}.trait.attribute-4.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#4bc1b2}.trait.attribute-4.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#4bc1b24d}.trait.attribute-5.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#753098}.trait.attribute-5.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#7530984d}.trait.attribute-6.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#cd7028}.trait.attribute-6.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#cd70284d}.trait.attribute-7.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#bf3c59}.trait.attribute-7.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#bf3c594d}.trait.bonus[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f}.trait.bonus.highlight[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f4d}.trait[_ngcontent-%COMP%]:not(.greater)   .content[_ngcontent-%COMP%]{border-left-width:2px;border-right-width:2px}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:8px}.trait.minor.first[_ngcontent-%COMP%]{width:10px}.trait.minor.first[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-left-width:4px;width:10px}.trait.major[_ngcontent-%COMP%]{width:12px}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:12px}.trait.greater[_ngcontent-%COMP%]{width:16px;position:relative}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;transform:rotate(45deg);border-width:4px;height:36px;width:36px;left:-10px}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-width:2px;width:14px;height:14px}.trait.greater[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{left:6px;height:54px}.trait.greater.last[_ngcontent-%COMP%]{width:32px}"]}),a}();function Hn(a,l){if(1&a&&e._UZ(0,"div",7),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.attributeTraits.summary,e.oJD)}}function Qn(a,l){if(1&a&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8),e.qZA(),e.YNc(9,Hn,1,1,"div",6),e.qZA()()),2&a){var n=e.oxw();e.Gre("trait attribute-",n.attributeTraits.attribute,""),e.xp6(3),e.Oqu(n.attributeTraits.attributeName),e.xp6(2),e.Oqu(n.attributeTraits.title),e.xp6(3),e.Oqu(n.attributeTraits.recapLabel),e.xp6(1),e.Q6J("ngIf",null!==n.attributeTraits.summary)}}var Rn=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.attributeTraits=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attribute-summary-view"]],inputs:{attributeTraits:"attributeTraits"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"content"],[1,"info"],["class","description",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,Qn,10,7,"div",0),2&n&&e.Q6J("ngIf",null!==t.attributeTraits)},directives:[_.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .locked{color:#686868}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value, .trait[_ngcontent-%COMP%]  .max, .trait[_ngcontent-%COMP%]  .max .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid #3c3931}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a}();function Yn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-trait",9),e.NdJ("mouseenter",function(){var s=e.CHM(n).index;return e.oxw(2).nodeEnter(s)})("mouseleave",function(){return e.CHM(n),e.oxw(2).nodeLeave()})("click",function(){return e.CHM(n),e.oxw(2).nodeClick()}),e.qZA()}if(2&a){var t=l.$implicit,o=l.index,i=e.oxw(2);e.Q6J("trait",t)("first",0===o)("last",o===i.attribute.traits.length-1)("highlight",i.isHighlight(o))("bonus",i.isBonus(o))("unlocked",i.isUnlocked(o))}}function Vn(a,l){if(1&a&&e._UZ(0,"app-attribute-summary-view",10),2&a){var n=e.oxw(2);e.Q6J("attributeTraits",n.attribute)}}function Dn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(i){return e.CHM(n),e.oxw(2).addPoint(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}if(2&a){var t=e.oxw(2);e.Q6J("disabled",0===t.remainingPoints)}}function jn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(i){return e.CHM(n),e.oxw(2).removePoint(i)}),e.TgZ(1,"mat-icon"),e._uU(2,"remove"),e.qZA()()}if(2&a){var t=e.oxw(2);e.Q6J("disabled",0===t.attribute.rank)}}function Gn(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",1,2)(2,"img",3),e.NdJ("mouseenter",function(){return e.CHM(n),e.oxw().showSummary=!0})("mouseleave",function(){return e.CHM(n),e.oxw().showSummary=!1}),e.qZA(),e.TgZ(3,"div",4),e.NdJ("mouseenter",function(){return e.CHM(n),e.oxw().nodeEnter(-1)})("mouseleave",function(){return e.CHM(n),e.oxw().nodeLeave()})("click",function(){return e.CHM(n),e.oxw().nodeClick()}),e.qZA(),e.YNc(4,Yn,1,6,"app-trait",5),e.TgZ(5,"div",6),e._uU(6),e.qZA(),e.YNc(7,Vn,1,1,"ng-template",7),e.YNc(8,Dn,3,1,"button",8),e.YNc(9,jn,3,1,"button",8),e.qZA()}if(2&a){var t=e.MAs(1),o=e.oxw();e.Gre("bar attribute-",o.attribute.attribute,""),e.ekj("icon-shift",o.iconShift)("readonly",o.readonly)("short",o.short),e.xp6(2),e.Q6J("src",o.attribute.icon,e.LSH),e.xp6(2),e.Q6J("ngForOf",o.attribute.traits)("ngForTrackBy",o.trackByTrait),e.xp6(2),e.AsE(" +",o.attribute.rank+o.attribute.bonusRank," ",o.attribute.attributeName," "),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",o.showSummary)("cdkConnectedOverlayOrigin",t),e.xp6(1),e.Q6J("ngIf",!o.readonly),e.xp6(1),e.Q6J("ngIf",!o.readonly)}}var it=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.slormancerAttributeService=n,this.buildStorageService=t,this.attribute=null,this.remainingPoints=0,this.iconShift=!1,this.short=!1,this.readonly=!1,this.unlockedRange={min:0,max:0},this.highlightRange={min:0,max:0},this.bonusRange={min:0,max:0},this.cappedCursor=0,this.showSummary=!1,this.cursorIndex=null}return(0,g.Z)(l,[{key:"ngOnInit",value:function(){this.updateCursor()}},{key:"ngOnChanges",value:function(){this.updateCursor()}},{key:"updateCursor",value:function(){null!==this.attribute&&(null===this.cursorIndex?(this.cappedCursor=this.attribute.rank,this.highlightRange={min:0,max:0},this.unlockedRange={min:0,max:this.attribute.rank},this.bonusRange={min:this.attribute.rank,max:this.attribute.rank+this.attribute.bonusRank}):(this.cappedCursor=Math.min(this.attribute.rank+this.remainingPoints,this.cursorIndex+1),this.bonusRange={min:Math.max(this.cappedCursor,this.attribute.rank),max:this.attribute.rank+this.attribute.bonusRank},this.highlightRange=this.cursorIndex<this.attribute.rank?{min:this.cursorIndex+1,max:Math.max(this.attribute.rank,this.cursorIndex+1)}:{min:this.attribute.rank,max:this.cappedCursor}))}},{key:"nodeEnter",value:function(t){this.cursorIndex=t,this.updateCursor()}},{key:"nodeLeave",value:function(){this.cursorIndex=null,this.updateCursor()}},{key:"setRank",value:function(t){null!==this.attribute&&this.attribute.rank!==t&&!this.readonly&&(this.attribute.rank=t,this.slormancerAttributeService.updateAttributeTraits(this.attribute),this.buildStorageService.saveLayer(),this.updateCursor())}},{key:"nodeClick",value:function(){null!==this.attribute&&this.setRank(this.cappedCursor)}},{key:"isUnlocked",value:function(t){return t>=this.unlockedRange.min&&t<this.unlockedRange.max}},{key:"isHighlight",value:function(t){return t>=this.highlightRange.min&&t<this.highlightRange.max}},{key:"isBonus",value:function(t){return t>=this.bonusRange.min&&t<this.bonusRange.max}},{key:"addPoint",value:function(t){null!==this.attribute&&this.remainingPoints>0&&this.setRank(this.attribute.rank+Math.min(this.remainingPoints,t.shiftKey?10:1))}},{key:"removePoint",value:function(t){null!==this.attribute&&this.attribute.rank>0&&this.setRank(this.attribute.rank-Math.min(this.attribute.rank,t.shiftKey?10:1))}},{key:"trackByTrait",value:function(t,o){return t}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(wn.Q),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attribute-line"]],inputs:{attribute:"attribute",remainingPoints:"remainingPoints",iconShift:"iconShift",short:"short",readonly:"readonly"},features:[e.TTD],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","icon-shift","readonly","short",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],[3,"src","mouseenter","mouseleave"],[1,"pre-bar",3,"mouseenter","mouseleave","click"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"total"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click"],[3,"attributeTraits"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(n,t){1&n&&e.YNc(0,Gn,10,18,"div",0),2&n&&e.Q6J("ngIf",null!==t.attribute)},directives:[_.O5,F.xu,_.sg,Bn,F.pI,Rn,E.lW,H.Hw],styles:['.bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:4px 0;position:relative;height:60px}.bar.icon-shift[_ngcontent-%COMP%]{margin-left:16px}.bar[_ngcontent-%COMP%]:before{content:" ";position:absolute;background-color:#353535;border:4px solid black;transform:rotate(45deg);width:38px;height:38px}.bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:2;padding-left:1px}.bar[_ngcontent-%COMP%]   .pre-bar[_ngcontent-%COMP%]{background-color:#353535;border:4px solid black;margin-left:-6px;border-left:0;border-right:0;min-width:20px;width:20px;height:30px;z-index:1}.bar[_ngcontent-%COMP%]:not(.readonly)   .pre-bar[_ngcontent-%COMP%]{cursor:pointer}.bar[_ngcontent-%COMP%]:not(.icon-shift)   .pre-bar[_ngcontent-%COMP%]{width:36px}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:none;background-color:#353535;border:4px solid black;font-weight:700;border-left:0;width:130px;height:30px}.bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.bar.short[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar.short[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}@media (max-width: 768px){.bar[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}}.bar.attribute-0[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#2f5996}.bar.attribute-1[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#a83007}.bar.attribute-2[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#79b549}.bar.attribute-3[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#d0b545}.bar.attribute-4[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#4bc1b2}.bar.attribute-5[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#753098}.bar.attribute-6[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#cd7028}.bar.attribute-7[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#bf3c59}']}),a}();function Xn(a,l){if(1&a&&e._UZ(0,"app-attribute-line",2),2&a){var n=l.$implicit,t=e.oxw(2);e.Q6J("iconShift",n%2==0)("attribute",t.attributes.allocated[n])("remainingPoints",t.attributes.remainingPoints)}}function zn(a,l){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"p"),e._uU(3),e.qZA(),e.YNc(4,Xn,1,3,"app-attribute-line",1),e.qZA()()),2&a){var n=e.oxw();e.xp6(3),e.AsE("",n.attributes.remainingPoints,"/",n.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",n.ALL_ATTRIBUTES)}}var $n=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).buildStorageService=o,i.ALL_ATTRIBUTES=y.A,i.attributes=null,i}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.attributes=null===r?null:r.character.attributes})}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(n,t){1&n&&e.YNc(0,zn,5,3,"mat-card",0),2&n&&e.Q6J("ngIf",null!==t.attributes)},directives:[_.O5,N.a8,N.dn,_.sg,it],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),a}(),Wn=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.character=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(n,t){1&n&&e._uU(0,"TODO")},styles:[""]}),a}(),Kn=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.character=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(n,t){1&n&&e._uU(0,"TODO TURRET")},styles:[""]}),a}();function ea(a,l){if(1&a&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.label)}}function ta(a,l){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function na(a,l){if(1&a&&e._UZ(0,"app-defense-calc",6),2&a){var n=e.oxw(2);e.Q6J("character",n.character)}}function aa(a,l){if(1&a&&e._UZ(0,"app-turret-syndrome-calc",6),2&a){var n=e.oxw(2);e.Q6J("character",n.character)}}function ia(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"mat-form-field",1)(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(i){return e.CHM(n),e.oxw().currentCalc=i}),e.YNc(7,ea,2,2,"mat-option",3),e.qZA()(),e.YNc(8,ta,2,0,"p",0),e.YNc(9,na,1,1,"app-defense-calc",4),e.YNc(10,aa,1,1,"app-turret-syndrome-calc",4),e.qZA()()()}if(2&a){var t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.currentCalc),e.xp6(1),e.Q6J("ngForOf",t.options),e.xp6(1),e.Q6J("ngIf",null===t.currentCalc),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.TurretSyndrome)}}var de=function(){return(a=de||(de={}))[a.Defense=0]="Defense",a[a.TurretSyndrome=1]="TurretSyndrome",de;var a}(),oa=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).buildStorageService=o,i.CalcPage=de,i.character=null,i.options=[{value:de.Defense,label:"Defenses"},{value:de.TurretSyndrome,label:"Turret"}],i.currentCalc=null,i.buildStorageService.layerChanged.pipe((0,L.R)(i.unsubscribe)).subscribe(function(r){return i.character=null===r?null:r.character}),i}return(0,g.Z)(t)}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(n,t){1&n&&e.YNc(0,ia,11,5,"main",0),2&n&&e.Q6J("ngIf",null!==t.character)},directives:[_.O5,N.a8,N.dn,b.KE,b.hX,X.gD,u.JJ,u.On,_.sg,$.ey,Wn,Kn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),a}(),ot=h(9635);function ra(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){var c=e.CHM(n).$implicit,s=e.oxw(3);return s.select(s.stats,c)}),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()}if(2&a){var t=l.$implicit,o=e.oxw(3);e.ekj("selected",o.isSelected(t)),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("matTooltip",o.getTooltip(o.stats,t)),e.xp6(1),e.Oqu(o.getValue(o.stats,t))}}function la(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.YNc(3,ra,5,5,"div",4),e.BQk()),2&a){var n=l.$implicit;e.xp6(2),e.Oqu(n.section),e.xp6(1),e.Q6J("ngForOf",n.stats)}}function ca(a,l){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,la,4,2,"ng-container",2),e.qZA()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.SECTIONS)}}var Fe=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).slormancerTranslateService=o,i.SECTIONS=[{section:i.slormancerTranslateService.translate("cat_adventure"),stats:[{name:i.slormancerTranslateService.translate("essence_find"),stat:"essence_find",sign:!0},{name:i.slormancerTranslateService.translate("xp_find"),stat:"xp_find",sign:!0},{name:i.slormancerTranslateService.translate("influence_gain"),stat:"influence_gain",sign:!0},{name:i.slormancerTranslateService.translate("mf_find"),stat:"mf_find",sign:!0},{name:i.slormancerTranslateService.translate("mf_qual"),stat:"mf_qual",sign:!0}]},{section:i.slormancerTranslateService.translate("cat_health"),stats:[{name:i.slormancerTranslateService.translate("max_health"),stat:"max_health",sign:!1},{name:i.slormancerTranslateService.translate("health_regeneration"),stat:"health_regeneration",sign:!0},{name:i.slormancerTranslateService.translate("health_leech_percent"),stat:"health_leech_percent",sign:!1},{name:i.slormancerTranslateService.translate("life_on_hit"),stat:"life_on_hit",sign:!0},{name:i.slormancerTranslateService.translate("life_on_kill"),stat:"life_on_kill",sign:!0}]},{section:i.slormancerTranslateService.translate("cat_mana"),stats:[{name:i.slormancerTranslateService.translate("max_mana"),stat:"max_mana",sign:!1},{name:i.slormancerTranslateService.translate("mana_regeneration"),stat:"mana_regeneration",sign:!0},{name:i.slormancerTranslateService.translate("mana_leech_percent"),stat:"mana_leech_percent",sign:!1},{name:i.slormancerTranslateService.translate("mana_on_hit"),stat:"mana_on_hit",sign:!0},{name:i.slormancerTranslateService.translate("mana_on_kill"),stat:"mana_on_kill",sign:!0}]},{section:i.slormancerTranslateService.translate("cat_movement"),stats:[{name:i.slormancerTranslateService.translate("movement_speed"),stat:"movement_speed",sign:!1}]},{section:i.slormancerTranslateService.translate("cat_attack"),stats:[{name:i.slormancerTranslateService.translate("attack_speed"),stat:"attack_speed",sign:!1},{name:i.slormancerTranslateService.translate("basic_damage"),stat:"basic_damage",sign:!1},{name:i.slormancerTranslateService.translate("weapon_damage"),stat:"weapon_damage",sign:!1},{name:i.slormancerTranslateService.translate("physical_damage"),stat:"physical_damage",sign:!1},{name:i.slormancerTranslateService.translate("elemental_damage"),stat:"elemental_damage",sign:!1},{name:i.slormancerTranslateService.translate("critical_chance"),stat:"critical_chance",sign:!1},{name:i.slormancerTranslateService.translate("critical_damage"),stat:"critical_damage",sign:!1},{name:i.slormancerTranslateService.translate("ancestral_chance"),stat:"ancestral_chance",sign:!1},{name:i.slormancerTranslateService.translate("ancestral_damage"),stat:"ancestral_damage",sign:!1},{name:i.slormancerTranslateService.translate("armor_penetration"),stat:"armor_penetration",sign:!1},{name:i.slormancerTranslateService.translate("elemental_penetration"),stat:"elemental_penetration",sign:!1},{name:i.slormancerTranslateService.translate("dot_increased_damage"),stat:"dot_increased_damage",sign:!0},{name:i.slormancerTranslateService.translate("increased_on_elite"),stat:"increased_on_elite",sign:!1}]},{section:i.slormancerTranslateService.translate("cat_defense"),stats:[{name:i.slormancerTranslateService.translate("armor"),stat:"armor",sign:!1},{name:i.slormancerTranslateService.translate("elemental_resist"),stat:"elemental_resist",sign:!1},{name:i.slormancerTranslateService.translate("fire_resistance"),stat:"fire_resistance",sign:!1},{name:i.slormancerTranslateService.translate("ice_resistance"),stat:"ice_resistance",sign:!1},{name:i.slormancerTranslateService.translate("lightning_resistance"),stat:"lightning_resistance",sign:!1},{name:i.slormancerTranslateService.translate("light_resistance"),stat:"light_resistance",sign:!1},{name:i.slormancerTranslateService.translate("shadow_resistance"),stat:"shadow_resistance",sign:!1},{name:i.slormancerTranslateService.translate("dodge"),stat:"dodge",sign:!1},{name:i.slormancerTranslateService.translate("thorns"),stat:"thorns",sign:!1},{name:i.slormancerTranslateService.translate("retaliate"),stat:"retaliate",sign:!1},{name:i.slormancerTranslateService.translate("tenacity"),stat:"tenacity",sign:!1},{name:i.slormancerTranslateService.translate("reduced_on_all"),stat:"reduced_on_all",sign:!1},{name:i.slormancerTranslateService.translate("reduced_by_elite"),stat:"reduced_by_elite",sign:!1},{name:i.slormancerTranslateService.translate("reduced_on_melee"),stat:"reduced_on_melee",sign:!1},{name:i.slormancerTranslateService.translate("reduced_on_projectile"),stat:"reduced_on_projectile",sign:!1},{name:i.slormancerTranslateService.translate("reduced_on_area"),stat:"reduced_on_area",sign:!1}]},{section:i.slormancerTranslateService.translate("cat_secondary_resources"),stats:[{name:i.slormancerTranslateService.translate("gold_find"),stat:"gold_find",sign:!0},{name:i.slormancerTranslateService.translate("scrap_find"),stat:"scrap_find",sign:!0},{name:i.slormancerTranslateService.translate("slormite_find"),stat:"slormite_find",sign:!0},{name:i.slormancerTranslateService.translate("slormeline_find"),stat:"slormeline_find",sign:!0},{name:i.slormancerTranslateService.translate("reaper_find"),stat:"reaper_find",sign:!0},{name:i.slormancerTranslateService.translate("skill_mastery_gain"),stat:"skill_mastery_gain",sign:!0}]},{section:i.slormancerTranslateService.translate("cat_secondary_melee"),stats:[{name:i.slormancerTranslateService.translate("inner_fire_chance"),stat:"inner_fire_chance",sign:!1},{name:i.slormancerTranslateService.translate("inner_fire_max_number"),stat:"inner_fire_max_number",sign:!1},{name:i.slormancerTranslateService.translate("inner_fire_duration"),stat:"inner_fire_duration",sign:!1},{name:i.slormancerTranslateService.translate("inner_fire_damage"),stat:"inner_fire_damage",sign:!1},{name:i.slormancerTranslateService.translate("overdrive_chance"),stat:"overdrive_chance",sign:!1},{name:i.slormancerTranslateService.translate("overdrive_bounce_number"),stat:"overdrive_bounce_number",sign:!1},{name:i.slormancerTranslateService.translate("overdrive_damage"),stat:"overdrive_damage",sign:!1},{name:i.slormancerTranslateService.translate("recast_chance"),stat:"recast_chance",sign:!1},{name:i.slormancerTranslateService.translate("knockback_melee"),stat:"knockback_melee",sign:!1}]},{section:i.slormancerTranslateService.translate("cat_secondary_projectile"),stats:[{name:i.slormancerTranslateService.translate("additional_projectile"),stat:"additional_projectile",sign:!0},{name:i.slormancerTranslateService.translate("chance_to_pierce"),stat:"chance_to_pierce",sign:!1},{name:i.slormancerTranslateService.translate("fork_chance"),stat:"fork_chance",sign:!1},{name:i.slormancerTranslateService.translate("chance_to_rebound"),stat:"chance_to_rebound",sign:!1},{name:i.slormancerTranslateService.translate("projectile_speed"),stat:"projectile_speed",sign:!0},{name:i.slormancerTranslateService.translate("knockback_projectile"),stat:"knockback_projectile",sign:!1}]},{section:i.slormancerTranslateService.translate("cat_secondary_aoe"),stats:[{name:i.slormancerTranslateService.translate("aoe_increased_size"),stat:"aoe_increased_size",sign:!1},{name:i.slormancerTranslateService.translate("aoe_increased_effect"),stat:"aoe_increased_effect",sign:!1}]},{section:i.slormancerTranslateService.translate("cat_secondary_extras"),stats:[{name:i.slormancerTranslateService.translate("totem_increased_effect"),stat:"totem_increased_effect",sign:!0},{name:i.slormancerTranslateService.translate("aura_increased_effect"),stat:"aura_increased_effect",sign:!0},{name:i.slormancerTranslateService.translate("minion_increased_damage"),stat:"minion_increased_damage",sign:!0}]}],i.stats=null,i.selectedMergedStat=null,i.selected=new e.vpe,i}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){}},{key:"valueToString",value:function(i,r,c){return"number"==typeof i?(i<0?"-":r?"+":"")+i+c:(i.min<0?"":r?"+":"")+i.min+c+" - "+(i.max<0?"":r?"+":"")+i.max+c}},{key:"getValue",value:function(i,r){var c=i.find(function(m){return m.stat===r.stat}),s="0";return c&&(s=this.valueToString(c.totalDisplayed,r.sign,c.suffix)),s}},{key:"select",value:function(i,r){var c=i.find(function(s){return s.stat===r.stat});c&&(console.log(c),this.selectedMergedStat=c,this.selected.emit(c))}},{key:"getTooltip",value:function(i,r){var c=this,s=i.find(function(f){return f.stat===r.stat}),m="No details found";if(s){var d="number"!=typeof s.total;m="Flat: "+s.values.flat.map(function(f){return c.valueToString(f.value,!1,s.suffix)}).join(", ")+"\n",d&&(m+="Flat (max): "+s.values.max.map(function(f){return c.valueToString(f.value,!1,s.suffix)}).join(", ")+"\n"),m+="Percent: "+s.values.percent.map(function(f){return c.valueToString(f.value,!1,"%")}).join(", ")+"\n",d&&(m+="Percent (max) : "+s.values.maxPercent.map(function(f){return c.valueToString(f.value,!1,"%")}).join(", ")+"\n"),m+="Multiplier: "+s.values.multiplier.map(function(f){return c.valueToString(f.value,!1,"%")}).join(", ")}return m}},{key:"translate",value:function(i){return this.slormancerTranslateService.translate(i)}},{key:"isSelected",value:function(i){return null!==this.selectedMergedStat&&this.selectedMergedStat.stat===i.stat}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(re.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-main-stats"]],inputs:{stats:"stats"},outputs:{selected:"selected"},features:[e.qOj],decls:1,vars:1,consts:[["class","sections",4,"ngIf"],[1,"sections"],[4,"ngFor","ngForOf"],[1,"section"],["class","stat",3,"selected","click",4,"ngFor","ngForOf"],[1,"stat",3,"click"],[1,"label"],[1,"value",3,"matTooltip"]],template:function(n,t){1&n&&e.YNc(0,ca,2,1,"div",0),2&n&&e.Q6J("ngIf",null!==t.stats)},directives:[_.O5,_.sg,z.gM],styles:[".sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-left:8px;cursor:pointer}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.sections[_ngcontent-%COMP%]   .stat.selected[_ngcontent-%COMP%]{background-color:#ffffff4d}"]}),a}();function sa(a,l){if(1&a&&(e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"span",7),e._uU(5),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8),e._uU(8),e.qZA()()),2&a){var n=e.oxw().$implicit,t=e.oxw();e.ekj("increase",n.difference>0)("decrease",n.difference<0),e.xp6(1),e.Q6J("matTooltip",t.valueToString(n.left,!0)),e.xp6(1),e.Oqu(t.valueToString(n.left)),e.xp6(3),e.Oqu(t.changeToString(n.difference)),e.xp6(1),e.hij(" ",n.name,""),e.xp6(1),e.Q6J("matTooltip",t.valueToString(n.right,!0)),e.xp6(1),e.Oqu(t.valueToString(n.right))}}function ua(a,l){if(1&a&&(e.ynx(0),e.YNc(1,sa,9,10,"div",3),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",0!==n.difference)}}function ma(a,l){1&a&&(e.TgZ(0,"div",9),e._uU(1,"No differences"),e.qZA())}var rt=function(){var a=function(){function l(){(0,p.Z)(this,l),this.differences=[]}return(0,g.Z)(l,[{key:"valueToString",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="";return i+("number"==typeof t?t>1e4&&!o?Math.floor(t/1e3)+"k":t:t.min>1e4&&t.max>1e4&&!o?Math.floor(t.min/1e3)+"k - "+Math.floor(t.max/1e3)+"k":t.min+" - "+t.max)}},{key:"changeToString",value:function(t){var o="";return Number.isFinite(t)&&(t>0&&(o="+"),o+=t+"%"),o}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare-view"]],inputs:{differences:"differences"},decls:3,vars:2,consts:[[1,"differences"],[4,"ngFor","ngForOf"],["class","no-differences",4,"ngIf"],["class","difference",3,"increase","decrease",4,"ngIf"],[1,"difference"],[1,"left",3,"matTooltip"],[1,"change"],[1,"value"],[1,"right",3,"matTooltip"],[1,"no-differences"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,ua,2,1,"ng-container",1),e.YNc(2,ma,2,0,"div",2),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngForOf",t.differences),e.xp6(1),e.Q6J("ngIf",0===t.differences.length))},directives:[_.sg,_.O5,z.gM],styles:[".differences[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;min-width:350px}@media (max-width: 374px){.differences[_ngcontent-%COMP%]{min-width:auto}}.differences[_ngcontent-%COMP%]   .no-differences[_ngcontent-%COMP%]{text-align:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{gap:8px}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 374px){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:none}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;text-align:center}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-basis:auto}}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{text-align:left}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.differences[_ngcontent-%COMP%]   .difference.increase[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:green}.differences[_ngcontent-%COMP%]   .difference.decrease[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:red}"]}),a}();function da(a,l){1&a&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function ga(a,l){if(1&a&&e._UZ(0,"app-compare-view",9),2&a){var n=e.oxw(2);e.Q6J("differences",n.differences)}}function pa(a,l){if(1&a&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.hij(" ",n.name," ")}}function _a(a,l){if(1&a&&e._UZ(0,"app-main-stats",2),2&a){var n=e.oxw(2);e.Q6J("stats",n.layerControl.value.character.stats)}}function fa(a,l){if(1&a&&(e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA()(),e.TgZ(6,"mat-card",3)(7,"mat-card-content"),e.YNc(8,da,2,0,"p",0),e.YNc(9,ga,1,1,"app-compare-view",4),e.qZA()(),e.TgZ(10,"mat-card",1)(11,"mat-card-content")(12,"mat-form-field",5)(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,pa,2,2,"mat-option",7),e.qZA()(),e.YNc(17,_a,1,1,"app-main-stats",8),e.qZA()()()),2&a){var n=e.oxw();e.xp6(4),e.Oqu(n.currentLayer.name),e.xp6(1),e.Q6J("stats",n.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===n.differences),e.xp6(1),e.Q6J("ngIf",null!==n.differences),e.xp6(6),e.Q6J("formControl",n.layerControl),e.xp6(1),e.Q6J("ngForOf",n.layers),e.xp6(1),e.Q6J("ngIf",n.layerControl.value)}}var va=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i){var r;return(0,p.Z)(this,t),(r=n.call(this)).buildStorageService=o,r.slormancerCharacterComparatorService=i,r.differences=null,r.currentLayer=null,r.layers=[],r.config=null,r.layerControl=new u.NI(0),r.buildStorageService.buildChanged.pipe((0,L.R)(r.unsubscribe)).subscribe(function(c){r.layers=null===c?[]:c.layers,r.layerControl.setValue(r.layers[0])}),r.buildStorageService.layerChanged.pipe((0,L.R)(r.unsubscribe)).subscribe(function(c){if(r.currentLayer=c,null!==c){var s=r.layers.indexOf(c);-1!==s&&(r.layerControl.setValue(r.layers[0===s&&r.layers.length>1?1:0]),r.updateDifferences())}}),r.layerControl.valueChanges.subscribe(function(){return r.updateDifferences()}),r}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){}},{key:"updateDifferences",value:function(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(ot.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(n,t){1&n&&e.YNc(0,fa,18,7,"main",0),2&n&&e.Q6J("ngIf",null!==t.currentLayer&&t.layers.length>0)},directives:[_.O5,N.a8,N.dn,Fe,rt,b.KE,b.hX,X.gD,u.JJ,u.oH,_.sg,$.ey],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a}(),ge=h(648),we=h(7446);function ha(a,l){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.config.info)}}function Ca(a,l){if(1&a&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,ha,2,1,"mat-icon",5),e.qZA()),2&a){var n=e.oxw(2);e.xp6(2),e.Oqu(n.config.label),e.xp6(1),e.Q6J("formControl",n.control),e.xp6(1),e.Q6J("ngIf",n.config.info)}}function Ma(a,l){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.label)}}function ba(a,l){if(1&a&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.config.info)}}function ya(a,l){if(1&a&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,Ma,2,2,"mat-option",8),e.qZA(),e.YNc(5,ba,2,1,"mat-icon",5),e.qZA()),2&a){var n=e.oxw(2);e.xp6(2),e.Oqu(n.config.label),e.xp6(1),e.Q6J("formControl",n.control),e.xp6(1),e.Q6J("ngForOf",n.config.values),e.xp6(1),e.Q6J("ngIf",n.config.info)}}function Oa(a,l){if(1&a&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.config.info)}}function Pa(a,l){if(1&a&&(e.TgZ(0,"mat-checkbox",10)(1,"label"),e._uU(2),e.YNc(3,Oa,2,1,"mat-icon",11),e.qZA()()),2&a){var n=e.oxw(2);e.Q6J("formControl",n.control)("checked",n.control.value),e.xp6(2),e.hij(" ",n.config.label," "),e.xp6(1),e.Q6J("ngIf",n.config.info)}}function ka(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ca,5,3,"mat-form-field",1),e.YNc(2,ya,6,4,"mat-form-field",1),e.YNc(3,Pa,4,4,"mat-checkbox",2),e.BQk()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.isNumber(n.config)),e.xp6(1),e.Q6J("ngIf",n.isEnum(n.config)),e.xp6(1),e.Q6J("ngIf",n.isBoolean(n.config))}}var xa=function(){var a=function(){function l(){(0,p.Z)(this,l),this.control=null,this.config=null}return(0,g.Z)(l,[{key:"isNumber",value:function(t){return"number"===t.type}},{key:"isEnum",value:function(t){return"enum"===t.type}},{key:"isBoolean",value:function(t){return"boolean"===t.type}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(n,t){1&n&&e.YNc(0,ka,4,3,"ng-container",0),2&n&&e.Q6J("ngIf",null!==t.config&&null!==t.control)},directives:[_.O5,b.KE,b.hX,G.Nt,u.wV,u.Fj,u.JJ,u.oH,H.Hw,b.R9,z.gM,X.gD,_.sg,$.ey,we.oG],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),a}();function Sa(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var n=l.$implicit,t=e.oxw(3);e.Q6J("control",t.getControl(n))("config",n)}}function Ta(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Sa,1,2,"app-config-entry",3),e.BQk()),2&a){var n=l.$implicit;e.xp6(2),e.Oqu(n.title),e.xp6(1),e.Q6J("ngForOf",n.configurations)}}function Za(a,l){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Ta,4,2,"ng-container",1),e.qZA()()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.GENERAL_CONFIG_GROUPS)}}function wa(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var n=l.$implicit,t=e.oxw(4);e.Q6J("control",t.getControl(n))("config",n)}}function Aa(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,wa,1,2,"app-config-entry",3),e.BQk()),2&a){var n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.title),e.xp6(1),e.Q6J("ngForOf",n.configurations)}}function Ia(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Aa,4,2,"ng-container",0),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isGroupValid(n))}}function Ea(a,l){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Ia,2,1,"ng-container",1),e.qZA()()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.CLASS_CONFIG_GROUPS)}}function La(a,l){if(1&a&&e._UZ(0,"app-config-entry",4),2&a){var n=l.$implicit,t=e.oxw(4);e.Q6J("control",t.getControl(n))("config",n)}}function Ja(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,La,1,2,"app-config-entry",3),e.BQk()),2&a){var n=e.oxw().$implicit;e.xp6(2),e.Oqu(n.title),e.xp6(1),e.Q6J("ngForOf",n.configurations)}}function qa(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ja,4,2,"ng-container",0),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isGroupValid(n))}}function Ua(a,l){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,qa,2,1,"ng-container",1),e.qZA()()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("ngForOf",n.EQUIPMENT_CONFIG_GROUPS)}}var Na=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).buildStorageService=o,i.EXTRA_VALIDATORS={percent_missing_health:[u.kI.max(100)],percent_missing_mana:[u.kI.max(100)],enemy_percent_missing_health:[u.kI.max(100)],block_stacks:[u.kI.max(100)],nimble_champion_stacks:[u.kI.max(200)],nimble_chaserenitympion_stacks:[u.kI.max(12)]},i.GENERAL_CONFIG_GROUPS=[{title:"General",condition:function(){return!0},configurations:[{type:"number",key:"all_other_characters_level",label:"Sum of all your other character's level"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"elder_slorms",label:"Total Elder Slorm"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"number",key:"highest_slorm_temple_floor",label:"Highest Slorm Temple floor"},{type:"boolean",key:"idle",label:"Are you idle ?"}]},{title:"When in Combat",condition:function(){return!0},configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Active inner fires"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"number",key:"chilled_enemy_nearby",label:"How much frozen or chilled enemies are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"},{type:"boolean",key:"in_combat",label:"Are you in combat"}]},{title:"Enemy",condition:function(){return!0},configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"}]}],i.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:function(c){return 2===c.reaper.id},configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:function(c){return 105===c.reaper.id},configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:function(c){return 73===c.reaper.id},configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:function(c){return 74===c.reaper.id},configurations:[{type:"boolean",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:function(c){return 75===c.reaper.id},configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:function(c){return 79===c.reaper.id||80===c.reaper.id},configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:function(c){return 82===c.reaper.id||83===c.reaper.id},configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:function(c){return 111===c.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:function(c){return 112===c.reaper.id},configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:function(c){return 113===c.reaper.id},configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Concentrated Inner Strength)",condition:function(c){return 23===c.reaper.id},configurations:[{type:"boolean",key:"concentration_buff",label:"Is Concentration active"}]},{title:"Reaper (Fate-Crusher)",condition:function(c){return 53===c.reaper.id},configurations:[{type:"number",key:"fulgurorn_dedication_stacks",label:"Fulgurorn's Dedication stacks"}]},{title:"Reaper (Inner Fireworks)",condition:function(c){return 57===c.reaper.id||58===c.reaper.id},configurations:[{type:"number",key:"enemy_inner_weakness_stacks",label:"Inner weakness stacks on enemy",info:'Effect is applied if "use enemy state" is checked'}]},{title:"Reaper (Temple Keeper)",condition:function(c){return 84===c.reaper.id},configurations:[{type:"boolean",key:"show_temple_keeper_as_totem",label:"Display temple keeper stats on it's totem's form"}]},{title:"Reaper (Slorm Temple)",condition:function(c){return 85===c.reaper.id},configurations:[{type:"boolean",key:"ultima_momentum_buff",label:"Is Ultima-Momentum active"},{type:"boolean",key:"show_elder_inner_fire_damage",label:"Show inner fire damages as elder"}]},{title:"Reaper (Giant Slayer)",condition:function(c){return 91===c.reaper.id||92===c.reaper.id},configurations:[{type:"number",key:"enemy_enfeeble_stacks",label:"Enemy enfeeble stacks",info:'Effect is applied if "use enemy state" is checked'},{type:"number",key:"apex_predator_stacks",label:"Apex predator stacks"},{type:"number",key:"enfeeble_stacks_in_radius",label:"Enfeeble stacks on enemies around you"}]},{title:"Gold Armor",condition:function(c){return i.hasActivable(c,0)},configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:function(c){return i.hasActivable(c,3)},configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:function(c){return i.hasActivable(c,6)},configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Summon Skeleton Squire",condition:function(c){return i.hasActivable(c,17)},configurations:[{type:"number",key:"summoned_skeleton_squires",label:"Number of summoned skeleton squires"},{type:"boolean",key:"always_summon_maximum_skeleton_squires",label:"Always summon the maximum number of skeleton squires",info:"Based on your available mana after other skills reservation. Override fixed number of summoned skeleton squires"},{type:"number",key:"minimum_unreserved_mana",label:"Minimum unreserved mana",info:"When summoning skeleton squires, will make sure that your mana do not go under this value. When exporting a build, this value is set to your highest skill cost."}]},{title:"Summon Prime Totem",condition:function(c){return i.hasActivable(c,19)},configurations:[{type:"boolean",key:"add_totem_tag_to_prime_totem_skills",label:"Apply totem tags to Wood Sticks / Arrow Shots / Arcane Missiles"}]},{title:"Exposed Armor",condition:function(c){return i.hasActivable(c,23)},configurations:[{type:"boolean",key:"exposed_armor_buff",label:"Is exposed armor active"}]},{title:"Willpower",condition:function(c){return i.isAttributeAllocated(c,y.a.Willpower)},configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:function(c){return i.isAttributeAllocated(c,y.a.Dexterity)},configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:function(c){return i.isAttributeAllocated(c,y.a.Bravery)},configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:function(c){return i.isAncestralLegacyEquipped(c,80)},configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:function(c){return i.isAncestralLegacyEquipped(c,85)},configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:function(c){return i.isAncestralLegacyEquipped(c,33)},configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:function(c){return i.isAncestralLegacyEquipped(c,106)},configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:function(c){return i.isAncestralLegacyEquipped(c,82)},configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Faith of the Ancients",condition:function(c){return i.hasLegendaryEffect(c,31)},configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:function(c){return i.hasLegendaryEffect(c,29)},configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:function(c){return i.hasLegendaryEffect(c,75)},configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:function(c){return i.hasLegendaryEffect(c,77)},configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:function(c){return i.hasLegendaryEffect(c,26)},configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:function(c){return i.hasLegendaryEffect(c,63)},configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:function(c){return i.hasLegendaryEffect(c,16)},configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:function(c){return i.hasLegendaryEffect(c,16)},configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:function(c){return i.hasLegendaryEffect(c,76)},configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"A Path to the First",condition:function(c){return i.hasLegendaryEffect(c,32)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:function(c){return i.hasLegendaryEffect(c,33)},configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:function(c){return i.hasLegendaryEffect(c,74)},configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]}],i.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:function(c){return c.heroClass===M.i.Warrior},configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,0)},configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,2)},configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,3)},configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,4)},configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,5)},configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,6)},configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,7)},configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,9)},configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:function(c){return i.isSkillEquipped(c,M.i.Warrior,10)},configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:function(c){return c.heroClass===M.i.Huntress},configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,0)},configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,1)},configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,2)},configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,3)},configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,4)},configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,5)},configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,7)},configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,8)},configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:function(c){return i.isSkillEquipped(c,M.i.Huntress,9)},configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:function(c){return c.heroClass===M.i.Mage},configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,0)},configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,2)},configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,4)},configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,6)},configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,7)},configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,8)},configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:ve.H.Arcanic,label:"Arcanic"},{value:ve.H.Temporal,label:"Temporal"},{value:ve.H.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:function(c){return i.isSkillEquipped(c,M.i.Mage,9)},configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],i.config=null,i}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.config=this.generateConfigurationForm(),this.config.valueChanges.subscribe(function(){return i.updateConfiguration()})}},{key:"generateConfigurationForm",value:function(){for(var i={},r=this.buildStorageService.getBuild(),s=0,m=Object.entries(null!==r?r.configuration:ee);s<m.length;s++){var d=m[s],f=[u.kI.required].concat((0,I.Z)((0,O.Be)(this.EXTRA_VALIDATORS[d[0]],[])));"number"===d[1]&&f.push(u.kI.min(0)),i[d[0]]=new u.NI(d[1],f)}return new u.cw(i)}},{key:"updateConfiguration",value:function(){var i=this.buildStorageService.getBuild();null!==this.config&&null!==i&&this.config.valid&&(i.configuration=this.config.value,this.buildStorageService.saveBuild())}},{key:"getControl",value:function(i){return null===this.config?null:this.config.get(i.key)}},{key:"isGroupValid",value:function(i){var r=this.buildStorageService.getLayer();return null!==r&&i.condition(r.character)}},{key:"hasActivable",value:function(i,r){return[i.activable1,i.activable2,i.activable3,i.activable4].filter(O.BX).some(function(c){return!("element"in c)&&c.id===r})}},{key:"isSkillEquipped",value:function(i,r,c){return i.heroClass===r&&[i.primarySkill,i.secondarySkill,i.supportSkill].filter(O.BX).some(function(s){return s.id===c})}},{key:"isAttributeAllocated",value:function(i,r){var c=i.attributes.allocated[r];return c.rank>0||c.bonusRank>0}},{key:"isAncestralLegacyEquipped",value:function(i,r){return i.ancestralLegacies.activeAncestralLegacies.includes(r)}},{key:"hasLegendaryEffect",value:function(i,r){return ge.PL.map(function(c){var s;return null===(s=i.gear[c])||void 0===s?void 0:s.legendaryEffect}).filter(O.BX).some(function(c){return c.id===r})}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(n,t){1&n&&(e.TgZ(0,"main"),e.YNc(1,Za,3,1,"mat-card",0),e.YNc(2,Ea,3,1,"mat-card",0),e.YNc(3,Ua,3,1,"mat-card",0),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",null!==t.config),e.xp6(1),e.Q6J("ngIf",null!==t.config),e.xp6(1),e.Q6J("ngIf",null!==t.config))},directives:[_.O5,N.a8,N.dn,_.sg,xa],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),a}(),Z=h(2525);function Fa(a,l){if(1&a&&e._UZ(0,"div",11),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.activable.genresLabel,e.oJD)}}function Ba(a,l){if(1&a&&e._UZ(0,"div",12),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.activable.cooldownLabel,e.oJD)}}function Ha(a,l){if(1&a&&e._UZ(0,"div",13),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.activable.costLabel,e.oJD)}}function Qa(a,l){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6),e._uU(6),e.qZA(),e.YNc(7,Fa,1,1,"div",7),e.YNc(8,Ba,1,1,"div",8),e.YNc(9,Ha,1,1,"div",9),e.qZA()(),e._UZ(10,"div",10),e.qZA()),2&a){var n=e.oxw();e.xp6(3),e.Q6J("src",n.activable.icon,e.LSH),e.xp6(3),e.Oqu(n.activable.name),e.xp6(1),e.Q6J("ngIf",null!==n.activable.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==n.activable.cooldownLabel),e.xp6(1),e.Q6J("ngIf",null!==!n.activable.costLabel),e.xp6(1),e.Q6J("innerHTML",n.activable.description,e.oJD)}}var Be=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.activable=null,this.reinforcment=0});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-activable-view"]],inputs:{activable:"activable",reinforcment:"reinforcment"},decls:1,vars:1,consts:[["class","activable",4,"ngIf"],[1,"activable"],[1,"activable-head"],[1,"icon"],[3,"src"],[1,"info"],[1,"name"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,Qa,11,6,"div",0),2&n&&e.Q6J("ngIf",null!==t.activable)},directives:[_.O5],styles:[".activable[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;padding:5px;display:flex;flex-direction:column;gap:5px}.activable[_ngcontent-%COMP%]  .value{color:#ce4607}.activable[_ngcontent-%COMP%]  .range, .activable[_ngcontent-%COMP%]  .range .value, .activable[_ngcontent-%COMP%]  .details, .activable[_ngcontent-%COMP%]  .details .value, .activable[_ngcontent-%COMP%]  .formula, .activable[_ngcontent-%COMP%]  .formula .value{color:#686868}.activable[_ngcontent-%COMP%]  .affixes .range, .activable[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.activable[_ngcontent-%COMP%]  .life{color:#257539}.activable[_ngcontent-%COMP%]  .mana{color:#3397dd}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{display:flex;align-items:center;border:4px solid #be871f;min-width:44px;min-height:44px;width:44px;height:44px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:4px solid black;min-width:36px;min-height:36px;width:36px;height:36px}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:19px;color:#ce4607}.activable[_ngcontent-%COMP%]   .activable-head[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.activable[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),a}();function Ra(a,l){1&a&&(e.TgZ(0,"div",20),e._uU(1,"Equipped"),e.qZA())}function Ya(a,l){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){var n=l.$implicit;e.ekj("pure",n.isPure),e.xp6(2),e.Tol(n.rarity),e.xp6(1),e.Q6J("innerHTML",n.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.statLabel,e.oJD)}}function Va(a,l){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Base Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Ya,5,7,"li",23),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",n.getNormalAffixes())}}function Da(a,l){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){var n=l.$implicit;e.ekj("pure",n.isPure),e.xp6(2),e.Tol(n.rarity),e.xp6(1),e.Q6J("innerHTML",n.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.statLabel,e.oJD)}}function ja(a,l){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Magic Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Da,5,7,"li",23),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",n.getMagicAffixes())}}function Ga(a,l){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){var n=l.$implicit;e.ekj("pure",n.isPure),e.xp6(2),e.Tol(n.rarity),e.xp6(1),e.Q6J("innerHTML",n.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.statLabel,e.oJD)}}function Xa(a,l){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Rare Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Ga,5,7,"li",23),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",n.getRareAffixes())}}function za(a,l){if(1&a&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&a){var n=l.$implicit;e.ekj("pure",n.isPure),e.xp6(2),e.Tol(n.rarity),e.xp6(1),e.Q6J("innerHTML",n.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.statLabel,e.oJD)}}function $a(a,l){if(1&a&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Epic Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,za,5,7,"li",23),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",n.getEpicAffixes())}}function Wa(a,l){if(1&a&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.item.legendaryEffect.activable.name,"")}}function Ka(a,l){if(1&a&&(e.TgZ(0,"div",6),e._UZ(1,"img",8),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.Q6J("src",n.item.legendaryEffect.skillIcon,e.LSH)}}function ei(a,l){if(1&a&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",22)(4,"div",24),e._UZ(5,"div",30),e.qZA(),e._uU(6),e.TgZ(7,"div",24),e._UZ(8,"div",30),e.qZA()(),e.TgZ(9,"div",31),e._UZ(10,"span",32),e.YNc(11,Wa,2,1,"span",33),e.qZA(),e.YNc(12,Ka,2,1,"div",34),e.qZA()()()),2&a){var n=e.oxw(2);e.xp6(6),e.hij(" ",n.item.legendaryEffect.title," "),e.xp6(4),e.Q6J("innerHTML",n.item.legendaryEffect.description,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==n.item.legendaryEffect.activable),e.xp6(1),e.Q6J("ngIf",null!==n.item.legendaryEffect.skillIcon)}}function ti(a,l){if(1&a&&e._UZ(0,"app-activable-view",36),2&a){var n=e.oxw(2);e.Q6J("activable",n.item.legendaryEffect.activable)("reinforcment",n.item.reinforcment)}}function ni(a,l){if(1&a&&(e.TgZ(0,"div",37),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.Q6J("src",n.item.reaperEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",n.item.reaperEnchantment.label,e.oJD)}}function ai(a,l){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.Q6J("src",n.item.skillEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",n.item.skillEnchantment.label,e.oJD)}}function ii(a,l){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&a){var n=e.oxw(2);e.Gre("buff attribute atr-",n.item.attributeEnchantment.craftedAttribute,""),e.xp6(1),e.Q6J("src",n.item.attributeEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",n.item.attributeEnchantment.label,e.oJD)}}function oi(a,l){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Ra,2,0,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7)(8,"img",8),e.qZA(),e.TgZ(9,"div",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e._uU(12,"-"),e.qZA(),e.TgZ(13,"div",11),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.qZA()(),e._UZ(17,"div",12),e.TgZ(18,"div",13),e.YNc(19,Va,5,1,"div",14),e.YNc(20,ja,5,1,"div",14),e.YNc(21,Xa,5,1,"div",14),e.YNc(22,$a,5,1,"div",14),e.qZA()(),e.YNc(23,ei,13,4,"div",15),e.YNc(24,ti,1,2,"app-activable-view",16),e.YNc(25,ni,3,2,"div",17),e.YNc(26,ai,3,2,"div",18),e.YNc(27,ii,3,5,"div",19),e.qZA()()),2&a){var n=e.oxw();e.Gre("item ",n.item.rarity,""),e.ekj("nodetails",!n.details),e.xp6(1),e.Q6J("innerHTML",n.item.name,e.oJD),e.xp6(2),e.Q6J("ngIf",n.equipped),e.xp6(4),e.Q6J("src",n.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",n.item.icon,e.LSH),e.xp6(2),e.Oqu(n.item.rarityLabel),e.xp6(4),e.Oqu(n.item.baseLabel),e.xp6(2),e.Oqu(n.item.levelLabel),e.xp6(3),e.Q6J("ngIf",n.getNormalAffixes().length>0),e.xp6(1),e.Q6J("ngIf",n.getMagicAffixes().length>0),e.xp6(1),e.Q6J("ngIf",n.getRareAffixes().length>0),e.xp6(1),e.Q6J("ngIf",n.getEpicAffixes().length>0),e.xp6(1),e.Q6J("ngIf",null!==n.item.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==n.item.legendaryEffect&&null!==n.item.legendaryEffect.activable),e.xp6(1),e.Q6J("ngIf",null!==n.item.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.item.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.item.attributeEnchantment)}}var He=function(){var a=function(){function l(){(0,p.Z)(this,l),this.item=null,this.equipped=!1,this.details=!0}return(0,g.Z)(l,[{key:"getNormalAffixes",value:function(){return null===this.item?[]:this.item.affixes.filter(function(t){return t.rarity===P.u.Normal})}},{key:"getMagicAffixes",value:function(){return null===this.item?[]:this.item.affixes.filter(function(t){return t.rarity===P.u.Magic})}},{key:"getRareAffixes",value:function(){return null===this.item?[]:this.item.affixes.filter(function(t){return t.rarity===P.u.Rare})}},{key:"getEpicAffixes",value:function(){return null===this.item?[]:this.item.affixes.filter(function(t){return t.rarity===P.u.Epic})}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-view"]],inputs:{item:"item",equipped:"equipped",details:"details"},decls:1,vars:1,consts:[[3,"class","nodetails",4,"ngIf"],[1,"head",3,"innerHTML"],[1,"content"],["class","equipped",4,"ngIf"],[1,"main"],[1,"info"],[1,"icon"],[1,"background",3,"src"],[3,"src"],[1,"rarity"],[1,"split"],[1,"base"],[1,"separator"],[1,"stats"],["class","affixes",4,"ngIf"],["class","legendary-effect outer-border",4,"ngIf"],[3,"activable","reinforcment",4,"ngIf"],["class","buff reaper",4,"ngIf"],["class","buff skill",4,"ngIf"],[3,"class",4,"ngIf"],[1,"equipped"],[1,"affixes"],[1,"title"],[3,"pure",4,"ngFor","ngForOf"],[1,"bullet"],[1,"value",3,"innerHTML"],[1,"name",3,"innerHTML"],[1,"legendary-effect","outer-border"],[1,"border"],[1,"inner-border","legendary-description"],[1,"legendary"],[1,"description"],[3,"innerHTML"],["class","value",4,"ngIf"],["class","icon",4,"ngIf"],[1,"value"],[3,"activable","reinforcment"],[1,"buff","reaper"],[1,"info",3,"innerHTML"],[1,"buff","skill"]],template:function(n,t){1&n&&e.YNc(0,oi,28,21,"div",0),2&n&&e.Q6J("ngIf",null!==t.item)},directives:[_.O5,_.sg,Be],styles:['.item.normal[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#898989}.item.magic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#2e8726}.item.rare[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#176ab1}.item.epic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#c68d20}.item.legendary[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#ce4607}.item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#59513c}.item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#61462d}.item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#7791a1}.item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#efc65c}.item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#f5b250}.bullet[_ngcontent-%COMP%]{min-width:8px}.bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.bullet[_ngcontent-%COMP%]   div.normal[_ngcontent-%COMP%]{background-color:#898989}.bullet[_ngcontent-%COMP%]   div.magic[_ngcontent-%COMP%]{background-color:#2e8726}.bullet[_ngcontent-%COMP%]   div.rare[_ngcontent-%COMP%]{background-color:#176ab1}.bullet[_ngcontent-%COMP%]   div.epic[_ngcontent-%COMP%]{background-color:#c68d20}.bullet[_ngcontent-%COMP%]   div.legendary[_ngcontent-%COMP%]{background-color:#ce4607}.item[_ngcontent-%COMP%]{background-color:#151412;color:#fff;border:2px solid black;min-width:350px}.item[_ngcontent-%COMP%]  .legendary-effect .value, .item[_ngcontent-%COMP%]  .buff .value{color:#fff}.item[_ngcontent-%COMP%]  .range, .item[_ngcontent-%COMP%]  .range .value, .item[_ngcontent-%COMP%]  .details, .item[_ngcontent-%COMP%]  .details .value, .item[_ngcontent-%COMP%]  .formula, .item[_ngcontent-%COMP%]  .formula .value, .item[_ngcontent-%COMP%]  .pure-info, .item[_ngcontent-%COMP%]  .pure-info .value{color:#686868}.item[_ngcontent-%COMP%]  .affixes .range, .item[_ngcontent-%COMP%]  .affixes .value, .item[_ngcontent-%COMP%]  .pure-info{word-break:keep-all;white-space:nowrap}.item.nodetails[_ngcontent-%COMP%]     .details, .item.nodetails[_ngcontent-%COMP%]     .formula{display:none}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;text-transform:capitalize}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{min-width:80px;width:80px;display:flex;flex-direction:column;align-items:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{text-transform:capitalize;text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:56px;min-height:56px;width:56px;height:56px;border:4px solid black;margin-bottom:10px;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;min-width:2px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;list-style:disc inside;padding-left:0}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row;padding-left:5px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]{color:#46e7b0;background:linear-gradient(90deg,rgba(70,231,176,.3) 0%,rgba(70,231,176,0) 100%)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:1}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border:2px solid #2e2c25}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .inner-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px 30px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:5px;color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-top:5px;min-width:36px;min-height:36px;width:36px;height:36px;border:3px solid black;padding:2px;background-color:#2e2c25}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]{border:3px solid #3b3831;padding:5px 36px;text-align:center;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:-6px;top:50%;margin-top:-22px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.reaper[_ngcontent-%COMP%]{color:#148e89}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.skill[_ngcontent-%COMP%]{color:#ce4607}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-0[_ngcontent-%COMP%]{color:#2f5996}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-1[_ngcontent-%COMP%]{color:#a83007}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-2[_ngcontent-%COMP%]{color:#79b549}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-3[_ngcontent-%COMP%]{color:#d0b545}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-4[_ngcontent-%COMP%]{color:#4bc1b2}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-5[_ngcontent-%COMP%]{color:#753098}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-6[_ngcontent-%COMP%]{color:#cd7028}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-7[_ngcontent-%COMP%]{color:#bf3c59}']}),a}(),ri=function(){var a=(0,g.Z)(function l(n,t,o,i,r){(0,p.Z)(this,l),this.slormancerItemService=t,this.slormancerCharacterBuilderService=o,this.slormancerCharacterUpdaterService=i,this.slormancerCharacterComparatorService=r;var c=this.slormancerCharacterBuilderService.getCharacterClone(n.character),s=this.slormancerCharacterBuilderService.getCharacterClone(n.character);c.gear[n.slot]=this.slormancerItemService.getEquipableItemClone(n.left),s.gear[n.slot]=this.slormancerItemService.getEquipableItemClone(n.right),this.slormancerCharacterUpdaterService.updateCharacter(c,n.config),this.slormancerCharacterUpdaterService.updateCharacter(s,n.config),this.left=n.left,this.right=n.right,this.differences=this.slormancerCharacterComparatorService.compareCharacters(c,s)});return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.WI),e.Y36(se.S),e.Y36(ie.o),e.Y36(fe.P),e.Y36(ot.P))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-compare-item-modal"]],decls:8,vars:6,consts:[["mat-dialog-title",""],[1,"item"],[3,"item","equipped"],[3,"differences"],[3,"item"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"div",1),e._UZ(4,"app-item-view",2),e.qZA(),e._UZ(5,"app-compare-view",3),e.TgZ(6,"div",1),e._UZ(7,"app-item-view",4),e.qZA()()),2&n&&(e.xp6(1),e.AsE("",t.left.name," - ",t.right.name,""),e.xp6(3),e.Q6J("item",t.left)("equipped",!0),e.xp6(1),e.Q6J("differences",t.differences),e.xp6(2),e.Q6J("item",t.right))},directives:[v.uh,v.xY,He,rt],styles:["h2[_ngcontent-%COMP%]{display:none;text-align:center}@media (max-width: 992px){h2[_ngcontent-%COMP%]{display:block}}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:none}mat-dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:block}}@media (max-width: 374px){mat-dialog-content[_ngcontent-%COMP%]   app-compare-view[_ngcontent-%COMP%]{width:100%}}mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:370px;min-width:380px;overflow-y:auto}"]}),a}();function li(a,l){if(1&a&&(e.TgZ(0,"button",3),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("mat-dialog-close",n),e.xp6(1),e.Oqu(n)}}var ci=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.dialogRef=n,this.EQUIPABLE_ITEM_BASE_VALUES=T.l}return(0,g.Z)(l,[{key:"selectBase",value:function(t){this.dialogRef.close(t)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-base-choice-modal"]],decls:7,vars:2,consts:[["mat-dialog-title",""],["mat-flat-button","","color","primary",3,"mat-dialog-close",4,"ngFor","ngForOf"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Choose a base for your item"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,li,2,2,"button",1),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",2),e._uU(6,"Cancel"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("ngForOf",t.EQUIPABLE_ITEM_BASE_VALUES),e.xp6(2),e.Q6J("mat-dialog-close",null))},directives:[v.uh,v.xY,_.sg,E.lW,v.ZT,v.H8],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),a}(),Ae=h(7148),lt=h(1375),te=function(){var a=function(){function l(n,t,o){(0,p.Z)(this,l),this.slormancerDataService=n,this.slormancerTranslateService=t,this.slormancerReaperService=o,this.STATS_OPTIONS_CACHE={},this.LEGENDARY_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[],this.ALL_RARITIES_OPTIONS_CACHE=[],this.ALL_REAPER_BUFF_OPTIONS_CACHE=[],this.ALL_SKILL_BUFF_OPTIONS_CACHE={0:[],1:[],2:[]},this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=[],this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}},this.ULTIMATUM_OPTIONS_CACHE=[],this.initRarityOptionsCache(),this.initStatOptionsCache(),this.initLegendaryOptionsCache(),this.initReaperBuffOptions(),this.initSkillBuffOptions(),this.initAttributeBuffOptions(),this.initReaperOptions(),this.initUltimatumOptions()}return(0,g.Z)(l,[{key:"getReaperOptions",value:function(t,o){return this.ALL_REAPER_OPTIONS_CACHE[o?"p":"b"][t]}},{key:"getAllStatsoptions",value:function(){return this.ALL_STATS_OPTIONS_CACHE}},{key:"getAllRaritiesOptions",value:function(){return this.ALL_RARITIES_OPTIONS_CACHE}},{key:"getStatsOptions",value:function(t,o){var i=this.ALL_STATS_OPTIONS_CACHE,r=this.STATS_OPTIONS_CACHE[t];return r&&(o===P.u.Normal?i=(0,O.Be)(r.P,[]):(o===P.u.Magic||o===P.u.Rare)&&(i=(0,O.Be)(r.S,[]))),i}},{key:"getLegendaryOptions",value:function(t,o){var i=[],r=this.LEGENDARY_OPTIONS_CACHE[t];return r&&(i=r[o]),i}},{key:"getReaperBuffOptions",value:function(){return this.ALL_REAPER_BUFF_OPTIONS_CACHE}},{key:"getSkillBuffOptions",value:function(t){return this.ALL_SKILL_BUFF_OPTIONS_CACHE[t]}},{key:"getAttributeBuffOptions",value:function(){return this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE}},{key:"getUltimatumOptions",value:function(){return this.ULTIMATUM_OPTIONS_CACHE}},{key:"getBaseKey",value:function(t){return t===T.J.Body?"ARMOR":t.toUpperCase()}},{key:"initRarityOptionsCache",value:function(){var t=this;this.ALL_RARITIES_OPTIONS_CACHE=P.n.map(function(o){return{label:t.slormancerTranslateService.translate("RAR_loot_"+o),value:o}})}},{key:"initStatOptionsCache",value:function(){var t=this.slormancerDataService.getGameDataStats().filter(function(R){return"X"!==R.PERCENT});this.STATS_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[];var i,o=(0,B.Z)(t);try{for(o.s();!(i=o.n()).done;){var r=i.value,c={label:this.slormancerTranslateService.translate(r.REF)+("%"===r.PERCENT?" (%)":""),value:r.REF};this.ALL_STATS_OPTIONS_CACHE.push(c);var m,s=(0,B.Z)(T.l);try{for(s.s();!(m=s.n()).done;){var d=m.value,C=r[this.getBaseKey(d)];if(""!==C){var k=this.STATS_OPTIONS_CACHE[d];void 0===k&&(this.STATS_OPTIONS_CACHE[d]=k={P:[],S:[]}),"P"===C&&k.P.push(c),("P"===C||"S"===C)&&k.S.push(c)}}}catch(R){s.e(R)}finally{s.f()}}}catch(R){o.e(R)}finally{o.f()}var j,x=(0,B.Z)(T.l);try{for(x.s();!(j=x.n()).done;){var pe=this.getBaseKey(j.value),W=this.STATS_OPTIONS_CACHE[pe];if(W){var _e=W.P,K=W.S;_e&&_e.sort(function(R,ne){return(0,O.rR)(R.label,ne.label)}),K&&K.sort(function(R,ne){return(0,O.rR)(R.label,ne.label)})}}}catch(R){x.e(R)}finally{x.f()}this.ALL_STATS_OPTIONS_CACHE.sort(function(R,ne){return(0,O.rR)(R.label,ne.label)})}},{key:"initLegendaryOptionsCache",value:function(){var t=this.slormancerDataService.getGameDataLegendaries().filter(function(m){return m.LOOTABLE});this.LEGENDARY_OPTIONS_CACHE={};var i,o=(0,B.Z)(t);try{for(o.s();!(i=o.n()).done;){var r=i.value,c={value:r.REF,label:r.EN_NAME},s=this.LEGENDARY_OPTIONS_CACHE[r.ITEM];void 0===s&&(this.LEGENDARY_OPTIONS_CACHE[r.ITEM]=s={0:[],1:[],2:[]}),-1===r.HERO||99===r.HERO?(s[0].push(c),s[1].push(c),s[2].push(c)):s[r.HERO].push(c)}}catch(m){o.e(m)}finally{o.f()}}},{key:"initReaperBuffOptions",value:function(){var t=this;this.ALL_REAPER_BUFF_OPTIONS_CACHE=Ae.c.filter(function(o){return o!==Ae.Q.OhmAgad&&o!==Ae.Q.ReapersmithBrotherhood}).map(function(o){return{value:o,label:t.slormancerTranslateService.translate("weapon_reapersmith_"+o)}})}},{key:"initSkillBuffOptions",value:function(){var t;this.ALL_SKILL_BUFF_OPTIONS_CACHE=((0,S.Z)(t={},M.i.Warrior,this.slormancerDataService.getGameDataActiveSkills(M.i.Warrior).map(function(o){return{value:o.REF,label:o.EN_NAME}})),(0,S.Z)(t,M.i.Huntress,this.slormancerDataService.getGameDataActiveSkills(M.i.Huntress).map(function(o){return{value:o.REF,label:o.EN_NAME}})),(0,S.Z)(t,M.i.Mage,this.slormancerDataService.getGameDataActiveSkills(M.i.Mage).map(function(o){return{value:o.REF,label:o.EN_NAME}})),t)}},{key:"initAttributeBuffOptions",value:function(){var t=this;this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=y.A.map(function(o){return{value:o,label:t.slormancerTranslateService.translate("character_trait_"+o)}})}},{key:"initReaperOptions",value:function(){this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}};var i,t=this.slormancerDataService.getGameDataAvailableReaper(),o=(0,B.Z)(t);try{for(o.s();!(i=o.n()).done;){var r=i.value;this.ALL_REAPER_OPTIONS_CACHE.p[M.i.Warrior].push({value:r.REF,label:this.slormancerReaperService.getReaperName(r.EN_NAME,!0,M.i.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.p[M.i.Huntress].push({value:r.REF,label:this.slormancerReaperService.getReaperName(r.EN_NAME,!0,M.i.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.p[M.i.Mage].push({value:r.REF,label:this.slormancerReaperService.getReaperName(r.EN_NAME,!0,M.i.Mage)}),this.ALL_REAPER_OPTIONS_CACHE.b[M.i.Warrior].push({value:r.REF,label:this.slormancerReaperService.getReaperName(r.EN_NAME,!1,M.i.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.b[M.i.Huntress].push({value:r.REF,label:this.slormancerReaperService.getReaperName(r.EN_NAME,!1,M.i.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.b[M.i.Mage].push({value:r.REF,label:this.slormancerReaperService.getReaperName(r.EN_NAME,!1,M.i.Mage)})}}catch(c){o.e(c)}finally{o.f()}}},{key:"initUltimatumOptions",value:function(){var t=this;this.ULTIMATUM_OPTIONS_CACHE=lt.N.map(function(o){return{value:o,label:t.slormancerTranslateService.translate("ultimatum_"+o)}})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(he.o),e.LFG(re.n),e.LFG(Je.I))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a}();function si(a,l){if(1&a&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.Oqu(n.label)}}function ui(a,l){1&a&&(e.TgZ(0,"mat-option",9),e._uU(1," No results "),e.qZA())}function mi(a,l){if(1&a&&(e.TgZ(0,"mat-option",10),e._UZ(1,"span",11),e.qZA()),2&a){var n=l.$implicit,t=e.oxw(2);e.ekj("filtered",n.filtered),e.Q6J("value",n.option.value)("disabled",n.filtered||t.optionDisable(n.option)),e.xp6(1),e.Q6J("innerHTML",n.option.label,e.oJD)}}function di(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"mat-form-field",1),e.YNc(1,si,2,1,"mat-label",2),e.TgZ(2,"mat-select",3),e.NdJ("openedChange",function(i){e.CHM(n);var r=e.MAs(5);return e.oxw().opened(i,r)}),e.TgZ(3,"mat-option",4)(4,"input",5,6),e.NdJ("keydown.space",function(i){return e.CHM(n),e.oxw().handleSearchSpace(i)}),e.qZA()(),e.YNc(6,ui,2,0,"mat-option",7),e.YNc(7,mi,2,5,"mat-option",8),e.qZA()()}if(2&a){var t=e.oxw();e.ekj("no-error-padding",t.noErrorPadding),e.xp6(1),e.Q6J("ngIf",null!==t.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(2),e.Q6J("formControl",t.search),e.xp6(2),e.Q6J("ngIf",t.noResult),e.xp6(1),e.Q6J("ngForOf",t.filteredOptions)("ngForTrackBy",t.trackBy)}}var Ie=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(){var o;return(0,p.Z)(this,t),(o=n.call(this)).label=null,o.control=null,o.options=[],o.noErrorPadding=!1,o.optionDisable=function(){return!1},o.filteredOptions=[],o.search=new u.NI(""),o.noResult=!1,o.search.valueChanges.subscribe(function(){return o.filter()}),o}return(0,g.Z)(t,[{key:"ngOnChanges",value:function(i){var r=this;null!==this.control&&i.control&&this.control.valueChanges.pipe((0,L.R)(this.unsubscribe)).subscribe(function(){return r.resetFilter()}),this.filter()}},{key:"opened",value:function(i,r){!1===i?this.resetFilter():r.focus()}},{key:"resetFilter",value:function(){this.search.setValue("")}},{key:"filter",value:function(){var i=this.search.value.toLowerCase().trim();this.filteredOptions=this.options.map(function(r){return{option:r,filtered:-1===r.label.toLowerCase().indexOf(i)}}),this.noResult=!this.filteredOptions.some(function(r){return!r.filtered})}},{key:"trackBy",value:function(i,r){return r.option.value}},{key:"handleSearchSpace",value:function(i){i.stopPropagation()}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-search-select"]],inputs:{label:"label",control:"control",options:"options",noErrorPadding:"noErrorPadding",optionDisable:"optionDisable"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["appearance","outline","color","primary",3,"no-error-padding",4,"ngIf"],["appearance","outline","color","primary"],[4,"ngIf"],["color","primary",3,"formControl","openedChange"],["disabled","","role","search"],["matInput","","type","text","placeholder","Rechercher...",3,"formControl","keydown.space"],["searchInput",""],["role","no-result","disabled","",4,"ngIf"],[3,"value","disabled","filtered",4,"ngFor","ngForOf","ngForTrackBy"],["role","no-result","disabled",""],[3,"value","disabled"],[3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,di,8,8,"mat-form-field",0),2&n&&e.Q6J("ngIf",null!==t.control&&t.options.length>0)},directives:[_.O5,b.KE,b.hX,X.gD,u.JJ,u.oH,$.ey,G.Nt,u.Fj,_.sg],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a}(),be=h(8029);function gi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"mat-slider",11),e.NdJ("input",function(i){return e.CHM(n),e.oxw(2).updateSliderStat(i)}),e.qZA()}if(2&a){var t=e.oxw(2);e.Q6J("min",t.affix.craftedEffect.minPossibleCraftedValue)("max",t.affix.craftedEffect.maxPossibleCraftedValue)("step",1)}}function pi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"mat-slider",12),e.NdJ("input",function(o){return e.CHM(n),e.oxw(2).updateSliderPurity(o)}),e.qZA()}2&a&&e.Q6J("min",101)("max",200)("step",1)}function _i(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"app-search-select",3),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,gi,1,3,"mat-slider",5),e.YNc(5,pi,1,3,"mat-slider",6),e.qZA(),e.TgZ(6,"div",7)(7,"div",8),e._uU(8),e.qZA(),e.TgZ(9,"mat-checkbox",9),e.NdJ("change",function(i){return e.CHM(n),e.oxw().purityChanged(i)}),e._uU(10,"Pure"),e.qZA(),e.TgZ(11,"button",10),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeStat()}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA()()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.getStatControl())("options",t.options)("optionDisable",t.optionDisableMethod),e.xp6(2),e.Q6J("ngIf",!t.affix.isPure),e.xp6(1),e.Q6J("ngIf",t.affix.isPure),e.xp6(2),e.ekj("pure",t.affix.isPure),e.xp6(1),e.hij(" ",t.displayedValue," "),e.xp6(1),e.Q6J("checked",t.affix.isPure),e.xp6(2),e.Q6J("disabled",!t.removable)}}var fi=function(){var a=function(){function l(n){var t=this;(0,p.Z)(this,l),this.itemFormService=n,this.base=T.J.Amulet,this.alreadyUsedStats=[],this.affix=null,this.form=null,this.removable=!1,this.remove=new e.vpe,this.options=[],this.displayedValue="",this.optionDisableMethod=function(o){return t.isOptionDisabled(o)}}return(0,g.Z)(l,[{key:"ngOnChanges",value:function(){null!==this.affix&&(this.options=this.itemFormService.getStatsOptions(this.base,this.affix.rarity),this.affix.isPure?this.setPuritylabel(this.affix.pure):this.setStatLabel(this.affix.craftedEffect.craftedValue))}},{key:"getStatControl",value:function(){return null===this.form?null:this.form.get("stat")}},{key:"isOptionDisabled",value:function(t){return-1!==this.alreadyUsedStats.indexOf(t.value)&&null!==this.affix&&t.value!==this.affix.craftedEffect.effect.stat}},{key:"purityChanged",value:function(t){null!==this.affix&&null!==this.form&&this.form.patchValue(t.checked?{purity:101}:{purity:100})}},{key:"updateSliderPurity",value:function(t){null!==t.value&&this.setPuritylabel(t.value)}},{key:"updateSliderStat",value:function(t){null!==t.value&&this.setStatLabel(t.value)}},{key:"setPuritylabel",value:function(t){this.displayedValue=Math.round(t-100)+"%"}},{key:"setStatLabel",value:function(t){if(this.displayedValue="",null!==this.affix){var o=this.affix.craftedEffect.effect.percent?"%":"";this.displayedValue=null===this.affix?"":"+"+((0,O.AW)(this.affix.craftedEffect,t)+o)}}},{key:"removeStat",value:function(){this.remove.emit()}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-stat"]],inputs:{base:"base",alreadyUsedStats:"alreadyUsedStats",affix:"affix",form:"form",removable:"removable"},outputs:{remove:"remove"},features:[e.TTD],decls:1,vars:1,consts:[["class","stat-line",3,"formGroup",4,"ngIf"],[1,"stat-line",3,"formGroup"],[1,"select"],["label","Stat",3,"control","options","optionDisable"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],["color","accent","formControlName","purity",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["color","primary",3,"checked","change"],["mat-icon-button","","color","primary","type","button",3,"disabled","click"],["color","primary","formControlName","value",3,"min","max","step","input"],["color","accent","formControlName","purity",3,"min","max","step","input"]],template:function(n,t){1&n&&e.YNc(0,_i,14,11,"div",0),2&n&&e.Q6J("ngIf",null!==t.form&&null!==t.affix)},directives:[_.O5,u.JL,u.sg,Ie,be.pH,u.JJ,u.u,we.oG,E.lW,H.Hw],styles:[".pure[_ngcontent-%COMP%]{color:#20d787}"]}),a}();function vi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().addLegendaryEffect()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function hi(a,l){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Q6J("innerHTML",n.label,e.oJD)}}function Ci(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"mat-slider",18),e.NdJ("input",function(o){return e.CHM(n),e.oxw(2).updateSliderValue(o)}),e.qZA()}2&a&&e.Q6J("min",75)("max",100)("step",1)}function Mi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Legendary effect"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,hi,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11),e.YNc(8,Ci,1,3,"mat-slider",12),e.qZA(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeLegendaryEffect()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("ngIf",t.hasLegendaryValues()),e.xp6(3),e.hij(" ",t.displayedValue," ")}}var bi=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.itemFormService=n,this.base=T.J.Amulet,this.heroClass=M.i.Huntress,this.legendaryEffect=null,this.form=null,this.reinforcment=null,this.options=[],this.displayedValue=""}return(0,g.Z)(l,[{key:"ngOnChanges",value:function(){this.options=this.itemFormService.getLegendaryOptions(this.base,this.heroClass),null!==this.legendaryEffect&&this.updateLegendaryValueLabel(this.legendaryEffect.value)}},{key:"updateLegendaryValueLabel",value:function(t){this.displayedValue="",null!==this.legendaryEffect&&null!==t&&(this.displayedValue=this.legendaryEffect.effects.filter(function(o){return o.possibleCraftedValues.length>1}).map(function(o){var i=o.effect.percent?"%":"";return(0,O.AW)(o,t)+i}).join(" / "))}},{key:"hasLegendaryValues",value:function(){return null!==this.legendaryEffect&&this.legendaryEffect.effects.filter(function(t){return t.possibleCraftedValues.length>1}).length>0}},{key:"updateSliderValue",value:function(t){this.displayedValue="";var o=t.value;null!==this.legendaryEffect&&null!==o&&this.updateLegendaryValueLabel(o)}},{key:"removeLegendaryEffect",value:function(){null!==this.form&&this.form.patchValue({id:null})}},{key:"addLegendaryEffect",value:function(){var t=this.options[0];null!==this.form&&t&&this.form.patchValue({id:t.value,value:100})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-legendary-effect"]],inputs:{base:"base",heroClass:"heroClass",legendaryEffect:"legendaryEffect",form:"form",reinforcment:"reinforcment"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"],["color","primary","formControlName","value",3,"min","max","step","input"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Legendary effect :"),e.qZA(),e.YNc(3,vi,4,0,"div",2),e.qZA(),e.YNc(4,Mi,15,4,"div",3)),2&n&&(e.xp6(3),e.Q6J("ngIf",null!==t.form&&null===t.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==t.form&&null!==t.legendaryEffect))},directives:[_.O5,E.lW,H.Hw,u.JL,u.sg,b.KE,b.hX,X.gD,u.JJ,u.u,_.sg,$.ey,be.pH],styles:[""]}),a}();function yi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().addReaperEnchantment()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Oi(a,l){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Q6J("innerHTML",n.label,e.oJD)}}function Pi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Reaper Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Oi,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(i){return e.CHM(n),e.oxw().updateSliderValue(i)}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeReaperEnchantment()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",5)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}var ki=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.itemFormService=n,this.reaperEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}return(0,g.Z)(l,[{key:"ngOnChanges",value:function(){this.options=this.itemFormService.getReaperBuffOptions(),null!==this.reaperEnchantment&&this.updateReaperEnchantmentValueLabel(this.reaperEnchantment.effect.value)}},{key:"updateReaperEnchantmentValueLabel",value:function(t){this.displayedValue="",null!==this.reaperEnchantment&&null!==t&&(this.displayedValue="+"+(0,O.Be)(this.reaperEnchantment.craftableValues[t],0))}},{key:"updateSliderValue",value:function(t){this.displayedValue="";var o=t.value;null!==this.reaperEnchantment&&null!==o&&this.updateReaperEnchantmentValueLabel(o)}},{key:"removeReaperEnchantment",value:function(){null!==this.form&&this.form.patchValue({smith:null})}},{key:"addReaperEnchantment",value:function(){var t=this.options[0];null!==this.form&&t&&this.form.patchValue({smith:t.value,value:5})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-buff-reaper"]],inputs:{reaperEnchantment:"reaperEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","form-add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"form-add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","smith"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Reaper Enchantment :"),e.qZA(),e.YNc(3,yi,4,0,"div",2),e.qZA(),e.YNc(4,Pi,15,6,"div",3)),2&n&&(e.xp6(3),e.Q6J("ngIf",null!==t.form&&null===t.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.form&&null!==t.reaperEnchantment))},directives:[_.O5,E.lW,H.Hw,u.JL,u.sg,b.KE,b.hX,X.gD,u.JJ,u.u,_.sg,$.ey,be.pH],styles:[""]}),a}();function xi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().addSkillEnchantment()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Si(a,l){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Q6J("innerHTML",n.label,e.oJD)}}function Ti(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Skill Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Si,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(i){return e.CHM(n),e.oxw().updateSliderValue(i)}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeSkillEnchantment()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",2)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}var Zi=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.itemFormService=n,this.heroClass=M.i.Huntress,this.skillEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}return(0,g.Z)(l,[{key:"ngOnChanges",value:function(){this.options=this.itemFormService.getSkillBuffOptions(this.heroClass),null!==this.skillEnchantment&&this.updateSkillEnchantmentValueLabel(this.skillEnchantment.effect.value)}},{key:"updateSkillEnchantmentValueLabel",value:function(t){this.displayedValue="",null!==this.skillEnchantment&&null!==t&&(this.displayedValue="+"+(0,O.Be)(this.skillEnchantment.craftableValues[t],0))}},{key:"updateSliderValue",value:function(t){this.displayedValue="";var o=t.value;null!==this.skillEnchantment&&null!==o&&this.updateSkillEnchantmentValueLabel(o)}},{key:"removeSkillEnchantment",value:function(){null!==this.form&&this.form.patchValue({skill:null})}},{key:"addSkillEnchantment",value:function(){var t=this.options[0];null!==this.form&&t&&this.form.patchValue({skill:t.value,value:2})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-buff-skill"]],inputs:{heroClass:"heroClass",skillEnchantment:"skillEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","skill"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Skill Enchantment :"),e.qZA(),e.YNc(3,xi,4,0,"div",2),e.qZA(),e.YNc(4,Ti,15,6,"div",3)),2&n&&(e.xp6(3),e.Q6J("ngIf",null!==t.form&&null===t.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.form&&null!==t.skillEnchantment))},directives:[_.O5,E.lW,H.Hw,u.JL,u.sg,b.KE,b.hX,X.gD,u.JJ,u.u,_.sg,$.ey,be.pH],styles:[""]}),a}();function wi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){return e.CHM(n),e.oxw().addAttributeEnchantment()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Ai(a,l){if(1&a&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Q6J("innerHTML",n.label,e.oJD)}}function Ii(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Attribute Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Ai,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(i){return e.CHM(n),e.oxw().updateSliderValue(i)}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){return e.CHM(n),e.oxw().removeAttributeEnchantment()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",3)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}var Ei=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.itemFormService=n,this.attributeEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}return(0,g.Z)(l,[{key:"ngOnChanges",value:function(){this.options=this.itemFormService.getAttributeBuffOptions(),null!==this.attributeEnchantment&&this.updateAttributeEnchantmentValueLabel(this.attributeEnchantment.effect.value)}},{key:"updateAttributeEnchantmentValueLabel",value:function(t){this.displayedValue="",null!==this.attributeEnchantment&&null!==t&&(this.displayedValue="+"+(0,O.Be)(this.attributeEnchantment.craftableValues[t],0))}},{key:"updateSliderValue",value:function(t){this.displayedValue="";var o=t.value;null!==this.attributeEnchantment&&null!==o&&this.updateAttributeEnchantmentValueLabel(o)}},{key:"removeAttributeEnchantment",value:function(){null!==this.form&&this.form.patchValue({attribute:null})}},{key:"addAttributeEnchantment",value:function(){var t=this.options[0];null!==this.form&&t&&this.form.patchValue({attribute:t.value,value:3})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-buff-attribute"]],inputs:{attributeEnchantment:"attributeEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","attribute"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Attribute Enchantment :"),e.qZA(),e.YNc(3,wi,4,0,"div",2),e.qZA(),e.YNc(4,Ii,15,6,"div",3)),2&n&&(e.xp6(3),e.Q6J("ngIf",null!==t.form&&null===t.attributeEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.form&&null!==t.attributeEnchantment))},directives:[_.O5,E.lW,H.Hw,u.JL,u.sg,b.KE,b.hX,X.gD,u.JJ,u.u,_.sg,$.ey,be.pH],styles:[""]}),a}();function Li(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).addBasicAffix()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Ji(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(n);var s=e.oxw().index;return e.oxw(3).removeAffix(s)}),e.qZA()}if(2&a){var t=e.oxw(),o=t.$implicit,i=t.index,r=e.oxw(3);e.Q6J("form",o)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!1)}}function qi(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Ji,1,5,"app-item-edit-stat",24),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(3);e.xp6(1),e.Q6J("ngIf",t.isBasicStat(n))}}function Ui(a,l){if(1&a&&(e.ynx(0),e.YNc(1,qi,2,1,"ng-container",14),e.BQk()),2&a){var n=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",n.getAffixControls())}}function Ni(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).addMagicAffix()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Fi(a,l){if(1&a&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Magic Stats : "),e.qZA(),e.YNc(3,Ni,4,0,"div",11),e.qZA()),2&a){var n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",n.hasBasicStats()&&!n.hasMaximumMagicStats())}}function Bi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(n);var s=e.oxw().index;return e.oxw(2).removeAffix(s)}),e.qZA()}if(2&a){var t=e.oxw(),o=t.$implicit,i=t.index,r=e.oxw(2);e.Q6J("form",o)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!r.hasRareStats()&&!r.hasEpicStats())}}function Hi(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Bi,1,5,"app-item-edit-stat",24),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isMagicStat(n))}}function Qi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).addRareAffix()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Ri(a,l){if(1&a&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Rare Stats : "),e.qZA(),e.YNc(3,Qi,4,0,"div",11),e.qZA()),2&a){var n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",n.hasMagicStats()&&!n.hasMaximumRareStats())}}function Yi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(n);var s=e.oxw().index;return e.oxw(2).removeAffix(s)}),e.qZA()}if(2&a){var t=e.oxw(),o=t.$implicit,i=t.index,r=e.oxw(2);e.Q6J("form",o)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!r.hasEpicStats())}}function Vi(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Yi,1,5,"app-item-edit-stat",24),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isRareStat(n))}}function Di(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).addEpicAffix()}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function ji(a,l){if(1&a&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Epic Stats : "),e.qZA(),e.YNc(3,Di,4,0,"div",11),e.qZA()),2&a){var n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",n.hasRareStats()&&!n.hasMaximumEpicStats())}}function Gi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(n);var s=e.oxw().index;return e.oxw(2).removeAffix(s)}),e.qZA()}if(2&a){var t=e.oxw(),o=t.$implicit,i=t.index,r=e.oxw(2);e.Q6J("form",o)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(i))("removable",!0)}}function Xi(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Gi,1,5,"app-item-edit-stat",24),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.isEpicStat(n))}}function zi(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e.TgZ(1,"mat-dialog-content")(2,"div",2),e._UZ(3,"app-item-view",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8,"Item level"),e.qZA(),e._UZ(9,"input",7),e.TgZ(10,"mat-error"),e._uU(11),e.qZA()(),e.TgZ(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Item reinforcment"),e.qZA(),e._UZ(15,"input",8),e.TgZ(16,"mat-error"),e._uU(17,"Reinforcment must be >= 0"),e.qZA()()(),e.TgZ(18,"div",9)(19,"div",10),e._uU(20," Base Stats : "),e.qZA(),e.YNc(21,Li,4,0,"div",11),e.qZA(),e.YNc(22,Ui,2,1,"ng-container",12),e.YNc(23,Fi,4,1,"div",13),e.YNc(24,Hi,2,1,"ng-container",14),e.YNc(25,Ri,4,1,"div",13),e.YNc(26,Vi,2,1,"ng-container",14),e.YNc(27,ji,4,1,"div",13),e.YNc(28,Xi,2,1,"ng-container",14),e._UZ(29,"app-item-edit-legendary-effect",15)(30,"app-item-edit-buff-reaper",16)(31,"app-item-edit-buff-skill",17)(32,"app-item-edit-buff-attribute",18),e.qZA()(),e.TgZ(33,"mat-dialog-actions")(34,"button",19),e._uU(35,"Cancel"),e.qZA(),e.TgZ(36,"button",20),e.NdJ("click",function(){return e.CHM(n),e.oxw().reset()}),e._uU(37,"Reset"),e.qZA(),e.TgZ(38,"button",21),e._uU(39,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("item",t.item)("details",!0),e.xp6(8),e.hij("Level must be between 1 and ",t.MAX_ITEM_LEVEL,""),e.xp6(10),e.Q6J("ngIf",!t.hasMaximumBasicStats()),e.xp6(1),e.Q6J("ngIf",t.hasBasicStats()),e.xp6(1),e.Q6J("ngIf",t.hasBasicStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("ngIf",t.hasMagicStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("ngIf",t.hasRareStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("base",t.item.base)("reinforcment",t.item.reinforcment)("heroClass",t.item.heroClass)("legendaryEffect",t.item.legendaryEffect)("form",t.getLegendaryEffectForm()),e.xp6(1),e.Q6J("reaperEnchantment",t.item.reaperEnchantment)("form",t.getReaperEnchantmentForm()),e.xp6(1),e.Q6J("heroClass",t.item.heroClass)("skillEnchantment",t.item.skillEnchantment)("form",t.getSkillEnchantmentForm()),e.xp6(1),e.Q6J("attributeEnchantment",t.item.attributeEnchantment)("form",t.getAttributeEnchantmentForm())}}var $i=function(){var a=function(){function l(n,t,o,i,r,c,s,m,d){(0,p.Z)(this,l),this.dialogRef=n,this.slormancerCharacterUpdaterService=t,this.slormancerItemService=o,this.slormancerDataService=i,this.slormancerAffixService=r,this.slormancerLegendaryEffectService=c,this.formOptionsService=s,this.buildStorageService=m,this.MAX_ITEM_LEVEL=D.Sb,this.maxBasicStats=0,this.alreadyUsedStats=[],this.originalItem=d.item,this.maxLevel=d.maxLevel,this.item=this.slormancerItemService.getEquipableItemClone(this.originalItem),this.character=d.character,this.reset()}return(0,g.Z)(l,[{key:"reset",value:function(){Object.assign(this.item,this.slormancerItemService.getEquipableItemClone(this.originalItem)),this.form=this.buildForm()}},{key:"submit",value:function(){this.form.valid&&this.dialogRef.close(this.item)}},{key:"updatePreview",value:function(t){var o=this,i=this.item;if(t.valid){var r=t.value;if(i.level=r.level,i.reinforcment=r.reinforcment,i.affixes.forEach(function(Q,pe){var W=t.get("affixes."+pe);if(null!==W){var _e=W.get("purity").value,K=W.get("value").value,R=W.get("stat").value,ne=W.get("rarity").value;if(Q.craftedEffect.effect.stat!==R){var V=o.slormancerAffixService.getAffixFromStat(R,i.level,i.reinforcment,ne,K);null!==V&&(i.affixes[pe]=V,Q=V)}Q.craftedEffect.craftedValue=K,Q.pure=_e}}),null!==r.legendaryEffect){var c=r.legendaryEffect.id,s=r.legendaryEffect.value;null===c?i.legendaryEffect=null:null===i.legendaryEffect||i.legendaryEffect.id!==c?i.legendaryEffect=this.slormancerLegendaryEffectService.getLegendaryEffectById(c,s,i.reinforcment,i.heroClass):i.legendaryEffect.value=s}if(null!==r.reaper){var m=r.reaper.smith,d=r.reaper.value;null===m?i.reaperEnchantment=null:null===i.reaperEnchantment||i.reaperEnchantment.craftedReaperSmith!==m?i.reaperEnchantment=this.slormancerItemService.getReaperEnchantment(m,d):i.reaperEnchantment.craftedValue=d}if(null!==r.skill){var f=r.skill.skill,C=r.skill.value;null===f?i.skillEnchantment=null:null===i.skillEnchantment||i.skillEnchantment.craftedSkill!==f?i.skillEnchantment=this.slormancerItemService.getSkillEnchantment(f,C):i.skillEnchantment.craftedValue=C}if(null!==r.attribute){var k=r.attribute.attribute,x=r.attribute.value;null===k?i.attributeEnchantment=null:null===i.attributeEnchantment||i.attributeEnchantment.craftedAttribute!==k?i.attributeEnchantment=this.slormancerItemService.getAttributeEnchantment(k,x):i.attributeEnchantment.craftedValue=x}this.alreadyUsedStats=i.affixes.map(function(Q){return Q.craftedEffect.effect.stat}),this.slormancerItemService.updateEquipableItemModel(i);var j=this.buildStorageService.getBuild();this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==j?j.configuration:ee,!1,i),this.slormancerItemService.updateEquipableItemView(i)}}},{key:"affixToForm",value:function(t){return new u.cw({rarity:new u.NI(t.rarity),value:new u.NI(t.craftedEffect.craftedValue),purity:new u.NI(t.pure),stat:new u.NI(t.craftedEffect.effect.stat)})}},{key:"legendaryEffectToForm",value:function(t){return new u.cw({id:new u.NI(null===t?null:t.id),value:new u.NI(null===t?100:t.value)})}},{key:"buildForm",value:function(){var t=this,i=new u.cw({level:new u.NI(this.item.level,[u.kI.required,u.kI.min(1),u.kI.max(this.MAX_ITEM_LEVEL),u.kI.pattern(/^[0-9]+$/)]),reinforcment:new u.NI(this.item.reinforcment,[u.kI.required,u.kI.min(0),u.kI.pattern(/^[0-9]+$/)]),affixes:new u.Oe(this.item.affixes.map(function(r){return t.affixToForm(r)})),legendaryEffect:this.legendaryEffectToForm(this.item.legendaryEffect),reaper:new u.cw({smith:new u.NI(null===this.item.reaperEnchantment?null:this.item.reaperEnchantment.craftedReaperSmith),value:new u.NI(null===this.item.reaperEnchantment?5:this.item.reaperEnchantment.craftedValue)}),skill:new u.cw({skill:new u.NI(null===this.item.skillEnchantment?null:this.item.skillEnchantment.craftedSkill),value:new u.NI(null===this.item.skillEnchantment?2:this.item.skillEnchantment.craftedValue)}),attribute:new u.cw({attribute:new u.NI(null===this.item.attributeEnchantment?null:this.item.attributeEnchantment.craftedAttribute),value:new u.NI(null===this.item.attributeEnchantment?2:this.item.attributeEnchantment.craftedValue)})});return i.valueChanges.subscribe(function(){t.updatePreview(i)}),this.updatePreview(i),this.maxBasicStats=this.slormancerDataService.getBaseMaxBasicStat(this.item.base),i}},{key:"getAffixControls",value:function(){var t=this.form.get("affixes");return null!==t?t.controls:[]}},{key:"isBasicStat",value:function(t){var o=t.get("rarity");return null!==o&&o.value===P.u.Normal}},{key:"hasBasicStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isBasicStat(o)}).length>0}},{key:"hasMaximumBasicStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isBasicStat(o)}).length>=this.maxBasicStats}},{key:"isMagicStat",value:function(t){var o=t.get("rarity");return null!==o&&o.value===P.u.Magic}},{key:"hasMagicStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isMagicStat(o)}).length>0}},{key:"hasMaximumMagicStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isMagicStat(o)}).length>=D.aH}},{key:"isRareStat",value:function(t){var o=t.get("rarity");return null!==o&&o.value===P.u.Rare}},{key:"hasRareStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isRareStat(o)}).length>0}},{key:"hasMaximumRareStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isRareStat(o)}).length>=D.bm}},{key:"isEpicStat",value:function(t){var o=t.get("rarity");return null!==o&&o.value===P.u.Epic}},{key:"hasEpicStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isEpicStat(o)}).length>0}},{key:"hasMaximumEpicStats",value:function(){var t=this;return this.getAffixControls().filter(function(o){return t.isEpicStat(o)}).length>=D.hc}},{key:"getAffix",value:function(t){return null===this.item?null:(0,O.lA)(this.item.affixes[t])}},{key:"removeAffix",value:function(t){var o=this.form.get("affixes");null!==o&&(o.removeAt(t),this.item.affixes.splice(t,1),this.updatePreview(this.form))}},{key:"addAffix",value:function(t){var o=this,i=this.form.get("affixes"),c=this.formOptionsService.getStatsOptions(this.item.base,t).filter(function(m){return-1===o.alreadyUsedStats.indexOf(m.value)})[0];if(c&&null!==i){var s=this.slormancerAffixService.getAffixFromStat(c.value,this.item.level,this.item.reinforcment,t,1e3);null!==s&&(this.item.affixes.push(s),i.push(this.affixToForm(s)),this.updatePreview(this.form))}}},{key:"addBasicAffix",value:function(){this.addAffix(P.u.Normal)}},{key:"addMagicAffix",value:function(){this.addAffix(P.u.Magic)}},{key:"addRareAffix",value:function(){this.addAffix(P.u.Rare)}},{key:"addEpicAffix",value:function(){this.addAffix(P.u.Epic)}},{key:"getLegendaryEffectForm",value:function(){return null===this.form?null:this.form.get("legendaryEffect")}},{key:"getReaperEnchantmentForm",value:function(){return null===this.form?null:this.form.get("reaper")}},{key:"getSkillEnchantmentForm",value:function(){return null===this.form?null:this.form.get("skill")}},{key:"getAttributeEnchantmentForm",value:function(){return null===this.form?null:this.form.get("attribute")}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(fe.P),e.Y36(se.S),e.Y36(he.o),e.Y36(Le.l),e.Y36(Ve.A),e.Y36(te),e.Y36(A),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"preview"],[3,"item","details"],[1,"form"],[1,"form-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["matInput","","type","number","step","1","formControlName","reinforcment"],[1,"form-info"],[1,"label"],["class","add",4,"ngIf"],[4,"ngIf"],["class","form-info",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"base","reinforcment","heroClass","legendaryEffect","form"],[3,"reaperEnchantment","form"],[3,"heroClass","skillEnchantment","form"],[3,"attributeEnchantment","form"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[3,"form","base","alreadyUsedStats","affix","removable","remove",4,"ngIf"],[3,"form","base","alreadyUsedStats","affix","removable","remove"]],template:function(n,t){1&n&&e.YNc(0,zi,40,24,"form",0),2&n&&e.Q6J("ngIf",null!==t.form&&null!==t.item)},directives:[_.O5,u._Y,u.JL,u.sg,v.xY,He,b.KE,b.hX,G.Nt,u.wV,u.Fj,u.JJ,u.u,b.TO,E.lW,H.Hw,_.sg,fi,bi,ki,Zi,Ei,v.H8,v.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1;overflow:auto}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:370px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{align-items:stretch}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-basis:auto}}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;min-height:40px}"]}),a}(),Wi=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-remove-confirm-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Are you sure you want to remove this item ?\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions")(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Remove"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},directives:[v.xY,v.H8,E.lW,v.ZT],styles:[""]}),a}();function Ki(a,l){if(1&a&&(e.ynx(0),e._UZ(1,"img",4)(2,"img",4),e.BQk()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("src",n.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",n.item.icon,e.LSH)}}function eo(a,l){if(1&a&&e._UZ(0,"img",4),2&a){var n=e.oxw();e.MGl("src","assets/img/icon/item/",n.base,"/empty.png",e.LSH)}}function to(a,l){if(1&a&&e._UZ(0,"app-item-view",10),2&a){var n=e.oxw(2);e.Q6J("item",n.item)("details",!1)}}function no(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).equip()}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_back"),e.qZA(),e._uU(3,"Equip item"),e.qZA()}}function ao(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).unequip()}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_forward"),e.qZA(),e._uU(3,"Unequip item"),e.qZA()}}function io(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).edit()}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3,"Create item"),e.qZA()}}function oo(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1,"(Left slot)"),e.qZA())}function ro(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1,"(Right slot)"),e.qZA())}function lo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(3).compareWithSlot(c)}),e.TgZ(1,"mat-icon"),e._uU(2,"compare_arrows"),e.qZA(),e._uU(3,"Compare "),e.YNc(4,oo,2,0,"span",2),e.YNc(5,ro,2,0,"span",2),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t===o.GearSlot.LeftRing),e.xp6(1),e.Q6J("ngIf",t===o.GearSlot.RightRing)}}function co(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).edit()}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3,"Edit item"),e.qZA()}}function so(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).take()}),e.TgZ(1,"mat-icon"),e._uU(2,"content_cut"),e.qZA(),e._uU(3,"Move item"),e.qZA()}}function uo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).copy()}),e.TgZ(1,"mat-icon"),e._uU(2,"content_copy"),e.qZA(),e._uU(3,"Copy item"),e.qZA()}}function mo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).remove()}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3,"Remove item"),e.qZA()}}function go(a,l){if(1&a&&(e.YNc(0,no,4,0,"button",11),e.YNc(1,ao,4,0,"button",11),e.YNc(2,io,4,0,"button",11),e.YNc(3,lo,6,2,"button",12),e.YNc(4,co,4,0,"button",11),e.YNc(5,so,4,0,"button",11),e.YNc(6,uo,4,0,"button",11),e.YNc(7,mo,4,0,"button",11)),2&a){var n=e.oxw(2);e.Q6J("ngIf",null!==n.item&&null===n.base),e.xp6(1),e.Q6J("ngIf",null!==n.item&&null!==n.base),e.xp6(1),e.Q6J("ngIf",null===n.item),e.xp6(1),e.Q6J("ngForOf",n.comparableGearSlots),e.xp6(1),e.Q6J("ngIf",null!==n.item),e.xp6(1),e.Q6J("ngIf",null!==n.item),e.xp6(1),e.Q6J("ngIf",null!==n.item),e.xp6(1),e.Q6J("ngIf",null!==n.item)}}function po(a,l){if(1&a&&(e.ynx(0),e.YNc(1,to,1,2,"ng-template",5),e._UZ(2,"div",6),e.TgZ(3,"mat-menu",7,8),e.YNc(5,go,8,8,"ng-template",9),e.qZA(),e.BQk()),2&a){var n=e.MAs(4),t=e.oxw(),o=e.MAs(1);e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",!t.isDragging&&t.isMouseOver)("cdkConnectedOverlayOrigin",o),e.xp6(1),e.Q6J("matMenuTriggerFor",n),e.xp6(1),e.Q6J("overlapTrigger",!0)}}var ct=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r,c,s,m){var d;return(0,p.Z)(this,t),(d=n.call(this)).dialog=o,d.itemMoveService=i,d.searchService=r,d.slormancerCharacterBuilderService=c,d.slormancerItemService=s,d.buildStorageService=m,d.GearSlot=ge.SH,d.character=null,d.item=null,d.base=null,d.readonly=!1,d.changed=new e.vpe,d.menu=null,d.isDragging=!1,d.isMouseOver=!1,d.isItemCompatible=!1,d.isDraggedItem=!1,d.hiddenBySearch=!1,d.comparableGearSlots=[],d.itemMoveService.draggingItem.pipe((0,L.R)(d.unsubscribe)).subscribe(function(f){d.isDragging=f,d.isDraggedItem=d.itemMoveService.isHoldItem(d.item),d.isItemCompatible=d.itemMoveService.isDragItemCompatible(d.item,d.base)}),d.searchService.searchChanged.pipe((0,L.R)(d.unsubscribe)).subscribe(function(){return d.updateSearch()}),d}return(0,g.Z)(t,[{key:"onMouseOver",value:function(){this.isMouseOver=!0}},{key:"onMouseLeave",value:function(){this.isMouseOver=!1}},{key:"onMouseDown",value:function(i){return 0===i.button&&!this.readonly&&this.take(),!1}},{key:"onMouseUp",value:function(i){var r=this;return 0===i.button&&!this.readonly&&(this.isDragging?this.itemMoveService.swap(this.item,this.base,function(c,s){return r.moveCallback(c,s)}):this.edit()),!1}},{key:"onMouseContextMenu",value:function(){return this.itemMoveService.releaseHoldItem(),this.menu&&!this.readonly&&(this.updateComparableSlots(),this.menu.openMenu()),!1}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){this.updateSearch()}},{key:"isMenuOpen",value:function(){return null!=this.menu&&this.menu.menuOpen}},{key:"updateComparableSlots",value:function(){this.comparableGearSlots=[];var i=this.character,r=this.item;null!==i&&null!==r&&null===this.base&&(this.comparableGearSlots=ge.PL.filter(function(c){var s=i.gear[c];return null!==s&&s.base===r.base}))}},{key:"updateSearch",value:function(){this.hiddenBySearch=null!==this.item&&this.searchService.hasSearch()&&!this.searchService.itemMatchSearch(this.item)}},{key:"moveCallback",value:function(i,r){i&&this.changed.emit(r),this.isDraggedItem=!1,this.isItemCompatible=!1}},{key:"getItemEditModalData",value:function(i,r){var c=this.slormancerCharacterBuilderService.getCharacterClone(i),s=ge.PL.find(function(f){return i.gear[f]===r}),m=s?c.gear[s]:null;return{character:c,item:null!==m?m:this.slormancerItemService.getEquipableItemClone(r),maxLevel:c.level}}},{key:"edit",value:function(){var i=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.item,c=this.character;if(null!==c)if(null===r)null!==this.base?this.edit(this.slormancerItemService.getEmptyEquipableItem(this.base,c.heroClass,c.level)):this.dialog.open(ci).afterClosed().subscribe(function(m){null!=m&&i.edit(i.slormancerItemService.getEmptyEquipableItem(m,c.heroClass,c.level))});else{var s=this.getItemEditModalData(c,r);this.dialog.open($i,{data:s,width:"80vw",maxWidth:"1000px"}).afterClosed().subscribe(function(m){void 0!==m&&i.changed.emit(m)})}}},{key:"take",value:function(){var i=this;null!==this.item&&this.itemMoveService.hold(this.item,this.base,function(r,c){return i.moveCallback(r,c)})}},{key:"copy",value:function(){if(null!==this.item){var i=this.slormancerItemService.getEquipableItemClone(this.item);this.itemMoveService.hold(i,i.base)}}},{key:"remove",value:function(){var i=this;this.dialog.open(Wi).afterClosed().subscribe(function(r){!0===r&&i.changed.emit(null)})}},{key:"equip",value:function(){var i=this;null!==this.item&&this.itemMoveService.equip(this.item,function(r,c){return i.moveCallback(r,c)})}},{key:"unequip",value:function(){var i=this;null!==this.item&&this.itemMoveService.moveToStash(this.item,function(r,c){return i.moveCallback(r,c)})}},{key:"compareWithSlot",value:function(i){if(null!==this.item&&null!==this.character){var r=this.character.gear[i],c=this.buildStorageService.getBuild();null!==r&&null!==c&&null!==c.configuration&&this.dialog.open(ri,{data:{character:this.character,slot:i,config:c.configuration,left:r,right:this.item}})}}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.uw),e.Y36(ue),e.Y36(Me),e.Y36(ie.o),e.Y36(se.S),e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-slot"]],viewQuery:function(n,t){var o;1&n&&e.Gf(Z.p6,5),2&n&&e.iGM(o=e.CRH())&&(t.menu=o.first)},hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onMouseOver()})("mouseleave",function(){return t.onMouseLeave()})("mousedown",function(i){return t.onMouseDown(i)})("mouseup",function(i){return t.onMouseUp(i)})("contextmenu",function(){return t.onMouseContextMenu()})},inputs:{character:"character",item:"item",base:"base",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:5,vars:15,consts:[["cdkOverlayOrigin","",1,"item"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"src",4,"ngIf"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"matMenuTriggerFor"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],[3,"item","details"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0,1),e.YNc(2,Ki,3,2,"ng-container",2),e.YNc(3,eo,1,1,"img",3),e.YNc(4,po,6,4,"ng-container",2),e.qZA()),2&n&&(e.ekj("readonly",t.readonly)("forced-base-compatible",t.isItemCompatible&&null!==t.base)("drop-compatible",!t.isDraggedItem&&t.isMouseOver&&t.isDragging&&t.isItemCompatible)("drop-incompatible",!t.isDraggedItem&&t.isMouseOver&&t.isDragging&&!t.isItemCompatible)("is-being-dragged",t.isDraggedItem&&t.isDragging)("hidden-search",t.hiddenBySearch),e.xp6(2),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null===t.item&&null!==t.base),e.xp6(1),e.Q6J("ngIf",t.isMouseOver||t.isMenuOpen()))},directives:[F.xu,_.O5,F.pI,He,Z.p6,Z.VK,Z.KA,Z.OP,H.Hw,_.sg],styles:["[_nghost-%COMP%]{width:56px;min-width:56px;height:56px;min-height:56px}.item[_ngcontent-%COMP%]{width:56px;min-width:56px;min-height:56px;border:4px solid black;position:relative;background-color:#131313}.item[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.item.forced-base-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2b3}.item.drop-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2}.item.drop-incompatible[_ngcontent-%COMP%]{border-color:#f44336}.item.is-being-dragged[_ngcontent-%COMP%]{opacity:.3}.item.hidden-search[_ngcontent-%COMP%]{opacity:.2}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:0;right:0}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a}();function _o(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2,"Choose your hero level"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Hero level"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(9),e.hij("Level must be between 1 and ",t.MAX_HERO_LEVEL,""),e.xp6(2),e.Q6J("mat-dialog-close",null)}}var fo=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.dialogRef=n,this.MAX_HERO_LEVEL=D.AR,this.form=new u.cw({level:new u.NI(t.level,[u.kI.min(1),u.kI.max(D.AR)])})}return(0,g.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.level)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-level-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,t){1&n&&e.YNc(0,_o,15,3,"form",0),2&n&&e.Q6J("ngIf",null!==t.form)},directives:[_.O5,u._Y,u.JL,u.sg,v.uh,v.xY,b.KE,b.hX,G.Nt,u.wV,u.Fj,u.JJ,u.u,b.TO,v.H8,E.lW,v.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),a}();function vo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e.TgZ(1,"h2",2),e._uU(2,"Choose the new item reinforcment"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Reinforcment"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9,"Reinforcment must be positive"),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("mat-dialog-close",null)}}var ho=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.dialogRef=n,this.MAX_HERO_LEVEL=D.AR,this.form=new u.cw({reinforcment:new u.NI(t.reinforcment,[u.kI.min(0)])})}return(0,g.Z)(l,[{key:"submit",value:function(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.reinforcment)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-item-reinforcment-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","reinforcment"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,t){1&n&&e.YNc(0,vo,15,2,"form",0),2&n&&e.Q6J("ngIf",null!==t.form)},directives:[_.O5,u._Y,u.JL,u.sg,v.uh,v.xY,b.KE,b.hX,G.Nt,u.wV,u.Fj,u.JJ,u.u,b.TO,v.H8,E.lW,v.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),a}();function Co(a,l){if(1&a&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&a){var n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(n.label)}}function Mo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"p",10),e.NdJ("click",function(){var c=e.CHM(n).index;return e.oxw().removeStat(c)}),e._uU(1),e.qZA()}if(2&a){var t=l.$implicit,o=l.index;e.xp6(1),e.AsE("#",o+1," : ",t.label,"")}}var bo=function(){var a=function(){function l(n,t,o,i,r,c){var s=this;(0,p.Z)(this,l),this.dialogRef=n,this.slormancerItemService=o,this.slormancerDataService=i,this.slormancerAffixService=r,this.formOptionsService=c,this.AFFIX_OPTIONS=[],this.RARITY_OPTIONS=this.formOptionsService.getAllRaritiesOptions().filter(function(d){return d.value!==P.u.Legendary}),this.selectedAffixes=[],this.items=t.items;var m=new u.NI;this.form=new u.cw({rarity:new u.NI(P.u.Epic,u.kI.required),affix:m}),m.valueChanges.subscribe(function(d){var f=s.AFFIX_OPTIONS.find(function(C){return C.value===d});void 0!==f&&(s.selectedAffixes.push(f),s.updateOptions(),m.setValue(null))}),this.updateOptions()}return(0,g.Z)(l,[{key:"updateOptions",value:function(){var t=this;this.AFFIX_OPTIONS=this.formOptionsService.getAllStatsoptions().filter(function(o){return!t.selectedAffixes.includes(o)})}},{key:"applyStatsToItem",value:function(t){var o,i,r=this,c=this.form.value.rarity,s=P.n.filter(function(V){return P.n.indexOf(V)<=P.n.indexOf(c)}),m=((0,S.Z)(o={},P.u.Normal,this.slormancerDataService.getBaseMaxBasicStat(t.base)),(0,S.Z)(o,P.u.Magic,1),(0,S.Z)(o,P.u.Rare,1),(0,S.Z)(o,P.u.Epic,3),(0,S.Z)(o,P.u.Legendary,0),o),d=((0,S.Z)(i={},P.u.Normal,this.formOptionsService.getStatsOptions(t.base,P.u.Normal)),(0,S.Z)(i,P.u.Magic,this.formOptionsService.getStatsOptions(t.base,P.u.Magic)),(0,S.Z)(i,P.u.Rare,this.formOptionsService.getStatsOptions(t.base,P.u.Rare)),(0,S.Z)(i,P.u.Epic,this.formOptionsService.getStatsOptions(t.base,P.u.Epic)),(0,S.Z)(i,P.u.Legendary,[]),i);t.affixes=[];var C,f=(0,B.Z)(this.selectedAffixes);try{for(f.s();!(C=f.n()).done;){var j,k=C.value,x=(0,B.Z)(s);try{var Q=function(){var ae=j.value;if(t.affixes.filter(function(Pe){return Pe.rarity===ae}).length<m[ae]&&d[ae].includes(k)){var Oe=r.slormancerAffixService.getAffixFromStat(k.value,t.level,t.reinforcment,ae);if(null!==Oe)return t.affixes.push(Oe),"break"}};for(x.s();!(j=x.n()).done&&"break"!==Q(););}catch(V){x.e(V)}finally{x.f()}}}catch(V){f.e(V)}finally{f.f()}var R,W=Math.max.apply(Math,(0,I.Z)(t.affixes.map(function(V){return P.n.indexOf(V.rarity)}))),_e=P.n.filter(function(V){return V===P.u.Normal||P.n.indexOf(V)<W}),K=(0,B.Z)(_e);try{var ne=function(){for(var ae=R.value,ye=!1;!ye&&t.affixes.filter(function(Pe){return Pe.rarity===ae}).length<m[ae];){var Ee=d[ae].find(function(Pe){return void 0===t.affixes.find(function(cc){return cc.craftedEffect.effect.stat===Pe.value})});if(ye=!0,void 0!==Ee){var Oe=r.slormancerAffixService.getAffixFromStat(Ee.value,t.level,t.reinforcment,ae);null!==Oe&&(t.affixes.push(Oe),ye=!1)}}};for(K.s();!(R=K.n()).done;)ne()}catch(V){K.e(V)}finally{K.f()}this.slormancerItemService.updateEquipableItemModel(t),this.slormancerItemService.updateEquipableItemView(t)}},{key:"removeStat",value:function(t){this.selectedAffixes.splice(t,1),this.updateOptions()}},{key:"getAffixControl",value:function(){return this.form.get("affix")}},{key:"submit",value:function(){if(this.form.markAllAsTouched(),this.selectedAffixes.length>0&&this.form.valid){var o,t=(0,B.Z)(this.items);try{for(t.s();!(o=t.n()).done;)this.applyStatsToItem(o.value)}catch(r){t.e(r)}finally{t.f()}this.dialogRef.close(!0)}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(v.WI),e.Y36(se.S),e.Y36(he.o),e.Y36(Le.l),e.Y36(te))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-optimize-items-affixes-modal"]],decls:21,vars:10,consts:[["mat-dialog-title",""],["id","form",3,"formGroup","submit"],["appearance","outline","color","primary",1,"no-error-padding"],["formControlName","rarity"],[3,"value",4,"ngFor","ngForOf"],["class","stat",3,"click",4,"ngFor","ngForOf"],[3,"label","control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary","form","form",3,"disabled"],[3,"value"],[1,"stat",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"h2",0),e._uU(1,"Choose the affixes you want for your items"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1),e.NdJ("submit",function(){return t.submit()}),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Items will lose their affixes before being updated."),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Highest rarity to allow"),e.qZA(),e.TgZ(11,"mat-select",3),e.YNc(12,Co,2,2,"mat-option",4),e.qZA()(),e._UZ(13,"p"),e.YNc(14,Mo,2,2,"p",5),e._UZ(15,"app-search-select",6),e.qZA()(),e.TgZ(16,"mat-dialog-actions")(17,"button",7),e._uU(18,"Cancel"),e.qZA(),e.TgZ(19,"button",8),e._uU(20,"Apply"),e.qZA()()),2&n&&(e.xp6(3),e.Q6J("formGroup",t.form),e.xp6(2),e.hij("Each affix below will be applied in order to the ",t.items.length>1?t.items.length+" selected items":"selected item"," (at maximum crafting value) using the first available affix slot."),e.xp6(7),e.Q6J("ngForOf",t.RARITY_OPTIONS),e.xp6(2),e.Q6J("ngForOf",t.selectedAffixes),e.xp6(1),e.Q6J("label",t.selectedAffixes.length>0?"Add another affix":"Choose an affix")("control",t.getAffixControl())("options",t.AFFIX_OPTIONS)("noErrorPadding",!0),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("disabled",0===t.selectedAffixes.length||!t.form.valid))},directives:[v.uh,v.xY,u._Y,u.JL,u.sg,b.KE,b.hX,X.gD,u.JJ,u.u,_.sg,$.ey,Ie,v.H8,E.lW,v.ZT],styles:[".stat[_ngcontent-%COMP%]{cursor:pointer;padding-left:4px}@media (max-width: 768px){.stat[_ngcontent-%COMP%]{padding-left:0}}.stat[_ngcontent-%COMP%]:hover{opacity:.6}mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:200px}@media (max-width: 768px){mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:100%}}"]}),a}();function yo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).optimizeReaperEnchantments()}),e._uU(1,"Optimize items for Reaper"),e.qZA()}}function Oo(a,l){if(1&a&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Attribute"),e.qZA()),2&a){e.oxw(2);var n=e.MAs(6);e.Q6J("matMenuTriggerFor",n)}}function Po(a,l){if(1&a&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Skill"),e.qZA()),2&a){e.oxw(2);var n=e.MAs(9);e.Q6J("matMenuTriggerFor",n)}}function ko(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).optimizeItemsAffixes()}),e._uU(1,"Optimise items affixes"),e.qZA()}}function xo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).maximizeItemsLevel()}),e._uU(1,"Maximize items level"),e.qZA()}}function So(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).changeReinforcmentLevel()}),e._uU(1,"Change items reinforcment level"),e.qZA()}}function To(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().editCharacterLevel()}),e._uU(1,"Change hero level"),e.qZA(),e.YNc(2,yo,2,0,"button",9),e.YNc(3,Oo,2,1,"button",10),e.YNc(4,Po,2,1,"button",10),e.YNc(5,ko,2,0,"button",9),e.YNc(6,xo,2,0,"button",9),e.YNc(7,So,2,0,"button",9)}if(2&a){var t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!==t.character&&t.canOptimizeReaperEnchantements(t.character)&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems())}}function Zo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){var r=e.CHM(n).$implicit;return e.oxw().optimizeAttributeEnchantments(r)}),e._UZ(1,"img",13)(2,"div",14),e.qZA()}if(2&a){var t=l.$implicit;e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.attributeName,e.oJD)}}function wo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){var r=e.CHM(n).$implicit;return e.oxw().optimizeSkillEnchantments(r)}),e._UZ(1,"img",15)(2,"div",14),e.qZA()}if(2&a){var t=l.$implicit;e.xp6(1),e.Q6J("src","assets/img/icon/"+t.icon+".png",e.LSH),e.xp6(1),e.Q6J("innerHTML",t.name,e.oJD)}}var Ao=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r,c){var s;return(0,p.Z)(this,t),(s=n.call(this)).buildStorageService=o,s.dialog=i,s.messageService=r,s.slormancerItemService=c,s.character=null,s.menu=null,s}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.character=null===r?null:r.character})}},{key:"openCharacterSettings",value:function(){return null!==this.menu&&this.menu.openMenu(),!1}},{key:"editCharacterLevel",value:function(){var i=this;null!==this.character&&this.dialog.open(fo,{data:{level:this.character.level}}).afterClosed().subscribe(function(r){r&&null!==i.character&&(i.character.level=r,i.buildStorageService.saveLayer())})}},{key:"getGearItems",value:function(){var i=[],r=this.character;return null!==r&&(i=ge.PL.map(function(c){return r.gear[c]}).filter(O.BX)),i}},{key:"hasItems",value:function(){return this.getGearItems().length>0}},{key:"canOptimizeReaperEnchantements",value:function(i){return null!==i.reaper&&i.reaper.smith.id!==Ae.Q.ReapersmithBrotherhood}},{key:"optimizeReaperEnchantments",value:function(){var i=this;if(null!==this.character){var r=this.slormancerItemService.getReaperEnchantment(this.character.reaper.smith.id,5),c="";this.getGearItems().forEach(function(s){s.reaperEnchantment=i.slormancerItemService.getReaperEnchantmentClone(r),i.slormancerItemService.updateEquipableItemModel(s),i.slormancerItemService.updateEquipableItemView(s),c=s.reaperEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+c+'"> '+this.character.reaper.smith.name)}}},{key:"getTraits",value:function(){var i=[],r=this.character;return null!==r&&(i=y.A.map(function(c){return r.attributes.allocated[c]})),i}},{key:"optimizeAttributeEnchantments",value:function(i){var r=this;if(null!==this.character&&null!==this.character.reaper){var c=this.slormancerItemService.getAttributeEnchantment(i.attribute,3),s="";this.getGearItems().forEach(function(m){m.attributeEnchantment=r.slormancerItemService.getAttributeEnchantmentClone(c),r.slormancerItemService.updateEquipableItemModel(m),r.slormancerItemService.updateEquipableItemView(m),s=m.attributeEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+s+'"> '+i.attributeName)}}},{key:"getSkills",value:function(){var i=[],r=this.character;return null!==r&&(i=r.skills.map(function(c){return c.skill})),i}},{key:"optimizeSkillEnchantments",value:function(i){var r=this;if(null!==this.character){var c=this.slormancerItemService.getSkillEnchantment(i.id,2),s="";this.getGearItems().forEach(function(m){m.skillEnchantment=r.slormancerItemService.getSkillEnchantmentClone(c),r.slormancerItemService.updateEquipableItemModel(m),r.slormancerItemService.updateEquipableItemView(m),s=m.skillEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+s+'"> '+i.name)}}},{key:"maximizeItemsLevel",value:function(){var i=this;if(null!==this.character){var r=this.character.level;this.getGearItems().forEach(function(c){c.level=r,i.slormancerItemService.updateEquipableItemModel(c),i.slormancerItemService.updateEquipableItemView(c)}),this.buildStorageService.saveLayer(),this.messageService.message("All equipped items level raised to "+r)}}},{key:"changeReinforcmentLevel",value:function(){var i=this;if(null!==this.character){var r=Math.max.apply(Math,(0,I.Z)(this.getGearItems().map(function(c){return c.reinforcment})));this.dialog.open(ho,{data:{reinforcment:r}}).afterClosed().subscribe(function(c){"number"==typeof c&&(i.getGearItems().forEach(function(s){s.reinforcment=c,i.slormancerItemService.updateEquipableItemModel(s),i.slormancerItemService.updateEquipableItemView(s)}),i.buildStorageService.saveLayer(),i.messageService.message("All equipped items reinforcment raised to "+c))})}}},{key:"optimizeItemsAffixes",value:function(){var i=this;if(null!==this.character){var r={items:this.getGearItems()};this.dialog.open(bo,{data:r}).afterClosed().subscribe(function(c){c&&(i.buildStorageService.saveLayer(),i.messageService.message("All equipped items have been updated"))})}}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(v.uw),e.Y36(oe.e),e.Y36(se.S))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-settings-menu"]],viewQuery:function(n,t){var o;1&n&&e.Gf(Z.p6,7),2&n&&e.iGM(o=e.CRH())&&(t.menu=o.first)},features:[e.qOj],decls:11,vars:4,consts:[[3,"matMenuTriggerFor","contextmenu"],["color","primary","xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["color","primary"],["attributes","matMenu"],["mat-menu-item","","color","primary","class","menu-entry",3,"click",4,"ngFor","ngForOf"],["skills","matMenu"],["mat-menu-item","","color","primary",3,"click"],["mat-menu-item","","color","primary",3,"click",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","","color","primary",1,"menu-entry",3,"click"],[3,"src"],[3,"innerHTML"],[1,"skill-icon",3,"src"]],template:function(n,t){if(1&n&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return t.openCharacterSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,To,8,6,"ng-template",3),e.TgZ(5,"mat-menu",4,5),e.YNc(7,Zo,3,2,"button",6),e.qZA(),e.TgZ(8,"mat-menu",4,7),e.YNc(10,wo,3,2,"button",6),e.qZA()()),2&n){var o=e.MAs(3);e.Q6J("matMenuTriggerFor",o),e.xp6(2),e.Q6J("overlapTrigger",!0),e.xp6(5),e.Q6J("ngForOf",t.getTraits()),e.xp6(3),e.Q6J("ngForOf",t.getSkills())}},directives:[H.Hw,Z.p6,Z.VK,Z.KA,Z.OP,_.O5,_.sg],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}.menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}"]}),a}(),Io=["animation"],Eo=function(){var a=function(){function l(){(0,p.Z)(this,l),this.heroClass=null,this.suffix="",this.flipAnimation=!1,this.animation=null}return(0,g.Z)(l,[{key:"mouseMoved",value:function(t){if(null!==this.animation){var r=this.animation.nativeElement.getBoundingClientRect().left+this.animation.nativeElement.clientWidth/2<t.clientX;this.flipAnimation!==r&&(this.flipAnimation=r)}}},{key:"ngOnInit",value:function(){}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-animation"]],viewQuery:function(n,t){var o;1&n&&e.Gf(Io,5),2&n&&e.iGM(o=e.CRH())&&(t.animation=o.first)},hostBindings:function(n,t){1&n&&e.NdJ("mousemove",function(i){return t.mouseMoved(i)},!1,e.Jf7)},inputs:{heroClass:"heroClass",suffix:"suffix"},decls:6,vars:10,consts:[[1,"character-animation"],["animation",""],[1,"idle-1",3,"src"],[1,"idle-2",3,"src"],[1,"idle-3",3,"src"],[1,"idle-4",3,"src"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0,1),e._UZ(2,"img",2)(3,"img",3)(4,"img",4)(5,"img",5),e.qZA()),2&n&&(e.ekj("flip",t.flipAnimation),e.xp6(2),e.hYB("src","assets/img/character/idle/",t.heroClass,"/0",t.suffix?"_"+t.suffix:t.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",t.heroClass,"/1",t.suffix?"_"+t.suffix:t.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",t.heroClass,"/2",t.suffix?"_"+t.suffix:t.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",t.heroClass,"/3",t.suffix?"_"+t.suffix:t.suffix,".png",e.LSH))},styles:[".character-animation[_ngcontent-%COMP%]{position:relative;height:144px;width:88px}.character-animation.flip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scaleX(-1)}.character-animation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;image-rendering:pixelated;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}.character-animation[_ngcontent-%COMP%]   img.idle-1[_ngcontent-%COMP%]{animation-name:idle-1}.character-animation[_ngcontent-%COMP%]   img.idle-2[_ngcontent-%COMP%]{animation-name:idle-2}.character-animation[_ngcontent-%COMP%]   img.idle-3[_ngcontent-%COMP%]{animation-name:idle-3}.character-animation[_ngcontent-%COMP%]   img.idle-4[_ngcontent-%COMP%]{animation-name:idle-4}@keyframes idle-1{0%{opacity:1}25%{opacity:1}26%{opacity:0}99%{opacity:0}to{opacity:1}}@keyframes idle-2{0%{opacity:0}24%{opacity:0}25%{opacity:1}50%{opacity:1}51%{opacity:0}to{opacity:0}}@keyframes idle-3{0%{opacity:0}49%{opacity:0}50%{opacity:1}75%{opacity:1}76%{opacity:0}to{opacity:0}}@keyframes idle-4{0%{opacity:1}1%{opacity:0}74%{opacity:0}75%{opacity:1}to{opacity:1}}"]}),a}();function Lo(a,l){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"div",3)(3,"div",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e._UZ(10,"img",11),e.qZA()()()(),e.TgZ(11,"div",12)(12,"div",13)(13,"div",14),e._uU(14),e.qZA(),e._UZ(15,"div",15),e.qZA(),e.TgZ(16,"div",16)(17,"div",14),e._uU(18),e.qZA(),e._UZ(19,"div",15),e.qZA()()(),e.TgZ(20,"div",17),e._UZ(21,"img",11),e.qZA()()()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("innerHTML",n.ultimatum.title,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.ultimatum.levelLabel,e.oJD),e.xp6(7),e.MGl("src","assets/img/icon/",n.ultimatum.icon,".png",e.LSH),e.xp6(4),e.Oqu(n.ultimatum.bonusTitle),e.xp6(1),e.Q6J("innerHTML",n.ultimatum.bonusLabel,e.oJD),e.xp6(3),e.Oqu(n.ultimatum.malusTitle),e.xp6(1),e.Q6J("innerHTML",n.ultimatum.malusLabel,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",n.ultimatum.levelIcon,".png",e.LSH)}}var st=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.ultimatum=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-view"]],inputs:{ultimatum:"ultimatum"},decls:1,vars:1,consts:[["class","ultimatum slormancer-tooltip",4,"ngIf"],[1,"ultimatum","slormancer-tooltip"],[1,"head","inner-box"],[1,"title",3,"innerHTML"],[1,"level",3,"innerHTML"],[1,"content","inner-box"],[1,"data"],[1,"visual"],[1,"background"],[1,"inner-background"],[1,"ultimatum"],[3,"src"],[1,"info"],[1,"bonus"],[1,"title"],[3,"innerHTML"],[1,"malus"],[1,"bottom-level"]],template:function(n,t){1&n&&e.YNc(0,Lo,22,8,"div",0),2&n&&e.Q6J("ngIf",null!==t.ultimatum)},directives:[_.O5],styles:[".ultimatum[_ngcontent-%COMP%]{width:350px}.ultimatum[_ngcontent-%COMP%]  .value, .ultimatum[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.ultimatum[_ngcontent-%COMP%]  .range, .ultimatum[_ngcontent-%COMP%]  .range .value, .ultimatum[_ngcontent-%COMP%]  .details, .ultimatum[_ngcontent-%COMP%]  .details .value, .ultimatum[_ngcontent-%COMP%]  .formula, .ultimatum[_ngcontent-%COMP%]  .formula .value{color:#686868}.ultimatum[_ngcontent-%COMP%]  .affixes .range, .ultimatum[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:80%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{width:0;height:0}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);width:72px;height:72px;image-rendering:pixelated}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:105%}"]}),a}();function Jo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-ultimatum-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Ultimatum level"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",6),e._UZ(14,"app-search-select",9),e.qZA()()(),e.TgZ(15,"mat-dialog-actions")(16,"button",10),e._uU(17,"Cancel"),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw().reset()}),e._uU(19,"Reset"),e.qZA(),e.TgZ(20,"button",12),e._uU(21,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ultimatum",t.ultimatum),e.xp6(8),e.hij("Level must be between 1 and ",t.ULTIMATUM_MAX_LEVEL,""),e.xp6(2),e.Q6J("control",t.getTypeControl())("options",t.options)("noErrorPadding",!0)}}var qo=function(){var a=function(){function l(n,t,o,i){(0,p.Z)(this,l),this.dialogRef=n,this.slormancerUltimatumService=t,this.formOptionsService=o,this.ULTIMATUM_MAX_LEVEL=D.cK,this.options=[],this.originalUltimatum=null===i.ultimatum?this.slormancerUltimatumService.getUltimatum(lt.R.AdamantAbundance,1):this.slormancerUltimatumService.getUltimatumClone(i.ultimatum),this.options=this.formOptionsService.getUltimatumOptions(),this.reset()}return(0,g.Z)(l,[{key:"reset",value:function(){this.ultimatum=this.slormancerUltimatumService.getUltimatumClone(this.originalUltimatum),this.form=this.buildForm()}},{key:"submit",value:function(){this.form.valid&&this.dialogRef.close(this.ultimatum)}},{key:"updatePreview",value:function(t){if(t.valid){var o=t.value;this.ultimatum=this.slormancerUltimatumService.getUltimatum(o.type,o.level)}}},{key:"getTypeControl",value:function(){return this.form.get("type")}},{key:"buildForm",value:function(){var t=this,o=new u.cw({level:new u.NI(this.ultimatum.level,[u.kI.required,u.kI.min(1),u.kI.max(D.cK)]),type:new u.NI(this.ultimatum.type,[u.kI.required])});return o.valueChanges.subscribe(function(){t.updatePreview(o)}),this.updatePreview(o),o}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(De.h),e.Y36(te),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"ultimatum"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["label","Ultimatum type",3,"control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,t){1&n&&e.YNc(0,Jo,22,6,"form",0),2&n&&e.Q6J("ngIf",null!==t.form&&null!==t.ultimatum)},directives:[_.O5,u._Y,u.JL,u.sg,v.xY,st,b.KE,b.hX,G.Nt,u.wV,u.Fj,u.JJ,u.u,b.TO,Ie,v.H8,E.lW,v.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1;width:240px}"]}),a}();function Uo(a,l){1&a&&e._UZ(0,"img",8)}function No(a,l){if(1&a&&e._UZ(0,"app-ultimatum-view",10),2&a){var n=e.oxw(3);e.Q6J("ultimatum",n.ultimatum)}}function Fo(a,l){if(1&a&&e.YNc(0,No,1,1,"ng-template",9),2&a){e.oxw(2);var n=e.MAs(1);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",n)}}function Bo(a,l){if(1&a&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.YNc(2,Uo,1,0,"img",6),e.YNc(3,Fo,1,2,null,7),e.qZA()),2&a){var n=e.oxw();e.xp6(1),e.ekj("disabled",n.ultimatum.locked),e.MGl("src","assets/img/icon/",n.ultimatum.icon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",n.ultimatum.locked),e.xp6(1),e.Q6J("ngIf",n.overlay&&n.showOverlay)}}var Ho=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.dialog=n,this.itemMoveService=t,this.ultimatum=null,this.overlay=!0,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1}return(0,g.Z)(l,[{key:"onOver",value:function(){this.showOverlay=!0}},{key:"onLeave",value:function(){this.showOverlay=!1}},{key:"onMouseContextMenu",value:function(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}},{key:"edit",value:function(){var t=this;this.readonly||this.dialog.open(qo,{data:{ultimatum:this.ultimatum}}).afterClosed().subscribe(function(i){i&&t.changed.emit(i)})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.uw),e.Y36(ue))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-ultimatum-slot"]],hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onOver()})("mouseleave",function(){return t.onLeave()})("contextmenu",function(){return t.onMouseContextMenu()})},inputs:{ultimatum:"ultimatum",overlay:"overlay",readonly:"readonly"},outputs:{changed:"changed"},decls:4,vars:3,consts:[["cdkOverlayOrigin","",1,"background",3,"click"],["trigger","cdkOverlayOrigin"],[1,"inner-background"],["class","ultimatum",4,"ngIf"],[1,"ultimatum"],[1,"icon",3,"src"],["class","locked","src","assets/img/icon/locked.png",4,"ngIf"],[4,"ngIf"],["src","assets/img/icon/locked.png",1,"locked"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ultimatum"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(){return!t.readonly&&t.edit()}),e.TgZ(2,"div",2),e.YNc(3,Bo,4,5,"div",3),e.qZA()()),2&n&&(e.ekj("readonly",t.readonly),e.xp6(3),e.Q6J("ngIf",null!==t.ultimatum))},directives:[F.xu,_.O5,F.pI,st],styles:[".background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.background[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{position:relative;width:0;height:0}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);image-rendering:pixelated;position:absolute}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){width:72px;height:72px}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked).disabled{opacity:.5}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px}"]}),a}();function Qo(a,l){if(1&a&&(e.TgZ(0,"div",25),e._uU(1),e.TgZ(2,"mat-icon",26),e._uU(3,"info_outline"),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(1),e.hij(" ",n.character.importVersion," ")}}function Ro(a,l){1&a&&e._UZ(0,"app-character-settings-menu")}function Yo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"app-item-slot",3),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Helm,i)}),e.qZA(),e.TgZ(3,"app-item-slot",4),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Amulet,i)}),e.qZA()(),e.TgZ(4,"div",5)(5,"div",6)(6,"app-item-slot",7),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Shoulder,i)}),e.qZA(),e.TgZ(7,"app-item-slot",8),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Bracer,i)}),e.qZA(),e.TgZ(8,"app-item-slot",9),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Glove,i)}),e.qZA()(),e.TgZ(9,"div",10)(10,"div",11),e.YNc(11,Qo,4,1,"div",12),e.YNc(12,Ro,1,0,"app-character-settings-menu",13),e.qZA(),e._UZ(13,"app-character-animation",14),e.qZA(),e.TgZ(14,"div",15)(15,"app-item-slot",16),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Body,i)}),e.qZA(),e.TgZ(16,"app-item-slot",17),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Cape,i)}),e.qZA(),e.TgZ(17,"app-item-slot",18),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Belt,i)}),e.qZA()()(),e.TgZ(18,"div",19),e._UZ(19,"div",20),e.TgZ(20,"app-item-slot",21),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.LeftRing,i)}),e.qZA(),e.TgZ(21,"app-item-slot",22),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.Boot,i)}),e.qZA(),e.TgZ(22,"app-item-slot",23),e.NdJ("changed",function(i){e.CHM(n);var r=e.oxw();return r.updateItem(r.gearSlot.RightRing,i)}),e.qZA(),e.TgZ(23,"app-ultimatum-slot",24),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateUltimatum(i)}),e.qZA()()()}if(2&a){var t=e.oxw();e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Helm)("item",t.character.gear[t.gearSlot.Helm])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Amulet)("item",t.character.gear[t.gearSlot.Amulet])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Shoulder)("item",t.character.gear[t.gearSlot.Shoulder])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Bracer)("item",t.character.gear[t.gearSlot.Bracer])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Glove)("item",t.character.gear[t.gearSlot.Glove])("character",t.character),e.xp6(3),e.Q6J("ngIf",null!==t.character.importVersion&&t.character.version!==t.character.importVersion),e.xp6(1),e.Q6J("ngIf",!t.readonly),e.xp6(1),e.Q6J("heroClass",t.character.heroClass),e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Body)("item",t.character.gear[t.gearSlot.Body])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Cape)("item",t.character.gear[t.gearSlot.Cape])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Belt)("item",t.character.gear[t.gearSlot.Belt])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.LeftRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Boot)("item",t.character.gear[t.gearSlot.Boot])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.RightRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("ultimatum",t.character.ultimatum)}}var ut=function(){var a=function(){function l(){(0,p.Z)(this,l),this.gearSlot=ge.SH,this.bases=T.J,this.character=null,this.readonly=!1,this.changed=new e.vpe}return(0,g.Z)(l,[{key:"updateItem",value:function(t,o){null!==this.character&&(this.character.gear[t]=o,this.changed.emit(this.character))}},{key:"updateUltimatum",value:function(t){null!==this.character&&(this.character.ultimatum=t,this.changed.emit(this.character))}}]),l}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-character-equipment"]],inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["class","equipment",4,"ngIf"],[1,"equipment"],[1,"top-equipment"],[1,"helm",3,"readonly","base","item","character","changed"],[1,"amulet",3,"readonly","base","item","character","changed"],[1,"center-equipment"],[1,"left-equipment"],[1,"shoulder",3,"readonly","base","item","character","changed"],[1,"bracer",3,"readonly","base","item","character","changed"],[1,"glove",3,"readonly","base","item","character","changed"],[1,"character-preview"],[1,"preview-header"],["class","original-version",4,"ngIf"],[4,"ngIf"],[3,"heroClass"],[1,"right-equipment"],[1,"body",3,"readonly","base","item","character","changed"],[1,"cape",3,"readonly","base","item","character","changed"],[1,"belt",3,"readonly","base","item","character","changed"],[1,"bottom-equipment"],[1,"empty"],[1,"ring_l",3,"readonly","base","item","character","changed"],[1,"boot",3,"readonly","base","item","character","changed"],[1,"ring_r",3,"readonly","base","item","character","changed"],[3,"readonly","ultimatum","changed"],[1,"original-version"],["matTooltip","This build has been made for an older version of the game"]],template:function(n,t){1&n&&e.YNc(0,Yo,24,49,"div",0),2&n&&e.Q6J("ngIf",null!==t.character)},directives:[_.O5,ct,H.Hw,z.gM,Ao,Eo,Ho],styles:[".equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;min-height:380px}.equipment[_ngcontent-%COMP%]   .top-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:20px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .left-equipment[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .right-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]{width:150px;height:200px;border:3px solid #3c3c3c;padding:8px;background-color:#000;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;justify-content:space-between;width:100%}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;gap:4px;color:#ce4607}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   app-character-settings-menu[_ngcontent-%COMP%]{margin-left:auto}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:16px;flex-grow:1;overflow:hidden}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_l[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_r[_ngcontent-%COMP%]{margin-bottom:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .boot[_ngcontent-%COMP%]{margin-top:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{width:56px}"]}),a}();function Vo(a,l){if(1&a&&(e.TgZ(0,"div",26)(1,"div",27)(2,"div",28),e._UZ(3,"div"),e.qZA(),e._uU(4),e.TgZ(5,"div",28),e._UZ(6,"div"),e.qZA()(),e._UZ(7,"div",20),e.qZA()),2&a){var n=e.oxw(2);e.xp6(4),e.Oqu(n.reaper.benedictionTitleLabel),e.xp6(3),e.Q6J("innerHTML",n.reaper.benediction,e.oJD)}}function Do(a,l){if(1&a&&(e.TgZ(0,"div",29)(1,"div",27)(2,"div",28),e._UZ(3,"div"),e.qZA(),e._uU(4),e.TgZ(5,"div",28),e._UZ(6,"div"),e.qZA()(),e._UZ(7,"div",20),e.qZA()),2&a){var n=e.oxw(2);e.xp6(4),e.Oqu(n.reaper.maledictionTitleLabel),e.xp6(3),e.Q6J("innerHTML",n.reaper.malediction,e.oJD)}}function jo(a,l){1&a&&e._UZ(0,"app-activable-view",32),2&a&&e.Q6J("activable",l.$implicit)}function Go(a,l){if(1&a&&(e.TgZ(0,"div",30)(1,"div",27)(2,"div",28),e._UZ(3,"div"),e.qZA(),e._uU(4),e.TgZ(5,"div",28),e._UZ(6,"div"),e.qZA()(),e.YNc(7,jo,1,1,"app-activable-view",31),e.qZA()),2&a){var n=e.oxw(2);e.xp6(4),e.Oqu(n.reaper.activablesTitleLabel),e.xp6(3),e.Q6J("ngForOf",n.reaper.activables)}}function Xo(a,l){if(1&a&&(e.TgZ(0,"div",1)(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.TgZ(7,"div",7),e._UZ(8,"div",8),e.qZA()(),e.TgZ(9,"div",9)(10,"div",10)(11,"div",11),e._uU(12),e.qZA(),e._UZ(13,"div",12),e.qZA(),e.TgZ(14,"div",13)(15,"div",14),e._uU(16),e.qZA(),e._UZ(17,"div",15),e.TgZ(18,"div",16),e._uU(19),e.qZA()(),e.TgZ(20,"div",17),e._UZ(21,"div",18)(22,"div",19),e.qZA()()(),e._UZ(23,"div",20),e.YNc(24,Vo,8,2,"div",21),e.YNc(25,Do,8,2,"div",22),e.YNc(26,Go,8,2,"div",23),e._UZ(27,"div",24)(28,"div",25),e.qZA()()),2&a){var n=e.oxw();e.xp6(2),e.Oqu(n.reaper.name),e.xp6(4),e.ekj("primordial-effect",n.reaper.primordial),e.Q6J("src",n.reaper.icon,e.LSH),e.xp6(6),e.Oqu(n.reaper.type),e.xp6(1),e.Q6J("innerHTML",n.reaper.smithLabel,e.oJD),e.xp6(3),e.AsE("",n.reaper.damages.min,"-",n.reaper.damages.max,""),e.xp6(1),e.Q6J("innerHTML",n.reaper.damageTypeLabel,e.oJD),e.xp6(2),e.lnq("",n.reaper.maxDamagesWithBonuses.min,"-",n.reaper.maxDamagesWithBonuses.max," at level ",n.reaper.maxLevelWithBonuses,""),e.xp6(2),e.Q6J("innerHTML",n.reaper.victimsLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.reaper.levelLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",n.reaper.description,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==n.reaper.benediction),e.xp6(1),e.Q6J("ngIf",null!==n.reaper.malediction),e.xp6(1),e.Q6J("ngIf",n.reaper.activables.length>0),e.xp6(2),e.Q6J("innerHTML",n.reaper.lore,e.oJD)}}var mt=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.reaper=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-view"]],inputs:{reaper:"reaper"},decls:1,vars:1,consts:[["class","reaper",4,"ngIf"],[1,"reaper"],[1,"head"],[1,"content"],[1,"info"],[1,"icon"],[3,"src"],[1,"background-outer"],[1,"background"],[1,"summary"],[1,"base"],[1,"type"],[1,"builder",3,"innerHTML"],[1,"damages"],[1,"current-damage"],[1,"type",3,"innerHTML"],[1,"max-damage"],[1,"stats"],[1,"victim",3,"innerHTML"],[1,"level",3,"innerHTML"],[1,"description",3,"innerHTML"],["class","benediction",4,"ngIf"],["class","malediction",4,"ngIf"],["class","activables",4,"ngIf"],[1,"separator"],[1,"lore",3,"innerHTML"],[1,"benediction"],[1,"title"],[1,"bullet"],[1,"malediction"],[1,"activables"],[3,"activable",4,"ngFor","ngForOf"],[3,"activable"]],template:function(n,t){1&n&&e.YNc(0,Xo,29,19,"div",0),2&n&&e.Q6J("ngIf",null!==t.reaper)},directives:[_.O5,_.sg,Be],styles:[".reaper[_ngcontent-%COMP%]{background-color:#090909;color:#fff;border:2px solid black;width:350px}.reaper[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid #79b7a4}.reaper[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{width:130px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:stretch}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .background-outer[_ngcontent-%COMP%]{border:3px solid #3b3831;flex-grow:1;display:flex;flex-direction:column}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   .background-outer[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid #12100e;background-color:#22201c;flex-grow:1;height:150px;width:85px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;flex-grow:1;text-align:left;gap:10px;font-size:16px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{text-transform:uppercase}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .current-damage[_ngcontent-%COMP%]{font-size:30px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:20px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]     .bonus-level{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   .max-damage[_ngcontent-%COMP%]{color:#686868}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]     .value{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]     .details{color:#686868}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#fff}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]{color:#148f8a}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#61f7b7}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]{color:#ff4722}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{background-color:#d13001}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .malediction[_ngcontent-%COMP%]     .value, .reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .benediction[_ngcontent-%COMP%]     .value{color:#fff}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:5px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#3b3831;margin:0 30px;height:4px}.reaper[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .lore[_ngcontent-%COMP%]{color:#b8b8b8;text-align:center}"]}),a}();function zo(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){return e.CHM(n),e.oxw().submit()}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-reaper-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Reaper level (base)"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()(),e.TgZ(13,"mat-form-field",7)(14,"mat-label"),e._uU(15,"Reaper kills (base)"),e.qZA(),e._UZ(16,"input",9),e.TgZ(17,"mat-error"),e._uU(18,"Kills must be >= 0"),e.qZA()()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label"),e._uU(22,"Raper level (primordial)"),e.qZA(),e._UZ(23,"input",10),e.TgZ(24,"mat-error"),e._uU(25),e.qZA()(),e.TgZ(26,"mat-form-field",7)(27,"mat-label"),e._uU(28,"Reaper kills (primordial)"),e.qZA(),e._UZ(29,"input",11),e.TgZ(30,"mat-error"),e._uU(31,"Kills must be >= 0"),e.qZA()()(),e.TgZ(32,"div",6),e._UZ(33,"app-search-select",12),e.TgZ(34,"mat-checkbox",13),e._uU(35,"Primordial"),e.qZA()()()(),e.TgZ(36,"mat-dialog-actions")(37,"button",14),e._uU(38,"Cancel"),e.qZA(),e.TgZ(39,"button",15),e.NdJ("click",function(){return e.CHM(n),e.oxw().reset()}),e._uU(40,"Reset"),e.qZA(),e.TgZ(41,"button",16),e._uU(42,"Apply"),e.qZA()()()}if(2&a){var t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("reaper",t.reaper),e.xp6(8),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(13),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(8),e.Q6J("control",t.getReaperControl())("options",t.options)("noErrorPadding",!0)}}var $o=function(){var a=function(){function l(n,t,o,i,r,c){(0,p.Z)(this,l),this.dialogRef=n,this.slormancerReaperService=t,this.slormancerCharacterUpdaterService=o,this.formOptionsService=i,this.buildStorageService=r,this.options=[],this.originalReaper=this.slormancerReaperService.getReaperClone(c.reaper),this.character=c.character,this.reaper=c.reaper,this.reset()}return(0,g.Z)(l,[{key:"reset",value:function(){this.reaper=Object.assign(this.reaper,this.originalReaper),this.form=this.buildForm()}},{key:"submit",value:function(){this.form.valid&&this.dialogRef.close(this.reaper)}},{key:"getReaperControl",value:function(){return this.form.get("reaper")}},{key:"updatePreview",value:function(t){if(t.valid){var o=t.value;if(o.reaper===this.reaper.id)this.reaper.id=o.reaper,this.reaper.primordial=o.primordial,this.reaper.baseInfo.level=o.baseLevel,this.reaper.primordialInfo.level=o.primordialLevel,this.reaper.baseInfo.kills=o.baseKills,this.reaper.primordialInfo.kills=o.primordialKills;else{var i=this.slormancerReaperService.getReaperById(o.reaper,this.reaper.weaponClass,o.primordial,o.baseLevel,o.primordialLevel,o.baseKills,o.primordialKills,this.reaper.bonusLevel);null!==i&&Object.assign(this.reaper,i)}var r=this.buildStorageService.getBuild();this.slormancerReaperService.updateReaperModel(this.reaper),this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==r?r.configuration:ee,!1),this.slormancerReaperService.updateReaperView(this.reaper),this.options=this.formOptionsService.getReaperOptions(this.reaper.weaponClass,this.reaper.primordial),o.baseLevel!==this.reaper.baseInfo.level&&t.patchValue({baseLevel:this.reaper.baseInfo.level},{emitEvent:!1}),o.primordialLevel!==this.reaper.primordialInfo.level&&t.patchValue({primordialLevel:this.reaper.primordialInfo.level},{emitEvent:!1})}}},{key:"getReaperMaxLevelValidator",value:function(){var t=this;return function(o){return u.kI.max(t.reaper.maxLevel)(o)}}},{key:"buildForm",value:function(){var t=this,o=new u.cw({baseLevel:new u.NI(this.reaper.baseInfo.level,[u.kI.required,u.kI.min(1),this.getReaperMaxLevelValidator()]),baseKills:new u.NI(this.reaper.baseInfo.kills,[u.kI.required,u.kI.min(0)]),primordialLevel:new u.NI(this.reaper.primordialInfo.level,[u.kI.required,u.kI.min(1),this.getReaperMaxLevelValidator()]),primordialKills:new u.NI(this.reaper.primordialInfo.kills,[u.kI.required,u.kI.min(0)]),primordial:new u.NI(this.reaper.primordial,u.kI.required),reaper:new u.NI(this.reaper.id,u.kI.required)});return o.valueChanges.subscribe(function(){t.updatePreview(o)}),this.updatePreview(o),o}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.so),e.Y36(Je.I),e.Y36(fe.P),e.Y36(te),e.Y36(A),e.Y36(v.WI))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"reaper"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","baseLevel"],["matInput","","type","number","step","1","formControlName","baseKills"],["matInput","","type","number","step","1","formControlName","primordialLevel"],["matInput","","type","number","step","1","formControlName","primordialKills"],["label","Reaper base",3,"control","options","noErrorPadding"],["color","primary","formControlName","primordial"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(n,t){1&n&&e.YNc(0,zo,43,7,"form",0),2&n&&e.Q6J("ngIf",null!==t.form&&null!==t.reaper)},directives:[_.O5,u._Y,u.JL,u.sg,v.xY,mt,b.KE,b.hX,G.Nt,u.wV,u.Fj,u.JJ,u.u,b.TO,Ie,we.oG,v.H8,E.lW,v.ZT],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding:8px 0}"]}),a}();function Wo(a,l){if(1&a&&e._UZ(0,"app-reaper-view",12),2&a){var n=e.oxw(2);e.Q6J("reaper",n.character.reaper)}}function Ko(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).edit()}),e.TgZ(1,"mat-icon"),e._uU(2,"add_circle_outline"),e.qZA(),e._uU(3,"Add reaper"),e.qZA()}}function er(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",14),e.NdJ("click",function(){return e.CHM(n),e.oxw(3).edit()}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3,"Edit reaper"),e.qZA()}}function tr(a,l){if(1&a&&(e.YNc(0,Ko,4,0,"button",13),e.YNc(1,er,4,0,"button",13)),2&a){var n=e.oxw(2);e.Q6J("ngIf",null===n.character.reaper),e.xp6(1),e.Q6J("ngIf",null!==n.character.reaper)}}function nr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",2),e.NdJ("click",function(){return e.CHM(n),e.oxw().edit()}),e._UZ(1,"div",3,4)(3,"div",5),e.ynx(4),e._UZ(5,"img",6),e.YNc(6,Wo,1,1,"ng-template",7),e.BQk(),e._UZ(7,"div",8),e.TgZ(8,"mat-menu",9,10),e.YNc(10,tr,2,2,"ng-template",11),e.qZA()()}if(2&a){var t=e.MAs(2),o=e.MAs(9),i=e.oxw();e.ekj("readonly",i.readonly),e.xp6(5),e.ekj("primordial-effect",i.character.reaper.primordial),e.Q6J("src",i.character.reaper.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",i.showOverlay)("cdkConnectedOverlayOrigin",t),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(1),e.Q6J("overlapTrigger",!0)}}function ar(a,l){if(1&a&&e._UZ(0,"div",15),2&a){var n=e.oxw();e.Q6J("innerHTML",n.character.reaper.levelLabel,e.oJD)}}var dt=function(){var a=function(){function l(n,t,o){(0,p.Z)(this,l),this.dialog=n,this.slormancerCharacterBuilderService=t,this.itemMoveService=o,this.character=null,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1}return(0,g.Z)(l,[{key:"onOver",value:function(){this.showOverlay=!0}},{key:"onLeave",value:function(){this.showOverlay=!1}},{key:"onMouseContextMenu",value:function(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}},{key:"ngOnInit",value:function(){}},{key:"edit",value:function(){var t=this;if(null!==this.character&&!this.readonly){var o=this.slormancerCharacterBuilderService.getCharacterClone(this.character);this.dialog.open($o,{data:{reaper:o.reaper,character:o}}).afterClosed().subscribe(function(r){r&&t.changed.emit(r)})}}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(v.uw),e.Y36(ie.o),e.Y36(ue))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-reaper-slot"]],hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onOver()})("mouseleave",function(){return t.onLeave()})("contextmenu",function(){return t.onMouseContextMenu()})},inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:2,vars:2,consts:[["class","reaper",3,"readonly","click",4,"ngIf"],["class","reaper-level",3,"innerHTML",4,"ngIf"],[1,"reaper",3,"click"],["cdkOverlayOrigin","",1,"overlay-position"],["trigger","cdkOverlayOrigin"],[1,"inner-slot"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"matMenuTriggerFor"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],[3,"reaper"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"reaper-level",3,"innerHTML"]],template:function(n,t){1&n&&(e.YNc(0,nr,11,9,"div",0),e.YNc(1,ar,1,1,"div",1)),2&n&&(e.Q6J("ngIf",null!==t.character),e.xp6(1),e.Q6J("ngIf",null!==t.character))},directives:[_.O5,F.xu,F.pI,mt,Z.p6,Z.VK,Z.KA,Z.OP,H.Hw],styles:[".reaper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:124px;min-height:124px;position:relative}.reaper[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.reaper[_ngcontent-%COMP%]   .overlay-position[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.reaper[_ngcontent-%COMP%]   .inner-slot[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#1e1e1e;border:3px solid #3c3c3c}.reaper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper-level[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase}app-reaper-view[_ngcontent-%COMP%]{width:350px}"]}),a}(),le=h(7255);function ir(a,l){if(1&a&&e._UZ(0,"div",15),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.skill.genresLabel,e.oJD)}}function or(a,l){if(1&a&&(e.TgZ(0,"mat-icon",19),e._uU(1,"info_outline"),e.qZA()),2&a){var n=e.oxw(3);e.Q6J("matTooltip",n.skill.cooldownDetailsLabel)}}function rr(a,l){if(1&a&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.YNc(2,or,2,1,"mat-icon",18),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",n.skill.cooldownLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==n.skill.cooldownDetailsLabel)}}function lr(a,l){if(1&a&&e._UZ(0,"div",20),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.skill.costLabel,e.oJD)}}function cr(a,l){if(1&a&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.hij(" + ",n.skill.bonusLevel,"")}}function sr(a,l){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,ir,1,1,"div",8),e.YNc(9,rr,3,2,"div",9),e.YNc(10,lr,1,1,"div",10),e.qZA()(),e._UZ(11,"div",11)(12,"div",12),e.TgZ(13,"div",13),e._UZ(14,"img",6),e.YNc(15,cr,2,1,"span",14),e.qZA()()()),2&a){var n=e.oxw();e.Gre("skill slormancer-tooltip ",n.skill.damageTypes.length>0?n.skill.damageTypes[0]:"",""),e.xp6(1),e.Q6J("innerHTML",n.skill.nameLabel,e.oJD),e.xp6(5),e.Q6J("src","assets/img/icon/"+n.skill.icon+".png",e.LSH),e.xp6(2),e.Q6J("ngIf",null!==n.skill.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==n.skill.cooldownLabel),e.xp6(1),e.Q6J("ngIf",null!==n.skill.costLabel),e.xp6(2),e.Q6J("innerHTML",n.skill.description,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",n.skill.levelIcon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",n.skill.bonusLevel>0)}}var gt=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l),this.skill=null});return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-view"]],inputs:{skill:"skill"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box",3,"innerHTML"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[3,"src"],[1,"data"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[1,"bottom-level"],["class","bonus",4,"ngIf"],[1,"genre",3,"innerHTML"],[1,"cooldown"],[3,"innerHTML"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"cost",3,"innerHTML"],[1,"bonus"]],template:function(n,t){1&n&&e.YNc(0,sr,16,11,"div",0),2&n&&e.Q6J("ngIf",null!==t.skill)},directives:[_.O5,H.Hw,z.gM],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid #be871f;min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;text-transform:uppercase;height:100%;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px;display:inline}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}"]}),a}();function ur(a,l){if(1&a&&e._UZ(0,"app-skill-view",9),2&a){var n=e.oxw(2);e.Q6J("skill",n.skill)}}function mr(a,l){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,ur,1,1,"ng-template",8),e.BQk()),2&a){var n=e.oxw(),t=e.MAs(1);e.xp6(1),e.Q6J("src","assets/img/icon/"+(n.support?n.skill.iconLarge:n.skill.icon)+".png",e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function dr(a,l){if(1&a&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&a){var n=e.oxw().$implicit;e.xp6(1),e.Oqu(n.specializationName)}}function gr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(2).updateSkill(c)}),e.TgZ(1,"div",12),e._UZ(2,"img",13),e.TgZ(3,"div",14)(4,"div",15),e._uU(5),e.qZA(),e.YNc(6,dr,2,1,"div",16),e.TgZ(7,"div",17),e._uU(8),e.qZA()()()()}if(2&a){var t=l.$implicit,o=e.oxw(2);e.xp6(1),e.ekj("selected",o.isSelectedSkill(t)),e.xp6(1),e.ekj("support",o.support),e.Q6J("src","assets/img/icon/"+(o.support?t.iconLarge:t.icon)+".png",e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",null!==t.specializationName),e.xp6(2),e.lnq("",o.MASTERY_LABEL,": ",t.level," / ",o.SKILL_MAX_MASTERY,"")}}function pr(a,l){if(1&a&&e.YNc(0,gr,9,10,"button",10),2&a){var n=e.oxw();e.Q6J("ngForOf",n.getAvailableSkills())}}var pt=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i){var r;return(0,p.Z)(this,t),(r=n.call(this)).buildStorageService=o,r.slormancerTranslateService=i,r.SKILL_MAX_MASTERY=D.DA,r.MASTERY_LABEL=r.slormancerTranslateService.translate("tt_mastery"),r.skill=null,r.support=!1,r.readonly=!1,r.changed=new e.vpe,r.menu=null,r.showOverlay=!1,r}return(0,g.Z)(t,[{key:"onOver",value:function(){this.showOverlay=!0}},{key:"onLeave",value:function(){this.showOverlay=!1}},{key:"ngOnInit",value:function(){}},{key:"getAvailableSkills",value:function(){var i=this.buildStorageService.getLayer(),r=[];if(null!==i&&null!==i.character){var c=this.support?le.W.Support:le.W.Active;r=i.character.skills.map(function(s){return s.skill}).filter(function(s){return c===s.type})}return r}},{key:"isSelectedSkill",value:function(i){var r=this.buildStorageService.getLayer();return null!==r&&null!==r.character&&(r.character.primarySkill===i||r.character.secondarySkill===i||r.character.supportSkill===i)}},{key:"updateSkill",value:function(i){this.skill!==i&&this.changed.emit(i)}},{key:"openMenu",value:function(){return null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(re.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-slot"]],viewQuery:function(n,t){var o;1&n&&e.Gf(Z.p6,7),2&n&&e.iGM(o=e.CRH())&&(t.menu=o.first)},hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onOver()})("mouseleave",function(){return t.onLeave()})},inputs:{skill:"skill",support:"support",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:6,consts:[["cdkOverlayOrigin","",1,"skill",3,"contextmenu","click"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above",1,"skill-menu"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"skill"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill",3,"src"],[1,"description"],[1,"name"],["class","specialization",4,"ngIf"],[1,"mastery"],[1,"specialization"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0,1),e.NdJ("contextmenu",function(){return t.openMenu()})("click",function(){return t.openMenu()}),e.YNc(2,mr,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,pr,1,1,"ng-template",6),e.qZA()()),2&n){var o=e.MAs(5);e.ekj("support",t.support)("readonly",t.readonly),e.xp6(2),e.Q6J("ngIf",null!==t.skill),e.xp6(1),e.Q6J("matMenuTriggerFor",o)}},directives:[F.xu,_.O5,F.pI,gt,Z.p6,Z.VK,Z.KA,_.sg,Z.OP],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){position:absolute;width:100%;height:100%}.skill[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:uppercase}.skill[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:-8px;left:0}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .mastery[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry.selected[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a}();function _r(a,l){if(1&a&&e._UZ(0,"app-ancestral-legacy-view",11),2&a){var n=e.oxw(3);e.Q6J("ancestralLegacy",n.activable)("hideNextRank",!0)}}function fr(a,l){if(1&a&&e._UZ(0,"app-activable-view",12),2&a){var n=e.oxw(3);e.Q6J("activable",n.activable)}}function vr(a,l){if(1&a&&(e.YNc(0,_r,1,2,"app-ancestral-legacy-view",9),e.YNc(1,fr,1,1,"app-activable-view",10)),2&a){var n=e.oxw(2);e.Q6J("ngIf",n.isAncestralLegacy(n.activable)),e.xp6(1),e.Q6J("ngIf",n.isActivable(n.activable))}}function hr(a,l){if(1&a&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,vr,2,2,"ng-template",8),e.BQk()),2&a){var n=e.oxw(),t=e.MAs(1);e.xp6(1),e.Q6J("src",n.activable.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function Cr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(2).updateActivable(c)}),e.TgZ(1,"div",14),e._UZ(2,"img",19),e.TgZ(3,"div",16)(4,"div",20),e._uU(5),e.qZA()()()()}if(2&a){var t=l.$implicit,o=e.oxw(2);e.xp6(1),e.ekj("selected",o.isSelectedActivable(t)),e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(3),e.Oqu(t.name)}}function Mr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){return e.CHM(n),e.oxw().updateActivable(null)}),e.TgZ(1,"div",14),e._UZ(2,"div",15),e.TgZ(3,"div",16)(4,"div",17),e._uU(5,"Remove activable"),e.qZA()()()(),e.YNc(6,Cr,6,4,"button",18)}if(2&a){var t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.getAvailableActivables())}}var _t=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i){var r;return(0,p.Z)(this,t),(r=n.call(this)).buildStorageService=o,r.itemMoveService=i,r.activable=null,r.readonly=!1,r.changed=new e.vpe,r.menu=null,r.showOverlay=!1,r}return(0,g.Z)(t,[{key:"onOver",value:function(){this.showOverlay=!0}},{key:"onLeave",value:function(){this.showOverlay=!1}},{key:"onMouseContextMenu",value:function(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}},{key:"onMouseClick",value:function(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}},{key:"ngOnInit",value:function(){}},{key:"isAncestralLegacy",value:function(i){return void 0!==i.element}},{key:"isActivable",value:function(i){return void 0===i.element}},{key:"getAvailableActivables",value:function(){var i=[],r=this.buildStorageService.getLayer();if(null!==r){var c=[r.character.gear.amulet,r.character.gear.belt,r.character.gear.body,r.character.gear.boot,r.character.gear.bracer,r.character.gear.cape,r.character.gear.glove,r.character.gear.helm,r.character.gear.ring_l,r.character.gear.ring_r,r.character.gear.shoulder].map(function(d){return null!==d&&null!==d.legendaryEffect?d.legendaryEffect.activable:null}).filter(O.BX).sort(function(d,f){return-(0,O.qu)(d.level,f.level)}).filter(function(d,f,C){return(0,O.mr)(d,f,C,function(k,x){return k.id===x.id})}),s=null===r.character.reaper?[]:r.character.reaper.activables,m=r.character.ancestralLegacies.activeAncestralLegacies.map(function(d){return r.character.ancestralLegacies.ancestralLegacies[d]}).filter(O.BX).filter(function(d){return d.isActivable});i=[].concat((0,I.Z)(c),(0,I.Z)(s),(0,I.Z)(m))}return i}},{key:"isSelectedActivable",value:function(i){var r=this.buildStorageService.getLayer();return null!==r&&(r.character.activable1===i||r.character.activable2===i||r.character.activable3===i||r.character.activable4===i)}},{key:"updateActivable",value:function(i){this.activable!==i&&this.changed.emit(i)}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(ue))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-activable-slot"]],viewQuery:function(n,t){var o;1&n&&e.Gf(Z.p6,7),2&n&&e.iGM(o=e.CRH())&&(t.menu=o.first)},hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onOver()})("mouseleave",function(){return t.onLeave()})("contextmenu",function(){return t.onMouseContextMenu()})("click",function(){return t.onMouseClick()})},inputs:{activable:"activable",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:2,consts:[["cdkOverlayOrigin","",1,"skill"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy","hideNextRank",4,"ngIf"],[3,"activable",4,"ngIf"],[3,"ancestralLegacy","hideNextRank"],[3,"activable"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill"],[1,"description"],[1,"subtitle"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"skill",3,"src"],[1,"name"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0,1),e.YNc(2,hr,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,Mr,7,1,"ng-template",6),e.qZA()()),2&n){var o=e.MAs(5);e.xp6(2),e.Q6J("ngIf",null!==t.activable),e.xp6(1),e.Q6J("matMenuTriggerFor",o)}},directives:[F.xu,_.O5,F.pI,Ue,Be,Z.p6,Z.VK,Z.KA,Z.OP,_.sg],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;display:block;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371;line-height:0}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),a}();function br(a,l){1&a&&e._UZ(0,"img",8)}function yr(a,l){1&a&&e._UZ(0,"img",8)}function Or(a,l){1&a&&e._UZ(0,"img",8)}function Pr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-skill-slot",4),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updatePrimarySkill(i)}),e.qZA()(),e.YNc(4,br,1,0,"img",5),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"app-skill-slot",4),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateSecondarySkill(i)}),e.qZA()(),e.YNc(8,yr,1,0,"img",5),e.qZA(),e.TgZ(9,"div",2)(10,"div",3)(11,"app-skill-slot",6),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateSupportSkill(i)}),e.qZA()(),e.YNc(12,Or,1,0,"img",5),e.qZA(),e.TgZ(13,"div",2)(14,"div",3)(15,"app-activable-slot",7),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateActivable1(i)}),e.qZA()()(),e.TgZ(16,"div",2)(17,"div",3)(18,"app-activable-slot",7),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateActivable2(i)}),e.qZA()()(),e.TgZ(19,"div",2)(20,"div",3)(21,"app-activable-slot",7),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateActivable3(i)}),e.qZA()()(),e.TgZ(22,"div",2)(23,"div",3)(24,"app-activable-slot",7),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateActivable4(i)}),e.qZA()()()()}if(2&a){var t=e.oxw();e.xp6(3),e.Q6J("skill",t.character.primarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.primarySkill&&t.character.primarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.secondarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.secondarySkill&&t.character.secondarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.supportSkill)("support",!0),e.xp6(1),e.Q6J("ngIf",null!==t.character.supportSkill&&t.character.supportSkill.locked),e.xp6(3),e.Q6J("activable",t.character.activable1),e.xp6(3),e.Q6J("activable",t.character.activable2),e.xp6(3),e.Q6J("activable",t.character.activable3),e.xp6(3),e.Q6J("activable",t.character.activable4)}}var kr=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i){var r;return(0,p.Z)(this,t),(r=n.call(this)).buildStorageService=o,r.slormancerCharacterModifierService=i,r.character=null,r}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.character=null!==r&&null!==r.character?r.character:null})}},{key:"updatePrimarySkill",value:function(i){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,i),this.buildStorageService.saveLayer())}},{key:"updateSecondarySkill",value:function(i){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,i),this.buildStorageService.saveLayer())}},{key:"updateSupportSkill",value:function(i){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,i),this.buildStorageService.saveLayer())}},{key:"updateActivable1",value:function(i){null!==this.character&&this.character.activable1!==i&&(null!==i&&(this.character.activable2===i?this.character.activable2=this.character.activable1:this.character.activable3===i?this.character.activable3=this.character.activable1:this.character.activable4===i&&(this.character.activable4=this.character.activable1)),this.character.activable1=i,this.buildStorageService.saveLayer())}},{key:"updateActivable2",value:function(i){null!==this.character&&this.character.activable2!==i&&(null!==i&&(this.character.activable1===i?this.character.activable1=this.character.activable2:this.character.activable3===i?this.character.activable3=this.character.activable2:this.character.activable4===i&&(this.character.activable4=this.character.activable2)),this.character.activable2=i,this.buildStorageService.saveLayer())}},{key:"updateActivable3",value:function(i){null!==this.character&&this.character.activable3!==i&&(null!==i&&(this.character.activable1===i?this.character.activable1=this.character.activable3:this.character.activable2===i?this.character.activable2=this.character.activable3:this.character.activable4===i&&(this.character.activable4=this.character.activable3)),this.character.activable3=i,this.buildStorageService.saveLayer())}},{key:"updateActivable4",value:function(i){null!==this.character&&this.character.activable4!==i&&(null!==i&&(this.character.activable1===i?this.character.activable1=this.character.activable4:this.character.activable3===i?this.character.activable3=this.character.activable4:this.character.activable2===i&&(this.character.activable2=this.character.activable4)),this.character.activable4=i,this.buildStorageService.saveLayer())}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(Ze.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-bar"]],features:[e.qOj],decls:1,vars:1,consts:[["class","skill-bar",4,"ngIf"],[1,"skill-bar"],[1,"skill-slot"],[1,"skill-slot-border"],[3,"skill","changed"],["class","locked","src","assets/img/icon//locked.png",4,"ngIf"],[3,"skill","support","changed"],[3,"activable","changed"],["src","assets/img/icon//locked.png",1,"locked"]],template:function(n,t){1&n&&e.YNc(0,Pr,25,11,"div",0),2&n&&e.Q6J("ngIf",null!==t.character)},directives:[_.O5,pt,_t],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;border:3px solid #3c3c3c;padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]{position:relative}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid #3c3c3c}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;pointer-events:none}"]}),a}();function xr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(n);var i=e.oxw(2);return i.dragInItemsGroup(i.character.inventory)})("mouseleave",function(){return e.CHM(n),e.oxw(2).dragOutItemsGroup()})("mouseup",function(){e.CHM(n);var i=e.oxw(2);return i.dragDrop(i.character.inventory)}),e._uU(1,"Bag"),e.qZA()}if(2&a){var t=e.oxw(2);e.ekj("drag-on",t.isDragging&&t.itemGroupBeingDraggedOn===t.character.inventory)("drag-possible",t.itemGroupDragDropPossible)("drag-impossible",!t.itemGroupDragDropPossible)}}function Sr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(r){var s=e.CHM(n).index;return e.oxw(2).updateIventoryItem(s,r)}),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw(2);e.Q6J("item",t)("character",o.character)}}function Tr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(n);var s=e.oxw().$implicit;return e.oxw(2).dragInItemsGroup(s)})("mouseleave",function(){return e.CHM(n),e.oxw(3).dragOutItemsGroup()})("mouseup",function(){e.CHM(n);var s=e.oxw().$implicit;return e.oxw(2).dragDrop(s)}),e._uU(1),e.qZA()}if(2&a){var t=e.oxw(),o=t.$implicit,i=t.index,r=e.oxw(2);e.ekj("drag-on",r.isDragging&&r.itemGroupBeingDraggedOn===o)("drag-possible",r.itemGroupDragDropPossible)("drag-impossible",!r.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",i+1,"")}}function Zr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(r){var s=e.CHM(n).index,m=e.oxw().index;return e.oxw(2).updateSharedInventoryItem(m,s,r)}),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw(3);e.Q6J("item",t)("character",o.character)}}function wr(a,l){if(1&a&&(e.TgZ(0,"mat-tab"),e.YNc(1,Tr,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,Zr,1,2,"app-item-slot",9),e.qZA()()),2&a){var n=l.$implicit;e.xp6(3),e.Q6J("ngForOf",n)}}function Ar(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content")(5,"app-character-equipment",2),e.NdJ("changed",function(){return e.CHM(n),e.oxw().gearChanged()}),e.qZA(),e._UZ(6,"hr"),e.TgZ(7,"div",3)(8,"app-reaper-slot",2),e.NdJ("changed",function(i){return e.CHM(n),e.oxw().updateReaper(i)}),e.qZA()(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA()()(),e.TgZ(11,"mat-card",5)(12,"mat-card-content")(13,"mat-tab-group",6)(14,"mat-tab"),e.YNc(15,xr,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,Sr,1,2,"app-item-slot",9),e.qZA()(),e.YNc(18,wr,4,1,"mat-tab",10),e.qZA()()()()}if(2&a){var t=e.oxw();e.xp6(3),e.Oqu(t.character.fullName),e.xp6(2),e.Q6J("character",t.character),e.xp6(3),e.Q6J("character",t.character),e.xp6(9),e.Q6J("ngForOf",t.character.inventory),e.xp6(1),e.Q6J("ngForOf",t.character.sharedInventory)}}var Ir=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i){var r;return(0,p.Z)(this,t),(r=n.call(this)).buildStorageService=o,r.itemMoveService=i,r.character=null,r.isDragging=!1,r.itemGroupBeingDraggedOn=null,r.itemGroupDragDropPossible=!1,r.itemMoveService.draggingItem.pipe((0,L.R)(r.unsubscribe)).subscribe(function(c){return r.isDragging=c}),r}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.character=null===r?null:r.character})}},{key:"dragInItemsGroup",value:function(i){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==i.find(function(r){return null===r}),this.itemGroupBeingDraggedOn=i)}},{key:"dragOutItemsGroup",value:function(){this.itemGroupBeingDraggedOn=null}},{key:"dragDrop",value:function(i){this.itemMoveService.moveDraggedItemToItemGroup(i)}},{key:"gearChanged",value:function(){this.buildStorageService.saveLayer()}},{key:"updateReaper",value:function(i){null!==this.character&&(this.character.reaper=i,this.buildStorageService.saveLayer())}},{key:"updateIventoryItem",value:function(i,r){null!==this.character&&(this.character.inventory[i]=r,this.buildStorageService.saveLayer())}},{key:"updateSharedInventoryItem",value:function(i,r,c){if(null!==this.character){var s=this.character.sharedInventory[i];s&&(s[r]=c,this.buildStorageService.saveBuild())}}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(ue))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(n,t){1&n&&e.YNc(0,Ar,19,5,"main",0),2&n&&e.Q6J("ngIf",null!==t.character)},directives:[_.O5,N.a8,N.dn,ut,dt,kr,Ce.SP,Ce.uX,Ce.uD,_.sg,ct],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:12px;background-color:#161412;border:3px solid #3c3c3c}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),a}(),ft=h(5016);function Er(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.maximize(o.selectedSkill)}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function Lr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.equipSupport(o.selectedSkill)}),e._uU(1," Equip as Support skill "),e.qZA()}}function Jr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.equipPrimary(o.selectedSkill)}),e._uU(1," Equip as Primary skill "),e.qZA()}}function qr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw(2);return o.equipSecondary(o.selectedSkill)}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function Ur(a,l){if(1&a&&(e.YNc(0,Er,2,0,"button",4),e.YNc(1,Lr,2,0,"button",4),e.YNc(2,Jr,2,0,"button",4),e.YNc(3,qr,2,0,"button",4)),2&a){var n=e.oxw();e.Q6J("ngIf",null!==n.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill&&!n.isEquippedSupportSkill(n.selectedSkill)&&n.isSupport(n.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill&&!n.isEquippedPrimarySkill(n.selectedSkill)&&!n.isSupport(n.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill&&!n.isEquippedSecondarySkill(n.selectedSkill)&&!n.isSupport(n.selectedSkill))}}var Nr=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r,c){var s;return(0,p.Z)(this,t),(s=n.call(this)).buildStorageService=o,s.messageService=i,s.slormancerSkillService=r,s.slormancerCharacterModifierService=c,s.selectedSkill=null,s.menu=null,s}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){}},{key:"openSettings",value:function(){return null!==this.menu&&this.menu.openMenu(),!1}},{key:"isSupport",value:function(i){return i.skill.type===le.W.Support}},{key:"maximize",value:function(i){if(null!==this.buildStorageService.getLayer()){i.skill.baseLevel=i.skill.maxLevel,this.slormancerSkillService.updateSkillModel(i.skill);var s,c=(0,B.Z)(i.upgrades);try{for(c.s();!(s=c.n()).done;){var m=s.value;m.baseRank=m.maxRank,this.slormancerSkillService.updateUpgradeModel(m)}}catch(d){c.e(d)}finally{c.f()}this.buildStorageService.saveLayer(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+i.skill.icon+'.png"/> '+i.skill.name)}}},{key:"equipSupport",value:function(i){var r=this.buildStorageService.getLayer();null!==r&&this.slormancerCharacterModifierService.setSupportSkill(r.character,i.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+i.skill.icon+'.png"/> '+i.skill.name),this.buildStorageService.saveLayer())}},{key:"equipPrimary",value:function(i){var r=this.buildStorageService.getLayer();null!==r&&this.slormancerCharacterModifierService.setPrimarySkill(r.character,i.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+i.skill.icon+'.png"/> '+i.skill.name),this.buildStorageService.saveLayer())}},{key:"equipSecondary",value:function(i){var r=this.buildStorageService.getLayer();null!==r&&this.slormancerCharacterModifierService.setSecondarySkill(r.character,i.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+i.skill.icon+'.png"/> '+i.skill.name),this.buildStorageService.saveLayer())}},{key:"isEquippedSupportSkill",value:function(i){var r=this.buildStorageService.getLayer();return null!==r&&r.character.supportSkill===i.skill}},{key:"isEquippedPrimarySkill",value:function(i){var r=this.buildStorageService.getLayer();return null!==r&&r.character.primarySkill===i.skill}},{key:"isEquippedSecondarySkill",value:function(i){var r=this.buildStorageService.getLayer();return null!==r&&r.character.secondarySkill===i.skill}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(oe.e),e.Y36(ft.A),e.Y36(Ze.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-settings-skills"]],viewQuery:function(n,t){var o;1&n&&e.Gf(Z.p6,7),2&n&&e.iGM(o=e.CRH())&&(t.menu=o.first)},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(n,t){if(1&n&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return t.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,Ur,4,4,"ng-template",3),e.qZA()),2&n){var o=e.MAs(3);e.Q6J("matMenuTriggerFor",o),e.xp6(2),e.Q6J("overlapTrigger",!0)}},directives:[H.Hw,Z.p6,Z.VK,Z.KA,_.O5,Z.OP],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),a}();function Fr(a,l){if(1&a&&e._UZ(0,"div",18),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.upgrade.genresLabel,e.oJD)}}function Br(a,l){if(1&a&&e._UZ(0,"div",19),2&a){var n=e.oxw(2);e.Q6J("innerHTML",n.upgrade.costLabel,e.oJD)}}function Hr(a,l){if(1&a&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9),e._uU(11),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e.YNc(14,Fr,1,1,"div",11),e.TgZ(15,"div",12),e._uU(16),e.TgZ(17,"span",13),e._uU(18),e.qZA(),e._uU(19),e.qZA(),e.YNc(20,Br,1,1,"div",14),e.qZA()(),e._UZ(21,"div",15)(22,"div",16)(23,"app-mechanics-view",17),e.qZA()()),2&a){var n=e.oxw();e.Gre("skill slormancer-tooltip ",n.upgrade.damageTypes.length>0?n.upgrade.damageTypes[0]:"",""),e.xp6(2),e.AsE("",n.getTypeLabel(n.upgrade.type),": ",n.upgrade.name,""),e.xp6(6),e.Q6J("src",n.upgrade.icon,e.LSH),e.xp6(3),e.AsE("",n.MASTERY_LABEL," ",n.upgrade.masteryRequired,""),e.xp6(2),e.Oqu(n.getTypeLabel(n.upgrade.type)),e.xp6(1),e.Q6J("ngIf",null!==n.upgrade.genresLabel),e.xp6(2),e.hij("",n.RANK_LABEL,": "),e.xp6(2),e.Oqu(n.upgrade.rank),e.xp6(1),e.hij("/",n.upgrade.maxRank,""),e.xp6(1),e.Q6J("ngIf",null!==n.upgrade.costLabel),e.xp6(2),e.Q6J("innerHTML",n.upgrade.description,e.oJD),e.xp6(1),e.Q6J("classMechanics",n.upgrade.relatedClassMechanics)("mechanics",n.upgrade.relatedMechanics)("buffs",n.upgrade.relatedBuffs)}}var vt=function(){var a=function(){function l(n){(0,p.Z)(this,l),this.slormancerTranslateService=n,this.RANK_LABEL=this.slormancerTranslateService.translate("tt_rank"),this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.upgrade=null,this.mouseOverElement=null}return(0,g.Z)(l,[{key:"getTypeLabel",value:function(t){return this.slormancerTranslateService.translate("tt_"+t)}},{key:"showMechanicOverlay",value:function(t){this.mouseOverElement=t}},{key:"hideMechanicOverlay",value:function(){this.mouseOverElement=null}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(re.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skill-upgrade-view"]],inputs:{upgrade:"upgrade"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"mastery"],[1,"type"],["class","genre",3,"innerHTML",4,"ngIf"],[1,"rank"],[1,"current"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"classMechanics","mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(n,t){1&n&&e.YNc(0,Hr,24,18,"div",0),2&n&&e.Q6J("ngIf",null!==t.upgrade)},directives:[_.O5,nt],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current, .skill[_ngcontent-%COMP%]  .head{color:#ce4607}.skill[_ngcontent-%COMP%]  .mag .value{color:#bb1fe2}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .value.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current, .skill.mag[_ngcontent-%COMP%]  .head{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana, .skill.mag[_ngcontent-%COMP%]  .head.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life, .skill.mag[_ngcontent-%COMP%]  .head.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid #be871f;min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),a}();function Qr(a,l){if(1&a&&e._UZ(0,"app-skill-upgrade-view",8),2&a){var n=e.oxw(3);e.Q6J("upgrade",n.upgrade)}}function Rr(a,l){if(1&a&&e.YNc(0,Qr,1,1,"ng-template",7),2&a){e.oxw();var n=e.MAs(1),t=e.oxw();e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function Yr(a,l){if(1&a&&(e.TgZ(0,"div",1,2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,Rr,1,2,null,6),e.qZA()),2&a){var n=e.oxw();e.ekj("hidden-search",n.hiddenBySearch)("passive",n.isPassive(n.upgrade))("readonly",n.readonly),e.xp6(2),e.ekj("equipped",n.equipped),e.xp6(1),e.Q6J("src",n.upgrade.icon,e.LSH),e.xp6(1),e.ekj("max",n.upgrade.rank===n.upgrade.maxRank),e.xp6(1),e.Oqu(n.upgrade.rank===n.upgrade.maxRank?"Max":n.upgrade.rank),e.xp6(1),e.Q6J("ngIf",n.showOverlay&&n.overlay)}}var ht=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).searchService=o,i.upgrade=null,i.selected=!1,i.equipped=!1,i.overlay=!1,i.readonly=!1,i.hiddenBySearch=!1,i.showOverlay=!1,i}return(0,g.Z)(t,[{key:"onOver",value:function(){this.showOverlay=!0}},{key:"onLeave",value:function(){this.showOverlay=!1}},{key:"ngOnInit",value:function(){var i=this;this.searchService.searchChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){return i.hiddenBySearch=null!==r&&null!==i.upgrade&&!i.searchService.upgradeMatchSearch(i.upgrade)})}},{key:"isPassive",value:function(i){return i.type===le.W.Passive}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(Me))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-upgrade-slot"]],hostBindings:function(n,t){1&n&&e.NdJ("mouseenter",function(){return t.onOver()})("mouseleave",function(){return t.onLeave()})},inputs:{upgrade:"upgrade",selected:"selected",equipped:"equipped",overlay:"overlay",readonly:"readonly"},features:[e.qOj],decls:1,vars:1,consts:[["class","upgrade","cdkOverlayOrigin","",3,"hidden-search","passive","readonly",4,"ngIf"],["cdkOverlayOrigin","",1,"upgrade"],["trigger","cdkOverlayOrigin"],[1,"equipped-border"],[1,"skill-icon",3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"upgrade"]],template:function(n,t){1&n&&e.YNc(0,Yr,7,13,"div",0),2&n&&e.Q6J("ngIf",null!==t.upgrade)},directives:[_.O5,F.xu,F.pI,vt],styles:[".upgrade[_ngcontent-%COMP%]{background-color:#101010;position:relative;z-index:1}.upgrade.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.2}.upgrade.passive[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.upgrade[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:10px;border-radius:4px}.upgrade[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{width:46px;height:46px;position:relative;border:3px solid black;padding:2px;background-color:#202020}.upgrade[_ngcontent-%COMP%]   .equipped-border.equipped[_ngcontent-%COMP%]{background-color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black}.upgrade[_ngcontent-%COMP%]:not(.readonly)   .equipped-border[_ngcontent-%COMP%]{cursor:pointer}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{padding:0;border-width:4px;width:44px;height:44px}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0}"]}),a}();function Vr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4)(1,"img",5),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(2).incrementSkill(c)})("contextmenu",function(){var c=e.CHM(n).$implicit;return e.oxw(2).decrementSkill(c)}),e.qZA()()}if(2&a){var t=l.$implicit,o=e.oxw(2);e.ekj("selected",o.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",o.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.iconLarge+".png",e.LSH)}}function Dr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"div",4)(1,"img",6),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(2).incrementSkill(c)})("contextmenu",function(){var c=e.CHM(n).$implicit;return e.oxw(2).decrementSkill(c)}),e.qZA()()}if(2&a){var t=l.$implicit,o=e.oxw(2);e.ekj("selected",o.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",o.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH)}}function jr(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){var c=e.CHM(n).$implicit;return e.oxw(4).incrementUpgrade(c)})("contextmenu",function(){var c=e.CHM(n).$implicit;return e.oxw(4).decrementUpgrade(c)}),e.qZA()}if(2&a){var t=l.$implicit,o=e.oxw(4);e.Q6J("upgrade",t)("equipped",o.isUpgradeEquipped(t))}}function Gr(a,l){if(1&a&&(e.TgZ(0,"div",16)(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,jr,1,2,"app-upgrade-slot",19),e.qZA()()),2&a){var n=l.$implicit,t=e.oxw(3);e.xp6(2),e.hij(" ",n," "),e.xp6(2),e.Q6J("ngForOf",t.getLineUpgrades(n))}}function Xr(a,l){if(1&a&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"app-settings-skills",9)(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11)(5,"div",12),e.YNc(6,Gr,5,2,"div",13),e.qZA()(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",n.selectedSkill),e.xp6(1),e.Q6J("skill",n.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",n.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",n.selectedUpgrade)}}function zr(a,l){if(1&a&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",1),e.YNc(3,Vr,2,5,"div",2),e.YNc(4,Dr,2,5,"div",2),e.qZA(),e.YNc(5,Xr,9,4,"div",3),e.qZA()()),2&a){var n=e.oxw();e.xp6(3),e.Q6J("ngForOf",n.getSupportSkills(n.character)),e.xp6(1),e.Q6J("ngForOf",n.getActiveSkills(n.character)),e.xp6(1),e.Q6J("ngIf",null!==n.selectedSkill)}}var $r=function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o,i,r){var c;return(0,p.Z)(this,t),(c=n.call(this)).buildStorageService=o,c.slormancerSkillService=i,c.slormancerCharacterModifierService=r,c.character=null,c.selectedSkill=null,c.selectedUpgrade=null,c.selectedSkillLines=[],c}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){i.character=null===r?null:r.character,i.updateSelectedSkill()})}},{key:"updateSelectedSkill",value:function(){var i=this.character,r=this.selectedSkill,c=null;null===i?c=null:null===r?c=(0,O.lA)(null!==i.supportSkill?i.skills.find(function(s){return s.skill===i.supportSkill}):i.skills[0]):null===(c=(0,O.lA)(i.skills.find(function(s){return s.skill.id===r.skill.id})))&&(c=(0,O.lA)(i.skills[0])),this.selectSkill(c)}},{key:"getSupportSkills",value:function(i){return i.skills.filter(function(r){return r.skill.type===le.W.Support})}},{key:"getActiveSkills",value:function(i){return i.skills.filter(function(r){return r.skill.type===le.W.Active})}},{key:"isSkillEquipped",value:function(i){return null!==this.character&&(this.character.primarySkill===i.skill||this.character.secondarySkill===i.skill||this.character.supportSkill===i.skill)}},{key:"isEquippedSupportSkill",value:function(i){return null!==this.character&&this.character.supportSkill===i.skill}},{key:"isEquippedPrimarySkill",value:function(i){return null!==this.character&&this.character.primarySkill===i.skill}},{key:"isEquippedSecondarySkill",value:function(i){return null!==this.character&&this.character.secondarySkill===i.skill}},{key:"isSkillSelected",value:function(i){return this.selectedSkill===i}},{key:"selectSkill",value:function(i){this.selectedSkill!==i&&(this.selectedSkill=i,this.selectedSkillLines=null===i?[]:i.upgrades.map(function(r){return r.line}).filter(O.mr).sort(),this.selectedUpgrade=null===i?null:(0,O.lA)(i.upgrades[0]))}},{key:"incrementSkill",value:function(i){return this.selectedSkill===i?i.skill.baseLevel<i.skill.maxLevel&&(i.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(i.skill),this.buildStorageService.saveLayer(),console.log(i)):this.selectSkill(i),!1}},{key:"decrementSkill",value:function(i){return this.selectedSkill===i?i.skill.baseLevel>1&&(i.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(i.skill),this.buildStorageService.saveLayer(),console.log(i)):this.selectSkill(i),!1}},{key:"getLineUpgrades",value:function(i){var r=[];return null!==this.selectedSkill&&(r=this.selectedSkill.upgrades.filter(function(c){return c.line===i})),r}},{key:"isUpgradeEquipped",value:function(i){var r=!1;return null!==this.selectedSkill&&(r=void 0!==this.selectedSkill.selectedUpgrades.find(function(c){return i.id===c})),r}},{key:"incrementUpgrade",value:function(i){if(null!==this.selectedSkill&&null!==this.character){var r=!1;this.selectedUpgrade!==i&&(this.selectedUpgrade=i,r=!0),this.isUpgradeEquipped(i)?!r&&i.baseRank<i.maxRank&&(i.baseRank++,this.slormancerSkillService.updateUpgradeModel(i),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,i),0===i.baseRank&&(i.baseRank=1,this.slormancerSkillService.updateUpgradeModel(i)),this.buildStorageService.saveLayer()),console.log(i)}return!1}},{key:"decrementUpgrade",value:function(i){if(null!==this.selectedSkill&&null!==this.character){var r=!1;this.selectedUpgrade!==i&&(this.selectedUpgrade=i,r=!0),this.isUpgradeEquipped(i)?!r&&i.baseRank>1&&(i.baseRank--,this.slormancerSkillService.updateUpgradeModel(i),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,i),this.buildStorageService.saveLayer()),console.log(i)}return!1}},{key:"isSupport",value:function(i){return i.skill.type===le.W.Support}},{key:"equipSupport",value:function(i){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,i.skill),this.buildStorageService.saveLayer())}},{key:"equipPrimary",value:function(i){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,i.skill),this.buildStorageService.saveLayer())}},{key:"equipSecondary",value:function(i){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,i.skill),this.buildStorageService.saveLayer())}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A),e.Y36(ft.A),e.Y36(Ze.Y))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(n,t){1&n&&e.YNc(0,zr,6,3,"mat-card",0),2&n&&e.Q6J("ngIf",null!==t.character)},directives:[_.O5,N.a8,N.dn,_.sg,Nr,gt,ht,vt],styles:['[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:0;left:0;right:0;bottom:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),a}(),Wr=h(8376);function Kr(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function el(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function tl(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(2).$implicit,t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(n.value,t.mergedStat.suffix,!0)," ")}}function nl(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,tl,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=e.oxw().$implicit,t=e.oxw(3);e.xp6(4),e.hij(" ",t.minValueToString(n.value,t.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function al(a,l){if(1&a&&(e.ynx(0),e.YNc(1,nl,10,4,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",!n.extra)}}function il(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=e.oxw().$implicit,t=e.oxw(3);e.xp6(5),e.hij(" +",t.valueToString(n.value,t.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function ol(a,l){if(1&a&&(e.ynx(0),e.YNc(1,il,10,3,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",!n.extra)}}function rl(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.getTotalFlat(n.mergedStat),n.mergedStat.suffix)," ")}}function ll(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Kr,2,0,"span",2),e.qZA(),e.YNc(9,el,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,al,2,1,"ng-container",12),e.YNc(15,ol,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,rl,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.max),e.xp6(5),e.hij(" ",n.minValueToString(n.getTotalFlat(n.mergedStat),n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function cl(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function sl(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function ul(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw().$implicit,t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(n.value,"%",!0)," ")}}function ml(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,ul,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=l.$implicit,t=e.oxw(3);e.xp6(4),e.hij(" ",t.minValueToString(n.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function dl(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=l.$implicit,t=e.oxw(3);e.xp6(5),e.hij(" +",t.valueToString(n.value,"%")," "),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function gl(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.getTotalPercent(n.mergedStat),"%",!0)," ")}}function pl(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,cl,2,0,"span",2),e.qZA(),e.YNc(9,sl,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,ml,10,4,"div",15),e.YNc(15,dl,10,3,"div",15),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,gl,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",n.minValueToString(n.getTotalPercent(n.mergedStat),"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function _l(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function fl(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function vl(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw().$implicit,t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(n.value,"%",!0)," ")}}function hl(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,vl,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=l.$implicit,t=e.oxw(3);e.xp6(4),e.hij(" ",t.minValueToString(n.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function Cl(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=l.$implicit,t=e.oxw(3);e.xp6(5),e.hij(" +",n.value,"% "),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function Ml(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,_l,2,0,"span",2),e.qZA(),e.YNc(9,fl,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,hl,10,4,"div",15),e.YNc(15,Cl,10,3,"div",15),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.maxMultiplier)}}function bl(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function yl(a,l){1&a&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Ol(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(2).$implicit,t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(n.value,t.mergedStat.suffix,!0)," ")}}function Pl(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Ol,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=e.oxw().$implicit,t=e.oxw(3);e.xp6(4),e.hij(" ",t.minValueToString(n.value,t.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function kl(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Pl,10,4,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",n.extra)}}function xl(a,l){if(1&a&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&a){var n=e.oxw().$implicit,t=e.oxw(3);e.xp6(5),e.hij(" +",t.valueToString(n.value,t.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",t.getSource(n.source)," "),e.xp6(2),e.hij(" ",t.getSourceName(n.source)," ")}}function Sl(a,l){if(1&a&&(e.ynx(0),e.YNc(1,xl,10,3,"div",13),e.BQk()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ngIf",n.extra)}}function Tl(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.getTotalFlatExtra(n.mergedStat),n.mergedStat.suffix)," ")}}function Zl(a,l){if(1&a&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,bl,2,0,"span",2),e.qZA(),e.YNc(9,yl,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,kl,2,1,"ng-container",12),e.YNc(15,Sl,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Tl,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&a){var n=e.oxw(2);e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",n.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",n.mergedStat.values.max),e.xp6(5),e.hij(" ",n.minValueToString(n.getTotalFlatExtra(n.mergedStat),n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function wl(a,l){1&a&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function Al(a,l){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula"),e.YNc(3,wl,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(3),e.Q6J("ngIf",n.totalHasMinMax(n.mergedStat)),e.xp6(2),e.hij(" ",n.getMinFormula(n.mergedStat)," ")}}function Il(a,l){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA()()),2&a){var n=e.oxw(2);e.xp6(4),e.hij(" ",n.getMaxFormula(n.mergedStat)," ")}}function El(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(2);e.xp6(1),e.hij(" ",n.maxValueToString(n.mergedStat.total,n.mergedStat.suffix)," ")}}function Ll(a,l){if(1&a&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&a){var n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(n.mergedStat.totalDisplayed,n.mergedStat.suffix)," ")}}function Jl(a,l){if(1&a&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Total (shown in stats)"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Ll,2,1,"div",8),e._UZ(6,"div",9)(7,"div",10),e.qZA()),2&a){var n=e.oxw(2);e.xp6(4),e.hij(" ",n.minValueToString(n.mergedStat.totalDisplayed,n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax)}}function ql(a,l){if(1&a&&(e.TgZ(0,"div",1),e.YNc(1,ll,24,7,"ng-container",2),e.YNc(2,pl,24,7,"ng-container",2),e.YNc(3,Ml,16,5,"ng-container",2),e.YNc(4,Zl,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,Al,6,2,"div",4),e.YNc(8,Il,5,1,"div",4),e.TgZ(9,"div",5)(10,"div",6),e._uU(11,"Total"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,El,2,1,"div",8),e._UZ(15,"div",9)(16,"div",10),e.qZA(),e.YNc(17,Jl,8,2,"div",4),e.qZA()),2&a){var n=e.oxw();e.xp6(1),e.Q6J("ngIf",n.hasFlatValues(n.mergedStat)),e.xp6(1),e.Q6J("ngIf",n.mergedStat.values.percent.length>0||n.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",n.mergedStat.values.multiplier.length>0||n.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",n.hasFlatExtraValues(n.mergedStat)),e.xp6(2),e.hij("",n.translate(n.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",n.showFormula(n.mergedStat)),e.xp6(1),e.Q6J("ngIf",n.showFormula(n.mergedStat)&&n.totalHasMinMax(n.mergedStat)),e.xp6(5),e.hij(" ",n.minValueToString(n.mergedStat.total,n.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(3),e.Q6J("ngIf",n.hasDisplayPrecision(n.mergedStat))}}var Ul=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.slormancerTranslateService=n,this.slormancerStatUpdaterService=t,this.mergedStat=null,this.percent=!1}return(0,g.Z)(l,[{key:"translate",value:function(t){return this.slormancerTranslateService.translate(t)}},{key:"getSource",value:function(t){var o="";return"synergy"in t?o="Synergy":"character"in t?o="Character":"skill"in t?o="Skill":"upgrade"in t?o="Upgrade":"item"in t?o="Item":"ancestralLegacy"in t?o="Ancestral Legacy":"attribute"in t?o="Attribute":"reaper"in t?o="Reaper":"activable"in t?o="Activable":"mechanic"in t?o="Mechanic":"classMechanic"in t?o="Class Mechanic":"ultimatum"in t&&(o="Ultimatum"),o}},{key:"getSourceName",value:function(t){var o="";return"synergy"in t?o=t.synergy:"skill"in t?o=t.skill.nameLabel:"upgrade"in t?o=t.upgrade.name:"item"in t?o=t.item.name:"ancestralLegacy"in t?o=t.ancestralLegacy.name:"attribute"in t?o=t.attribute.attributeName:"reaper"in t?o=t.reaper.name:"activable"in t?o=t.activable.name:"mechanic"in t?o=t.mechanic.name:"classMechanic"in t?o=t.classMechanic.name:"ultimatum"in t&&(o=t.ultimatum.title),o}},{key:"valueToString",value:function(t,o){return"number"==typeof t?(0,w.NM)(t,5)+o:(0,w.NM)(t.min,5)+o+"-"+(0,w.NM)(t.max,5)+o}},{key:"minValueToString",value:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,w.NM)("number"==typeof t?t:t.min,5);return(r>=0&&i?"+":"")+r+o}},{key:"maxValueToString",value:function(t,o){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=(0,w.NM)("number"==typeof t?t:t.max,5);return(r>=0&&i?"+":"")+r+o}},{key:"getTotalFlat",value:function(t){return this.slormancerStatUpdaterService.getTotalFlat(t)}},{key:"getTotalFlatExtra",value:function(t){return this.slormancerStatUpdaterService.getTotalFlatExtra(t)}},{key:"getTotalPercent",value:function(t){var o=this.slormancerStatUpdaterService.addNumberValues(t.values.percent.map(function(r){return r.value})),i=o+this.slormancerStatUpdaterService.addNumberValues(t.values.maxPercent.map(function(r){return r.value}));return o!==i?{min:o,max:i}:o}},{key:"getTotalFlatPercent",value:function(t){var o=this.slormancerStatUpdaterService.getTotalFlatAndPercent(t);return this.valueToString(o,t.suffix)}},{key:"getTotal",value:function(t){var o=this.slormancerStatUpdaterService.getTotal(t);return this.valueToString(o,t.suffix)}},{key:"hasFlatValues",value:function(t){return t.values.flat.filter(function(o){return!o.extra}).length>0||t.values.max.filter(function(o){return!o.extra}).length>0}},{key:"hasFlatExtraValues",value:function(t){return t.values.flat.filter(function(o){return o.extra}).length>0||t.values.max.filter(function(o){return o.extra}).length>0}},{key:"hasPercentValues",value:function(t){return t.values.percent.length>0||t.values.maxPercent.length>0}},{key:"hasMultiplierValues",value:function(t){return t.values.multiplier.length>0||t.values.maxMultiplier.length>0}},{key:"showFormula",value:function(t){return(t.values.flat.filter(function(m){return!m.extra}).length>0||t.values.max.filter(function(m){return!m.extra}).length>0?1:0)+(t.values.percent.length>0||t.values.maxPercent.length>0?1:0)+(t.values.multiplier.length>0||t.values.maxMultiplier.length>0?1:0)+(t.values.flat.filter(function(m){return m.extra}).length>0||t.values.max.filter(function(m){return m.extra}).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?1:0)>=2}},{key:"totalHasMinMax",value:function(t){return"number"!=typeof t.total}},{key:"getMinFormula",value:function(t){var o=this.slormancerStatUpdaterService.getTotal(t),i=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),c=t.values.multiplier.map(function(d){return d.value}),s=this.slormancerStatUpdaterService.getTotalFlatExtra(t);i="number"==typeof i?i:i.min,r="number"==typeof r?r:r.min,s="number"==typeof s?s:s.min;var m=(0,w.NM)("number"==typeof o?o:o.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?m+="(1 - "+[i,r].concat((0,I.Z)(c)).filter(function(d){return 0!==d}).map(function(d){return Math.max(0,100-d)/100}).join(" * ")+") * 100":(m+="round( "+this.valueToString(i,t.suffix)+[r].concat((0,I.Z)(c)).filter(function(d){return 0!==d}).map(function(d){return" * "+(d+100)/100}).join("")+" )",0!==s&&(m+=s>0?" + "+s:" - "+Math.abs(s))),m}},{key:"getMaxFormula",value:function(t){var o=this.slormancerStatUpdaterService.getTotal(t),i=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),c=this.slormancerStatUpdaterService.getTotalFlatExtra(t),s=t.values.multiplier.map(function(d){return d.value});i="number"==typeof i?i:i.max,r="number"==typeof r?r:r.max,c="number"==typeof c?c:c.max;var m=(0,w.NM)("number"==typeof o?o:o.max,5)+" = ";return m+="round( "+this.valueToString(i,t.suffix)+[r].concat((0,I.Z)(s)).filter(function(d){return 0!==d}).map(function(d){return" * "+(d+100)/100}).join("")+" )",0!==c&&(m+=c>0?" + "+c:" - "+Math.abs(c)),m}},{key:"hasDisplayPrecision",value:function(t){return t.totalDisplayed!==t.total}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(re.n),e.Y36(Wr.C))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(n,t){1&n&&e.YNc(0,ql,18,10,"div",0),2&n&&e.Q6J("ngIf",null!==t.mergedStat)},directives:[_.O5,_.sg],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),a}();function Nl(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"app-main-stats",2),e.NdJ("selected",function(i){return e.CHM(n),e.oxw().selectMergedStat(i)}),e.qZA()()(),e.TgZ(4,"mat-card")(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA()()()}if(2&a){var t=e.oxw();e.xp6(3),e.Q6J("stats",t.stats),e.xp6(3),e.Q6J("mergedStat",t.selectedMergedStat)}}var Bl=[{path:"",component:cn,children:[{path:"inventory",component:Ir},{path:"skills",component:$r},{path:"ancestral-legacies",component:Zn},{path:"attributes",component:$n},{path:"stats",component:function(){var a=function(l){(0,J.Z)(t,l);var n=(0,q.Z)(t);function t(o){var i;return(0,p.Z)(this,t),(i=n.call(this)).buildStorageService=o,i.stats=null,i.selectedMergedStat=null,i}return(0,g.Z)(t,[{key:"ngOnInit",value:function(){var i=this;this.buildStorageService.layerChanged.pipe((0,L.R)(this.unsubscribe)).subscribe(function(r){i.stats=null===r?null:r.character.stats})}},{key:"selectMergedStat",value:function(i){this.selectedMergedStat=i}}]),t}(U);return a.\u0275fac=function(n){return new(n||a)(e.Y36(A))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(n,t){1&n&&e.YNc(0,Nl,7,2,"main",0),2&n&&e.Q6J("ngIf",null!==t.stats)},directives:[_.O5,N.a8,N.dn,Fe,Ul],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),a}()},{path:"config",component:Na},{path:"compare",component:va},{path:"calcs",component:oa},{path:"**",redirectTo:"inventory"}]}],Hl=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[Y.Bz.forChild(Bl)],Y.Bz]}),a}(),Ct=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[_.ez,ke,Hl]]}),a}(),Rl=[{path:"",component:function(){var a=function(){function l(n){(0,p.Z)(this,l),this.router=n,this.created=new e.vpe}return(0,g.Z)(l,[{key:"redirectToBuild",value:function(){this.router.navigate(["slorm-planner","build"])}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(Y.F0))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-create-first-build"]],decls:4,vars:0,consts:[[3,"created"]],template:function(n,t){1&n&&(e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"app-create-build",0),e.NdJ("created",function(){return t.redirectToBuild()}),e.qZA()()()())},directives:[N.a8,N.dn,Ke],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;padding:20px;width:380px}@media (max-width: 374px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),a}()}],Yl=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[Y.Bz.forChild(Rl)],Y.Bz]}),a}(),Mt=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[_.ez,ke,Yl,F.U8]]}),a}(),Vl=h(1828);function Dl(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw();return o.showSummary=!o.showSummary}),e._uU(1,"Show Stats"),e.qZA()}}function jl(a,l){if(1&a){var n=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(n);var o=e.oxw();return o.showSummary=!o.showSummary}),e._uU(1,"Show Summary"),e.qZA()}}function Gl(a,l){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("upgrade",n)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Xl(a,l){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("upgrade",n)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function zl(a,l){if(1&a&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("upgrade",n)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function $l(a,l){if(1&a&&(e.TgZ(0,"div",33),e._UZ(1,"app-ancestral-legacy-slot",41),e.qZA()),2&a){var n=l.$implicit;e.xp6(1),e.Q6J("ancestralLegacy",n)("readonly",!0)("overlay",!0)}}function Wl(a,l){if(1&a&&e._UZ(0,"app-attribute-line",43),2&a){var n=e.oxw().$implicit,t=e.oxw(2);e.Q6J("short",!0)("readonly",!0)("iconShift",!0)("attribute",t.character.attributes.allocated[n])("remainingPoints",t.character.attributes.remainingPoints)}}function Kl(a,l){if(1&a&&(e.ynx(0),e.YNc(1,Wl,1,5,"app-attribute-line",42),e.BQk()),2&a){var n=l.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.showAttribute(n))}}function ec(a,l){if(1&a&&(e.TgZ(0,"mat-card",9)(1,"mat-card-content")(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13),e._uU(6),e.qZA(),e._UZ(7,"img",14),e.qZA(),e.TgZ(8,"div",12)(9,"div",13),e._uU(10),e.qZA(),e._UZ(11,"img",15),e.qZA()(),e.TgZ(12,"div",16)(13,"div",12)(14,"div",13),e._uU(15),e.qZA(),e._UZ(16,"img",17),e.qZA(),e.TgZ(17,"div",12)(18,"div",13),e._uU(19),e.qZA(),e._UZ(20,"img",18),e.qZA()(),e.TgZ(21,"div",19)(22,"div",12)(23,"div",13),e._uU(24),e.qZA(),e._UZ(25,"img",20),e.qZA(),e.TgZ(26,"div",12)(27,"div",13),e._uU(28),e.qZA(),e._UZ(29,"img",21),e.qZA(),e.TgZ(30,"div",12)(31,"div",13),e._uU(32),e.qZA(),e._UZ(33,"img",22),e.qZA()()(),e.TgZ(34,"div",23)(35,"h4"),e._uU(36,"Support Skill"),e.qZA(),e.TgZ(37,"div",24)(38,"div",25),e._UZ(39,"app-skill-slot",26),e.qZA(),e.TgZ(40,"div",27),e.YNc(41,Gl,2,5,"div",28),e.qZA()()(),e.TgZ(42,"div",23)(43,"h4"),e._uU(44,"Primary Skill"),e.qZA(),e.TgZ(45,"div",24)(46,"div",25),e._UZ(47,"app-skill-slot",29),e.qZA(),e.TgZ(48,"div",27),e.YNc(49,Xl,2,5,"div",28),e.qZA()()(),e.TgZ(50,"div",23)(51,"h4"),e._uU(52,"Secondary Skill"),e.qZA(),e.TgZ(53,"div",24)(54,"div",25),e._UZ(55,"app-skill-slot",29),e.qZA(),e.TgZ(56,"div",27),e.YNc(57,zl,2,5,"div",28),e.qZA()()(),e.TgZ(58,"div",30)(59,"div",31)(60,"h4"),e._uU(61,"Activables"),e.qZA(),e.TgZ(62,"div",32)(63,"div",33),e._UZ(64,"app-activable-slot",34),e.qZA(),e.TgZ(65,"div",33),e._UZ(66,"app-activable-slot",34),e.qZA(),e.TgZ(67,"div",33),e._UZ(68,"app-activable-slot",34),e.qZA(),e.TgZ(69,"div",33),e._UZ(70,"app-activable-slot",34),e.qZA()()(),e.TgZ(71,"div",35)(72,"h4"),e._uU(73,"Ancestral Legacies"),e.qZA(),e.TgZ(74,"div",32),e.YNc(75,$l,2,3,"div",36),e.qZA()()(),e.TgZ(76,"div",37),e.YNc(77,Kl,2,1,"ng-container",38),e.qZA()()()),2&a){var n=e.oxw();e.xp6(5),e.Q6J("matTooltip",n.PHYSICAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(n.getPhysicalDamages()),e.xp6(3),e.Q6J("matTooltip",n.ELEMENTAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(n.getElementalDamages()),e.xp6(4),e.Q6J("matTooltip",n.MAX_LIFE_LABEL),e.xp6(1),e.Oqu(n.getMaximumLife()),e.xp6(3),e.Q6J("matTooltip",n.MAX_MANA_LABEL),e.xp6(1),e.Oqu(n.getMaximumMana()),e.xp6(4),e.Q6J("matTooltip",n.MAX_ARMOR_LABEL),e.xp6(1),e.Oqu(n.getArmor()),e.xp6(3),e.Q6J("matTooltip",n.MAX_ELEMENTAL_RESISTANCE_LABEL),e.xp6(1),e.Oqu(n.getElementalResistance()),e.xp6(3),e.Q6J("matTooltip",n.MAX_DODGE_LABEL),e.xp6(1),e.Oqu(n.getDodge()),e.xp6(7),e.Q6J("readonly",!0)("skill",n.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("ngForOf",n.getSkillUpgrades(n.character.supportSkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",n.character.primarySkill),e.xp6(2),e.Q6J("ngForOf",n.getSkillUpgrades(n.character.primarySkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",n.character.secondarySkill),e.xp6(2),e.Q6J("ngForOf",n.getSkillUpgrades(n.character.secondarySkill)),e.xp6(7),e.Q6J("activable",n.character.activable1)("readonly",!0),e.xp6(2),e.Q6J("activable",n.character.activable2)("readonly",!0),e.xp6(2),e.Q6J("activable",n.character.activable3)("readonly",!0),e.xp6(2),e.Q6J("activable",n.character.activable4)("readonly",!0),e.xp6(5),e.Q6J("ngForOf",n.getAncestralLegacies()),e.xp6(2),e.Q6J("ngForOf",n.ALL_ATTRIBUTES)}}function tc(a,l){if(1&a&&(e.TgZ(0,"mat-card",44)(1,"mat-card-content"),e._UZ(2,"app-main-stats",45),e.qZA()()),2&a){var n=e.oxw();e.xp6(2),e.Q6J("stats",n.character.stats)}}var nc=function(){var a=function(){function l(n,t,o,i,r,c,s){var m=this;(0,p.Z)(this,l),this.router=t,this.buildStorageService=o,this.buildService=i,this.slormancerCharacterUpdaterService=r,this.slormancerDpsService=c,this.slormancerTranslateService=s,this.PHYSICAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_physical_damage"),this.ELEMENTAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_elemental_damage"),this.MAX_LIFE_LABEL=this.slormancerTranslateService.translate("max_health"),this.MAX_MANA_LABEL=this.slormancerTranslateService.translate("max_mana"),this.MAX_ARMOR_LABEL=this.slormancerTranslateService.translate("armor"),this.MAX_DODGE_LABEL=this.slormancerTranslateService.translate("dodge"),this.MAX_ELEMENTAL_RESISTANCE_LABEL=this.slormancerTranslateService.translate("elemental_resist"),this.ALL_ATTRIBUTES=y.A,this.showSummary=!0,this.combatBuffControl=new u.NI(!1),this.character=n.snapshot.data.character,this.combatBuffControl.valueChanges.subscribe(function(){return m.updateConfiguration()}),this.updateConfiguration()}return(0,g.Z)(l,[{key:"updateConfiguration",value:function(){var t=Object.assign({},this.combatBuffControl.value?xt:ee),o=[this.character.primarySkill,this.character.secondarySkill,this.character.activable1,this.character.activable2,this.character.activable3,this.character.activable4].filter(O.BX).map(function(i){return"manaCost"in i?i.manaCost:i.cost}).filter(O.BX);t.minimum_unreserved_mana=Math.max.apply(Math,(0,I.Z)(o).concat([0])),this.slormancerCharacterUpdaterService.updateCharacter(this.character,t)}},{key:"getStat",value:function(t){var o=0,i=this.character.stats.find(function(r){return r.stat===t});return i&&(o=i.total),o}},{key:"valueToString",value:function(t){return"number"==typeof t?t.toString():t.min+"-"+t.max}},{key:"getPhysicalDamages",value:function(){var t=this.getStat("critical_chance"),o=this.getStat("critical_damage"),i=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),c=this.getStat("physical_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(c,t,i,o,r)))}},{key:"getElementalDamages",value:function(){var t=this.getStat("critical_chance"),o=this.getStat("critical_damage"),i=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),c=this.getStat("elemental_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(c,t,i,o,r)))}},{key:"getMaximumLife",value:function(){return this.valueToString(this.getStat("max_health"))}},{key:"getMaximumMana",value:function(){return this.valueToString(this.getStat("max_mana"))}},{key:"getArmor",value:function(){return this.valueToString(this.getStat("armor"))}},{key:"getDodge",value:function(){return this.valueToString(this.getStat("dodge"))}},{key:"getElementalResistance",value:function(){return this.valueToString(this.getStat("elemental_resist"))}},{key:"getSkillUpgrades",value:function(t){var o=[],i=this.character.skills.find(function(r){return r.skill===t});return i&&(o=i.upgrades.filter(function(r){return i.selectedUpgrades.includes(r.id)})),o}},{key:"getAncestralLegacies",value:function(){var t=this;return this.character.ancestralLegacies.ancestralLegacies.filter(function(o){return t.character.ancestralLegacies.activeAncestralLegacies.includes(o.id)})}},{key:"showAttribute",value:function(t){var o=this.character.attributes.allocated[t];return o.rank>0||o.bonusRank>0}},{key:"import",value:function(){var t=this.buildService.createBuildWithCharacter("Imported build","Imported layer",this.character);this.buildStorageService.addBuild(t),this.router.navigate(["slorm-planner","build"])}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(Y.gz),e.Y36(Y.F0),e.Y36(A),e.Y36(me),e.Y36(fe.P),e.Y36(Vl.v),e.Y36(re.n))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-view-character"]],decls:18,vars:10,consts:[[1,"equipment"],[3,"character","readonly"],[1,"weapon"],[3,"readonly","character"],["color","primary",3,"formControl"],["color","primary","mat-flat-button","",3,"click"],["color","primary","mat-flat-button","",3,"click",4,"ngIf"],["class","summary",4,"ngIf"],["class","stats",4,"ngIf"],[1,"summary"],[1,"stats-summary"],[1,"damages"],[1,"cell"],[1,"value",3,"matTooltip"],["src","assets/img/icon/stat/physical.png"],["src","assets/img/icon/stat/magical.png"],[1,"ressources"],["src","assets/img/icon/stat/life.png"],["src","assets/img/icon/stat/mana.png"],[1,"defenses"],["src","assets/img/icon/stat/armor.png"],["src","assets/img/icon/stat/elemental_resistance.png"],["src","assets/img/icon/stat/dodge.png"],[1,"skill-info"],[1,"skill-line"],[1,"skill"],[3,"readonly","skill","support"],[1,"upgrades"],["class","upgrade",4,"ngFor","ngForOf"],[3,"readonly","skill"],[1,"activables-ancestral-legacies"],[1,"activables"],[1,"slots"],[1,"slot"],[3,"activable","readonly"],[1,"ancestral-legacies"],["class","slot",4,"ngFor","ngForOf"],[1,"attributes"],[4,"ngFor","ngForOf"],[1,"upgrade"],[3,"upgrade","readonly","overlay","equipped","selected"],[3,"ancestralLegacy","readonly","overlay"],[3,"short","readonly","iconShift","attribute","remainingPoints",4,"ngIf"],[3,"short","readonly","iconShift","attribute","remainingPoints"],[1,"stats"],[3,"stats"]],template:function(n,t){1&n&&(e.TgZ(0,"main")(1,"mat-card",0)(2,"mat-card-content")(3,"h3"),e._uU(4),e.qZA(),e._UZ(5,"app-character-equipment",1)(6,"hr"),e.TgZ(7,"div",2),e._UZ(8,"app-reaper-slot",3),e.qZA()(),e.TgZ(9,"mat-card-actions")(10,"mat-checkbox",4),e._uU(11,"Activate combat buffs"),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){return t.import()}),e._uU(13,"Import"),e.qZA(),e.YNc(14,Dl,2,0,"button",6),e.YNc(15,jl,2,0,"button",6),e.qZA()(),e.YNc(16,ec,78,34,"mat-card",7),e.YNc(17,tc,3,1,"mat-card",8),e.qZA()),2&n&&(e.xp6(4),e.Oqu(t.character.fullName),e.xp6(1),e.Q6J("character",t.character)("readonly",!0),e.xp6(3),e.Q6J("readonly",!0)("character",t.character),e.xp6(2),e.Q6J("formControl",t.combatBuffControl),e.xp6(4),e.Q6J("ngIf",t.showSummary),e.xp6(1),e.Q6J("ngIf",!t.showSummary),e.xp6(1),e.Q6J("ngIf",t.showSummary),e.xp6(1),e.Q6J("ngIf",!t.showSummary))},directives:[N.a8,N.dn,ut,dt,N.hq,we.oG,u.JJ,u.oH,E.lW,_.O5,z.gM,pt,_.sg,ht,_t,at,it,Fe],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{min-width:490px;max-width:490px;width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;margin:20px;padding:20px;background-color:#161412;border:3px solid #3c3c3c}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:auto}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:400}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;font-size:large}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;flex-grow:1;flex-basis:0;border-radius:16px;border:4px solid black;background-color:#202020;height:56px;padding:8px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;text-align:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;min-height:60px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{width:80px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]{flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%]{padding:4px;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px;display:block;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{min-height:60px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%]{float:left}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:725px;padding-right:16px;overflow:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:auto}}"]}),a}(),bt=function(){var a=function(){function l(n,t,o){(0,p.Z)(this,l),this.importExportService=n,this.messageService=t,this.router=o}return(0,g.Z)(l,[{key:"back",value:function(){this.router.navigateByUrl("/")}},{key:"resolve",value:function(t){var o=this;return new Promise(function(i){var r=(0,O.lA)(t.params.key);if(null!==r){var c=o.importExportService.import(r);null!==c.character?i(c.character):(o.messageService.error("Failed to load shared character"),o.back())}else o.back()})}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(Se),e.LFG(oe.e),e.LFG(Y.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a}(),ac=[{path:"build/:key",component:nc,resolve:{character:bt}}],ic=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[bt],imports:[[Y.Bz.forChild(ac)],Y.Bz]}),a}(),yt=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[],imports:[[_.ez,ke,ic,F.U8]]}),a}(),Ot=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.buildStorageService=n,this.router=t}return(0,g.Z)(l,[{key:"canActivate",value:function(){return 0!==this.buildStorageService.getBuilds().length||(this.router.navigate(["slorm-planner","create"]),!1)}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(A),e.LFG(Y.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a}(),Pt=function(){var a=function(){function l(n,t){(0,p.Z)(this,l),this.buildStorageService=n,this.router=t}return(0,g.Z)(l,[{key:"canActivate",value:function(){return!(this.buildStorageService.getBuilds().length>0&&(this.router.navigate(["slorm-planner","build"]),1))}}]),l}();return a.\u0275fac=function(n){return new(n||a)(e.LFG(A),e.LFG(Y.F0))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac}),a}(),oc=[{path:"build",canActivate:[Ot],loadChildren:function(){return Ct}},{path:"view",loadChildren:function(){return yt}},{path:"create",canActivate:[Pt],loadChildren:function(){return Mt}},{path:"**",pathMatch:"full",redirectTo:"build"}],rc=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({providers:[Ot,Pt],imports:[[Y.Bz.forChild(oc)],Y.Bz]}),a}(),lc=function(){var a=(0,g.Z)(function l(){(0,p.Z)(this,l)});return a.\u0275fac=function(n){return new(n||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[_.ez,ke,rc,Ct,yt,Mt]]}),a}()}}]);