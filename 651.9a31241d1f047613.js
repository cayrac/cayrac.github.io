"use strict";(self.webpackChunkproject=self.webpackChunkproject||[]).push([[651],{6651:(zr,ee,h)=>{h.r(ee),h.d(ee,{SlormPlannerModule:()=>Xr});var d=h(9808),H=h(2271),k=h(1083),O=h(6446),j=h(1135),l=h(3359),Ze=h(7579),Ie=h(8372),Q=h(2340),e=h(5e3);let te=(()=>{class i{constructor(t,n,a,r,c,m,u,g){this.slormancerDataService=t,this.slormancerCharacterBuilderService=n,this.slormancerItemService=a,this.slormancerLegendaryService=r,this.slormancerAffixService=c,this.slormancerReaperService=m,this.slormancerRunesService=u,this.slormancerUltimatumService=g,this.RARITY_MAPPING=[{rarity:l.uqS.Normal,mapping:0},{rarity:l.uqS.Magic,mapping:1},{rarity:l.uqS.Rare,mapping:2},{rarity:l.uqS.Epic,mapping:3},{rarity:l.uqS.Legendary,mapping:4}],this.STAT_MAPPING={},this.REVERSE_STAT_MAPPING={};for(const f of t.getGameDataStats())this.STAT_MAPPING[f.REF_NB]=f.REF,this.REVERSE_STAT_MAPPING[f.REF]=f.REF_NB}rarityToNumber(t){const n=this.RARITY_MAPPING.find(a=>a.rarity===t);return n?n.mapping:0}numberToRarity(t){const n=this.RARITY_MAPPING.find(a=>a.mapping===t);return n?n.rarity:l.uqS.Normal}itemToJson(t,n){return null===t?null:{base:n?t.base:null,level:t.level,reinforcment:t.reinforcment,affixes:t.affixes.map(a=>({rarity:this.rarityToNumber(a.rarity),pure:100===a.pure?0:a.pure,stat:(0,l.BeF)(this.REVERSE_STAT_MAPPING[a.craftedEffect.effect.stat],0),craftedValue:a.craftedEffect.craftedValue})),legendaryEffect:null===t.legendaryEffect?null:{craftedValue:t.legendaryEffect.value,id:t.legendaryEffect.id},reaperEnchantment:null===t.reaperEnchantment?null:{craftedValue:t.reaperEnchantment.craftedValue,reaperSmith:t.reaperEnchantment.craftedReaperSmith},skillEnchantment:null===t.skillEnchantment?null:{craftedValue:t.skillEnchantment.craftedValue,skill:t.skillEnchantment.craftedSkill},attributeEnchantment:null===t.attributeEnchantment?null:{craftedValue:t.attributeEnchantment.craftedValue,attribute:t.attributeEnchantment.craftedAttribute}}}ancestralLegacyToJson(t){return{id:t.id,rank:t.baseRank}}reaperToJson(t){return{id:t.id,level:t.baseInfo.level,affinity:t.baseAffinity,primordialLevel:t.primordialInfo.level,kills:t.baseInfo.kills,primordialKills:t.primordialInfo.kills,primordial:t.primordial?1:0}}runesToJson(t){return{activationId:null===t.activation?null:t.activation.id,activationLevel:null===t.activation?0:t.activation.level,effectId:null===t.effect?null:t.effect.id,effectLevel:null===t.effect?0:t.effect.level,enhancementId:null===t.enhancement?null:t.enhancement.id,enhancementLevel:null===t.enhancement?0:t.enhancement.level}}jsonToRunes(t,n,a){let r={activation:null,effect:null,enhancement:null};return void 0!==t&&(null!==t.activationId&&(r.activation=this.slormancerRunesService.getRuneById(t.activationId,n,t.activationLevel,a)),null!==t.effectId&&(r.effect=this.slormancerRunesService.getRuneById(t.effectId,n,t.effectLevel,a)),null!==t.enhancementId&&(r.enhancement=this.slormancerRunesService.getRuneById(t.enhancementId,n,t.enhancementLevel,a))),r}ultimatumToJson(t){let n=null;return null!==t&&(n={level:t.level,type:t.type}),n}skillToJson(t,n=!1){return{id:t.skill.id,rank:t.skill.baseLevel,upgrades:t.upgrades.map(a=>({id:a.id,rank:a.baseRank,selected:-1!==t.selectedUpgrades.indexOf(a.id)?1:0})).filter(a=>!n||a.selected)}}getActivableId(t){let n=null;return null!==t&&(n="isActivable"in t?t.id:200+t.id),n}characterToJson(t){return{type:"c",level:t.level,version:t.version,originalVersion:t.originalVersion,heroClass:t.heroClass,gear:{helm:this.itemToJson(t.gear.helm,!1),body:this.itemToJson(t.gear.body,!1),shoulder:this.itemToJson(t.gear.shoulder,!1),bracer:this.itemToJson(t.gear.bracer,!1),glove:this.itemToJson(t.gear.glove,!1),boot:this.itemToJson(t.gear.boot,!1),ring_l:this.itemToJson(t.gear.ring_l,!1),ring_r:this.itemToJson(t.gear.ring_r,!1),amulet:this.itemToJson(t.gear.amulet,!1),belt:this.itemToJson(t.gear.belt,!1),cape:this.itemToJson(t.gear.cape,!1)},inventory:t.inventory.map(n=>this.itemToJson(n,!0)),sharedInventory:t.sharedInventory.map(n=>n.map(a=>this.itemToJson(a,!0))),ultimatum:this.ultimatumToJson(t.ultimatum),ancestralLegacies:{ancestralLegacies:t.ancestralLegacies.ancestralLegacies.map(n=>this.ancestralLegacyToJson(n)),nodes:t.ancestralLegacies.activeNodes},reaper:this.reaperToJson(t.reaper),runes:this.runesToJson(t.runes),skills:t.skills.map(n=>this.skillToJson(n)),attributes:{[l.ahi.Toughness]:t.attributes.allocated[l.ahi.Toughness].baseRank,[l.ahi.Savagery]:t.attributes.allocated[l.ahi.Savagery].baseRank,[l.ahi.Fury]:t.attributes.allocated[l.ahi.Fury].baseRank,[l.ahi.Determination]:t.attributes.allocated[l.ahi.Determination].baseRank,[l.ahi.Zeal]:t.attributes.allocated[l.ahi.Zeal].baseRank,[l.ahi.Willpower]:t.attributes.allocated[l.ahi.Willpower].baseRank,[l.ahi.Dexterity]:t.attributes.allocated[l.ahi.Dexterity].baseRank,[l.ahi.Bravery]:t.attributes.allocated[l.ahi.Bravery].baseRank},support:null===t.supportSkill?null:t.supportSkill.id,primary:null===t.primarySkill?null:t.primarySkill.id,secondary:null===t.secondarySkill?null:t.secondarySkill.id,activable1:this.getActivableId(t.activable1),activable2:this.getActivableId(t.activable2),activable3:this.getActivableId(t.activable3),activable4:this.getActivableId(t.activable4)}}characterToMinimalJson(t){return{type:"c",level:t.level,version:t.version,originalVersion:t.originalVersion,heroClass:t.heroClass,gear:{helm:this.itemToJson(t.gear.helm,!1),body:this.itemToJson(t.gear.body,!1),shoulder:this.itemToJson(t.gear.shoulder,!1),bracer:this.itemToJson(t.gear.bracer,!1),glove:this.itemToJson(t.gear.glove,!1),boot:this.itemToJson(t.gear.boot,!1),ring_l:this.itemToJson(t.gear.ring_l,!1),ring_r:this.itemToJson(t.gear.ring_r,!1),amulet:this.itemToJson(t.gear.amulet,!1),belt:this.itemToJson(t.gear.belt,!1),cape:this.itemToJson(t.gear.cape,!1)},inventory:null,sharedInventory:null,ultimatum:this.ultimatumToJson(t.ultimatum),ancestralLegacies:{ancestralLegacies:t.ancestralLegacies.ancestralLegacies.filter(n=>-1!==t.ancestralLegacies.activeAncestralLegacies.indexOf(n.id)).map(n=>this.ancestralLegacyToJson(n)),nodes:t.ancestralLegacies.activeNodes},reaper:this.reaperToJson(t.reaper),runes:this.runesToJson(t.runes),skills:t.skills.filter(n=>n.skill===t.supportSkill||n.skill===t.primarySkill||n.skill===t.secondarySkill).map(n=>this.skillToJson(n,!0)),attributes:{[l.ahi.Toughness]:t.attributes.allocated[l.ahi.Toughness].baseRank,[l.ahi.Savagery]:t.attributes.allocated[l.ahi.Savagery].baseRank,[l.ahi.Fury]:t.attributes.allocated[l.ahi.Fury].baseRank,[l.ahi.Determination]:t.attributes.allocated[l.ahi.Determination].baseRank,[l.ahi.Zeal]:t.attributes.allocated[l.ahi.Zeal].baseRank,[l.ahi.Willpower]:t.attributes.allocated[l.ahi.Willpower].baseRank,[l.ahi.Dexterity]:t.attributes.allocated[l.ahi.Dexterity].baseRank,[l.ahi.Bravery]:t.attributes.allocated[l.ahi.Bravery].baseRank},support:null===t.supportSkill?null:t.supportSkill.id,primary:null===t.primarySkill?null:t.primarySkill.id,secondary:null===t.secondarySkill?null:t.secondarySkill.id,activable1:this.getActivableId(t.activable1),activable2:this.getActivableId(t.activable2),activable3:this.getActivableId(t.activable3),activable4:this.getActivableId(t.activable4)}}layerToJson(t){return{type:"l",character:this.characterToJson(t.character),name:t.name}}buildToJson(t){return{type:"p",version:t.version,heroClass:t.heroClass,name:t.name,layers:t.layers.map(n=>this.layerToJson(n)),configuration:Object.assign({},t.configuration)}}jsonToItem(t,n,a=null){let r=null;if(null!==t){const c=t.affixes.map(S=>this.slormancerAffixService.getAffixFromStat(this.STAT_MAPPING[S.stat],t.level,t.reinforcment,this.numberToRarity(S.rarity),S.craftedValue,S.pure)).filter(l.BXh);let m=a;null===m&&(m=null===t.base?l.JNB.Amulet:t.base);let u=null===t.legendaryEffect?null:this.slormancerLegendaryService.getLegendaryEffectById(t.legendaryEffect.id,t.legendaryEffect.craftedValue,t.reinforcment,n),g=null===t.reaperEnchantment?null:this.slormancerItemService.getReaperEnchantment(t.reaperEnchantment.reaperSmith,t.reaperEnchantment.craftedValue),f=null===t.skillEnchantment?null:this.slormancerItemService.getSkillEnchantment(t.skillEnchantment.skill,t.skillEnchantment.craftedValue),v=null===t.attributeEnchantment?null:this.slormancerItemService.getAttributeEnchantment(t.attributeEnchantment.attribute,t.attributeEnchantment.craftedValue);r=this.slormancerItemService.getEquipableItem(m,n,t.level,c,t.reinforcment,u,g,f,v)}return r}normalizeJsonCharacter(t){"0.2.152"===t.version&&(t.originalVersion=t.version,t.ultimatum=null),(0,l.n4)(t.version,"0.2.0")<0&&(t.reaper.affinity=l.DxO)}jsonToCharacter(t){this.normalizeJsonCharacter(t);const n=this.slormancerReaperService.getReaperById(t.reaper.id,t.heroClass,1===t.reaper.primordial,t.reaper.level,0,t.reaper.primordialLevel,t.reaper.kills,t.reaper.primordialKills,t.reaper.affinity),a=null===t.ultimatum?null:this.slormancerUltimatumService.getUltimatum(t.ultimatum.type,t.ultimatum.level),r=this.slormancerDataService.getGameDataAncestralLegacyIds().map((g,f)=>t.ancestralLegacies.ancestralLegacies.find(v=>v.id===f)).map(g=>g?g.rank:0),c=this.slormancerDataService.getGameDataSkills(t.heroClass).map((g,f)=>{let v=0;const S=t.skills.find(w=>w.id===f);if(S)v=(0,l.NMM)(S.rank);else{const w=t.skills.map(W=>W.upgrades).flat().find(W=>W.id===f);w&&(v=w.rank)}return v}),m=this.slormancerDataService.getGameDataSkills(t.heroClass).map((g,f)=>{const v=t.skills.map(S=>S.upgrades).flat().find(S=>S.id===f);return v?v.selected:0});return this.slormancerCharacterBuilderService.getCharacter(t.heroClass,t.level,t.version,t.originalVersion,null,n,this.jsonToRunes(t.runes,t.heroClass,null===n?null:n.id),a,t.ancestralLegacies.nodes,r,m,c,this.jsonToItem(t.gear.helm,t.heroClass,l.JNB.Helm),this.jsonToItem(t.gear.body,t.heroClass,l.JNB.Body),this.jsonToItem(t.gear.shoulder,t.heroClass,l.JNB.Shoulder),this.jsonToItem(t.gear.bracer,t.heroClass,l.JNB.Bracer),this.jsonToItem(t.gear.glove,t.heroClass,l.JNB.Glove),this.jsonToItem(t.gear.boot,t.heroClass,l.JNB.Boot),this.jsonToItem(t.gear.ring_l,t.heroClass,l.JNB.Ring),this.jsonToItem(t.gear.ring_r,t.heroClass,l.JNB.Ring),this.jsonToItem(t.gear.amulet,t.heroClass,l.JNB.Amulet),this.jsonToItem(t.gear.belt,t.heroClass,l.JNB.Belt),this.jsonToItem(t.gear.cape,t.heroClass,l.JNB.Cape),null===t.inventory?null:t.inventory.map(g=>this.jsonToItem(g,t.heroClass,null)),null===t.sharedInventory?null:t.sharedInventory.map(g=>g.map(f=>this.jsonToItem(f,t.heroClass,null))),t.attributes[l.ahi.Toughness],t.attributes[l.ahi.Savagery],t.attributes[l.ahi.Fury],t.attributes[l.ahi.Determination],t.attributes[l.ahi.Zeal],t.attributes[l.ahi.Willpower],t.attributes[l.ahi.Dexterity],t.attributes[l.ahi.Bravery],t.primary,t.secondary,t.support,t.activable1,t.activable2,t.activable3,t.activable4)}jsonToLayer(t){return{name:t.name,character:this.jsonToCharacter(t.character)}}jsonToBuild(t){return{version:t.version,heroClass:t.heroClass,name:t.name?t.name:"Default name",layers:t.layers.map(n=>this.jsonToLayer(n)),configuration:Object.assign({},t.configuration)}}jsonToSharedData(t){return{character:"c"===t.type?this.jsonToCharacter(t):null,layer:"l"===t.type?this.jsonToLayer(t):null,planner:"p"===t.type?this.jsonToBuild(t):null}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(l.ogB),e.LFG(l.oYj),e.LFG(l.SgH),e.LFG(l.ArO),e.LFG(l.lRX),e.LFG(l.IxD),e.LFG(l._VP),e.LFG(l.hrN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ee=(()=>{class i{constructor(){this.CHANGES=[{version:"0.0.2",update:t=>{t.configuration.frostbolt_shot_recently=0,t.configuration.has_elemental_prowess_buff=!1,t.configuration.has_splash_splash_buff=!1,t.configuration.has_booster_max_buff=!1,t.version="0.0.2"}},{version:"0.0.4",update:t=>{t.configuration.use_enemy_state=!1,t.version="0.0.4"}},{version:"0.0.8",update:t=>{t.version="0.0.8";for(const n of t.layers)n.character.originalVersion=n.character.version,n.character.version=l.veS;t.configuration.has_electrify_buff=!1,t.configuration.elemental_spirit_stacks=0,t.configuration.is_channeling_focus=!1}},{version:"0.0.9",update:t=>{t.version="0.0.9";for(const n of t.layers)n.character.version=l.veS}},{version:"0.0.10",update:t=>{t.version="0.0.10"}},{version:"0.0.11",update:t=>{t.version="0.0.11",t.name="New build"}},{version:"0.0.12",update:t=>{t.version="0.0.12";for(const n of t.layers)n.character.importVersion=null}},{version:"0.1.0",update:t=>{t.version="0.1.0",void 0===t.configuration.concentration_buff&&(t.configuration.concentration_buff=!1),void 0===t.configuration.summoned_skeleton_squires&&(t.configuration.summoned_skeleton_squires=0),void 0===t.configuration.always_summon_maximum_skeleton_squires&&(t.configuration.always_summon_maximum_skeleton_squires=!1),void 0===t.configuration.minimum_unreserved_mana&&(t.configuration.minimum_unreserved_mana=0),void 0===t.configuration.fulgurorn_dedication_stacks&&(t.configuration.fulgurorn_dedication_stacks=0),void 0===t.configuration.enemy_inner_weakness_stacks&&(t.configuration.enemy_inner_weakness_stacks=0),void 0===t.configuration.add_totem_tag_to_prime_totem_skills&&(t.configuration.add_totem_tag_to_prime_totem_skills=!1),void 0===t.configuration.highest_slorm_temple_floor&&(t.configuration.highest_slorm_temple_floor=0),void 0===t.configuration.show_temple_keeper_as_totem&&(t.configuration.show_temple_keeper_as_totem=!1),void 0===t.configuration.ultima_momentum_buff&&(t.configuration.ultima_momentum_buff=!1),void 0===t.configuration.elder_slorms&&(t.configuration.elder_slorms=0),void 0===t.configuration.show_elder_inner_fire_damage&&(t.configuration.show_elder_inner_fire_damage=!1),void 0===t.configuration.exposed_armor_buff&&(t.configuration.exposed_armor_buff=!1),void 0===t.configuration.apex_predator_stacks&&(t.configuration.apex_predator_stacks=0),void 0===t.configuration.enemy_enfeeble_stacks&&(t.configuration.enemy_enfeeble_stacks=0),void 0===t.configuration.enfeeble_stacks_in_radius&&(t.configuration.enfeeble_stacks_in_radius=0),"all_characters_level"in t.configuration&&(t.configuration.all_characters_level=void 0,t.configuration.all_other_characters_level=100)}},{version:"0.1.1",update:t=>{t.version="0.1.1"}},{version:"0.1.2",update:t=>{t.version="0.1.2",void 0===t.configuration.chilled_enemy_nearby&&(t.configuration.chilled_enemy_nearby=l.g5j.chilled_enemy_nearby),void 0===t.configuration.in_combat&&(t.configuration.in_combat=l.g5j.in_combat)}},{version:"0.1.3",update:t=>{t.version="0.1.3"}},{version:"0.1.4",update:t=>{t.version="0.1.4"}},{version:"0.1.5",update:t=>{t.version="0.1.5"}},{version:"0.2.0",update:t=>{t.version="0.2.0";for(const n of t.layers)n.character.reaper.baseAffinity=l.DxO,n.character.reaper.bonusAffinity=0,n.character.runes={effect:null,enhancement:null,activation:null};void 0===t.configuration.is_rune_active&&(t.configuration.is_rune_active=!1),void 0===t.configuration.effect_rune_affinity&&(t.configuration.effect_rune_affinity=100),void 0===t.configuration.effective_rune_stacks&&(t.configuration.effective_rune_stacks=225)}},{version:"0.2.1",update:t=>{t.version="0.2.1"}},{version:"0.2.2",update:t=>{t.version="0.2.2"}},{version:"0.2.3",update:t=>{t.version="0.2.3"}},{version:"0.2.5",update:t=>{t.version="0.2.5"}},{version:"0.2.5.1",update:t=>{t.version="0.2.5.1"}},{version:"0.2.5.2",update:t=>{t.version="0.2.5.2"}},{version:"0.3.0",update:t=>{t.version="0.3.0",t.configuration.has_living_inferno_buff=!1,t.configuration.has_shadow_shield_buff=!1,t.configuration.has_shadow_bargain_buff=!1,t.configuration.has_flawless_defense_buff=!1,t.configuration.aurelon_bargain_stacks=0,t.configuration.cleansing_surge_stacks=0,t.configuration.overcharged_stacks=0,t.configuration.has_frostfire_buff=!1,t.configuration.target_is_burning=!1,100===t.configuration.all_other_characters_level&&(t.configuration.all_other_characters_level=140)}},{version:"0.3.1",update:t=>{t.version="0.3.1"}},{version:"0.4.0",update:t=>{t.version="0.4.0",t.configuration.has_ancestral_instability_buff=!1,t.configuration.ancestral_instability_buff_duration=0,t.configuration.target_negative_effects=0,t.configuration.efficiency_buff=!1,t.configuration.has_avatar_of_shadow_buff=!1,t.configuration.highest_same_type_reaper_level=100}},{version:"0.4.1",update:t=>{t.version="0.4.1"}},{version:"0.4.2",update:t=>{t.version="0.4.2"}}]}updateToLatestVersion(t){void 0===t.version&&(t.version="0.0.1",t.configuration=l.g5j);for(let n of this.CHANGES)(0,l.n4)(n.version,t.version)>0&&n.update(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),C=(()=>{class i{constructor(t,n,a){this.jsonConverterService=t,this.buildRetrocompatibilityService=n,this.slormancerCharacterUpdaterService=a,this.MAX_LAYERS=10,this.BUILDS_STORAGE_KEY="builds",this.CURRENT_BUILD_STORAGE_KEY="current-build",this.CURRENT_LAYER_STORAGE_KEY="current-layer",this.builds=[],this.build=null,this.layer=null,this.buildChanged=new j.X(null),this.layerChanged=new j.X(null),this.saveTrigger=new Ze.x,this.reload(),this.oldFormatTransition(),this.saveTrigger.pipe((0,Ie.b)(500)).subscribe(()=>this.saveToStorage())}getCurrentLayerIndex(){const t=localStorage.getItem(this.CURRENT_LAYER_STORAGE_KEY),n=null===t?0:parseInt(t,10);return Number.isNaN(n)?0:n}oldFormatTransition(){const t="slorm-planner-build",n=localStorage.getItem(t);if(null!==n&&0===this.builds.length){const a=this.jsonConverterService.jsonToBuild(JSON.parse(n));this.addBuild(a),localStorage.removeItem(t),this.saveToStorage()}}reload(){this.builds=[],this.build=null,this.layer=null;try{const t=localStorage.getItem(this.BUILDS_STORAGE_KEY),n=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY),a=this.getCurrentLayerIndex();if(null!==t&&(this.builds=JSON.parse(t)),null!==n){const r=localStorage.getItem(n);null!==r&&(this.build=this.jsonConverterService.jsonToBuild(JSON.parse(r)),this.buildRetrocompatibilityService.updateToLatestVersion(this.build))}if(null!==this.build){let r=(0,l.BeF)(this.build.layers[a],this.build.layers[0]);void 0!==r&&(this.layer=r);for(const c of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(c.character,this.build.configuration)}}catch(t){console.error("Failed to reload build : ",t)}this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}saveToStorage(){localStorage.setItem(this.BUILDS_STORAGE_KEY,JSON.stringify(this.builds));const t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==t&&null!==this.build){localStorage.setItem(t,JSON.stringify(this.jsonConverterService.buildToJson(this.build)));let n=0;null!==this.layer&&(n=this.build.layers.indexOf(this.layer)),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,n<0?"0":n.toString())}}saveBuild(){if(null!==this.build){for(const n of this.build.layers)this.slormancerCharacterUpdaterService.updateCharacter(n.character,this.build.configuration);const t=this.getBuildPreview();if(null!==t&&(t.name=this.build.name),null!==this.build){let n=this.getCurrentLayerIndex();const a=null===this.layer?-1:this.build.layers.indexOf(this.layer);n=-1!==a?a:Math.min(n,this.build.layers.length-1),this.layer=(0,l.lA$)(this.build.layers[n])}this.saveTrigger.next(),this.buildChanged.next(this.build),this.layerChanged.next(this.layer)}}saveLayer(){null!==this.build&&null!==this.layer&&(this.slormancerCharacterUpdaterService.updateCharacter(this.layer.character,this.build.configuration),this.saveTrigger.next())}loadBuild(t){localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,t.storageKey),localStorage.setItem(this.CURRENT_LAYER_STORAGE_KEY,"0"),this.reload()}deleteBuild(){const t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);if(null!==t){const n=this.builds.findIndex(a=>a.storageKey===t);if(-1!==n){this.builds.splice(n,1),localStorage.removeItem(t),localStorage.removeItem(this.CURRENT_BUILD_STORAGE_KEY),this.saveToStorage();const a=Math.min(n,this.builds.length-1),r=this.builds[a];r?this.loadBuild(r):this.reload()}}}loadLayer(t){null!==this.build&&-1!==this.build.layers.indexOf(t)&&(this.layer=t,this.saveBuild())}addBuild(t){null!==t&&this.buildRetrocompatibilityService.updateToLatestVersion(t);const n={heroClass:t.heroClass,name:t.name,storageKey:"build-"+(new Date).getTime(),version:Q.N.version};this.builds.push(n),this.build=t,this.layer=(0,l.BeF)(t.layers[0],null),localStorage.setItem(this.CURRENT_BUILD_STORAGE_KEY,n.storageKey),this.saveBuild()}getBuilds(){return this.builds}getBuild(){return this.build}getBuildPreview(){const t=localStorage.getItem(this.CURRENT_BUILD_STORAGE_KEY);return(0,l.lA$)(this.builds.find(n=>n.storageKey===t))}getLayer(){return this.layer}hasRoomForAnotherLayer(t=null){return null===this.build||this.build.layers.length<this.MAX_LAYERS&&(null===t||this.build.heroClass===t.heroClass)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(te),e.LFG(Ee),e.LFG(l.Pdp))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),N=(()=>{class i{constructor(t){this.buildStorageService=t,this.draggingItem=new j.X(!1),this.dragCount=0,this.item=null,this.requiredBase=null,this.callback=null}hold(t,n,a=null){this.dragCount=0,this.item=t,this.requiredBase=n,this.callback=a}startDragging(){this.draggingItem.getValue()||(this.dragCount++,null!==this.item&&this.dragCount>5&&this.draggingItem.next(!0))}isDragItemCompatible(t,n){return!(null!==t&&null!==this.requiredBase&&t.base!==this.requiredBase||null===this.item||null!==n&&this.item.base!==n)}isHoldItem(t){return t===this.item&&null!==t}getHoldItem(){return this.item}releaseHoldItem(){this.item=null,this.requiredBase=null,this.callback=null,this.draggingItem.next(!1)}swap(t,n,a){const r=this.item,c=this.callback,m=this.isDragItemCompatible(t,n);this.releaseHoldItem(),t!==r&&(m?(c&&c(!0,t),a&&a(!0,r)):(c&&c(!1,null),a&&a(!1,null)))}moveDraggedItemToItemGroup(t){const n=this.item,a=this.callback,r=t.indexOf(null),c=t.indexOf(n);if(this.releaseHoldItem(),-1!==r||-1!==c){a&&a(!0,null);const m=Math.min(...[r,c].filter(u=>-1!==u));t.splice(m,1,n)}else a&&a(!1,null)}equip(t,n){const a=this.buildStorageService.getLayer();if(null!==a&&null!==a.character){const r=t.base;switch(this.hold(t,r,n),r){case l.JNB.Amulet:this.swap(a.character.gear.amulet,r,(c,m)=>c?a.character.gear.amulet=m:null);break;case l.JNB.Belt:this.swap(a.character.gear.belt,r,(c,m)=>c?a.character.gear.belt=m:null);break;case l.JNB.Body:this.swap(a.character.gear.body,r,(c,m)=>c?a.character.gear.body=m:null);break;case l.JNB.Boot:this.swap(a.character.gear.boot,r,(c,m)=>c?a.character.gear.boot=m:null);break;case l.JNB.Bracer:this.swap(a.character.gear.bracer,r,(c,m)=>c?a.character.gear.bracer=m:null);break;case l.JNB.Cape:this.swap(a.character.gear.cape,r,(c,m)=>c?a.character.gear.cape=m:null);break;case l.JNB.Glove:this.swap(a.character.gear.glove,r,(c,m)=>c?a.character.gear.glove=m:null);break;case l.JNB.Helm:this.swap(a.character.gear.helm,r,(c,m)=>c?a.character.gear.helm=m:null);break;case l.JNB.Shoulder:this.swap(a.character.gear.shoulder,r,(c,m)=>c?a.character.gear.shoulder=m:null);break;case l.JNB.Ring:null===a.character.gear.ring_r?this.swap(a.character.gear.ring_r,r,(c,m)=>c?a.character.gear.ring_r=m:null):this.swap(a.character.gear.ring_l,r,(c,m)=>c?a.character.gear.ring_l=m:null)}}}moveToStash(t,n){const a=this.buildStorageService.getLayer();if(null!==a&&null!==a.character){const r=[a.character.inventory,...a.character.sharedInventory].filter(c=>void 0!==c.find(m=>null===m))[0];r&&(this.hold(t,null,n),this.moveDraggedItemToItemGroup(r))}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var M=h(2722),B=h(3251),T=h(5245),K=h(2638),s=h(3075),p=h(2349),b=h(7423);let Le=(()=>{class i{constructor(t){this.name=t.name}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-delete-layer-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a layer"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" You're about to delete layer ",n.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[b.lW,p.ZT,p.uh,p.xY,p.H8]}),i})();var _=h(7322),A=h(7531);function qe(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Layer name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A layer name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}let Y=(()=>{class i{constructor(t,n){this.dialog=t,this.title=n.title,this.form=new s.cw({name:new s.NI(n.name,s.kI.required)})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-layer-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,qe,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,b.lW,p.ZT,p.uh,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),i})(),U=(()=>{class i{constructor(t){this.slormancerCharacterBuilderService=t}createBuild(t,n){return{version:Q.N.version,name:n,heroClass:t,layers:[],configuration:l.g5j}}createBuildWithCharacter(t,n,a){const r={version:Q.N.version,name:t,heroClass:a.heroClass,layers:[],configuration:l.g5j},c=this.slormancerCharacterBuilderService.getCharacterClone(a);return c.importVersion=null,c.fromCorrupted=!1,this.addLayer(r,n,c),r}addLayer(t,n,a=null){const r={name:n,character:null!==a?a:this.slormancerCharacterBuilderService.getCharacter(t.heroClass)};return t.layers.push(r),r}duplicateLayer(t,n,a){return this.addLayer(t,a,this.slormancerCharacterBuilderService.getCharacterClone(n.character))}deleteLayer(t,n){const a=t.layers.indexOf(n);-1!==a&&t.layers.splice(a,1)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(l.oYj))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ne=h(9300),q=h(2424),y=h(9224),Z=h(4102),I=h(508),E=h(7238);function Je(i,o){if(1&i&&(e.TgZ(0,"mat-option",12),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.hij(" ",t.label," ")}}function Ne(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-icon",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeSearch())}),e._uU(1,"close"),e.qZA()}}let Ue=(()=>{class i extends O.B{constructor(t,n,a,r){super(),this.buildStorageService=t,this.buildService=n,this.searchService=a,this.dialog=r,this.searchControl=new s.NI(""),this.layerControl=new s.NI(null),this.layerOptions=[]}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.layerControl.setValue(t,{emitEvent:!1})),this.buildStorageService.buildChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.layerOptions=null===t?[]:t.layers.map(n=>({label:n.name,value:n}))}),this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.searchControl.setValue(t,{emitEvent:!1})),this.layerControl.setValue(this.buildStorageService.getLayer(),{emitEvent:!1}),this.layerControl.valueChanges.pipe((0,ne.h)(l.BXh)).subscribe(t=>this.buildStorageService.loadLayer(t)),this.searchControl.valueChanges.subscribe(t=>this.searchService.setSearch(t))}hasSearch(){return this.searchService.hasSearch()}removeSearch(){this.searchService.setSearch(null)}editLayer(){const t=this.buildStorageService.getLayer();null!==t&&this.dialog.open(Y,{data:{title:"Edit layer name",name:t.name}}).afterClosed().subscribe(a=>{a&&(t.name=a,this.buildStorageService.saveLayer())})}addLayer(){this.dialog.open(Y,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(n=>{const a=this.buildStorageService.getBuild();if(n&&null!==a){const r=this.buildService.addLayer(a,n);this.buildStorageService.loadLayer(r)}})}duplicateLayer(){this.dialog.open(Y,{data:{title:"New layer name",name:null}}).afterClosed().subscribe(n=>{const a=this.buildStorageService.getBuild(),r=this.buildStorageService.getLayer();if(n&&null!==a&&null!==r){const c=this.buildService.duplicateLayer(a,r,n);this.buildStorageService.loadLayer(c)}})}removeLayer(){const t=this.buildStorageService.getLayer(),n=this.buildStorageService.getBuild();null!==t&&this.dialog.open(Le,{data:{name:t.name}}).afterClosed().subscribe(r=>{r&&null!==n&&(this.buildService.deleteLayer(n,t),this.buildStorageService.saveBuild())})}hasRoomForMoreLayer(){return this.buildStorageService.hasRoomForAnotherLayer()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(U),e.Y36(q.o),e.Y36(p.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-build-header"]],features:[e.qOj],decls:27,vars:7,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"layer"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit layer name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Add new layer",3,"disabled","click"],["mat-icon-button","","color","primary","matTooltip","Duplicate this layer",3,"disabled","click"],[1,"search"],["matInput","","type","text","autocomplete","off",3,"formControl"],["matSuffix","",3,"click",4,"ngIf"],[3,"value"],["matSuffix","",3,"click"]],template:function(t,n){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"mat-card")(2,"mat-card-content")(3,"div",1)(4,"mat-form-field",2)(5,"mat-label"),e._uU(6,"Current layer"),e.qZA(),e.TgZ(7,"mat-select",3),e.YNc(8,Je,2,2,"mat-option",4),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.editLayer()}),e.TgZ(10,"mat-icon"),e._uU(11,"edit"),e.qZA()(),e.TgZ(12,"button",6),e.NdJ("click",function(){return n.removeLayer()}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()(),e.TgZ(15,"button",7),e.NdJ("click",function(){return n.addLayer()}),e.TgZ(16,"mat-icon"),e._uU(17,"add"),e.qZA()(),e.TgZ(18,"button",8),e.NdJ("click",function(){return n.duplicateLayer()}),e.TgZ(19,"mat-icon"),e._uU(20,"content_copy"),e.qZA()()(),e.TgZ(21,"div",9)(22,"mat-form-field",2)(23,"mat-label"),e._uU(24,"Search"),e.qZA(),e._UZ(25,"input",10),e.YNc(26,Ne,2,0,"mat-icon",11),e.qZA()()()()),2&t&&(e.xp6(7),e.Q6J("formControl",n.layerControl),e.xp6(1),e.Q6J("ngForOf",n.layerOptions),e.xp6(4),e.Q6J("disabled",n.layerOptions.length<=1),e.xp6(3),e.Q6J("disabled",!n.hasRoomForMoreLayer()),e.xp6(3),e.Q6J("disabled",!n.hasRoomForMoreLayer()),e.xp6(7),e.Q6J("formControl",n.searchControl),e.xp6(1),e.Q6J("ngIf",n.hasSearch()))},dependencies:[d.sg,d.O5,b.lW,T.Hw,y.a8,y.dn,_.KE,_.hX,_.R9,A.Nt,Z.gD,I.ey,E.gM,s.Fj,s.JJ,s.oH],styles:["mat-card[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px;margin-bottom:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;padding:4px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:250px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .layer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),i})();var J=h(8223);let G=(()=>{class i{constructor(t,n,a,r){this.slormancerCharacterBuilderService=t,this.slormancerSaveParserService=n,this.slormancerShortDataService=a,this.jsonConverterService=r;const c=document.getElementsByTagName("base")[0];let m="/";if(void 0!==c){const u=c.getAttribute("href");null!==u&&(m=u)}this.VIEW_BUILD_PATH=window.origin+m+"slorm-planner/view/build/"}parseSaveData(t,n){const a=this.slormancerSaveParserService.parseSaveFile(t);return this.slormancerCharacterBuilderService.getCharacterFromSave(a,n)}parseUrlData(t){let n={character:null,layer:null,planner:null},a=null;try{const c=new URL(t).pathname.split("/");a=(0,l.lA$)(c[c.length-1])}catch(r){}return null!==a&&(n=this.importFromShortData(a)),n}parseJsonData(t){const n=JSON.parse(t);return this.jsonConverterService.jsonToSharedData(n)}import(t,n=null){let a={character:null,layer:null,planner:null};if(null!==n)try{return a.character=this.parseSaveData(t,n),a}catch(r){console.error("Error when parsing save file : ",r)}try{return a=this.parseJsonData(atob(t)),a}catch(r){}try{return a=this.parseJsonData(t),a}catch(r){}return a=this.importFromShortData(t),null===a.character&&(a=this.parseUrlData(t)),console.log("data parsed : ",a),a}exportCharacter(t){return btoa(JSON.stringify(this.jsonConverterService.characterToJson(t)))}exportLayer(t){return btoa(JSON.stringify(this.jsonConverterService.layerToJson(t)))}exportBuild(t){return btoa(JSON.stringify(this.jsonConverterService.buildToJson(t)))}exportCharacterAsLink(t){const n=this.slormancerShortDataService.characterToShortData(t);return this.VIEW_BUILD_PATH+n}importFromShortData(t){return{character:this.slormancerShortDataService.shortDataToCharacter(t),layer:null,planner:null}}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(l.oYj),e.LFG(l.XeX),e.LFG(l.qY3),e.LFG(te))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var ie=h(2763);function Re(i,o){if(1&i&&(e.TgZ(0,"mat-icon",5),e._uU(1,"help_outline"),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("matTooltip",t.help)}}function Be(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-icon"),e._uU(2,"file_upload"),e.qZA(),e._uU(3),e.YNc(4,Re,2,1,"mat-icon",4),e.BQk()),2&i){const t=e.oxw();e.xp6(3),e.hij("",t.label," "),e.xp6(1),e.Q6J("ngIf",null!==t.help)}}function Fe(i,o){1&i&&(e.ynx(0),e.TgZ(1,"mat-icon",6),e._uU(2,"sync"),e.qZA(),e._uU(3,"Uploading..."),e.BQk())}let ae=(()=>{class i{constructor(t){this.messageService=t,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.label=null,this.help=null,this.upload=new e.vpe,this.busy=!1,this.parsing=!1}uploadFile(t){return new Promise((n,a)=>{var r=new FileReader;r.onerror=()=>{r=null,a()},r.onloadend=()=>{null!==r&&null!==r.result&&(n(r.result.toString()),r=null)},r.readAsText(t)})}startUpload(t){const n=t.target;if(null!==n&&!this.busy){const a=n.files,r=null===a?null:(0,l.lA$)(a[0]);null!==r&&(r.size<=this.MAX_UPLOAD_FILE_SIZE?(this.busy=!0,this.uploadFile(r).then(c=>{this.upload.emit(c),n.value="",this.busy=!1},()=>{n.value="",this.messageService.error("Failed to upload this file"),this.busy=!1})):this.messageService.error("Cannot upload files bigger than "+this.MAX_UPLOAD_FILE_SIZE_MO+"Mo"))}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-upload-button"]],inputs:{label:"label",help:"help"},outputs:{upload:"upload"},decls:5,vars:2,consts:[["type","file",3,"change"],["fileInput",""],["mat-flat-button","","color","primary",3,"click"],[4,"ngIf"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"animation-rotation"]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"input",0,1),e.NdJ("change",function(c){return n.startUpload(c)}),e.qZA(),e.TgZ(2,"button",2),e.NdJ("click",function(){e.CHM(a);const c=e.MAs(1);return e.KtG(c.click())}),e.YNc(3,Be,5,2,"ng-container",3),e.YNc(4,Fe,4,0,"ng-container",3),e.qZA()}2&t&&(e.xp6(3),e.Q6J("ngIf",!n.busy),e.xp6(1),e.Q6J("ngIf",n.busy))},dependencies:[d.O5,b.lW,T.Hw,E.gM],styles:["input[type=file][_ngcontent-%COMP%]{display:none}button[_ngcontent-%COMP%]{width:100%}"]}),i})();function He(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectedClass=r)}),e._UZ(1,"img",9),e.TgZ(2,"div",10),e._uU(3),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw();e.ekj("selected",n.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH),e.xp6(2),e.Oqu(n.getLevel(t))}}let Qe=(()=>{class i{constructor(t,n,a,r,c,m,u){this.messageService=t,this.buildStorageService=n,this.buildService=a,this.slormancerSaveParserService=r,this.slormancerCharacterBuilderService=c,this.importExportService=m,this.clipboardService=u,this.HERO_CLASSES=[l.iHO.Warrior,l.iHO.Huntress,l.iHO.Mage],this.created=new e.vpe,this.name="Default name",this.characters=null,this.selectedClass=null}parseGameSave(t){try{const n=this.slormancerSaveParserService.parseSaveFile(t);this.characters={[l.iHO.Warrior]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,l.iHO.Warrior),[l.iHO.Huntress]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,l.iHO.Huntress),[l.iHO.Mage]:this.slormancerCharacterBuilderService.getCharacterFromSave(n,l.iHO.Mage)},this.selectedClass=null}catch(n){console.error(n),this.messageService.error("An error occured while parsing this save file")}}getLevel(t){let n="";return null!==this.characters&&(n=this.characters[t].level.toString()),n}createBuild(){if(null!==this.selectedClass&&null!==this.characters){const t=this.buildService.createBuildWithCharacter(this.name,"New layer",this.characters[this.selectedClass]);this.buildStorageService.addBuild(t),this.created.emit()}}copyExternalLink(){if(null!==this.selectedClass&&null!==this.characters){const t=this.importExportService.exportCharacterAsLink(this.characters[this.selectedClass]);this.clipboardService.copyToClipboard(t)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.e),e.Y36(C),e.Y36(U),e.Y36(l.XeX),e.Y36(l.oYj),e.Y36(G),e.Y36(ie.Y))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-build-from-game"]],inputs:{name:"name"},outputs:{created:"created"},decls:13,vars:7,consts:[[1,"import-game"],["label","Upload a Slormancer save file","help","Save files are located in :\n        C:\\Users\\[User]\\AppData\\Local\\The_Slormancer",3,"upload"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],[1,"actions"],["mat-flat-button","","color","primary",1,"create",3,"disabled","click"],["mat-icon-button","","matTooltip","Generate an external link of this build",3,"disabled","click"],[1,"head",3,"click"],[3,"src"],[1,"level"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(r){return n.parseGameSave(r)}),e.qZA(),e.TgZ(2,"div",2)(3,"p"),e._uU(4,"Choose which character you want to upload"),e.qZA(),e.TgZ(5,"div",3),e.YNc(6,He,4,4,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return n.createBuild()}),e._uU(9,"Create build"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.copyExternalLink()}),e.TgZ(11,"mat-icon"),e._uU(12,"share"),e.qZA()()()()),2&t&&(e.xp6(2),e.ekj("disabled",null===n.characters),e.xp6(1),e.ekj("disabled",null===n.characters),e.xp6(3),e.Q6J("ngForOf",n.HERO_CLASSES),e.xp6(2),e.Q6J("disabled",null===n.characters||null===n.selectedClass),e.xp6(2),e.Q6J("disabled",null===n.characters||null===n.selectedClass))},dependencies:[d.sg,b.lW,T.Hw,E.gM,ae],styles:[".import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:24px;height:24px;line-height:8px;font-size:12px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.1}.import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary.disabled[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{opacity:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%], .import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{border-color:#b7b7b7}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .create[_ngcontent-%COMP%]{flex-grow:1}"]}),i})();function Ye(i,o){1&i&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a save, build, layer or link"),e.qZA())}function Ge(i,o){1&i&&(e.TgZ(0,"mat-hint",8),e._uU(1,"Paste here a build, layer or link"),e.qZA())}function Ve(i,o){1&i&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Character found"),e.qZA())}function De(i,o){1&i&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Layer found"),e.qZA())}function je(i,o){1&i&&(e.TgZ(0,"mat-hint",9),e._uU(1,"Build found"),e.qZA())}function Ke(i,o){1&i&&(e.TgZ(0,"mat-hint",10),e._uU(1,"No valid data found"),e.qZA())}let oe=(()=>{class i{constructor(t){this.importExportService=t,this.MAX_UPLOAD_FILE_SIZE_MO=1,this.MAX_UPLOAD_FILE_SIZE=1048576*this.MAX_UPLOAD_FILE_SIZE_MO,this.uploadLabel=null,this.importLabel=null,this.heroClass=null,this.import=new e.vpe,this.sharedData=null,this.importContent=new s.NI(null,s.kI.maxLength(this.MAX_UPLOAD_FILE_SIZE)),this.importContent.valueChanges.subscribe(n=>{null===n||0===n.length?this.sharedData=null:this.parseExportedData(n)})}parseExportedData(t){this.sharedData=this.importExportService.import(t,this.heroClass)}hasValidSharedData(){return null!==this.sharedData&&(null!==this.sharedData.character&&(null===this.heroClass||this.sharedData.character.heroClass===this.heroClass)||null!==this.sharedData.layer&&(null===this.heroClass||this.sharedData.layer.character.heroClass===this.heroClass)||null!==this.sharedData.planner&&(null===this.heroClass||this.sharedData.planner.heroClass===this.heroClass))}upload(t){this.importContent.setValue(t)}importData(){null!==this.sharedData&&(this.import.emit(this.sharedData),this.importContent.setValue(""),this.sharedData=null)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(G))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-import-data"]],inputs:{uploadLabel:"uploadLabel",importLabel:"importLabel",heroClass:"heroClass"},outputs:{import:"import"},decls:16,vars:11,consts:[[1,"import"],[3,"label","upload"],["appearance","outline","color","primary","floatLabel","never"],["matInput","",3,"formControl"],["align","end",4,"ngIf"],["align","end","class","success",4,"ngIf"],["align","end","class","error",4,"ngIf"],["mat-flat-button","","color","primary",3,"disabled","click"],["align","end"],["align","end",1,"success"],["align","end",1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-file-upload-button",1),e.NdJ("upload",function(r){return n.upload(r)}),e.qZA(),e.TgZ(2,"mat-form-field",2)(3,"mat-label"),e._uU(4,"Import content..."),e.qZA(),e._UZ(5,"textarea",3),e.YNc(6,Ye,2,0,"mat-hint",4),e.YNc(7,Ge,2,0,"mat-hint",4),e.YNc(8,Ve,2,0,"mat-hint",5),e.YNc(9,De,2,0,"mat-hint",5),e.YNc(10,je,2,0,"mat-hint",5),e.YNc(11,Ke,2,0,"mat-hint",6),e.TgZ(12,"mat-error"),e._uU(13),e.qZA()(),e.TgZ(14,"button",7),e.NdJ("click",function(){return n.importData()}),e._uU(15),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("label",n.uploadLabel),e.xp6(4),e.Q6J("formControl",n.importContent),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null!==n.heroClass),e.xp6(1),e.Q6J("ngIf",null===n.sharedData&&null===n.heroClass),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.character),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.layer),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&n.hasValidSharedData()&&null!==n.sharedData.planner),e.xp6(1),e.Q6J("ngIf",null!==n.sharedData&&!n.hasValidSharedData()),e.xp6(2),e.hij("Cannot parse files bigger than ",n.MAX_UPLOAD_FILE_SIZE_MO,"Mo"),e.xp6(1),e.Q6J("disabled",!n.hasValidSharedData()),e.xp6(1),e.Oqu(n.importLabel))},dependencies:[d.O5,b.lW,_.TO,_.KE,_.bx,_.hX,A.Nt,s.Fj,s.JJ,s.oH,ae],styles:[".import[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;width:100%}.import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{height:60px;max-height:60px}"]}),i})(),Xe=(()=>{class i{constructor(t,n){this.buildStorageService=t,this.buildService=n,this.created=new e.vpe,this.name="Default name"}createBuild(t){if(null!==t.character){const n=this.buildService.createBuildWithCharacter(this.name,"Imported layer",t.character);this.buildStorageService.addBuild(n),this.created.emit()}else if(null!==t.layer){const n=this.buildService.createBuildWithCharacter(this.name,t.layer.name,t.layer.character);this.buildStorageService.addBuild(n),this.created.emit()}else null!==t.planner&&(this.buildStorageService.addBuild(t.planner),this.created.emit())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(U))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-build-from-export"]],inputs:{name:"name"},outputs:{created:"created"},decls:2,vars:0,consts:[[1,"import-game"],["uploadLabel","Upload an exported file","importLabel","Create build",3,"import"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"app-import-data",1),e.NdJ("import",function(r){return n.createBuild(r)}),e.qZA()())},dependencies:[oe],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}"]}),i})();function ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.selectedClass=r)}),e._UZ(1,"img",6),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.ekj("selected",n.selectedClass===t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t,"/head.png",e.LSH)}}let $e=(()=>{class i{constructor(t,n){this.buildService=t,this.buildStorageService=n,this.HERO_CLASSES=[l.iHO.Warrior,l.iHO.Huntress,l.iHO.Mage],this.created=new e.vpe,this.name="Default name",this.selectedClass=null}createBuild(){if(null!==this.selectedClass){const t=this.buildService.createBuild(this.selectedClass,this.name);this.buildService.addLayer(t,this.name),this.buildStorageService.addBuild(t),this.created.emit()}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U),e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-build-empty"]],inputs:{name:"name"},outputs:{created:"created"},decls:8,vars:2,consts:[[1,"import-game"],[1,"save-summary"],[1,"classes"],["class","head",3,"selected","click",4,"ngFor","ngForOf"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"head",3,"click"],[3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p"),e._uU(3,"Choose which character you want to build"),e.qZA(),e.TgZ(4,"div",2),e.YNc(5,ze,2,3,"div",3),e.qZA()(),e.TgZ(6,"button",4),e.NdJ("click",function(){return n.createBuild()}),e._uU(7,"Create build"),e.qZA()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.HERO_CLASSES),e.xp6(1),e.Q6J("disabled",null===n.selectedClass))},dependencies:[d.sg,b.lW],styles:["input[type=file][_ngcontent-%COMP%]{display:none}.import-game[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.import-game[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-top:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:4px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:4px;padding-bottom:20px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{position:relative;border:4px solid black;width:40px;height:40px}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;image-rendering:pixelated;transition:opacity .5s}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]   .classes[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{position:absolute;bottom:-20px;width:16px;height:16px;line-height:14px;text-align:center;border:2px solid black;padding:4px;border-radius:20% 20% 50% 50%;background-color:#353535;transition:opacity .5s;left:50%;transform:translate(-50%)}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled){cursor:pointer}.import-game[_ngcontent-%COMP%]   .save-summary[_ngcontent-%COMP%]:not(.disabled)   .classes[_ngcontent-%COMP%]   .head.selected[_ngcontent-%COMP%]{border-color:#b7b7b7}"]}),i})(),re=(()=>{class i{constructor(){this.created=new e.vpe,this.buildName="My build"}passCreatedEvent(){this.created.emit()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-build"]],outputs:{created:"created"},decls:16,vars:4,consts:[[3,"name","created"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","text",3,"ngModel","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"h2"),e._uU(1,"Create build from a Slormancer save"),e.qZA(),e.TgZ(2,"app-create-build-from-game",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(3,"hr"),e.TgZ(4,"h2"),e._uU(5,"Create build from exported data"),e.qZA(),e.TgZ(6,"app-create-build-from-export",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(7,"hr"),e.TgZ(8,"h2"),e._uU(9,"Create empty build"),e.qZA(),e.TgZ(10,"app-create-build-empty",0),e.NdJ("created",function(){return n.passCreatedEvent()}),e.qZA(),e._UZ(11,"hr"),e.TgZ(12,"mat-form-field",1)(13,"mat-label"),e._uU(14,"Build name"),e.qZA(),e.TgZ(15,"input",2),e.NdJ("ngModelChange",function(r){return n.buildName=r}),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("name",n.buildName),e.xp6(4),e.Q6J("name",n.buildName),e.xp6(4),e.Q6J("name",n.buildName),e.xp6(5),e.Q6J("ngModel",n.buildName))},dependencies:[_.KE,_.hX,A.Nt,s.Fj,s.JJ,s.On,Qe,Xe,$e],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}hr[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:16px}"]}),i})(),We=(()=>{class i{constructor(t){this.dialog=t}created(){this.dialog.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-build-modal"]],decls:2,vars:0,consts:[[3,"created"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"app-create-build",0),e.NdJ("created",function(){return n.created()}),e.qZA()())},dependencies:[p.xY,re],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;width:340px;padding:0 60px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),i})(),et=(()=>{class i{constructor(t){this.name=t.name}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-delete-build-modal"]],decls:9,vars:3,consts:[["mat-dialog-title",""],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Delete a build"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e._uU(3),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",1),e._uU(6,"Cancel"),e.qZA(),e.TgZ(7,"button",2),e._uU(8,"Delete"),e.qZA()()),2&t&&(e.xp6(3),e.hij(" You're about to delete the build ",n.name,"\n"),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[b.lW,p.ZT,p.uh,p.xY,p.H8]}),i})();function tt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(1,"h2",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-dialog-content"),e._UZ(4,"input",3),e.TgZ(5,"mat-form-field",4)(6,"mat-label"),e._uU(7,"Build name"),e.qZA(),e._UZ(8,"input",5),e.TgZ(9,"mat-error"),e._uU(10,"A build name is required"),e.qZA()()(),e.TgZ(11,"mat-dialog-actions")(12,"button",6),e._uU(13,"Cancel"),e.qZA(),e.TgZ(14,"button",7),e._uU(15,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Oqu(t.title),e.xp6(10),e.Q6J("mat-dialog-close",null)}}let nt=(()=>{class i{constructor(t,n){this.dialog=t,this.title=n.title,this.form=new s.cw({name:new s.NI(n.name,s.kI.required)})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialog.close(this.form.value.name)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit-build-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["autocomplete","false","name","hidden","type","text",2,"display","none"],["appearance","outline"],["matInput","","type","text","formControlName","name","autocomplete","off"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,tt,16,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,b.lW,p.ZT,p.uh,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),i})();var le=h(4296);let it=(()=>{class i{constructor(){}downloadFile(t,n){const a=document.createElement("a"),r=new Blob([t],{type:"text/plain"}),c=window.URL.createObjectURL(r);a.href=c,a.download=n,a.click(),window.URL.revokeObjectURL(c),a.remove()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function at(i,o){if(1&i&&(e.TgZ(0,"a",23),e._UZ(1,"img",24),e.qZA()),2&i){const t=o.$implicit;e.Q6J("routerLink",t.link),e.xp6(1),e.Q6J("src",t.icon,e.LSH)("matTooltip",t.label)}}function ot(i,o){if(1&i&&(e.TgZ(0,"mat-select-trigger"),e._UZ(1,"img",25),e._uU(2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.MGl("src","assets/img/character/icon/",t.buildControl.value.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.buildControl.value.name," ")}}function rt(i,o){if(1&i&&(e.TgZ(0,"mat-option",26),e._UZ(1,"img",25),e._uU(2),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.MGl("src","assets/img/character/icon/",t.heroClass,"/head.png",e.LSH),e.xp6(1),e.hij(" ",t.name," ")}}let lt=(()=>{class i extends O.B{constructor(t,n,a,r,c,m,u,g){super(),this.messageService=t,this.downloadService=n,this.clipboardService=a,this.importExportService=r,this.buildStorageService=c,this.buildService=m,this.router=u,this.dialog=g,this.SHORTCUTS=[{link:"/slorm-reaper",icon:"assets/img/reaper/0/0.png",label:"Slorm reapers"}],this.VERSION=Q.N.version,this.GITHUB_PROJECT_LINK=le.yF,this.GAME_LINK=le.F1,this.sidenav=null,this.busy=!1,this.buildControl=new s.NI(this.buildStorageService.getBuildPreview()),this.buildControl.valueChanges.pipe((0,M.R)(this.unsubscribe),(0,ne.h)(l.BXh)).subscribe(f=>this.buildStorageService.loadBuild(f)),this.buildStorageService.buildChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>{this.buildControl.setValue(this.buildStorageService.getBuildPreview(),{emitEvent:!1})})}ngOnInit(){}closeSideNav(){null!==this.sidenav&&this.sidenav.close()}getBuilds(){return this.buildStorageService.getBuilds()}getHeroClass(){let t=l.iHO.Warrior;const n=this.buildStorageService.getBuild();return null!==n&&(t=n.heroClass),t}import(t){const n=this.buildStorageService.getBuild();if(null!==t&&null!==n)if(null!==t.character)this.dialog.open(Y,{data:{title:"New character layer's name",name:null}}).afterClosed().subscribe(r=>{if(r){const c=this.buildService.addLayer(n,r,t.character);this.buildStorageService.loadLayer(c),this.closeSideNav()}});else if(null!==t.layer){const a=this.buildService.addLayer(n,t.layer.name,t.layer.character);this.buildStorageService.loadLayer(a),this.closeSideNav()}else if(null!==t.planner){let a=null;for(const r of t.planner.layers)a=this.buildService.addLayer(n,r.name,r.character);null!==a&&this.buildStorageService.loadLayer(a),this.closeSideNav()}}downloadLayer(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportLayer(t);this.downloadService.downloadFile(n,t.name)}}copyLayer(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportLayer(t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Layer copied to clipboard"):this.messageService.error("Failed to copy layer to clipboard")}}downloadBuild(){const t=this.buildStorageService.getBuild();if(null!==t){const n=this.importExportService.exportBuild(t);this.downloadService.downloadFile(n,"build.sav")}}copyBuild(){const t=this.buildStorageService.getBuild();if(null!==t){const n=this.importExportService.exportBuild(t);this.clipboardService.copyToClipboard(n)?this.messageService.message("Build copied to clipboard"):this.messageService.error("Failed to copy build to clipboard")}}copyExternalLink(){const t=this.buildStorageService.getLayer();if(null!==t){const n=this.importExportService.exportCharacterAsLink(t.character);this.clipboardService.copyToClipboard(n)?this.messageService.message("Link copied to clipboard"):this.messageService.error("Failed to copy link to clipboard")}}deleteBuild(){const t=this.buildStorageService.getBuild();null!==t&&this.dialog.open(et,{data:{name:t.name}}).afterClosed().subscribe(a=>{a&&(this.buildStorageService.deleteBuild(),0===this.buildStorageService.getBuilds().length&&this.router.navigate(["slorm-planner","create"]))})}editBuild(){const t=this.buildStorageService.getBuild();null!==t&&this.dialog.open(nt,{data:{title:"Edit build name",name:t.name}}).afterClosed().subscribe(a=>{a&&(t.name=a,this.buildStorageService.saveBuild())})}createNewBuild(){this.dialog.open(We)}trackbyBuildPreview(t,n){return n.storageKey}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(J.e),e.Y36(it),e.Y36(ie.Y),e.Y36(G),e.Y36(C),e.Y36(U),e.Y36(k.F0),e.Y36(p.uw))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-build-sidenav"]],inputs:{sidenav:"sidenav"},features:[e.qOj],decls:63,vars:8,consts:[["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"sidenav"],[1,"shortcuts"],[3,"routerLink",4,"ngFor","ngForOf"],[1,"build"],[1,"build-selection"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","Edit build name",3,"click"],["mat-icon-button","","color","primary","matTooltip","Delete build",3,"click"],["mat-flat-button","","color","primary",3,"click"],[1,"import"],["uploadLabel","From file","importLabel","Import into current build",3,"heroClass","import"],[1,"export"],[1,"export-details"],[1,"actions"],["mat-icon-button","","matTooltip","Download",3,"click"],["mat-icon-button","","matTooltip","Copy to clipboard",3,"click"],["mat-icon-button","","matTooltip","External link",3,"click"],[1,"info"],["target","blank",3,"href"],[3,"routerLink"],[3,"src","matTooltip"],[1,"hero-icon",3,"src"],[3,"value"]],template:function(t,n){1&t&&(e._UZ(0,"input",0),e.TgZ(1,"div",1)(2,"div",2)(3,"span"),e._uU(4,"Other tools :"),e.qZA(),e.YNc(5,at,2,3,"a",3),e.qZA(),e.TgZ(6,"div",4)(7,"h3"),e._uU(8,"Builds"),e.qZA(),e.TgZ(9,"div",5)(10,"mat-form-field",6)(11,"mat-label"),e._uU(12,"Current build"),e.qZA(),e.TgZ(13,"mat-select",7),e.YNc(14,ot,3,2,"mat-select-trigger",8),e.YNc(15,rt,3,3,"mat-option",9),e.qZA()(),e.TgZ(16,"button",10),e.NdJ("click",function(){return n.editBuild()}),e.TgZ(17,"mat-icon"),e._uU(18,"edit"),e.qZA()(),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.deleteBuild()}),e.TgZ(20,"mat-icon"),e._uU(21,"delete"),e.qZA()()(),e.TgZ(22,"button",12),e.NdJ("click",function(){return n.createNewBuild()}),e._uU(23,"New build"),e.qZA()(),e._UZ(24,"hr"),e.TgZ(25,"div",13)(26,"h3"),e._uU(27,"Import"),e.qZA(),e.TgZ(28,"app-import-data",14),e.NdJ("import",function(r){return n.import(r)}),e.qZA()(),e._UZ(29,"hr"),e.TgZ(30,"div",15)(31,"h3"),e._uU(32,"Export"),e.qZA(),e.TgZ(33,"div",16)(34,"p"),e._uU(35,"Current layer"),e.qZA(),e.TgZ(36,"div",17)(37,"button",18),e.NdJ("click",function(){return!n.busy&&n.downloadLayer()}),e.TgZ(38,"mat-icon"),e._uU(39,"file_download"),e.qZA()(),e.TgZ(40,"button",19),e.NdJ("click",function(){return!n.busy&&n.copyLayer()}),e.TgZ(41,"mat-icon"),e._uU(42,"content_copy"),e.qZA()(),e.TgZ(43,"button",20),e.NdJ("click",function(){return!n.busy&&n.copyExternalLink()}),e.TgZ(44,"mat-icon"),e._uU(45,"share"),e.qZA()()()(),e.TgZ(46,"div",16)(47,"p"),e._uU(48,"Current build"),e.qZA(),e.TgZ(49,"div",17)(50,"button",18),e.NdJ("click",function(){return!n.busy&&n.downloadBuild()}),e.TgZ(51,"mat-icon"),e._uU(52,"file_download"),e.qZA()(),e.TgZ(53,"button",19),e.NdJ("click",function(){return!n.busy&&n.copyBuild()}),e.TgZ(54,"mat-icon"),e._uU(55,"content_copy"),e.qZA()()()()(),e.TgZ(56,"div",21),e._uU(57),e.TgZ(58,"a",22),e._uU(59,"Github"),e.qZA(),e._uU(60," - "),e.TgZ(61,"a",22),e._uU(62,"The Slormancer"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngForOf",n.SHORTCUTS),e.xp6(8),e.Q6J("formControl",n.buildControl),e.xp6(1),e.Q6J("ngIf",null!==n.buildControl.value),e.xp6(1),e.Q6J("ngForOf",n.getBuilds()),e.xp6(13),e.Q6J("heroClass",n.getHeroClass()),e.xp6(29),e.hij(" Slorm Planner ",n.VERSION," - "),e.xp6(1),e.Q6J("href",n.GITHUB_PROJECT_LINK,e.LSH),e.xp6(3),e.Q6J("href",n.GAME_LINK,e.LSH))},dependencies:[d.sg,d.O5,b.lW,T.Hw,_.KE,_.hX,Z.gD,Z.$L,I.ey,E.gM,s.JJ,s.oH,oe,k.yS],styles:[".sidenav[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;height:100%}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px;padding:4px}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{outline:0}.sidenav[_ngcontent-%COMP%]   .shortcuts[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:20px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;padding:4px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-weight:400}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{min-height:48px;max-height:48px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100px}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .export-details[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .build-selection[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{flex-grow:1}.sidenav[_ngcontent-%COMP%]   .import[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .export[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%], .sidenav[_ngcontent-%COMP%]   .build[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:16px}.sidenav[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{color:#505050;margin-top:auto;text-align:right}"]}),i})();const ct=["dragImage"],st=["dragBackground"];function mt(i,o){if(1&i&&(e.TgZ(0,"a",11,12)(2,"span",13),e._uU(3),e.qZA()()),2&i){const t=o.$implicit,n=e.MAs(1);e.Q6J("routerLink",t.route)("active",n.isActive),e.xp6(3),e.Oqu(t.name)}}let dt=(()=>{class i extends O.B{constructor(t){super(),this.itemMoveService=t,this.ROUTES=[{name:"Inventory",route:"inventory"},{name:"Skills",route:"skills"},{name:"Ancestral legacies",route:"ancestral-legacies"},{name:"Attributes",route:"attributes"},{name:"Stats",route:"stats"},{name:"Config",route:"config"},{name:"Compare",route:"compare"}],this.isDragging=!1,this.dragImage=null,this.dragBackground=null,this.itemMoveService.draggingItem.pipe((0,M.R)(this.unsubscribe)).subscribe(n=>{this.isDragging=n;const a=this.itemMoveService.getHoldItem();null!==a&&this.dragImage&&this.dragBackground&&(this.dragImage.nativeElement.src=a.icon,this.dragBackground.nativeElement.src=a.itemIconBackground)})}onMouseMove(t){if(this.itemMoveService.startDragging(),this.isDragging&&null!==this.itemMoveService.getHoldItem()&&this.dragImage&&this.dragBackground){const n=t.clientY-this.dragImage.nativeElement.height/2+"px",a=t.clientX-this.dragImage.nativeElement.width/2+"px";this.dragImage.nativeElement.style.top=n,this.dragImage.nativeElement.style.left=a,this.dragBackground.nativeElement.style.top=n,this.dragBackground.nativeElement.style.left=a}}onMouseUp(){this.itemMoveService.releaseHoldItem()}onMouseContextMenu(){this.itemMoveService.releaseHoldItem()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-build"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ct,5),e.Gf(st,5)),2&t){let a;e.iGM(a=e.CRH())&&(n.dragImage=a.first),e.iGM(a=e.CRH())&&(n.dragBackground=a.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(r){return n.onMouseMove(r)})("mouseup",function(){return n.onMouseUp()})("contextmenu",function(){return n.onMouseContextMenu()})},features:[e.qOj],decls:17,vars:6,consts:[[1,"header"],[1,"tools"],[3,"click"],["mat-tab-nav-bar","","color","primary"],["mat-tab-link","","routerLinkActive","",3,"routerLink","active",4,"ngFor","ngForOf"],["sidenav",""],[3,"sidenav"],["id","drag-background"],["dragBackground",""],["id","drag-image"],["dragImage",""],["mat-tab-link","","routerLinkActive","",3,"routerLink","active"],["rla","routerLinkActive"],["translate",""]],template:function(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon",2),e.NdJ("click",function(){e.CHM(a);const c=e.MAs(8);return e.KtG(c.toggle())}),e._uU(3,"menu"),e.qZA()(),e.TgZ(4,"nav",3),e.YNc(5,mt,4,3,"a",4),e.qZA()(),e.TgZ(6,"mat-sidenav-container")(7,"mat-sidenav",null,5),e._UZ(9,"app-build-sidenav",6),e.qZA(),e.TgZ(10,"mat-sidenav-content"),e._UZ(11,"app-build-header")(12,"router-outlet")(13,"img",7,8)(15,"img",9,10),e.qZA()()}if(2&t){const a=e.MAs(8);e.xp6(5),e.Q6J("ngForOf",n.ROUTES),e.xp6(4),e.Q6J("sidenav",a),e.xp6(4),e.ekj("dragging",n.isDragging),e.xp6(2),e.ekj("dragging",n.isDragging)}},dependencies:[d.sg,B.BU,B.Nj,T.Hw,K.JX,K.TM,K.Rh,k.lC,k.yS,k.Od,Ue,lt],styles:["[_nghost-%COMP%]{height:100%;display:flex;flex-direction:column;align-items:stretch}.header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;z-index:2;background-color:#0c0c0c;box-shadow:0 2px 4px -1px #b7b7b733,0 4px 5px #b7b7b724,0 1px 10px #b7b7b71f}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:48px;min-width:48px;cursor:pointer}.header[_ngcontent-%COMP%]   .tools[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:auto}.header[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]{flex-grow:1}#drag-image[_ngcontent-%COMP%], #drag-background[_ngcontent-%COMP%]{z-index:1;position:fixed;pointer-events:none}#drag-image[_ngcontent-%COMP%]:not(.dragging), #drag-background[_ngcontent-%COMP%]:not(.dragging){display:none}#drag-background[_ngcontent-%COMP%]{opacity:.6}"]}),i})();var P=h(1314);function ut(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.MAs(1),m=e.oxw(2);return e.KtG(m.showOverlay(c,r))})("mouseleave",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function pt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.MAs(1),m=e.oxw(2);return e.KtG(m.showOverlay(c,r))})("mouseleave",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function gt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4,5),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.MAs(1),m=e.oxw(2);return e.KtG(m.showOverlay(c,r))})("mouseleave",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.hideOverlay())}),e.TgZ(2,"div",6),e._UZ(3,"img",7),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.qZA()()}if(2&i){const t=o.$implicit;e.xp6(3),e.MGl("src","assets/img/icon/",t.icon,".png",e.LSH),e.xp6(2),e.Oqu(t.name)}}function _t(i,o){if(1&i&&(e.TgZ(0,"div",10)(1,"div",11),e._UZ(2,"h3",12)(3,"p",12),e.qZA()()),2&i){const t=e.oxw(3);e.xp6(2),e.Q6J("innerHTML",t.overlayMechanic.name,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.overlayMechanic.description,e.oJD)}}function ft(i,o){if(1&i&&e.YNc(0,_t,4,2,"ng-template",9),2&i){const t=e.oxw(2);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",t.overlayTrigger)}}function ht(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,ut,6,2,"div",2),e.YNc(2,pt,6,2,"div",2),e.YNc(3,gt,6,2,"div",2),e.YNc(4,ft,1,2,null,3),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.classMechanics),e.xp6(1),e.Q6J("ngForOf",t.mechanics),e.xp6(1),e.Q6J("ngForOf",t.buffs),e.xp6(1),e.Q6J("ngIf",null!==t.overlayMechanic&&null!==t.overlayTrigger)}}let ce=(()=>{class i{constructor(){this.classMechanics=[],this.mechanics=[],this.buffs=[],this.overlayTrigger=null,this.overlayMechanic=null}showOverlay(t,n){this.overlayMechanic=n,this.overlayTrigger=t}hideOverlay(){this.overlayTrigger=null,this.overlayMechanic=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mechanics-view"]],inputs:{classMechanics:"classMechanics",mechanics:"mechanics",buffs:"buffs"},decls:1,vars:1,consts:[["class","mechanics",4,"ngIf"],[1,"mechanics"],["class","mechanic","cdkOverlayOrigin","",3,"mouseenter","mouseleave",4,"ngFor","ngForOf"],[4,"ngIf"],["cdkOverlayOrigin","",1,"mechanic",3,"mouseenter","mouseleave"],["trigger","cdkOverlayOrigin"],[1,"mechanic-icon"],[3,"src"],[1,"mechanic-name"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[1,"slormancer-tooltip"],[1,"inner-box"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,ht,5,4,"div",0),2&t&&e.Q6J("ngIf",n.classMechanics.length>0||n.mechanics.length>0||n.buffs.length>0)},dependencies:[d.sg,d.O5,P.pI,P.xu],styles:[".mechanics[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;background-color:#000;padding:4px;gap:4px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{min-width:36px;min-height:36px;width:36px;height:36px}.mechanics[_ngcontent-%COMP%]   .mechanic[_ngcontent-%COMP%]   .mechanic-name[_ngcontent-%COMP%]{background-color:#141310;padding:8px;display:flex;flex-direction:row;align-items:center;flex-grow:1}.slormancer-tooltip[_ngcontent-%COMP%]{max-width:350px}.slormancer-tooltip[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:8px 0;font-weight:400;color:#ce4607}.slormancer-tooltip[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.slormancer-tooltip[_ngcontent-%COMP%]     .value{color:#ce4607}"]}),i})();function Ct(i,o){if(1&i&&e._UZ(0,"div",17),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.genresLabel,e.oJD)}}function vt(i,o){if(1&i&&e._UZ(0,"div",18),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.cooldownLabel,e.oJD)}}function Mt(i,o){if(1&i&&e._UZ(0,"div",19),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.ancestralLegacy.costLabel,e.oJD)}}function bt(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8),e._UZ(10,"div",9),e.YNc(11,Ct,1,1,"div",10),e.YNc(12,vt,1,1,"div",11),e._UZ(13,"div",12),e.YNc(14,Mt,1,1,"div",13),e.qZA()(),e._UZ(15,"div",14)(16,"div",15)(17,"app-mechanics-view",16),e.qZA()()),2&i){const t=e.oxw();e.Gre("ancestral-legacy ",t.ancestralLegacy.damageTypes.length>0?t.ancestralLegacy.damageTypes[0]:"",""),e.xp6(2),e.Oqu(t.ancestralLegacy.name),e.xp6(6),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(2),e.Q6J("innerHTML",t.ancestralLegacy.typeLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.cooldownLabel),e.xp6(1),e.Q6J("innerHTML",t.ancestralLegacy.rankLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.ancestralLegacy.costLabel),e.xp6(2),e.Q6J("innerHTML",t.ancestralLegacy.description,e.oJD),e.xp6(1),e.Q6J("mechanics",t.ancestralLegacy.relatedMechanics)("buffs",t.ancestralLegacy.relatedBuffs)}}let X=(()=>{class i{constructor(t){this.slormancerTranslateService=t,this.NEXT_RANK_LABEL=this.slormancerTranslateService.translate("tt_next_rank"),this.MAX_RANK_LABEL=this.slormancerTranslateService.translate("tt_max_rank"),this.ancestralLegacy=null,this.hideNextRank=!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.n6D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ancestral-legacy-view"]],inputs:{ancestralLegacy:"ancestralLegacy",hideNextRank:"hideNextRank"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"content"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"type",3,"innerHTML"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",3,"innerHTML",4,"ngIf"],[1,"rank",3,"innerHTML"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cooldown",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,bt,18,13,"div",0),2&t&&e.Q6J("ngIf",null!==n.ancestralLegacy)},dependencies:[d.O5,ce],styles:[".ancestral-legacy[_ngcontent-%COMP%]{background-color:#090909;border:3px solid black;color:#fff;display:flex;flex-direction:column;max-width:400px}.ancestral-legacy[_ngcontent-%COMP%]  .description .value{color:#ce4607}.ancestral-legacy[_ngcontent-%COMP%]  .next-rank .value, .ancestral-legacy[_ngcontent-%COMP%]  .head, .ancestral-legacy[_ngcontent-%COMP%]  .rank .current, .ancestral-legacy[_ngcontent-%COMP%]  .cooldown .value{color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]  .range, .ancestral-legacy[_ngcontent-%COMP%]  .range .value, .ancestral-legacy[_ngcontent-%COMP%]  .details, .ancestral-legacy[_ngcontent-%COMP%]  .details .value, .ancestral-legacy[_ngcontent-%COMP%]  .formula, .ancestral-legacy[_ngcontent-%COMP%]  .formula .value{color:#686868}.ancestral-legacy[_ngcontent-%COMP%]  .affixes .range, .ancestral-legacy[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ancestral-legacy[_ngcontent-%COMP%]  .life{color:#257539}.ancestral-legacy[_ngcontent-%COMP%]  .mana{color:#3397dd}.ancestral-legacy.mag[_ngcontent-%COMP%]  .value:not(.mana){color:#bb1fe2}.ancestral-legacy[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.ancestral-legacy[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;padding:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.ancestral-legacy[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .ancestral-legacy[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),i})();function Ot(i,o){if(1&i&&e._UZ(0,"app-ancestral-legacy-view",8),2&i){const t=e.oxw(3);e.Q6J("ancestralLegacy",t.ancestralLegacy)}}function xt(i,o){if(1&i&&e.YNc(0,Ot,1,1,"ng-template",7),2&i){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function yt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1,2),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.increasesRank())})("contextmenu",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.decreasesRank())}),e.TgZ(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,xt,1,2,null,6),e.qZA()}if(2&i){const t=e.oxw();e.ekj("ranked",t.ancestralLegacy.baseRank>0)("equipped",t.equipped)("selected",t.selected)("readonly",t.readonly)("hidden-search",t.hiddenBySearch),e.xp6(3),e.Q6J("src",t.ancestralLegacy.icon,e.LSH),e.xp6(1),e.ekj("max",t.ancestralLegacy.rank===t.ancestralLegacy.maxRank),e.xp6(1),e.Oqu(t.ancestralLegacy.rank===t.ancestralLegacy.maxRank?"Max":t.ancestralLegacy.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}let se=(()=>{class i extends O.B{constructor(t,n,a){super(),this.searchService=t,this.slormancerAncestralLegacyService=n,this.buildStorageService=a,this.ancestralLegacy=null,this.equipped=!1,this.selected=!1,this.readonly=!1,this.overlay=!1,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.hiddenBySearch=null!==t&&null!==this.ancestralLegacy&&!this.searchService.ancestralLegacyMatchSearch(this.ancestralLegacy))}setRank(t,n){t.baseRank!==n&&this.selected&&(this.slormancerAncestralLegacyService.updateAncestralLegacyModel(t,n),this.slormancerAncestralLegacyService.updateAncestralLegacyView(t),this.buildStorageService.saveLayer())}increasesRank(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank+1)),this.changed.emit(this.ancestralLegacy)),!1}decreasesRank(){return null!==this.ancestralLegacy&&(this.setRank(this.ancestralLegacy,Math.max(0,this.ancestralLegacy.baseRank-1)),this.changed.emit(this.ancestralLegacy)),!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.o),e.Y36(l.OXA),e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ancestral-legacy-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{ancestralLegacy:"ancestralLegacy",equipped:"equipped",selected:"selected",readonly:"readonly",overlay:"overlay"},outputs:{changed:"changed"},features:[e.qOj],decls:1,vars:1,consts:[["class","ancestral-legacy","cdkOverlayOrigin","",3,"ranked","equipped","selected","readonly","hidden-search","click","contextmenu",4,"ngIf"],["cdkOverlayOrigin","",1,"ancestral-legacy",3,"click","contextmenu"],["trigger","cdkOverlayOrigin"],[1,"inner"],[3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy"]],template:function(t,n){1&t&&e.YNc(0,yt,7,15,"div",0),2&t&&e.Q6J("ngIf",null!==n.ancestralLegacy)},dependencies:[d.O5,P.pI,P.xu,X],styles:[".ancestral-legacy[_ngcontent-%COMP%]{position:relative;z-index:1;border-radius:50%;border:1px solid transparent}.ancestral-legacy[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.ancestral-legacy.selected[_ngcontent-%COMP%]{border:1px solid rgb(132,30,6)}.ancestral-legacy.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.1}.ancestral-legacy.ranked.equipped[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{background-color:#d5ad48}.ancestral-legacy[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:4px;border-radius:4px}.ancestral-legacy[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#202020;border:1px solid black;border-radius:50%;width:16px;height:16px}.ancestral-legacy[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:1px solid black;width:12px;height:12px;border-radius:50%;overflow:hidden}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]{width:40px;height:40px;border-width:4px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .inner[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0;width:34px;height:34px}.ancestral-legacy.readonly[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{font-size:10px}"]}),i})();function Pt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-ancestral-legacy-slot",12),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.selectAncestralLegacy(a))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw().$implicit,a=e.oxw();e.Akn(n.iconStyle),e.Q6J("ancestralLegacy",a.getAncestralLegacy(t))("equipped",a.isAncestralLegacyEquipped(t))("selected",a.isNodeSelected(t))}}function St(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",10),e.YNc(2,Pt,1,5,"app-ancestral-legacy-slot",11),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw();e.Akn(t.style),e.MT6("zone absolute color-",t.color," size-",t.size,""),e.ekj("active",n.isRealmActive(t.realmId)),e.xp6(2),e.Q6J("ngForOf",t.ancestralLegacies)}}function kt(i,o){1&i&&e._UZ(0,"div",13),2&i&&e.Akn(o.$implicit.style)}function Tt(i,o){1&i&&e._UZ(0,"div",14),2&i&&e.Akn(o.$implicit.style)}function wt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.toggleNode(r.nodeId))}),e._UZ(1,"div",16),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw();e.Akn(t.style),e.ekj("active",n.isNodeActive(t.nodeId))("available",n.isNodeAvailable(t.nodeId))}}let At=(()=>{class i extends O.B{constructor(t,n,a){super(),this.buildStorageService=t,this.slormancerDataService=n,this.slormancerCharacterModifierService=a,this.selectedAncestralLegacy=null,this.selectedAncestralLegacyChange=new e.vpe,this.BOUNDS_X={min:-500,max:500},this.BOUNDS_Y={min:-500,max:500},this.availableNodes=[],this.activeRealms=[],this.weldingShapes=[],this.lineShapes=[],this.zoneShapes=[],this.nodeShapes=[],this.character=null,this.position={x:0,y:0},this.scale=1,this.grabbed=!1,this.drawMap()}onWheelUp(t){return this.scale=Math.max(1,Math.min(2,this.scale+(t.deltaY>0?-.2:.2))),!1}onMouseDown(){this.grabbed=!0}onMouseUp(){this.grabbed=!1}onMouseMouve(t){this.grabbed&&(this.position.x=Math.min(this.BOUNDS_X.max,Math.max(this.BOUNDS_X.min,this.position.x+t.movementX)),this.position.y=Math.min(this.BOUNDS_Y.max,Math.max(this.BOUNDS_Y.min,this.position.y+t.movementY)))}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.updateMap()})}drawMap(){this.addLineShapes(5,-90,37,50),this.addZoneShapes((0,l.pb)(0,9),-72,75),this.addWeldinghapes(5,-90,67,16),this.addWeldinghapes(5,-54,72,8),this.addNodeShapes((0,l.pb)(0,9),-72,52),this.addNodeShapes((0,l.pb)(0,9).map(t=>10+2*t),-82.8,92),this.addNodeShapes((0,l.pb)(0,9).map(t=>11+2*t),-61.2,92),this.addZoneShapes((0,l.pb)(10,19),-54,112),this.addZoneShapes((0,l.pb)(20,29),-72,150,2),this.addLineShapes(10,-72,106,16),this.addNodeShapes((0,l.pb)(0,9).map(t=>31+3*t),-72,120),this.addNodeShapes((0,l.pb)(10,19).map(t=>3*t),-81,127),this.addNodeShapes((0,l.pb)(10,19).map(t=>2+3*t),-63,127),this.addZoneShapes((0,l.pb)(30,39),-90,173),this.addNodeShapes([60,63,65,68,70,73,75,78,80,83],-97,160),this.addNodeShapes((0,l.pb)(0,4).map(t=>61+5*t),-90,150),this.addNodeShapes([62,64,67,69,72,74,77,79,82,84],-83,160),this.addLineShapes(5,-90,140,10),this.addZoneShapes([41,45,49,53,57],-71,204),this.addZoneShapes([42,46,50,54,58],-37,204),this.addNodeShapes([87,89,92,94,97,99,102,104,107,109],-72,181),this.addZoneShapes((0,l.pb)(10,14).map(t=>4*t+3),-24.5,216),this.addNodeShapes([90,95,100,105,85],-22,194),this.addNodeShapes([115,121,127,133,139],-30.5,209),this.addZoneShapes((0,l.pb)(10,14).map(t=>4*t),360/70-88.5,216),this.addNodeShapes([86,91,96,101,106],360/70-91.5,194),this.addNodeShapes([112,118,124,130,136],360/70-82.5,209),this.addZoneShapes((0,l.pb)(60,64),-54,238,3),this.addNodeShapes([88,93,98,103,108],-54,198),this.addNodeShapes([154,142,145,148,151],-116.5,246),this.addNodeShapes([141,144,147,150,153],-54,279.5),this.addNodeShapes([140,143,146,149,152],-63.5,246),this.addZoneShapes((0,l.pb)(22,26).map(t=>3*t),-70,258,2),this.addNodeShapes([113,119,125,131,137],-70.5,228),this.addZoneShapes((0,l.pb)(22,26).map(t=>3*t+1),-38,258,2),this.addNodeShapes([114,120,126,132,138],-37.5,228),this.addNodeShapes([157,168,178,190,201],-104.5,277),this.addNodeShapes([155,166,177,188,199],-109.5,290),this.addNodeShapes([163,174,185,196,207],-75.5,277),this.addNodeShapes([165,176,187,198,209],-69.8,289),this.addZoneShapes([65,68,71,74,77],-90,256),this.addZoneShapes([83,86,89,92,80],-28,293),this.addZoneShapes([82,85,88,91,94],360/70-85,293),this.addLineShapes(5,-100,252,37),this.addWeldinghapes(5,-99.7,234.2,1.5),this.addLineShapes(5,-80,252,37),this.addWeldinghapes(5,-80.3,234.2,1.5),this.addNodeShapes([110,116,122,128,134],-93,236),this.addNodeShapes([111,117,123,129,135],-87,236),this.addNodeShapes([158,169,180,191,202],-100,270),this.addNodeShapes([162,173,183,195,206],-80,266),this.addZoneShapes([96,99,102,105,108],-54,310,2),this.addZoneShapes([95,98,101,104,107],-70,320,2),this.addNodeShapes([164,175,186,197,208],-75,304),this.addZoneShapes([97,100,103,106,109],-38,320,2),this.addNodeShapes([167,179,189,200,156],-32.5,304),this.addZoneShapes([81,84,87,90,93],-90,304,1),this.addNodeShapes([160,171,182,193,204],-90,280),this.addNodeShapes([161,172,184,194,205],-85,300),this.addNodeShapes([159,170,181,192,203],-95,300),this.addZoneShapes([110,111,112,113,114],-90,361,2),this.addNodeShapes([300,301,302,303,304],-90,329),this.addZoneShapes([117,122,127,132,137],-54,370,1),this.addNodeShapes([215,225,235,245,255],-54,343),this.addZoneShapes([118,123,128,133,138],-43,370,1),this.addNodeShapes([216,226,236,246,256],-47,370),this.addNodeShapes([217,227,237,247,257],-41,348),this.addZoneShapes([116,121,126,131,136],-65,370,1),this.addNodeShapes([214,224,234,244,254],-61,370),this.addNodeShapes([213,223,233,243,253],-67,348),this.addZoneShapes([119,124,129,134,139],-33,370,1),this.addNodeShapes([218,228,238,248,258],-35,347),this.addNodeShapes([305,306,307,308,309],-29,370),this.addZoneShapes([115,120,125,130,135],-75,370,1),this.addNodeShapes([212,222,232,242,252],-73,347),this.addNodeShapes([310,311,312,313,314],-79,370)}updateMap(){if(this.availableNodes=[],this.activeRealms=[],null!==this.character){const t=null!==this.character?this.character.ancestralLegacies.activeNodes:[],n=l.Rs4.filter(a=>void 0!==a.nodes.find(r=>-1!==t.indexOf(r)));this.character.ancestralLegacies.activeNodes.length<l.sDm&&(this.availableNodes=[...l.mwr,...n.map(a=>a.nodes).flat()].filter(l.mrA)),this.activeRealms=n.map(a=>a.realm),console.log("nodes : ",this.character.ancestralLegacies.activeNodes)}}isNodeActive(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeNodes.indexOf(t)}isRealmActive(t){return-1!==this.activeRealms.indexOf(t)}isNodeAvailable(t){return-1!==this.availableNodes.indexOf(t)}isNodeSelected(t){return null!==this.selectedAncestralLegacy&&this.selectedAncestralLegacy.id===t}isAncestralLegacyEquipped(t){return null!==this.character&&-1!==this.character.ancestralLegacies.activeAncestralLegacies.indexOf(t)}getAncestralLegacy(t){let n=null;return null!==this.character&&(n=(0,l.lA$)(this.character.ancestralLegacies.ancestralLegacies.find(a=>a.id==t))),n}toggleNode(t){if(console.log("Click on ",t),null!==this.character){let n=!1;n=this.isNodeActive(t)?this.slormancerCharacterModifierService.disableAncestralLegacyNode(this.character,t):this.slormancerCharacterModifierService.activateAncestralLegacyNode(this.character,t),this.buildStorageService.saveLayer(),n&&this.updateMap()}return!1}selectAncestralLegacy(t){console.log(t),this.selectedAncestralLegacyChange.emit(t)}addLineShapes(t,n,a,r){const c=360/t;this.lineShapes.push(...(0,l.pb)(t).map(m=>({style:{width:r+"px",transform:"translate(-50%, -50%) rotate("+(n+m*c)+"deg) translateX("+a+"px)"}})))}addWeldinghapes(t,n,a,r){const c=360/t;this.weldingShapes.push(...(0,l.pb)(t).map(m=>({style:{width:r+"px",transform:"translate(-50%, -50%) rotate("+(n+m*c)+"deg) translateX("+a+"px)"}})))}addZoneShapes(t,n,a,r=1){const c=360/t.length;this.zoneShapes.push(...t.map((m,u)=>{const g=this.slormancerDataService.getAncestralRealmColor(m),f=this.slormancerDataService.getAncestralLegacyIdsFromRealm(m),v=n+u*c;return{style:{transform:"translate(-50%, -50%) rotate("+v+"deg) translateX("+a+"px)"},iconStyle:{transform:"rotate("+-v+"deg)"},size:r,realmId:m,ancestralLegacies:f,color:g}}))}addNodeShapes(t,n,a){const r=t.length,c=360/r;this.nodeShapes.push(...(0,l.pb)(r).map(m=>({style:{transform:"translate(-50%, -50%) rotate("+(n+m*c)+"deg) translateX("+a+"px)"},nodeId:(0,l.BeF)(t[m],0)})))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l.ogB),e.Y36(l.Y5A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ancestral-legacy-map"]],hostBindings:function(t,n){1&t&&e.NdJ("wheel",function(r){return n.onWheelUp(r)})("mousedown",function(){return n.onMouseDown()})("mouseup",function(){return n.onMouseUp()})("mouseleave",function(){return n.onMouseUp()})("mousemove",function(r){return n.onMouseMouve(r)})},inputs:{selectedAncestralLegacy:"selectedAncestralLegacy"},outputs:{selectedAncestralLegacyChange:"selectedAncestralLegacyChange"},features:[e.qOj],decls:10,vars:12,consts:[[1,"frame"],[1,"center"],[1,"initial","absolute"],[1,"initial-outer-circle"],[1,"initial-inner-circle"],[1,"initial-point"],[3,"class","style","active",4,"ngFor","ngForOf"],["class","branch absolute",3,"style",4,"ngFor","ngForOf"],["class","welding absolute",3,"style",4,"ngFor","ngForOf"],["class","node absolute",3,"style","active","available","click",4,"ngFor","ngForOf"],[1,"zone-inner"],[3,"style","ancestralLegacy","equipped","selected","changed",4,"ngFor","ngForOf"],[3,"ancestralLegacy","equipped","selected","changed"],[1,"branch","absolute"],[1,"welding","absolute"],[1,"node","absolute",3,"click"],[1,"node-inner"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),e._UZ(5,"div",5),e.qZA()()(),e.YNc(6,St,3,9,"div",6),e.YNc(7,kt,1,2,"div",7),e.YNc(8,Tt,1,2,"div",8),e.YNc(9,wt,2,6,"div",9),e.qZA()()),2&t&&(e.ekj("grabbed",n.grabbed),e.xp6(1),e.Udp("top",n.position.y+"px")("left",n.position.x+"px")("transform","scale("+n.scale+")"),e.xp6(5),e.Q6J("ngForOf",n.zoneShapes),e.xp6(1),e.Q6J("ngForOf",n.lineShapes),e.xp6(1),e.Q6J("ngForOf",n.weldingShapes),e.xp6(1),e.Q6J("ngForOf",n.nodeShapes))},dependencies:[d.sg,se],styles:[".frame[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid #353535;background-color:#202020;box-sizing:border-box;position:relative;overflow:hidden;width:100%;height:100%;cursor:grab;-webkit-user-select:none;user-select:none}.frame.grabbed[_ngcontent-%COMP%]{cursor:grabbing}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]{position:relative;overflow:visible;width:0;height:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .absolute[_ngcontent-%COMP%]{transform:translate(-50%,-50%);position:absolute;top:0;left:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;pointer-events:none;width:24px;height:24px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:20px;height:20px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#101010;width:6px;height:6px;border:1px solid rgb(213,173,72);border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .initial[_ngcontent-%COMP%]   .initial-outer-circle[_ngcontent-%COMP%]   .initial-inner-circle[_ngcontent-%COMP%]   .initial-point[_ngcontent-%COMP%]{background-color:#d5ad48;width:2px;height:2px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .branch[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:4px;border:1px solid black;border-left:0;border-right:0}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .welding[_ngcontent-%COMP%]{background-color:#353535;width:50px;height:2px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:48px;height:48px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:4px;background-color:#0e0e0e;border:1px solid black;width:42px;height:42px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-0.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #f9501c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-1.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #cecece}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-2.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #81a9ed}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-3.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #bfab5c}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-4.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #8b0eab}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.color-5.active[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{box-shadow:inset 0 0 6px 2px #673e17}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]{width:62px;height:62px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-2[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:56px;height:56px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]{width:82px;height:82px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .zone.size-3[_ngcontent-%COMP%]   .zone-inner[_ngcontent-%COMP%]{width:76px;height:76px}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#353535;border:1px solid black;width:12px;height:12px;border-radius:50%;cursor:pointer}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#0e0e0e;border:1px solid black;width:8px;height:8px;border-radius:50%}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.available[_ngcontent-%COMP%]:not(.active){background-color:#d5ad48}.frame[_ngcontent-%COMP%]   .center[_ngcontent-%COMP%]   .node.active[_ngcontent-%COMP%]   .node-inner[_ngcontent-%COMP%]{background-color:#c13907}"]}),i})();function Zt(i,o){if(1&i&&e._UZ(0,"div",9),2&i){const t=o.$implicit,n=e.oxw();e.ekj("unlocked",n.isPointUnlock(t))}}let It=(()=>{class i extends O.B{constructor(t,n,a){super(),this.buildStorageService=t,this.slormancerAncestralLegacyService=n,this.messageService=a,this.ANCESTRAL_LEGACY_POINTS=(0,l.pb)(l.JYy),this.character=null,this.selectedAncestralLegacy=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.selectDefaultAncestralLegacy()})}selectDefaultAncestralLegacy(){if(this.selectedAncestralLegacy=null,null!==this.character){if(this.character.ancestralLegacies.activeAncestralLegacies.length>0){const t=(0,l.lA$)(this.character.ancestralLegacies.activeAncestralLegacies[0]);this.selectedAncestralLegacy=null===t?null:(0,l.lA$)(this.character.ancestralLegacies.ancestralLegacies[t])}null===this.selectedAncestralLegacy&&(this.selectedAncestralLegacy=(0,l.lA$)(this.character.ancestralLegacies.ancestralLegacies[0]))}}isPointUnlock(t){return t<l.sDm}optimizeAncestralLegacies(){if(null!==this.character){for(const t of this.character.ancestralLegacies.ancestralLegacies)t.baseRank=t.baseMaxRank,this.slormancerAncestralLegacyService.updateAncestralLegacyModel(t,t.baseMaxRank),this.slormancerAncestralLegacyService.updateAncestralLegacyView(t);this.buildStorageService.saveLayer(),this.messageService.message("All ancestral legacies ranks set to maximum")}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l.OXA),e.Y36(J.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ancestral-legacies"]],features:[e.qOj],decls:12,vars:3,consts:[[1,"actions"],[1,"avaialble-points"],["class","point",3,"unlocked",4,"ngFor","ngForOf"],["matTooltip","Set all ancestral legacies to max rank",3,"click"],[1,"content"],[1,"map"],[3,"selectedAncestralLegacy","selectedAncestralLegacyChange"],[1,"selected"],[3,"ancestralLegacy"],[1,"point"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",0)(3,"div",1),e.YNc(4,Zt,1,2,"div",2),e.qZA(),e.TgZ(5,"mat-icon",3),e.NdJ("click",function(){return n.optimizeAncestralLegacies()}),e._uU(6,"vertical_align_top"),e.qZA()(),e.TgZ(7,"div",4)(8,"div",5)(9,"app-ancestral-legacy-map",6),e.NdJ("selectedAncestralLegacyChange",function(r){return n.selectedAncestralLegacy=r}),e.qZA()(),e.TgZ(10,"div",7),e._UZ(11,"app-ancestral-legacy-view",8),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("ngForOf",n.ANCESTRAL_LEGACY_POINTS),e.xp6(5),e.Q6J("selectedAncestralLegacy",n.selectedAncestralLegacy),e.xp6(2),e.Q6J("ancestralLegacy",n.selectedAncestralLegacy))},dependencies:[d.sg,T.Hw,y.a8,y.dn,E.gM,X,At],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point[_ngcontent-%COMP%]{border:2px solid #353535;width:20px;height:20px;border-radius:50%;background-color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .avaialble-points[_ngcontent-%COMP%]   .point.unlocked[_ngcontent-%COMP%]{background-color:unset}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:column}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px;flex-grow:1}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:100%}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .map[_ngcontent-%COMP%]   app-ancestral-legacy-map[_ngcontent-%COMP%]{height:550px}}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;overflow-y:auto;min-height:500px;min-width:350px;width:350px}@media (max-width: 768px){mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{min-width:unset;width:auto}}"]}),i})();function Et(i,o){if(1&i&&e._UZ(0,"div",7),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.attributeTraits.summary,e.oJD)}}function Lt(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3),e._uU(5),e.qZA()(),e.TgZ(6,"div",4)(7,"div",5),e._uU(8),e.qZA(),e.YNc(9,Et,1,1,"div",6),e.qZA()()),2&i){const t=e.oxw();e.Gre("trait attribute-",t.attributeTraits.attribute,""),e.xp6(3),e.Oqu(t.attributeTraits.attributeName),e.xp6(2),e.Oqu(t.attributeTraits.title),e.xp6(3),e.Oqu(t.attributeTraits.recapLabel),e.xp6(1),e.Q6J("ngIf",null!==t.attributeTraits.summary)}}let qt=(()=>{class i{constructor(){this.attributeTraits=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attribute-summary-view"]],inputs:{attributeTraits:"attributeTraits"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"content"],[1,"info"],["class","description",3,"innerHTML",4,"ngIf"],[1,"description",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Lt,10,7,"div",0),2&t&&e.Q6J("ngIf",null!==n.attributeTraits)},dependencies:[d.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .locked{color:#686868}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value, .trait[_ngcontent-%COMP%]  .max, .trait[_ngcontent-%COMP%]  .max .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),i})();function Jt(i,o){if(1&i&&e._UZ(0,"div",9),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.trait.cumulativeStats,e.oJD)}}function Nt(i,o){if(1&i&&e._UZ(0,"div",9),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.trait.description,e.oJD)}}function Ut(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"div",10)(2,"div",11),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("innerHTML",t.trait.unlockLabel,e.oJD)}}function Rt(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",1)(2,"div",2),e._uU(3),e.qZA(),e.TgZ(4,"div",3)(5,"span",4),e._uU(6),e.qZA(),e._uU(7," - "),e.TgZ(8,"span",5),e._uU(9),e.qZA()()(),e.TgZ(10,"div",6),e.YNc(11,Jt,1,1,"div",7),e.YNc(12,Nt,1,1,"div",7),e.YNc(13,Ut,3,1,"ng-container",8),e.qZA()()),2&i){const t=e.oxw();e.Gre("trait attribute-",t.trait.attribute,""),e.xp6(3),e.Oqu(t.trait.attributeName),e.xp6(3),e.Oqu(t.trait.rankLabel),e.xp6(3),e.Oqu(t.trait.traitLevelLabel),e.xp6(2),e.Q6J("ngIf",null!==t.trait.cumulativeStats),e.xp6(1),e.Q6J("ngIf",null!==t.trait.description),e.xp6(1),e.Q6J("ngIf",null!==t.trait.unlockLabel)}}let Bt=(()=>{class i{constructor(){this.trait=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-trait-view"]],inputs:{trait:"trait"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head"],[1,"attribute"],[1,"subtitle"],[1,"rank"],[1,"level"],[1,"content"],["class","description",3,"innerHTML",4,"ngIf"],[4,"ngIf"],[1,"description",3,"innerHTML"],[1,"separator"],[1,"unlock",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,Rt,14,9,"div",0),2&t&&e.Q6J("ngIf",null!==n.trait)},dependencies:[d.O5],styles:[".trait[_ngcontent-%COMP%]{background-color:#151412;border:3px solid black;color:#fff;display:flex;flex-direction:column;gap:5px;min-width:250px}.trait.attribute-0[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]     .value{color:#2f5996}.trait.attribute-1[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]     .value{color:#a83007}.trait.attribute-2[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]     .value{color:#79b549}.trait.attribute-3[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]     .value{color:#d0b545}.trait.attribute-4[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]     .value{color:#4bc1b2}.trait.attribute-5[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]     .value{color:#753098}.trait.attribute-6[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]     .value{color:#cd7028}.trait.attribute-7[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .unlock[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]     .value{color:#bf3c59}.trait[_ngcontent-%COMP%]  .range, .trait[_ngcontent-%COMP%]  .range .value, .trait[_ngcontent-%COMP%]  .details, .trait[_ngcontent-%COMP%]  .details .value, .trait[_ngcontent-%COMP%]  .formula, .trait[_ngcontent-%COMP%]  .formula .value{color:#686868}.trait[_ngcontent-%COMP%]  .affixes .range, .trait[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border:3px solid rgb(60,57,49)}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-transform:uppercase;padding:10px;gap:2px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .attribute[_ngcontent-%COMP%]{font-size:19px}.trait[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:14px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:20px 10px;gap:20px;text-align:center}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{flex-grow:1}"]}),i})();function Ft(i,o){1&i&&e._UZ(0,"div",7)}function Ht(i,o){if(1&i&&e._UZ(0,"app-trait-view",9),2&i){const t=e.oxw(3);e.Q6J("trait",t.trait)}}function Qt(i,o){if(1&i&&e.YNc(0,Ht,1,1,"ng-template",8),2&i){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.isMouseOver)("cdkConnectedOverlayOrigin",t)}}function Yt(i,o){if(1&i&&(e.TgZ(0,"div",1,2),e.YNc(2,Ft,1,0,"div",3),e.TgZ(3,"div",4),e._UZ(4,"div",5),e.qZA(),e.YNc(5,Qt,1,2,null,6),e.qZA()),2&i){const t=e.oxw();e.Gre("trait attribute-",t.trait.attribute,""),e.ekj("first",t.first)("last",t.last)("minor",t.isMinor(t.trait))("major",t.isMajor(t.trait))("greater",t.isGreater(t.trait))("active",t.unlocked)("bonus",t.bonus)("highlight",t.highlight)("hidden-by-search",t.isHiddenBySearch),e.xp6(2),e.Q6J("ngIf",t.trait.additive),e.xp6(3),e.Q6J("ngIf",t.isMouseOver)}}let Gt=(()=>{class i extends O.B{constructor(t){super(),this.searchService=t,this.trait=null,this.first=!1,this.last=!1,this.highlight=!1,this.unlocked=!1,this.bonus=!1,this.isMouseOver=!1,this.isHiddenBySearch=!1}onMouseEnter(){this.isMouseOver=!0}onMouseLeave(){this.isMouseOver=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.isHiddenBySearch=null!==this.trait&&!this.searchService.traitMatchSearch(this.trait))}isMinor(t){return t.traitLevel===l.y$Z.Minor}isMajor(t){return t.traitLevel===l.y$Z.Major}isGreater(t){return t.traitLevel===l.y$Z.Greater}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-trait"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onMouseEnter()})("mouseleave",function(){return n.onMouseLeave()})},inputs:{trait:"trait",first:"first",last:"last",highlight:"highlight",unlocked:"unlocked",bonus:"bonus"},features:[e.qOj],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","first","last","minor","major","greater","active","bonus","highlight","hidden-by-search",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],["class","additive",4,"ngIf"],[1,"content"],[1,"node"],[4,"ngIf"],[1,"additive"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"trait"]],template:function(t,n){1&t&&e.YNc(0,Yt,6,23,"div",0),2&t&&e.Q6J("ngIf",null!==n.trait)},dependencies:[d.O5,P.pI,P.xu,Bt],styles:[".trait[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;position:relative;height:54px;width:8px;overflow:hidden;cursor:pointer}.trait.hidden-by-search[_ngcontent-%COMP%]{opacity:.2}.trait[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{position:absolute;width:4px;height:36px;left:4px}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;border:4px solid black;background-color:#353535;overflow:hidden;border-left-width:0;border-right-width:0;height:30px;z-index:1}.trait[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border:2px solid black;background-color:#202020;height:14px}.trait.attribute-0.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-0[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#2f5996}.trait.attribute-0.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#2f59964d}.trait.attribute-1.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-1[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#a83007}.trait.attribute-1.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#a830074d}.trait.attribute-2.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-2[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#79b549}.trait.attribute-2.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#79b5494d}.trait.attribute-3.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-3[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#d0b545}.trait.attribute-3.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#d0b5454d}.trait.attribute-4.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-4[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#4bc1b2}.trait.attribute-4.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#4bc1b24d}.trait.attribute-5.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-5[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#753098}.trait.attribute-5.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#7530984d}.trait.attribute-6.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-6[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#cd7028}.trait.attribute-6.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#cd70284d}.trait.attribute-7.active[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.attribute-7[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{background-color:#bf3c59}.trait.attribute-7.highlight[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#bf3c594d}.trait.bonus[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f}.trait.bonus.highlight[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{background-color:#61f18f4d}.trait[_ngcontent-%COMP%]:not(.greater)   .content[_ngcontent-%COMP%]{border-left-width:2px;border-right-width:2px}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.minor[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%], .trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:8px}.trait.minor.first[_ngcontent-%COMP%]{width:10px}.trait.minor.first[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-left-width:4px;width:10px}.trait.major[_ngcontent-%COMP%]{width:12px}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-left-width:0;border-right-width:0}.trait.major[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{width:12px}.trait.greater[_ngcontent-%COMP%]{width:16px;position:relative}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;transform:rotate(45deg);border-width:4px;height:36px;width:36px;left:-10px}.trait.greater[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .node[_ngcontent-%COMP%]{border-width:2px;width:14px;height:14px}.trait.greater[_ngcontent-%COMP%]   .additive[_ngcontent-%COMP%]{left:6px;height:54px}.trait.greater.last[_ngcontent-%COMP%]{width:32px}"]}),i})();function Vt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-trait",9),e.NdJ("mouseenter",function(){const r=e.CHM(t).index,c=e.oxw(2);return e.KtG(c.nodeEnter(r))})("mouseleave",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.nodeLeave())})("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.nodeClick())}),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(2);e.Q6J("trait",t)("first",0===n)("last",n===a.attribute.traits.length-1)("highlight",a.isHighlight(n))("bonus",a.isBonus(n))("unlocked",a.isUnlocked(n))}}function Dt(i,o){if(1&i&&e._UZ(0,"app-attribute-summary-view",10),2&i){const t=e.oxw(2);e.Q6J("attributeTraits",t.attribute)}}function jt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addPoint(a))}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",0===t.remainingPoints||t.attribute.baseRank===t.MAX_RANK)}}function Kt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.removePoint(a))}),e.TgZ(1,"mat-icon"),e._uU(2,"remove"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",0===t.attribute.baseRank)}}function Xt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1,2)(2,"img",3),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showSummary=!0)})("mouseleave",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showSummary=!1)}),e.qZA(),e.TgZ(3,"div",4),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.nodeEnter(-1))})("mouseleave",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.nodeLeave())})("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.nodeClick())}),e.qZA(),e.YNc(4,Vt,1,6,"app-trait",5),e.TgZ(5,"div",6),e._uU(6),e.qZA(),e.YNc(7,Dt,1,1,"ng-template",7),e.YNc(8,jt,3,1,"button",8),e.YNc(9,Kt,3,1,"button",8),e.qZA()}if(2&i){const t=e.MAs(1),n=e.oxw();e.Gre("bar attribute-",n.attribute.attribute,""),e.ekj("icon-shift",n.iconShift)("readonly",n.readonly)("short",n.short),e.xp6(2),e.Q6J("src",n.attribute.icon,e.LSH),e.xp6(2),e.Q6J("ngForOf",n.attribute.traits)("ngForTrackBy",n.trackByTrait),e.xp6(2),e.AsE(" +",n.attribute.rank," ",n.attribute.attributeName," "),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showSummary)("cdkConnectedOverlayOrigin",t),e.xp6(1),e.Q6J("ngIf",!n.readonly),e.xp6(1),e.Q6J("ngIf",!n.readonly)}}let me=(()=>{class i{constructor(t,n){this.slormancerAttributeService=t,this.buildStorageService=n,this.MAX_RANK=75,this.attribute=null,this.remainingPoints=0,this.iconShift=!1,this.short=!1,this.readonly=!1,this.unlockedRange={min:0,max:0},this.highlightRange={min:0,max:0},this.bonusRange={min:0,max:0},this.cappedCursor=0,this.showSummary=!1,this.cursorIndex=null}ngOnInit(){this.updateCursor()}ngOnChanges(){this.updateCursor()}updateCursor(){null!==this.attribute&&(null===this.cursorIndex?(this.cappedCursor=this.attribute.baseRank,this.highlightRange={min:0,max:0},this.unlockedRange={min:0,max:this.attribute.baseRank},this.bonusRange={min:this.attribute.baseRank,max:this.attribute.baseRank+this.attribute.bonusRank}):(this.cappedCursor=Math.min(this.attribute.baseRank+this.remainingPoints,this.cursorIndex+1),this.bonusRange={min:Math.max(this.cappedCursor,this.attribute.baseRank),max:this.attribute.baseRank+this.attribute.bonusRank},this.highlightRange=this.cursorIndex<this.attribute.baseRank?{min:this.cursorIndex+1,max:Math.max(this.attribute.baseRank,this.cursorIndex+1)}:{min:this.attribute.baseRank,max:this.cappedCursor}))}nodeEnter(t){this.cursorIndex=t,this.updateCursor()}nodeLeave(){this.cursorIndex=null,this.updateCursor()}setRank(t){null!==this.attribute&&this.attribute.baseRank!==t&&!this.readonly&&(this.attribute.baseRank=t,this.slormancerAttributeService.updateAttributeTraits(this.attribute),this.buildStorageService.saveLayer(),this.updateCursor())}nodeClick(){null!==this.attribute&&this.setRank(this.cappedCursor)}isUnlocked(t){return t>=this.unlockedRange.min&&t<this.unlockedRange.max}isHighlight(t){return t>=this.highlightRange.min&&t<this.highlightRange.max}isBonus(t){return t>=this.bonusRange.min&&t<this.bonusRange.max}addPoint(t){if(null!==this.attribute&&this.remainingPoints>0){let n=Math.min(this.remainingPoints,this.MAX_RANK-this.attribute.baseRank);this.setRank(this.attribute.baseRank+Math.min(n,t.shiftKey?10:1))}}removePoint(t){null!==this.attribute&&this.attribute.baseRank>0&&this.setRank(this.attribute.baseRank-Math.min(this.attribute.baseRank,t.shiftKey?10:1))}trackByTrait(t,n){return t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.Qup),e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attribute-line"]],inputs:{attribute:"attribute",remainingPoints:"remainingPoints",iconShift:"iconShift",short:"short",readonly:"readonly"},features:[e.TTD],decls:1,vars:1,consts:[["cdkOverlayOrigin","",3,"class","icon-shift","readonly","short",4,"ngIf"],["cdkOverlayOrigin",""],["trigger","cdkOverlayOrigin"],[3,"src","mouseenter","mouseleave"],[1,"pre-bar",3,"mouseenter","mouseleave","click"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"total"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],["mat-icon-button","","color","primary",3,"disabled","click",4,"ngIf"],[3,"trait","first","last","highlight","bonus","unlocked","mouseenter","mouseleave","click"],[3,"attributeTraits"],["mat-icon-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&e.YNc(0,Xt,10,18,"div",0),2&t&&e.Q6J("ngIf",null!==n.attribute)},dependencies:[d.sg,d.O5,b.lW,T.Hw,P.pI,P.xu,qt,Gt],styles:['.bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;padding:4px 0;position:relative;height:60px}.bar.icon-shift[_ngcontent-%COMP%]{margin-left:16px}.bar[_ngcontent-%COMP%]:before{content:" ";position:absolute;background-color:#353535;border:4px solid black;transform:rotate(45deg);width:38px;height:38px}.bar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:2;padding-left:1px}.bar[_ngcontent-%COMP%]   .pre-bar[_ngcontent-%COMP%]{background-color:#353535;border:4px solid black;margin-left:-6px;border-left:0;border-right:0;min-width:20px;width:20px;height:30px;z-index:1}.bar[_ngcontent-%COMP%]:not(.readonly)   .pre-bar[_ngcontent-%COMP%]{cursor:pointer}.bar[_ngcontent-%COMP%]:not(.icon-shift)   .pre-bar[_ngcontent-%COMP%]{width:36px}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:none;background-color:#353535;border:4px solid black;font-weight:700;border-left:0;width:130px;height:30px}.bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.bar.short[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar.short[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}@media (max-width: 768px){.bar[_ngcontent-%COMP%]   app-trait[_ngcontent-%COMP%]{display:none}.bar[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}}.bar.attribute-0[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#2f5996}.bar.attribute-1[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#a83007}.bar.attribute-2[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#79b549}.bar.attribute-3[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#d0b545}.bar.attribute-4[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#4bc1b2}.bar.attribute-5[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#753098}.bar.attribute-6[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#cd7028}.bar.attribute-7[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{color:#bf3c59}']}),i})();function zt(i,o){if(1&i&&e._UZ(0,"app-attribute-line",2),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("iconShift",t%2==0)("attribute",n.attributes.allocated[t])("remainingPoints",n.attributes.remainingPoints)}}function $t(i,o){if(1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"p"),e._uU(3),e.qZA(),e.YNc(4,zt,1,3,"app-attribute-line",1),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.AsE("",t.attributes.remainingPoints,"/",t.attributes.maxPoints," Points to spend"),e.xp6(1),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}let Wt=(()=>{class i extends O.B{constructor(t){super(),this.buildStorageService=t,this.ALL_ATTRIBUTES=l.AFD,this.attributes=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.attributes=null===t?null:t.character.attributes)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-attributes"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[3,"iconShift","attribute","remainingPoints",4,"ngFor","ngForOf"],[3,"iconShift","attribute","remainingPoints"]],template:function(t,n){1&t&&e.YNc(0,$t,5,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==n.attributes)},dependencies:[d.sg,d.O5,y.a8,y.dn,me],styles:["[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:4px}mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c84407}"]}),i})(),en=(()=>{class i{constructor(){this.character=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-defense-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"TODO")}}),i})(),tn=(()=>{class i{constructor(){this.character=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-turret-syndrome-calc"]],inputs:{character:"character"},decls:1,vars:0,template:function(t,n){1&t&&e._uU(0,"TODO TURRET")}}),i})();function nn(i,o){if(1&i&&(e.TgZ(0,"mat-option",5),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function an(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1,"Choose a calc tu display"),e.qZA())}function on(i,o){if(1&i&&e._UZ(0,"app-defense-calc",6),2&i){const t=e.oxw(2);e.Q6J("character",t.character)}}function rn(i,o){if(1&i&&e._UZ(0,"app-turret-syndrome-calc",6),2&i){const t=e.oxw(2);e.Q6J("character",t.character)}}function ln(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"mat-form-field",1)(4,"mat-label"),e._uU(5,"Selected calc"),e.qZA(),e.TgZ(6,"mat-select",2),e.NdJ("ngModelChange",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.currentCalc=a)}),e.YNc(7,nn,2,2,"mat-option",3),e.qZA()(),e.YNc(8,an,2,0,"p",0),e.YNc(9,on,1,1,"app-defense-calc",4),e.YNc(10,rn,1,1,"app-turret-syndrome-calc",4),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngModel",t.currentCalc),e.xp6(1),e.Q6J("ngForOf",t.options),e.xp6(1),e.Q6J("ngIf",null===t.currentCalc),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.Defense),e.xp6(1),e.Q6J("ngIf",t.currentCalc===t.CalcPage.TurretSyndrome)}}var R=(()=>{return(i=R||(R={}))[i.Defense=0]="Defense",i[i.TurretSyndrome=1]="TurretSyndrome",R;var i})();let cn=(()=>{class i extends O.B{constructor(t){super(),this.buildStorageService=t,this.CalcPage=R,this.character=null,this.options=[{value:R.Defense,label:"Defenses"},{value:R.TurretSyndrome,label:"Turret"}],this.currentCalc=null,this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(n=>this.character=null===n?null:n.character)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-calcs"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline",1,"no-error-padding"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"character",4,"ngIf"],[3,"value"],[3,"character"]],template:function(t,n){1&t&&e.YNc(0,ln,11,5,"main",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,y.a8,y.dn,_.KE,_.hX,Z.gD,I.ey,s.JJ,s.On,en,tn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}"]}),i})();function sn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.select(c.stats,r))}),e.TgZ(1,"div",6),e._uU(2),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.ekj("selected",n.isSelected(t)),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("matTooltip",n.getTooltip(n.stats,t)),e.xp6(1),e.Oqu(n.getValue(n.stats,t))}}function mn(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.YNc(3,sn,5,5,"div",4),e.BQk()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.section),e.xp6(1),e.Q6J("ngForOf",t.stats)}}function dn(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,mn,4,2,"ng-container",2),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.SECTIONS)}}let z=(()=>{class i extends O.B{constructor(t){super(),this.slormancerTranslateService=t,this.SECTIONS=[{section:this.slormancerTranslateService.translate("cat_adventure"),stats:[{name:this.slormancerTranslateService.translate("essence_find"),stat:"essence_find",sign:!0},{name:this.slormancerTranslateService.translate("xp_find"),stat:"xp_find",sign:!0},{name:this.slormancerTranslateService.translate("influence_gain"),stat:"influence_gain",sign:!0},{name:this.slormancerTranslateService.translate("mf_find"),stat:"mf_find",sign:!0},{name:this.slormancerTranslateService.translate("mf_qual"),stat:"mf_qual",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_health"),stats:[{name:this.slormancerTranslateService.translate("max_health"),stat:"max_health",sign:!1},{name:this.slormancerTranslateService.translate("health_regeneration"),stat:"health_regeneration",sign:!0},{name:this.slormancerTranslateService.translate("health_leech_percent"),stat:"health_leech_percent",sign:!1},{name:this.slormancerTranslateService.translate("life_on_hit"),stat:"life_on_hit",sign:!0},{name:this.slormancerTranslateService.translate("life_on_kill"),stat:"life_on_kill",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_mana"),stats:[{name:this.slormancerTranslateService.translate("max_mana"),stat:"max_mana",sign:!1},{name:this.slormancerTranslateService.translate("mana_regeneration"),stat:"mana_regeneration",sign:!0},{name:this.slormancerTranslateService.translate("mana_leech_percent"),stat:"mana_leech_percent",sign:!1},{name:this.slormancerTranslateService.translate("mana_on_hit"),stat:"mana_on_hit",sign:!0},{name:this.slormancerTranslateService.translate("mana_on_kill"),stat:"mana_on_kill",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_movement"),stats:[{name:this.slormancerTranslateService.translate("movement_speed"),stat:"movement_speed",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_attack"),stats:[{name:this.slormancerTranslateService.translate("attack_speed"),stat:"attack_speed",sign:!1},{name:this.slormancerTranslateService.translate("basic_damage"),stat:"basic_damage",sign:!1},{name:this.slormancerTranslateService.translate("weapon_damage"),stat:"weapon_damage",sign:!1},{name:this.slormancerTranslateService.translate("physical_damage"),stat:"physical_damage",sign:!1},{name:this.slormancerTranslateService.translate("elemental_damage"),stat:"elemental_damage",sign:!1},{name:this.slormancerTranslateService.translate("critical_chance"),stat:"critical_chance",sign:!1},{name:this.slormancerTranslateService.translate("critical_damage"),stat:"critical_damage",sign:!1},{name:this.slormancerTranslateService.translate("ancestral_chance"),stat:"ancestral_chance",sign:!1},{name:this.slormancerTranslateService.translate("ancestral_damage"),stat:"ancestral_damage",sign:!1},{name:this.slormancerTranslateService.translate("armor_penetration"),stat:"armor_penetration",sign:!1},{name:this.slormancerTranslateService.translate("elemental_penetration"),stat:"elemental_penetration",sign:!1},{name:this.slormancerTranslateService.translate("dot_increased_damage"),stat:"dot_increased_damage",sign:!0},{name:this.slormancerTranslateService.translate("increased_on_elite"),stat:"increased_on_elite",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_defense"),stats:[{name:this.slormancerTranslateService.translate("armor"),stat:"armor",sign:!1},{name:this.slormancerTranslateService.translate("elemental_resist"),stat:"elemental_resist",sign:!1},{name:this.slormancerTranslateService.translate("fire_resistance"),stat:"fire_resistance",sign:!1},{name:this.slormancerTranslateService.translate("ice_resistance"),stat:"ice_resistance",sign:!1},{name:this.slormancerTranslateService.translate("lightning_resistance"),stat:"lightning_resistance",sign:!1},{name:this.slormancerTranslateService.translate("light_resistance"),stat:"light_resistance",sign:!1},{name:this.slormancerTranslateService.translate("shadow_resistance"),stat:"shadow_resistance",sign:!1},{name:this.slormancerTranslateService.translate("dodge"),stat:"dodge",sign:!1},{name:this.slormancerTranslateService.translate("thorns"),stat:"thorns",sign:!1},{name:this.slormancerTranslateService.translate("retaliate"),stat:"retaliate",sign:!1},{name:this.slormancerTranslateService.translate("tenacity"),stat:"tenacity",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_all"),stat:"reduced_on_all",sign:!1},{name:this.slormancerTranslateService.translate("reduced_by_elite"),stat:"reduced_by_elite",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_melee"),stat:"reduced_on_melee",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_projectile"),stat:"reduced_on_projectile",sign:!1},{name:this.slormancerTranslateService.translate("reduced_on_area"),stat:"reduced_on_area",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_resources"),stats:[{name:this.slormancerTranslateService.translate("gold_find"),stat:"gold_find",sign:!0},{name:this.slormancerTranslateService.translate("scrap_find"),stat:"scrap_find",sign:!0},{name:this.slormancerTranslateService.translate("slormite_find"),stat:"slormite_find",sign:!0},{name:this.slormancerTranslateService.translate("slormeline_find"),stat:"slormeline_find",sign:!0},{name:this.slormancerTranslateService.translate("reaper_find"),stat:"reaper_find",sign:!0},{name:this.slormancerTranslateService.translate("skill_mastery_gain"),stat:"skill_mastery_gain",sign:!0}]},{section:this.slormancerTranslateService.translate("cat_secondary_melee"),stats:[{name:this.slormancerTranslateService.translate("inner_fire_chance"),stat:"inner_fire_chance",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_max_number"),stat:"inner_fire_max_number",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_duration"),stat:"inner_fire_duration",sign:!1},{name:this.slormancerTranslateService.translate("inner_fire_damage"),stat:"inner_fire_damage",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_chance"),stat:"overdrive_chance",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_bounce_number"),stat:"overdrive_bounce_number",sign:!1},{name:this.slormancerTranslateService.translate("overdrive_damage"),stat:"overdrive_damage",sign:!1},{name:this.slormancerTranslateService.translate("recast_chance"),stat:"recast_chance",sign:!1},{name:this.slormancerTranslateService.translate("knockback_melee"),stat:"knockback_melee",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_projectile"),stats:[{name:this.slormancerTranslateService.translate("additional_projectile"),stat:"additional_projectile",sign:!0},{name:this.slormancerTranslateService.translate("chance_to_pierce"),stat:"chance_to_pierce",sign:!1},{name:this.slormancerTranslateService.translate("fork_chance"),stat:"fork_chance",sign:!1},{name:this.slormancerTranslateService.translate("chance_to_rebound"),stat:"chance_to_rebound",sign:!1},{name:this.slormancerTranslateService.translate("projectile_speed"),stat:"projectile_speed",sign:!0},{name:this.slormancerTranslateService.translate("knockback_projectile"),stat:"knockback_projectile",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_aoe"),stats:[{name:this.slormancerTranslateService.translate("aoe_increased_size"),stat:"aoe_increased_size",sign:!1},{name:this.slormancerTranslateService.translate("aoe_increased_effect"),stat:"aoe_increased_effect",sign:!1}]},{section:this.slormancerTranslateService.translate("cat_secondary_extras"),stats:[{name:this.slormancerTranslateService.translate("totem_increased_effect"),stat:"totem_increased_effect",sign:!0},{name:this.slormancerTranslateService.translate("aura_increased_effect"),stat:"aura_increased_effect",sign:!0},{name:this.slormancerTranslateService.translate("minion_increased_damage"),stat:"minion_increased_damage",sign:!0}]}],this.stats=null,this.selectedMergedStat=null,this.selected=new e.vpe}ngOnInit(){}valueToString(t,n,a){let r;return r="number"==typeof t?(t<0?"-":n?"+":"")+t+a:(t.min<0?"":n?"+":"")+t.min+a+" - "+(t.max<0?"":n?"+":"")+t.max+a,r}getValue(t,n){const a=t.find(c=>c.stat===n.stat);let r="0";return a&&(r=this.valueToString(a.totalDisplayed,n.sign,a.suffix)),r}select(t,n){const a=t.find(r=>r.stat===n.stat);a&&(this.selectedMergedStat=a,this.selected.emit(a))}getTooltip(t,n){const a=t.find(c=>c.stat===n.stat);let r="No details found";if(a){const c="number"!=typeof a.total;r="Flat: "+a.values.flat.map(m=>this.valueToString(m.value,!1,a.suffix)).join(", ")+"\n",c&&(r+="Flat (max): "+a.values.max.map(m=>this.valueToString(m.value,!1,a.suffix)).join(", ")+"\n"),r+="Percent: "+a.values.percent.map(m=>this.valueToString(m.value,!1,"%")).join(", ")+"\n",c&&(r+="Percent (max) : "+a.values.maxPercent.map(m=>this.valueToString(m.value,!1,"%")).join(", ")+"\n"),r+="Multiplier: "+a.values.multiplier.map(m=>this.valueToString(m.value,!1,"%")).join(", ")}return r}translate(t){return this.slormancerTranslateService.translate(t)}isSelected(t){return null!==this.selectedMergedStat&&this.selectedMergedStat.stat===t.stat}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.n6D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-main-stats"]],inputs:{stats:"stats"},outputs:{selected:"selected"},features:[e.qOj],decls:1,vars:1,consts:[["class","sections",4,"ngIf"],[1,"sections"],[4,"ngFor","ngForOf"],[1,"section"],["class","stat",3,"selected","click",4,"ngFor","ngForOf"],[1,"stat",3,"click"],[1,"label"],[1,"value",3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,dn,2,1,"div",0),2&t&&e.Q6J("ngIf",null!==n.stats)},dependencies:[d.sg,d.O5,E.gM],styles:[".sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding-left:8px;cursor:pointer}.sections[_ngcontent-%COMP%]   .stat[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.sections[_ngcontent-%COMP%]   .stat.selected[_ngcontent-%COMP%]{background-color:#ffffff4d}"]}),i})();function un(i,o){if(1&i&&(e.TgZ(0,"div",4)(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6)(4,"span",7),e._uU(5),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",8),e._uU(8),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.ekj("increase",t.difference>0)("decrease",t.difference<0),e.xp6(1),e.Q6J("matTooltip",n.valueToString(t.left,!0)),e.xp6(1),e.Oqu(n.valueToString(t.left)),e.xp6(3),e.Oqu(n.changeToString(t.difference)),e.xp6(1),e.hij(" ",t.name,""),e.xp6(1),e.Q6J("matTooltip",n.valueToString(t.right,!0)),e.xp6(1),e.Oqu(n.valueToString(t.right))}}function pn(i,o){if(1&i&&(e.ynx(0),e.YNc(1,un,9,10,"div",3),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",0!==t.difference)}}function gn(i,o){1&i&&(e.TgZ(0,"div",9),e._uU(1,"No differences"),e.qZA())}let de=(()=>{class i{constructor(){this.differences=[]}valueToString(t,n=!1){let a="";return a+="number"==typeof t?t>1e4&&!n?Math.floor(t/1e3)+"k":t:t.min>1e4&&t.max>1e4&&!n?Math.floor(t.min/1e3)+"k - "+Math.floor(t.max/1e3)+"k":t.min+" - "+t.max,a}changeToString(t){let n="";return Number.isFinite(t)&&(t>0&&(n="+"),n+=t+"%"),n}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-compare-view"]],inputs:{differences:"differences"},decls:3,vars:2,consts:[[1,"differences"],[4,"ngFor","ngForOf"],["class","no-differences",4,"ngIf"],["class","difference",3,"increase","decrease",4,"ngIf"],[1,"difference"],[1,"left",3,"matTooltip"],[1,"change"],[1,"value"],[1,"right",3,"matTooltip"],[1,"no-differences"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.YNc(1,pn,2,1,"ng-container",1),e.YNc(2,gn,2,0,"div",2),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",n.differences),e.xp6(1),e.Q6J("ngIf",0===n.differences.length))},dependencies:[d.sg,d.O5,E.gM],styles:[".differences[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;min-width:350px}@media (max-width: 374px){.differences[_ngcontent-%COMP%]{min-width:auto}}.differences[_ngcontent-%COMP%]   .no-differences[_ngcontent-%COMP%]{text-align:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{gap:8px}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 374px){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%], .differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{display:none}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;text-align:center}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{flex-basis:auto}}}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{text-align:left}.differences[_ngcontent-%COMP%]   .difference[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{text-align:right}.differences[_ngcontent-%COMP%]   .difference.increase[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:green}.differences[_ngcontent-%COMP%]   .difference.decrease[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:red}"]}),i})();function _n(i,o){1&i&&(e.TgZ(0,"p"),e._uU(1,"Choose another layer to compare with"),e.qZA())}function fn(i,o){if(1&i&&e._UZ(0,"app-compare-view",9),2&i){const t=e.oxw(2);e.Q6J("differences",t.differences)}}function hn(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Cn(i,o){if(1&i&&e._UZ(0,"app-main-stats",2),2&i){const t=e.oxw(2);e.Q6J("stats",t.layerControl.value.character.stats)}}function vn(i,o){if(1&i&&(e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"h2"),e._uU(4),e.qZA(),e._UZ(5,"app-main-stats",2),e.qZA()(),e.TgZ(6,"mat-card",3)(7,"mat-card-content"),e.YNc(8,_n,2,0,"p",0),e.YNc(9,fn,1,1,"app-compare-view",4),e.qZA()(),e.TgZ(10,"mat-card",1)(11,"mat-card-content")(12,"mat-form-field",5)(13,"mat-label"),e._uU(14,"Layer to compare with"),e.qZA(),e.TgZ(15,"mat-select",6),e.YNc(16,hn,2,2,"mat-option",7),e.qZA()(),e.YNc(17,Cn,1,1,"app-main-stats",8),e.qZA()()()),2&i){const t=e.oxw();e.xp6(4),e.Oqu(t.currentLayer.name),e.xp6(1),e.Q6J("stats",t.currentLayer.character.stats),e.xp6(3),e.Q6J("ngIf",null===t.differences),e.xp6(1),e.Q6J("ngIf",null!==t.differences),e.xp6(6),e.Q6J("formControl",t.layerControl),e.xp6(1),e.Q6J("ngForOf",t.layers),e.xp6(1),e.Q6J("ngIf",t.layerControl.value)}}let Mn=(()=>{class i extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerCharacterComparatorService=n,this.differences=null,this.currentLayer=null,this.layers=[],this.config=null,this.layerControl=new s.NI(null),this.buildStorageService.buildChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(a=>{var r;this.layers=null===a?[]:a.layers,this.layerControl.setValue(null!==(r=this.layers[0])&&void 0!==r?r:null)}),this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(a=>{var r;if(this.currentLayer=a,null!==a){const c=this.layers.indexOf(a);-1!==c&&(this.layerControl.setValue(null!==(r=this.layers[0===c&&this.layers.length>1?1:0])&&void 0!==r?r:null),this.updateDifferences())}}),this.layerControl.valueChanges.subscribe(()=>this.updateDifferences())}ngOnInit(){}updateDifferences(){this.differences=null,null!==this.currentLayer&&this.layerControl.value&&this.currentLayer!==this.layerControl.value&&(this.differences=this.slormancerCharacterComparatorService.compareCharacters(this.currentLayer.character,this.layerControl.value.character))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l.PeY))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-compare"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"layer"],[3,"stats"],[1,"compare"],[3,"differences",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["color","primary",3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"stats",4,"ngIf"],[3,"differences"],[3,"value"]],template:function(t,n){1&t&&e.YNc(0,vn,18,7,"main",0),2&t&&e.Q6J("ngIf",null!==n.currentLayer&&n.layers.length>0)},dependencies:[d.sg,d.O5,y.a8,y.dn,_.KE,_.hX,Z.gD,I.ey,s.JJ,s.oH,z,de],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card.layer[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card.compare[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),i})();var V=h(7446);function bn(i,o){if(1&i&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function On(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",4),e.YNc(4,bn,2,1,"mat-icon",5),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function xn(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function yn(i,o){if(1&i&&(e.TgZ(0,"mat-icon",6),e._uU(1,"info"),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function Pn(i,o){if(1&i&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",7),e.YNc(4,xn,2,2,"mat-option",8),e.qZA(),e.YNc(5,yn,2,1,"mat-icon",5),e.qZA()),2&i){const t=e.oxw(2);e.xp6(2),e.Oqu(t.config.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(1),e.Q6J("ngForOf",t.config.values),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function Sn(i,o){if(1&i&&(e.TgZ(0,"mat-icon",12),e._uU(1,"info"),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("matTooltip",t.config.info)}}function kn(i,o){if(1&i&&(e.TgZ(0,"mat-checkbox",10)(1,"label"),e._uU(2),e.YNc(3,Sn,2,1,"mat-icon",11),e.qZA()()),2&i){const t=e.oxw(2);e.Q6J("formControl",t.control)("checked",t.control.value),e.xp6(2),e.hij(" ",t.config.label," "),e.xp6(1),e.Q6J("ngIf",t.config.info)}}function Tn(i,o){if(1&i&&(e.ynx(0),e.YNc(1,On,5,3,"mat-form-field",1),e.YNc(2,Pn,6,4,"mat-form-field",1),e.YNc(3,kn,4,4,"mat-checkbox",2),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.isNumber(t.config)),e.xp6(1),e.Q6J("ngIf",t.isEnum(t.config)),e.xp6(1),e.Q6J("ngIf",t.isBoolean(t.config))}}let wn=(()=>{class i{constructor(){this.control=null,this.config=null}isNumber(t){return"number"===t.type}isEnum(t){return"enum"===t.type}isBoolean(t){return"boolean"===t.type}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-config-entry"]],inputs:{control:"control",config:"config"},decls:1,vars:1,consts:[[4,"ngIf"],["appearance","outline","color","primary","class","no-error-padding",4,"ngIf"],["color","primary","labelPosition","before",3,"formControl","checked",4,"ngIf"],["appearance","outline","color","primary",1,"no-error-padding"],["matInput","","type","number",3,"formControl"],["matSuffix","",3,"matTooltip",4,"ngIf"],["matSuffix","",3,"matTooltip"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["color","primary","labelPosition","before",3,"formControl","checked"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,Tn,4,3,"ng-container",0),2&t&&e.Q6J("ngIf",null!==n.config&&null!==n.control)},dependencies:[d.sg,d.O5,T.Hw,_.KE,_.hX,_.R9,A.Nt,Z.gD,I.ey,V.oG,E.gM,s.Fj,s.wV,s.JJ,s.oH],styles:["mat-form-field[_ngcontent-%COMP%], mat-checkbox[_ngcontent-%COMP%]{width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;white-space:initial;width:100%}mat-checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-left:4px}"]}),i})();function An(i,o){if(1&i&&e._UZ(0,"app-config-entry",4),2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("control",n.getControl(t))("config",t)}}function Zn(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,An,1,2,"app-config-entry",3),e.BQk()),2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function In(i,o){if(1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Zn,4,2,"ng-container",1),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.GENERAL_CONFIG_GROUPS)}}function En(i,o){if(1&i&&e._UZ(0,"app-config-entry",4),2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("control",n.getControl(t))("config",t)}}function Ln(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,En,1,2,"app-config-entry",3),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function qn(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ln,4,2,"ng-container",0),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isGroupValid(t))}}function Jn(i,o){if(1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,qn,2,1,"ng-container",1),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.CLASS_CONFIG_GROUPS)}}function Nn(i,o){if(1&i&&e._UZ(0,"app-config-entry",4),2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("control",n.getControl(t))("config",t)}}function Un(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",2),e._uU(2),e.qZA(),e.YNc(3,Nn,1,2,"app-config-entry",3),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.title),e.xp6(1),e.Q6J("ngForOf",t.configurations)}}function Rn(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Un,4,2,"ng-container",0),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isGroupValid(t))}}function Bn(i,o){if(1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-content"),e.YNc(2,Rn,2,1,"ng-container",1),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.EQUIPMENT_CONFIG_GROUPS)}}let Fn=(()=>{class i extends O.B{constructor(t){super(),this.buildStorageService=t,this.EXTRA_VALIDATORS={percent_missing_health:[s.kI.max(100)],percent_missing_mana:[s.kI.max(100)],enemy_percent_missing_health:[s.kI.max(100)],block_stacks:[s.kI.max(100)],nimble_champion_stacks:[s.kI.max(200)],nimble_chaserenitympion_stacks:[s.kI.max(12)]},this.GENERAL_CONFIG_GROUPS=[{title:"General",condition:()=>!0,configurations:[{type:"number",key:"all_other_characters_level",label:"Sum of all your other character's level"},{type:"number",key:"highest_same_type_reaper_level",label:"Highest level among reapers of the same type of equipped reaper"},{type:"number",key:"completed_achievements",label:"Number of completed achievements"},{type:"number",key:"elder_slorms",label:"Total Elder Slorm"},{type:"number",key:"overall_reputation",label:"Overall reputation"},{type:"number",key:"percent_missing_health",label:"Missing life (%)",info:"Total locked life will be used instead if higher"},{type:"number",key:"percent_missing_mana",label:"Missing mana (%)",info:"Total locked mana will be used instead if higher"},{type:"number",key:"controlled_minions",label:"Minions under your control",info:"Totems are not minions"},{type:"number",key:"totems_under_control",label:"Totems under your control",info:"Minions are not totems"},{type:"number",key:"highest_slorm_temple_floor",label:"Highest Slorm Temple floor"},{type:"boolean",key:"idle",label:"Are you idle ?"},{type:"boolean",key:"is_rune_active",label:"Is your effect rune active ?"},{type:"number",key:"effect_rune_affinity",label:"Affinity of your effect rune",info:"Used if rune and reaper smith are differents"}]},{title:"When in Combat",condition:()=>!0,configurations:[{type:"number",key:"mana_lost_last_second",label:"Mana lost last second"},{type:"number",key:"mana_gained_last_second",label:"Mana gained last second"},{type:"number",key:"active_inner_fire",label:"Active inner fires"},{type:"number",key:"hits_taken_recently",label:"Hits taken recently"},{type:"number",key:"skill_cast_recently",label:"Skills cast recently"},{type:"number",key:"ennemies_in_radius",label:"How much ennemies are close to you"},{type:"number",key:"elites_in_radius",label:"How much elites are close to you"},{type:"number",key:"chilled_enemy_nearby",label:"How much frozen or chilled enemies are close to you"},{type:"boolean",key:"cast_support_before_next_cast",label:"Did you cast a support skill recently"},{type:"boolean",key:"took_elemental_damage_recently",label:"Did you take elemental damage recently"},{type:"boolean",key:"took_physical_damage_recently",label:"Did you take physical damage recently"},{type:"boolean",key:"crit_recently",label:"Did you deal a critical strike recently"},{type:"boolean",key:"dodge_recently",label:"Did you dodge recently"},{type:"boolean",key:"in_combat",label:"Are you in combat"}]},{title:"Enemy",condition:()=>!0,configurations:[{type:"boolean",key:"use_enemy_state",label:"Use enemy state",info:"If unchecked, will ignore any stat given by a specific enemy state"},{type:"number",key:"enemy_percent_missing_health",label:"Missing health (%)"},{type:"number",key:"distance_with_target",label:"Distance with your hero (in yards)"},{type:"boolean",key:"target_is_close",label:"Is close to you"},{type:"boolean",key:"target_is_isolated",label:"Is isolated"},{type:"boolean",key:"target_has_broken_armor",label:"Has broken armor"},{type:"boolean",key:"target_has_negative_effect",label:"Has any negative effect"},{type:"boolean",key:"target_is_burning",label:"Is burning"}]}],this.EQUIPMENT_CONFIG_GROUPS=[{title:"Reaper (Adam Nostrus)",condition:n=>2===n.reaper.id,configurations:[{type:"boolean",key:"has_adam_blessing_buff",label:"Do you have adam's blessing"}]},{title:"Reaper (Manificient Leviathan)",condition:n=>105===n.reaper.id,configurations:[{type:"number",key:"victims_reaper_104",label:"Kills with Goldfish reaper"}]},{title:"Reaper (Lifebender)",condition:n=>73===n.reaper.id,configurations:[{type:"number",key:"damage_stored",label:"Last damage received"}]},{title:"Reaper (Manabender)",condition:n=>74===n.reaper.id,configurations:[{type:"boolean",key:"has_manabender_buff",label:"Is manabender (buff) active"}]},{title:"Reaper (Nimble warrior)",condition:n=>75===n.reaper.id,configurations:[{type:"boolean",key:"has_nimble_buff",label:"Is nimble effect active"},{type:"number",key:"nimble_champion_stacks",label:"Nimble champion stacks"}]},{title:"Reaper (Chrysalis)",condition:n=>79===n.reaper.id||80===n.reaper.id,configurations:[{type:"number",key:"negative_effects_on_ennemies_in_radius",label:"Total number of negative effect on enemies"}]},{title:"Reaper (Ancestral Legacy)",condition:n=>82===n.reaper.id||83===n.reaper.id,configurations:[{type:"number",key:"ancestral_legacy_stacks",label:"Number of ancient legacy stacks"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"},{type:"boolean",key:"has_elemental_fervor_buff",label:"Is elemental fervor active"}]},{title:"Reaper (Slormbane)",condition:n=>111===n.reaper.id,configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"}]},{title:"Reaper (Goldbane)",condition:n=>112===n.reaper.id,configurations:[{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Aurifurious)",condition:n=>113===n.reaper.id,configurations:[{type:"number",key:"slormocide_60",label:"Amount of slorm found recently"},{type:"number",key:"goldbane_5",label:"Amount of gold found recently"}]},{title:"Reaper (Concentrated Inner Strength)",condition:n=>23===n.reaper.id,configurations:[{type:"boolean",key:"concentration_buff",label:"Is Concentration active"}]},{title:"Reaper (Fate-Crusher)",condition:n=>53===n.reaper.id,configurations:[{type:"number",key:"fulgurorn_dedication_stacks",label:"Fulgurorn's Dedication stacks"}]},{title:"Reaper (Inner Fireworks)",condition:n=>57===n.reaper.id||58===n.reaper.id,configurations:[{type:"number",key:"enemy_inner_weakness_stacks",label:"Inner weakness stacks on enemy",info:'Effect is applied if "use enemy state" is checked'}]},{title:"Reaper (Temple Keeper)",condition:n=>84===n.reaper.id,configurations:[{type:"boolean",key:"show_temple_keeper_as_totem",label:"Display temple keeper stats on it's totem's form"}]},{title:"Reaper (Slorm Temple)",condition:n=>85===n.reaper.id,configurations:[{type:"boolean",key:"ultima_momentum_buff",label:"Is Ultima-Momentum active"},{type:"boolean",key:"show_elder_inner_fire_damage",label:"Show inner fire damages as elder"}]},{title:"Reaper (Giant Slayer)",condition:n=>91===n.reaper.id||92===n.reaper.id,configurations:[{type:"number",key:"enemy_enfeeble_stacks",label:"Enemy enfeeble stacks",info:'Effect is applied if "use enemy state" is checked'},{type:"number",key:"apex_predator_stacks",label:"Apex predator stacks"},{type:"number",key:"enfeeble_stacks_in_radius",label:"Enfeeble stacks on enemies around you"}]},{title:"Rune (Enhancement of Hagan)",condition:n=>null!==n.runes.enhancement&&23===n.runes.enhancement.id,configurations:[{type:"number",key:"effective_rune_stacks",label:"Effective rune stacks"}]},{title:"Gold Armor",condition:n=>this.hasActivable(n,0),configurations:[{type:"boolean",key:"has_gold_armor_buff",label:"Is Gold Armor active"}]},{title:"Splash Splash",condition:n=>this.hasActivable(n,3),configurations:[{type:"boolean",key:"has_splash_splash_buff",label:"Is splash splash active",info:"It really does nothing, i checked"}]},{title:"Booster Max",condition:n=>this.hasActivable(n,6),configurations:[{type:"boolean",key:"has_booster_max_buff",label:"Is booster max active"}]},{title:"Summon Skeleton Squire",condition:n=>this.hasActivable(n,17),configurations:[{type:"number",key:"summoned_skeleton_squires",label:"Number of summoned skeleton squires"},{type:"boolean",key:"always_summon_maximum_skeleton_squires",label:"Always summon the maximum number of skeleton squires",info:"Based on your available mana after other skills reservation. Override fixed number of summoned skeleton squires"},{type:"number",key:"minimum_unreserved_mana",label:"Minimum unreserved mana",info:"When summoning skeleton squires, will make sure that your mana do not go under this value. When exporting a build, this value is set to your highest skill cost."}]},{title:"Summon Prime Totem",condition:n=>this.hasActivable(n,19),configurations:[{type:"boolean",key:"add_totem_tag_to_prime_totem_skills",label:"Apply totem tags to Wood Sticks / Arrow Shots / Arcane Missiles"}]},{title:"Exposed Armor",condition:n=>this.hasActivable(n,23),configurations:[{type:"boolean",key:"exposed_armor_buff",label:"Is exposed armor active"}]},{title:"Willpower",condition:n=>this.isAttributeAllocated(n,l.ahi.Willpower),configurations:[{type:"boolean",key:"has_elemental_prowess_buff",label:"Is elemental prowess active"}]},{title:"Dexterity",condition:n=>this.isAttributeAllocated(n,l.ahi.Dexterity),configurations:[{type:"number",key:"totem_dexterity_stacks",label:"How many totem dexterity stacks do you have"}]},{title:"Bravery",condition:n=>this.isAttributeAllocated(n,l.ahi.Bravery),configurations:[{type:"number",key:"greed_stacks",label:"How many greed stacks do you have"},{type:"number",key:"strider_stacks",label:"How many strider stacks do you have"},{type:"number",key:"merchant_stacks",label:"How many merchant stacks do you have"}]},{title:"Burning Shadow",condition:n=>this.isAncestralLegacyEquipped(n,80),configurations:[{type:"boolean",key:"has_burning_shadow_buff",label:"Is burning shadow active"}]},{title:"Elemental Temper",condition:n=>this.isAncestralLegacyEquipped(n,85),configurations:[{type:"boolean",key:"has_elemental_temper_buff",label:"Is elemental temper active"}]},{title:"Electrify",condition:n=>this.isAncestralLegacyEquipped(n,33),configurations:[{type:"boolean",key:"has_electrify_buff",label:"Are you on Electrify"}]},{title:"Elemental Spirit",condition:n=>this.isAncestralLegacyEquipped(n,106),configurations:[{type:"number",key:"elemental_spirit_stacks",label:"How many elemental spirit stacks do you have"}]},{title:"Focus",condition:n=>this.isAncestralLegacyEquipped(n,82),configurations:[{type:"boolean",key:"is_channeling_focus",label:"Are you channeling Focus"}]},{title:"Living inferno",condition:n=>this.isAncestralLegacyEquipped(n,14),configurations:[{type:"boolean",key:"has_living_inferno_buff",label:"Is Living inferno active"}]},{title:"Shadow Shield",condition:n=>this.isAncestralLegacyEquipped(n,65),configurations:[{type:"boolean",key:"has_shadow_shield_buff",label:"Is Shadow Shield active"}]},{title:"Flawless Defense",condition:n=>this.isAncestralLegacyEquipped(n,83),configurations:[{type:"boolean",key:"has_flawless_defense_buff",label:"Is Flawless Defense active"}]},{title:"Shadow Bargain",condition:n=>this.isAncestralLegacyEquipped(n,74),configurations:[{type:"boolean",key:"has_shadow_bargain_buff",label:"Is Shadow Bargain active"}]},{title:"Frostfire Armor",condition:n=>this.isAncestralLegacyEquipped(n,76),configurations:[{type:"boolean",key:"has_frostfire_buff",label:"Is Frostfire Armor active"}]},{title:"Faith of the Ancients",condition:n=>this.hasLegendaryEffect(n,31),configurations:[{type:"boolean",key:"has_ancient_recognition_buff",label:"Is ancient recognition active"}]},{title:"Steaming Ancestral Fervor",condition:n=>this.hasLegendaryEffect(n,29),configurations:[{type:"boolean",key:"has_ancestral_fervor_buff",label:"Is ancestral fervor active"}]},{title:"The Voltaroid",condition:n=>this.hasLegendaryEffect(n,75),configurations:[{type:"number",key:"high_voltage_stacks",label:"How many high voltage stacks do you have"}]},{title:"Repercussive Cloak",condition:n=>this.hasLegendaryEffect(n,77),configurations:[{type:"boolean",key:"has_shadow_repercussion_buff",label:"Is shadow repercussion active"}]},{title:"Gazloka's Conquest",condition:n=>this.hasLegendaryEffect(n,26),configurations:[{type:"number",key:"conquest_stacks",label:"How many conquest stacks do you have"}]},{title:"Wizard's Catalyst",condition:n=>this.hasLegendaryEffect(n,63),configurations:[{type:"number",key:"elemental_weakness_stacks",label:"How many elemental weakness stacks does your target have"}]},{title:"Greaves of Stability",condition:n=>this.hasLegendaryEffect(n,16),configurations:[{type:"number",key:"stability_stacks",label:"How many stability stacks do you have"}]},{title:"Art of Retribution",condition:n=>this.hasLegendaryEffect(n,16),configurations:[{type:"number",key:"revengeance_stacks",label:"How many reveangence stacks do you have"}]},{title:"Enlightening Journey",condition:n=>this.hasLegendaryEffect(n,76),configurations:[{type:"number",key:"enlightenment_stacks",label:"How many enlightenment stacks do you have"}]},{title:"Aurelon's Bargain",condition:n=>this.isAncestralLegacyEquipped(n,78),configurations:[{type:"number",key:"aurelon_bargain_stacks",label:"How many Aurelon's stacks do you have"}]},{title:"Cleansing Surge",condition:n=>this.isAncestralLegacyEquipped(n,37),configurations:[{type:"number",key:"cleansing_surge_stacks",label:"How many Cleansing surge stacks do you have"}]},{title:"Charging up!",condition:n=>this.isAncestralLegacyEquipped(n,39),configurations:[{type:"number",key:"overcharged_stacks",label:"How many Overcharged stacks do you have"}]},{title:"A Path to the First",condition:n=>this.hasLegendaryEffect(n,32),configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"},{type:"number",key:"overdrive_bounces_left",label:"How many bounce left"}]},{title:"A Link to the Last",condition:n=>this.hasLegendaryEffect(n,33),configurations:[{type:"boolean",key:"overdrive_last_bounce",label:"Is it the last bounce"}]},{title:"Neriya's Frenzy",condition:n=>this.hasLegendaryEffect(n,74),configurations:[{type:"boolean",key:"frostbolt_shot_recently",label:"Frostbolt shot recently"}]},{title:"Ancestral Instability",condition:n=>this.isAncestralLegacyEquipped(n,91),configurations:[{type:"boolean",key:"has_ancestral_instability_buff",label:"Is ancestral instability active"},{type:"number",key:"ancestral_instability_buff_duration",label:"Ancestral instability duration (in seconds)"}]},{title:"Efficiency",condition:n=>this.isAncestralLegacyEquipped(n,84),configurations:[{type:"boolean",key:"efficiency_buff",label:"Is efficiency active"}]},{title:"Avatar of Shadow",condition:n=>this.isAncestralLegacyEquipped(n,70),configurations:[{type:"boolean",key:"has_avatar_of_shadow_buff",label:"Is avatar of shadow active"}]}],this.CLASS_CONFIG_GROUPS=[{title:"Knight",condition:n=>n.heroClass===l.iHO.Warrior,configurations:[{type:"number",key:"knight_other_level",label:"Highest level between Mage and Huntress"},{type:"number",key:"block_stacks",label:"How many block stacks do you have"},{type:"boolean",key:"next_cast_is_fortunate",label:"Is your next cast fortunate"},{type:"boolean",key:"next_cast_is_perfect",label:"Is your next cast perfect"},{type:"boolean",key:"is_hit_blocked",label:"Are you blocking a hit",info:"Used to computed additional effects on block (like thorn or retaliate)"},{type:"boolean",key:"target_is_skewered",label:"Is your target skewered"}]},{title:"Banner of War",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,0),configurations:[{type:"number",key:"banners_nearby",label:"How many banners are under your control"},{type:"boolean",key:"has_banner_regeneration_buff",label:"Is banner of regeneration active"},{type:"boolean",key:"has_banner_haste_buff",label:"Is banner of haste active"}]},{title:"Enduring Protector",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,2),configurations:[{type:"boolean",key:"has_enduring_protector_buff",label:"Is enduring protector active"}]},{title:"Mighty Swing",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,3),configurations:[{type:"number",key:"frenzy_stacks",label:"How many frenzy stacks do you have"}]},{title:"Wood Stick",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,4),configurations:[{type:"number",key:"oak_bark_armor_stacks",label:"How many oak-bark armor stacks do you have"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on your target"}]},{title:"Throwing sword",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,5),configurations:[{type:"number",key:"enemy_bleed_stacks",label:"How many bleed stacks are on enemies around you"},{type:"number",key:"enemy_splintered_stacks",label:"How many splintered stacks are on the target"}]},{title:"Cadence",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,6),configurations:[{type:"boolean",key:"enemy_has_military_oppression",label:"Is your target affected by military oppression"}]},{title:"Grappling Hook",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,7),configurations:[{type:"number",key:"enemy_under_command",label:"How many enemies are under your control"},{type:"number",key:"elite_under_command",label:"How many elites are under your control"},{type:"number",key:"melee_defense_stacks",label:"How many melee defense stacks do you have"},{type:"number",key:"projectile_defense_stacks",label:"How many projectile defense stacks do you have"},{type:"number",key:"aoe_defense_stacks",label:"How many aoe defense stacks do you have"},{type:"number",key:"vitality_stacks",label:"How many vitality stacks do you have"}]},{title:"Whirlwind",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,9),configurations:[{type:"number",key:"time_spend_channeling",label:"For how long have you been channeling (seconds)"},{type:"boolean",key:"is_channeling_whirlwind",label:"Are you channeling whirlwind"}]},{title:"Elder Lance",condition:n=>this.isSkillEquipped(n,l.iHO.Warrior,10),configurations:[{type:"number",key:"cosmic_stacks",label:"How many cosmic stacks do you have"}]},{title:"huntress",condition:n=>n.heroClass===l.iHO.Huntress,configurations:[{type:"number",key:"serenity",label:"What is your serenity level"},{type:"number",key:"traps_nearby",label:"How many traps are nearby"},{type:"number",key:"poison_enemies",label:"How many poisoned enemies are nearby"},{type:"number",key:"trap_triggered_recently",label:"How many traps did you trigger recently"},{type:"boolean",key:"last_cast_tormented",label:"Was your last cast tormented"},{type:"boolean",key:"last_cast_delighted",label:"Was your last cast delighted"},{type:"boolean",key:"enemy_is_poisoned",label:"Is your target poisoned"}]},{title:"Turret Syndrome",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,0),configurations:[{type:"number",key:"turret_syndrome_on_cooldown",label:"Is turret syndrome on cooldown"},{type:"boolean",key:"hero_close_to_turret_syndrome",label:"Are you close to your turret"}]},{title:"Tumble",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,1),configurations:[{type:"boolean",key:"has_assassin_haste_buff",label:"Is assassin's haste active"}]},{title:"Smoke screen",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,2),configurations:[{type:"boolean",key:"has_smoke_screen_buff",label:"Is smoke screen active"}]},{title:"Arrow Shot",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,3),configurations:[{type:"number",key:"rebounds_before_hit",label:"How many rebounds did arrow shot do"},{type:"number",key:"pierces_before_hit",label:"How many enemies did arrow shot pierced"},{type:"boolean",key:"is_first_arrow_shot_hit",label:"Is arrow shot hiting for the first time",info:"Used to compute effects on first hit and before the first hit"},{type:"boolean",key:"target_is_tracked",label:"Is your target tracked"}]},{title:"Rain of Arrows",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,4),configurations:[{type:"number",key:"delightful_rain_stacks",label:"How many delightful rain stacks do you have"},{type:"number",key:"enemies_in_rain_of_arrow",label:"How much enemies are inside your rain of arrow"},{type:"boolean",key:"is_last_volley",label:"Is it the last volley"}]},{title:"Stab",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,5),configurations:[{type:"boolean",key:"has_ancestral_stab_slash_buff",label:"Is ancestral stab slash active"}]},{title:"Fist of the wild",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,7),configurations:[{type:"number",key:"target_latent_storm_stacks",label:"How many latent storms are on your target"},{type:"number",key:"enemies_affected_by_latent_storm",label:"How many enemies are affected by latent storm"}]},{title:"Void Arrow",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,8),configurations:[{type:"boolean",key:"void_arrow_fully_charged",label:"Is void arrow fully charged"}]},{title:"Immortal Arrow",condition:n=>this.isSkillEquipped(n,l.iHO.Huntress,9),configurations:[{type:"number",key:"exhilerating_senses_stacks",label:"How many exhilerating sense stacks do you have"},{type:"number",key:"impatient_arrow_stacks",label:"How many impatient arrow stacks do you have"}]},{title:"Mage",condition:n=>n.heroClass===l.iHO.Mage,configurations:[{type:"number",key:"arcanic_emblems",label:"Number of arcanic emblems"},{type:"number",key:"temporal_emblems",label:"Number of temporal emblems"},{type:"number",key:"obliteration_emblems",label:"Number of obliteration emblems"},{type:"boolean",key:"is_remnant",label:"Is your skill a remnant version"},{type:"boolean",key:"target_is_time_locked",label:"Is your target time locked"},{type:"boolean",key:"next_cast_is_new_emblem",label:"Next cast on an emblem you do not have"}]},{title:"Wall of Omen",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,0),configurations:[{type:"number",key:"invigorate_stacks",label:"How many invigorate stacks do you have"},{type:"boolean",key:"projectile_passed_through_wall_of_omen",label:"Did your projectile passed through Wall of Omen"},{type:"boolean",key:"has_speed_gate_buff",label:"Did your hero passed through Wall of Omen"}]},{title:"Arcane Barrier",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,2),configurations:[{type:"boolean",key:"is_channeling_arcane_barrier",label:"Are you channeling Arcane Barrier"}]},{title:"Ray of Obliteration",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,4),configurations:[{type:"number",key:"ray_of_obliteration_grow_stacks",label:"How many time did Ray of Obliteration grow"},{type:"boolean",key:"is_channeling_ray_of_obliteration",label:"Are you channeling Ray of Obliteration"},{type:"boolean",key:"ray_of_obliteration_is_short",label:"Are you casting a short ray"}]},{title:"Rift Nova",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,6),configurations:[{type:"boolean",key:"high_spirit_stacks",label:"How many spirit stacks do you have"},{type:"boolean",key:"rift_nova_fully_charged",label:"Is Rift Nova fully charged"},{type:"boolean",key:"target_has_remnant_vulnerability",label:"Is your target affected by remnant vulnerability"}]},{title:"Chrono-Puncture",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,7),configurations:[{type:"number",key:"chrono_manamorphosis_stacks",label:"How many chrono manamorphosis stacks do you have"},{type:"number",key:"chrono_armor_stacks",label:"How many chrono armor stacks do you have"},{type:"number",key:"chrono_empower_stacks",label:"How many chrono empower stacks do you have"},{type:"number",key:"chrono_speed_stacks",label:"How many chrono speed stacks do you have"},{type:"number",key:"enemy_traumatized_stacks",label:"How many traumatized stacks does your target have"}]},{title:"Attunment Pulse",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,8),configurations:[{type:"enum",key:"attunment_pulse_current_school",label:"Current school",values:[{value:l.HSy.Arcanic,label:"Arcanic"},{value:l.HSy.Temporal,label:"Temporal"},{value:l.HSy.Obliteration,label:"Obliteration"}]},{type:"boolean",key:"target_has_arcane_discordance",label:"Does your target have arcane discordance"},{type:"boolean",key:"target_has_temporal_discordance",label:"Does your target have temporal discordance"},{type:"boolean",key:"target_has_obliteration_discordance",label:"Does your target have obliteration discordance"}]},{title:"Arcane Breach",condition:n=>this.isSkillEquipped(n,l.iHO.Mage,9),configurations:[{type:"number",key:"enemies_in_breach_range",label:"How many enemies are in your breachs"},{type:"number",key:"arcane_flux_stacks",label:"How many arcane flux stacks do you have"},{type:"number",key:"arcane_breach_collision_stacks",label:"How many arcane skills collided with your breach"},{type:"number",key:"temporal_breach_collision_stacks",label:"How many temporal skills collided with your breach"},{type:"number",key:"obliteration_breach_collision_stacks",label:"How many obliteration skills collided with your breach"},{type:"boolean",key:"clone_is_in_breach_range",label:"Is your clone inside a breach"},{type:"boolean",key:"target_is_in_breach_range",label:"Is your target inside a breach"}]}],this.config=null}ngOnInit(){this.config=this.generateConfigurationForm(),this.config.valueChanges.subscribe(()=>this.updateConfiguration())}generateConfigurationForm(){let t={};const n=this.buildStorageService.getBuild(),a=Object.entries(null!==n?n.configuration:l.g5j);for(const r of a){let c=[s.kI.required,...(0,l.BeF)(this.EXTRA_VALIDATORS[r[0]],[])];"number"===r[1]&&c.push(s.kI.min(0)),t[r[0]]=new s.NI(r[1],c)}return new s.cw(t)}updateConfiguration(){const t=this.buildStorageService.getBuild();null!==this.config&&null!==t&&this.config.valid&&(t.configuration=this.config.value,this.buildStorageService.saveBuild())}getControl(t){return null===this.config?null:this.config.get(t.key)}isGroupValid(t){const n=this.buildStorageService.getLayer();return null!==n&&t.condition(n.character)}hasActivable(t,n){return[t.activable1,t.activable2,t.activable3,t.activable4].filter(l.BXh).some(a=>!("element"in a)&&a.id===n)}isSkillEquipped(t,n,a){return t.heroClass===n&&[t.primarySkill,t.secondarySkill,t.supportSkill].filter(l.BXh).some(r=>r.id===a)}isAttributeAllocated(t,n){return t.attributes.allocated[n].rank>0}isAncestralLegacyEquipped(t,n){return t.ancestralLegacies.activeAncestralLegacies.includes(n)}hasLegendaryEffect(t,n){return l.PLi.map(a=>{var r;return null===(r=t.gear[a])||void 0===r?void 0:r.legendaryEffect}).filter(l.BXh).some(a=>a.id===n)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-config"]],features:[e.qOj],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"section"],[3,"control","config",4,"ngFor","ngForOf"],[3,"control","config"]],template:function(t,n){1&t&&(e.TgZ(0,"main"),e.YNc(1,In,3,1,"mat-card",0),e.YNc(2,Jn,3,1,"mat-card",0),e.YNc(3,Bn,3,1,"mat-card",0),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngIf",null!==n.config),e.xp6(1),e.Q6J("ngIf",null!==n.config),e.xp6(1),e.Q6J("ngIf",null!==n.config))},dependencies:[d.sg,d.O5,y.a8,y.dn,wn],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{max-width:none}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px;padding:8px 12px}"]}),i})();var x=h(2525),ue=h(8003);function Hn(i,o){1&i&&(e.TgZ(0,"div",20),e._uU(1,"Equipped"),e.qZA())}function Qn(i,o){if(1&i&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&i){const t=o.$implicit;e.Gre("marks-",t.pureMarks,""),e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function Yn(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Base Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Qn,5,10,"li",23),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getNormalAffixes())}}function Gn(i,o){if(1&i&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&i){const t=o.$implicit;e.Gre("marks-",t.pureMarks,""),e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function Vn(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Magic Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Gn,5,10,"li",23),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getMagicAffixes())}}function Dn(i,o){if(1&i&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&i){const t=o.$implicit;e.Gre("marks-",t.pureMarks,""),e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function jn(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Rare Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Dn,5,10,"li",23),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getRareAffixes())}}function Kn(i,o){if(1&i&&(e.TgZ(0,"li")(1,"div",24),e._UZ(2,"div"),e.qZA(),e._UZ(3,"div",25)(4,"div",26),e.qZA()),2&i){const t=o.$implicit;e.Gre("marks-",t.pureMarks,""),e.ekj("pure",t.isPure),e.xp6(2),e.Tol(t.rarity),e.xp6(1),e.Q6J("innerHTML",t.valueLabel,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.statLabel,e.oJD)}}function Xn(i,o){if(1&i&&(e.TgZ(0,"div",21)(1,"div",22),e._uU(2,"Epic Stats:"),e.qZA(),e.TgZ(3,"ul"),e.YNc(4,Kn,5,10,"li",23),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.Q6J("ngForOf",t.getEpicAffixes())}}function zn(i,o){if(1&i&&(e.TgZ(0,"span",35),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.item.legendaryEffect.activable.name,"")}}function $n(i,o){if(1&i&&(e.TgZ(0,"div",6),e._UZ(1,"img",8),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("src",t.item.legendaryEffect.skillIcon,e.LSH)}}function Wn(i,o){if(1&i&&(e.TgZ(0,"div",27)(1,"div",28)(2,"div",29)(3,"div",22)(4,"div",24),e._UZ(5,"div",30),e.qZA(),e._uU(6),e.TgZ(7,"div",24),e._UZ(8,"div",30),e.qZA()(),e.TgZ(9,"div",31),e._UZ(10,"span",32),e.YNc(11,zn,2,1,"span",33),e.qZA(),e.YNc(12,$n,2,1,"div",34),e.qZA()()()),2&i){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.item.legendaryEffect.title," "),e.xp6(4),e.Q6J("innerHTML",t.item.legendaryEffect.description,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect.activable),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect.skillIcon)}}function ei(i,o){if(1&i&&e._UZ(0,"app-activable-view",36),2&i){const t=e.oxw(2);e.Q6J("activable",t.item.legendaryEffect.activable)("reinforcment",t.item.reinforcment)}}function ti(i,o){if(1&i&&(e.TgZ(0,"div",37),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.item.reaperEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.item.reaperEnchantment.label,e.oJD)}}function ni(i,o){if(1&i&&(e.TgZ(0,"div",39),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.item.skillEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.item.skillEnchantment.label,e.oJD)}}function ii(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"img",8)(2,"div",38),e.qZA()),2&i){const t=e.oxw(2);e.Gre("buff attribute atr-",t.item.attributeEnchantment.craftedAttribute,""),e.xp6(1),e.Q6J("src",t.item.attributeEnchantment.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.item.attributeEnchantment.label,e.oJD)}}function ai(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2),e.YNc(3,Hn,2,0,"div",3),e.TgZ(4,"div",4)(5,"div",5)(6,"div",6),e._UZ(7,"img",7)(8,"img",8),e.qZA(),e.TgZ(9,"div",9),e._uU(10),e.qZA(),e.TgZ(11,"div",10),e._uU(12,"-"),e.qZA(),e.TgZ(13,"div",11),e._uU(14),e.qZA(),e.TgZ(15,"div"),e._uU(16),e.qZA()(),e._UZ(17,"div",12),e.TgZ(18,"div",13),e.YNc(19,Yn,5,1,"div",14),e.YNc(20,Vn,5,1,"div",14),e.YNc(21,jn,5,1,"div",14),e.YNc(22,Xn,5,1,"div",14),e.qZA()(),e.YNc(23,Wn,13,4,"div",15),e.YNc(24,ei,1,2,"app-activable-view",16),e.YNc(25,ti,3,2,"div",17),e.YNc(26,ni,3,2,"div",18),e.YNc(27,ii,3,5,"div",19),e.qZA()()),2&i){const t=e.oxw();e.Gre("item ",t.item.rarity,""),e.ekj("nodetails",!t.details),e.xp6(1),e.Q6J("innerHTML",t.item.name,e.oJD),e.xp6(2),e.Q6J("ngIf",t.equipped),e.xp6(4),e.Q6J("src",t.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",t.item.icon,e.LSH),e.xp6(2),e.Oqu(t.item.rarityLabel),e.xp6(4),e.Oqu(t.item.baseLabel),e.xp6(2),e.Oqu(t.item.levelLabel),e.xp6(3),e.Q6J("ngIf",t.getNormalAffixes().length>0),e.xp6(1),e.Q6J("ngIf",t.getMagicAffixes().length>0),e.xp6(1),e.Q6J("ngIf",t.getRareAffixes().length>0),e.xp6(1),e.Q6J("ngIf",t.getEpicAffixes().length>0),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==t.item.legendaryEffect&&null!==t.item.legendaryEffect.activable),e.xp6(1),e.Q6J("ngIf",null!==t.item.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.item.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==t.item.attributeEnchantment)}}let $=(()=>{class i{constructor(){this.item=null,this.equipped=!1,this.details=!0}getNormalAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===l.uqS.Normal)}getMagicAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===l.uqS.Magic)}getRareAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===l.uqS.Rare)}getEpicAffixes(){return null===this.item?[]:this.item.affixes.filter(t=>t.rarity===l.uqS.Epic)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-view"]],inputs:{item:"item",equipped:"equipped",details:"details"},decls:1,vars:1,consts:[[3,"class","nodetails",4,"ngIf"],[1,"head",3,"innerHTML"],[1,"content"],["class","equipped",4,"ngIf"],[1,"main"],[1,"info"],[1,"icon"],[1,"background",3,"src"],[3,"src"],[1,"rarity"],[1,"split"],[1,"base"],[1,"separator"],[1,"stats"],["class","affixes",4,"ngIf"],["class","legendary-effect outer-border",4,"ngIf"],[3,"activable","reinforcment",4,"ngIf"],["class","buff reaper",4,"ngIf"],["class","buff skill",4,"ngIf"],[3,"class",4,"ngIf"],[1,"equipped"],[1,"affixes"],[1,"title"],[3,"pure","class",4,"ngFor","ngForOf"],[1,"bullet"],[1,"value",3,"innerHTML"],[1,"name",3,"innerHTML"],[1,"legendary-effect","outer-border"],[1,"border"],[1,"inner-border","legendary-description"],[1,"legendary"],[1,"description"],[3,"innerHTML"],["class","value",4,"ngIf"],["class","icon",4,"ngIf"],[1,"value"],[3,"activable","reinforcment"],[1,"buff","reaper"],[1,"info",3,"innerHTML"],[1,"buff","skill"]],template:function(t,n){1&t&&e.YNc(0,ai,28,21,"div",0),2&t&&e.Q6J("ngIf",null!==n.item)},dependencies:[d.sg,d.O5,ue.K],styles:['.item.normal[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#898989}.item.magic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#2e8726}.item.rare[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#176ab1}.item.epic[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#c68d20}.item.legendary[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .split[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .legendary-effect[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:#ce4607}.item.normal[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.normal[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#59513c}.item.magic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.magic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#61462d}.item.rare[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.rare[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#7791a1}.item.epic[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.epic[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#efc65c}.item.legendary[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%], .item.legendary[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{border-color:#f5b250}.bullet[_ngcontent-%COMP%]{min-width:8px}.bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}.bullet[_ngcontent-%COMP%]   div.normal[_ngcontent-%COMP%]{background-color:#898989}.bullet[_ngcontent-%COMP%]   div.magic[_ngcontent-%COMP%]{background-color:#2e8726}.bullet[_ngcontent-%COMP%]   div.rare[_ngcontent-%COMP%]{background-color:#176ab1}.bullet[_ngcontent-%COMP%]   div.epic[_ngcontent-%COMP%]{background-color:#c68d20}.bullet[_ngcontent-%COMP%]   div.legendary[_ngcontent-%COMP%]{background-color:#ce4607}.item[_ngcontent-%COMP%]{background-color:#151412;color:#fff;border:2px solid black;min-width:350px}.item[_ngcontent-%COMP%]  .legendary-effect .value, .item[_ngcontent-%COMP%]  .buff .value{color:#fff}.item[_ngcontent-%COMP%]  .range, .item[_ngcontent-%COMP%]  .range .value, .item[_ngcontent-%COMP%]  .details, .item[_ngcontent-%COMP%]  .details .value, .item[_ngcontent-%COMP%]  .formula, .item[_ngcontent-%COMP%]  .formula .value, .item[_ngcontent-%COMP%]  .pure-info, .item[_ngcontent-%COMP%]  .pure-info .value{color:#686868}.item[_ngcontent-%COMP%]  .affixes .range, .item[_ngcontent-%COMP%]  .affixes .value, .item[_ngcontent-%COMP%]  .pure-info{word-break:keep-all;white-space:nowrap}.item.nodetails[_ngcontent-%COMP%]     .details, .item.nodetails[_ngcontent-%COMP%]     .formula{display:none}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{border:2px solid}.item[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{margin-bottom:2px;text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:relative;padding:15px 10px;gap:15px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .equipped[_ngcontent-%COMP%]{position:absolute;top:10px;right:15px;text-transform:capitalize}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{min-width:80px;width:80px;display:flex;flex-direction:column;align-items:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .rarity[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .base[_ngcontent-%COMP%], .item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{text-transform:capitalize;text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{min-width:56px;min-height:56px;width:56px;height:56px;border:4px solid black;margin-bottom:10px;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;min-width:2px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:10px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;list-style:disc inside;padding-left:0}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:flex;flex-direction:row;padding-left:5px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure[_ngcontent-%COMP%]{color:#46e7b0;background:linear-gradient(90deg,rgba(70,231,176,.3) 0%,rgba(70,231,176,0) 100%)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-1[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-2[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li.pure.marks-3[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]:after{content:" !!!"}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   .affixes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{flex-grow:1}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]{border:2px solid rgb(46,44,37)}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-effect.outer-border[_ngcontent-%COMP%]   .border[_ngcontent-%COMP%]   .inner-border[_ngcontent-%COMP%]{border:3px solid black}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:10px 30px;gap:5px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:5px;color:#686868}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{text-align:center}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{margin-top:5px;min-width:36px;min-height:36px;width:36px;height:36px;border:3px solid black;padding:2px;background-color:#2e2c25}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .legendary-description[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]{border:3px solid rgb(59,56,49);padding:5px 36px;text-align:center;position:relative}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:-6px;top:50%;margin-top:-22px}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.reaper[_ngcontent-%COMP%]{color:#148e89}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.skill[_ngcontent-%COMP%]{color:#ce4607}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-0[_ngcontent-%COMP%]{color:#2f5996}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-1[_ngcontent-%COMP%]{color:#a83007}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-2[_ngcontent-%COMP%]{color:#79b549}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-3[_ngcontent-%COMP%]{color:#d0b545}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-4[_ngcontent-%COMP%]{color:#4bc1b2}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-5[_ngcontent-%COMP%]{color:#753098}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-6[_ngcontent-%COMP%]{color:#cd7028}.item[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]   .buff.attribute.atr-7[_ngcontent-%COMP%]{color:#bf3c59}']}),i})(),oi=(()=>{class i{constructor(t,n,a,r,c){this.slormancerItemService=n,this.slormancerCharacterBuilderService=a,this.slormancerCharacterUpdaterService=r,this.slormancerCharacterComparatorService=c;const m=this.slormancerCharacterBuilderService.getCharacterClone(t.character),u=this.slormancerCharacterBuilderService.getCharacterClone(t.character);m.gear[t.slot]=this.slormancerItemService.getEquipableItemClone(t.left),u.gear[t.slot]=this.slormancerItemService.getEquipableItemClone(t.right),this.slormancerCharacterUpdaterService.updateCharacter(m,t.config),this.slormancerCharacterUpdaterService.updateCharacter(u,t.config),this.left=t.left,this.right=t.right,this.differences=this.slormancerCharacterComparatorService.compareCharacters(m,u)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.WI),e.Y36(l.SgH),e.Y36(l.oYj),e.Y36(l.Pdp),e.Y36(l.PeY))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-compare-item-modal"]],decls:8,vars:6,consts:[["mat-dialog-title",""],[1,"item"],[3,"item","equipped"],[3,"differences"],[3,"item"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"div",1),e._UZ(4,"app-item-view",2),e.qZA(),e._UZ(5,"app-compare-view",3),e.TgZ(6,"div",1),e._UZ(7,"app-item-view",4),e.qZA()()),2&t&&(e.xp6(1),e.AsE("",n.left.name," - ",n.right.name,""),e.xp6(3),e.Q6J("item",n.left)("equipped",!0),e.xp6(1),e.Q6J("differences",n.differences),e.xp6(2),e.Q6J("item",n.right))},dependencies:[p.uh,p.xY,$,de],styles:["h2[_ngcontent-%COMP%]{display:none;text-align:center}@media (max-width: 992px){h2[_ngcontent-%COMP%]{display:block}}mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:20px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{display:none}mat-dialog-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:block}}@media (max-width: 374px){mat-dialog-content[_ngcontent-%COMP%]   app-compare-view[_ngcontent-%COMP%]{width:100%}}mat-dialog-content[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{width:370px;min-width:380px;overflow-y:auto}"]}),i})();function ri(i,o){if(1&i&&(e.TgZ(0,"button",3),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("mat-dialog-close",t),e.xp6(1),e.Oqu(t)}}let li=(()=>{class i{constructor(t){this.dialogRef=t,this.EQUIPABLE_ITEM_BASE_VALUES=l.liR}selectBase(t){this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-base-choice-modal"]],decls:7,vars:2,consts:[["mat-dialog-title",""],["mat-flat-button","","color","primary",3,"mat-dialog-close",4,"ngFor","ngForOf"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Choose a base for your item"),e.qZA(),e.TgZ(2,"mat-dialog-content"),e.YNc(3,ri,2,2,"button",1),e.qZA(),e.TgZ(4,"mat-dialog-actions")(5,"button",2),e._uU(6,"Cancel"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.EQUIPABLE_ITEM_BASE_VALUES),e.xp6(2),e.Q6J("mat-dialog-close",null))},dependencies:[d.sg,b.lW,p.ZT,p.uh,p.xY,p.H8],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),i})(),L=(()=>{class i{constructor(t,n,a){this.slormancerDataService=t,this.slormancerTranslateService=n,this.slormancerReaperService=a,this.STATS_OPTIONS_CACHE={},this.LEGENDARY_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[],this.ALL_RARITIES_OPTIONS_CACHE=[],this.ALL_REAPER_BUFF_OPTIONS_CACHE=[],this.ALL_SKILL_BUFF_OPTIONS_CACHE={0:[],1:[],2:[]},this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=[],this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}},this.ULTIMATUM_OPTIONS_CACHE=[],this.initRarityOptionsCache(),this.initStatOptionsCache(),this.initLegendaryOptionsCache(),this.initReaperBuffOptions(),this.initSkillBuffOptions(),this.initAttributeBuffOptions(),this.initReaperOptions(),this.initUltimatumOptions()}getReaperOptions(t,n){return this.ALL_REAPER_OPTIONS_CACHE[n?"p":"b"][t]}getAllStatsoptions(){return this.ALL_STATS_OPTIONS_CACHE}getAllRaritiesOptions(){return this.ALL_RARITIES_OPTIONS_CACHE}getStatsOptions(t,n){let a=this.ALL_STATS_OPTIONS_CACHE;const r=this.getBaseKey(t),c=this.STATS_OPTIONS_CACHE[r];return c&&(n===l.uqS.Normal?a=(0,l.BeF)(c.P,[]):n===l.uqS.Magic||n===l.uqS.Rare?a=(0,l.BeF)(c.S,[]):n===l.uqS.Epic&&(a=(0,l.BeF)(c.E,[]))),a}getLegendaryOptions(t,n){let a=[];const r=this.LEGENDARY_OPTIONS_CACHE[t];return r&&(a=r[n]),a}getReaperBuffOptions(){return this.ALL_REAPER_BUFF_OPTIONS_CACHE}getSkillBuffOptions(t){return this.ALL_SKILL_BUFF_OPTIONS_CACHE[t]}getAttributeBuffOptions(){return this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE}getUltimatumOptions(){return this.ULTIMATUM_OPTIONS_CACHE}getBaseKey(t){return t===l.JNB.Body?"ARMOR":t.toUpperCase()}initRarityOptionsCache(){this.ALL_RARITIES_OPTIONS_CACHE=l.nte.map(t=>({label:this.slormancerTranslateService.translate("RAR_loot_"+t),value:t}))}initStatOptionsCache(){const t=this.slormancerDataService.getGameDataStats().filter(n=>"X"!==n.PERCENT);this.STATS_OPTIONS_CACHE={},this.ALL_STATS_OPTIONS_CACHE=[];for(const n of t){const a={label:this.slormancerTranslateService.translate(n.REF)+("%"===n.PERCENT?" (%)":""),value:n.REF};this.ALL_STATS_OPTIONS_CACHE.push(a);for(const r of l.liR){const c=this.getBaseKey(r),m=n[c];if(""!==m){let u=this.STATS_OPTIONS_CACHE[c];void 0===u&&(u={P:[],S:[],E:[]},this.STATS_OPTIONS_CACHE[c]=u),"P"===m&&(u.P.push(a),u.S.push(a),u.E.push(a)),"S"===m&&(u.S.push(a),u.E.push(a)),"E"===m&&u.E.push(a)}}}for(const n of l.liR){const a=this.getBaseKey(n),r=this.STATS_OPTIONS_CACHE[a];r&&(r.P.sort((c,m)=>(0,l.rR7)(c.label,m.label)),r.S.sort((c,m)=>(0,l.rR7)(c.label,m.label)),r.E.sort((c,m)=>(0,l.rR7)(c.label,m.label)))}this.ALL_STATS_OPTIONS_CACHE.sort((n,a)=>(0,l.rR7)(n.label,a.label))}initLegendaryOptionsCache(){const t=this.slormancerDataService.getGameDataLegendaries().filter(n=>n.LOOTABLE);this.LEGENDARY_OPTIONS_CACHE={};for(const n of t){const a={value:n.REF,label:n.EN_NAME};let r=this.LEGENDARY_OPTIONS_CACHE[n.ITEM];void 0===r&&(r={0:[],1:[],2:[]},this.LEGENDARY_OPTIONS_CACHE[n.ITEM]=r),-1===n.HERO||99===n.HERO?(r[0].push(a),r[1].push(a),r[2].push(a)):r[n.HERO].push(a)}}initReaperBuffOptions(){this.ALL_REAPER_BUFF_OPTIONS_CACHE=l.cIS.filter(t=>t!==l.Q1_.OhmAgad&&t!==l.Q1_.ReapersmithBrotherhood).map(t=>({value:t,label:this.slormancerTranslateService.translate("weapon_reapersmith_"+t)}))}initSkillBuffOptions(){this.ALL_SKILL_BUFF_OPTIONS_CACHE={[l.iHO.Warrior]:this.slormancerDataService.getGameDataActiveSkills(l.iHO.Warrior).map(t=>({value:t.REF,label:t.EN_NAME})),[l.iHO.Huntress]:this.slormancerDataService.getGameDataActiveSkills(l.iHO.Huntress).map(t=>({value:t.REF,label:t.EN_NAME})),[l.iHO.Mage]:this.slormancerDataService.getGameDataActiveSkills(l.iHO.Mage).map(t=>({value:t.REF,label:t.EN_NAME}))}}initAttributeBuffOptions(){this.ALL_ATTRIBUTE_BUFF_OPTIONS_CACHE=l.AFD.map(t=>({value:t,label:this.slormancerTranslateService.translate("character_trait_"+t)}))}initReaperOptions(){this.ALL_REAPER_OPTIONS_CACHE={p:{0:[],1:[],2:[]},b:{0:[],1:[],2:[]}};const t=this.slormancerDataService.getGameDataAvailableReaper();for(const n of t)this.ALL_REAPER_OPTIONS_CACHE.p[l.iHO.Warrior].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!0,l.iHO.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.p[l.iHO.Huntress].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!0,l.iHO.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.p[l.iHO.Mage].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!0,l.iHO.Mage)}),this.ALL_REAPER_OPTIONS_CACHE.b[l.iHO.Warrior].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!1,l.iHO.Warrior)}),this.ALL_REAPER_OPTIONS_CACHE.b[l.iHO.Huntress].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!1,l.iHO.Huntress)}),this.ALL_REAPER_OPTIONS_CACHE.b[l.iHO.Mage].push({value:n.REF,label:this.slormancerReaperService.getReaperName(n.EN_NAME,!1,l.iHO.Mage)})}initUltimatumOptions(){this.ULTIMATUM_OPTIONS_CACHE=l.N_V.map(t=>({value:t,label:this.slormancerTranslateService.translate("ultimatum_"+t)}))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(l.ogB),e.LFG(l.n6D),e.LFG(l.IxD))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var F=h(8029);function ci(i,o){if(1&i&&(e.TgZ(0,"mat-label"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.label)}}function si(i,o){1&i&&(e.TgZ(0,"mat-option",9),e._uU(1," No results "),e.qZA())}function mi(i,o){if(1&i&&(e.TgZ(0,"mat-option",10),e._UZ(1,"span",11),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.ekj("filtered",t.filtered),e.Q6J("value",t.option.value)("disabled",t.filtered||n.optionDisable(t.option)),e.xp6(1),e.Q6J("innerHTML",t.option.label,e.oJD)}}function di(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",1),e.YNc(1,ci,2,1,"mat-label",2),e.TgZ(2,"mat-select",3),e.NdJ("openedChange",function(a){e.CHM(t);const r=e.MAs(5),c=e.oxw();return e.KtG(c.opened(a,r))}),e.TgZ(3,"mat-option",4)(4,"input",5,6),e.NdJ("keydown.space",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.handleSearchSpace(a))}),e.qZA()(),e.YNc(6,si,2,0,"mat-option",7),e.YNc(7,mi,2,5,"mat-option",8),e.qZA()()}if(2&i){const t=e.oxw();e.ekj("no-error-padding",t.noErrorPadding),e.xp6(1),e.Q6J("ngIf",null!==t.label),e.xp6(1),e.Q6J("formControl",t.control),e.xp6(2),e.Q6J("formControl",t.search),e.xp6(2),e.Q6J("ngIf",t.noResult),e.xp6(1),e.Q6J("ngForOf",t.filteredOptions)("ngForTrackBy",t.trackBy)}}let D=(()=>{class i extends O.B{constructor(){super(),this.label=null,this.control=null,this.options=[],this.noErrorPadding=!1,this.optionDisable=()=>!1,this.filteredOptions=[],this.search=new s.NI(""),this.noResult=!1,this.search.valueChanges.subscribe(()=>this.filter())}ngOnChanges(t){null!==this.control&&t.control&&this.control.valueChanges.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.resetFilter()),this.filter()}opened(t,n){!1===t?this.resetFilter():n.focus()}resetFilter(){this.search.setValue("")}filter(){const t=this.search.value.toLowerCase().trim();this.filteredOptions=this.options.map(n=>({option:n,filtered:-1===n.label.toLowerCase().indexOf(t)})),this.noResult=!this.filteredOptions.some(n=>!n.filtered)}trackBy(t,n){return n.option.value}handleSearchSpace(t){t.stopPropagation()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-search-select"]],inputs:{label:"label",control:"control",options:"options",noErrorPadding:"noErrorPadding",optionDisable:"optionDisable"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["appearance","outline","color","primary",3,"no-error-padding",4,"ngIf"],["appearance","outline","color","primary"],[4,"ngIf"],["color","primary",3,"formControl","openedChange"],["disabled","","role","search"],["matInput","","type","text","placeholder","Rechercher...",3,"formControl","keydown.space"],["searchInput",""],["role","no-result","disabled","",4,"ngIf"],[3,"value","disabled","filtered",4,"ngFor","ngForOf","ngForTrackBy"],["role","no-result","disabled",""],[3,"value","disabled"],[3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,di,8,8,"mat-form-field",0),2&t&&e.Q6J("ngIf",null!==n.control&&n.options.length>0)},dependencies:[d.sg,d.O5,_.KE,_.hX,A.Nt,Z.gD,I.ey,s.Fj,s.JJ,s.oH],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i})();function ui(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-slider",11),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateSliderStat(a))}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("min",t.affix.craftedEffect.minPossibleCraftedValue)("max",t.affix.craftedEffect.maxPossibleCraftedValue)("step",1)}}function pi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-slider",12),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateSliderPurity(a))}),e.qZA()}2&i&&e.Q6J("min",101)("max",200)("step",1)}function gi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"app-search-select",3),e.qZA(),e.TgZ(3,"div",4),e.YNc(4,ui,1,3,"mat-slider",5),e.YNc(5,pi,1,3,"mat-slider",6),e.qZA(),e.TgZ(6,"div",7)(7,"div",8),e._uU(8),e.qZA(),e.TgZ(9,"mat-checkbox",9),e.NdJ("change",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.purityChanged(a))}),e._uU(10,"Pure"),e.qZA(),e.TgZ(11,"button",10),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeStat())}),e.TgZ(12,"mat-icon"),e._uU(13,"delete"),e.qZA()()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(2),e.Q6J("control",t.getStatControl())("options",t.options)("optionDisable",t.optionDisableMethod),e.xp6(2),e.Q6J("ngIf",!t.affix.isPure),e.xp6(1),e.Q6J("ngIf",t.affix.isPure),e.xp6(2),e.ekj("pure",t.affix.isPure),e.xp6(1),e.hij(" ",t.displayedValue," "),e.xp6(1),e.Q6J("checked",t.affix.isPure),e.xp6(2),e.Q6J("disabled",!t.removable)}}let _i=(()=>{class i{constructor(t){this.itemFormService=t,this.base=l.JNB.Amulet,this.alreadyUsedStats=[],this.affix=null,this.form=null,this.removable=!1,this.remove=new e.vpe,this.options=[],this.displayedValue="",this.optionDisableMethod=n=>this.isOptionDisabled(n)}ngOnChanges(){null!==this.affix&&(this.options=this.itemFormService.getStatsOptions(this.base,this.affix.rarity),this.affix.isPure?this.setPuritylabel(this.affix.pure):this.setStatLabel(this.affix.craftedEffect.craftedValue))}getStatControl(){return null===this.form?null:this.form.get("stat")}isOptionDisabled(t){return-1!==this.alreadyUsedStats.indexOf(t.value)&&null!==this.affix&&t.value!==this.affix.craftedEffect.effect.stat}purityChanged(t){null!==this.affix&&null!==this.form&&this.form.patchValue(t.checked?{purity:101}:{purity:100})}updateSliderPurity(t){null!==t.value&&this.setPuritylabel(t.value)}updateSliderStat(t){null!==t.value&&this.setStatLabel(t.value)}setPuritylabel(t){this.displayedValue=Math.round(t-100)+"%"}setStatLabel(t){if(this.displayedValue="",null!==this.affix){const n=this.affix.craftedEffect.effect.percent?"%":"";this.displayedValue=null===this.affix?"":"+"+((0,l.AWe)(this.affix.craftedEffect,t)+n)}}removeStat(){this.remove.emit()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-edit-stat"]],inputs:{base:"base",alreadyUsedStats:"alreadyUsedStats",affix:"affix",form:"form",removable:"removable"},outputs:{remove:"remove"},features:[e.TTD],decls:1,vars:1,consts:[["class","stat-line",3,"formGroup",4,"ngIf"],[1,"stat-line",3,"formGroup"],[1,"select"],["label","Stat",3,"control","options","optionDisable"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],["color","accent","formControlName","purity",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["color","primary",3,"checked","change"],["mat-icon-button","","color","primary","type","button",3,"disabled","click"],["color","primary","formControlName","value",3,"min","max","step","input"],["color","accent","formControlName","purity",3,"min","max","step","input"]],template:function(t,n){1&t&&e.YNc(0,gi,14,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.affix)},dependencies:[d.O5,b.lW,T.Hw,F.pH,V.oG,s.JJ,s.JL,s.sg,s.u,D],styles:[".pure[_ngcontent-%COMP%]{color:#20d787}"]}),i})();function fi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addLegendaryEffect())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function hi(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function Ci(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-slider",18),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw(2);return e.KtG(r.updateSliderValue(a))}),e.qZA()}2&i&&e.Q6J("min",75)("max",100)("step",1)}function vi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Legendary effect"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,hi,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11),e.YNc(8,Ci,1,3,"mat-slider",12),e.qZA(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeLegendaryEffect())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("ngIf",t.hasLegendaryValues()),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let Mi=(()=>{class i{constructor(t){this.itemFormService=t,this.base=l.JNB.Amulet,this.heroClass=l.iHO.Huntress,this.legendaryEffect=null,this.form=null,this.reinforcment=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getLegendaryOptions(this.base,this.heroClass),null!==this.legendaryEffect&&this.updateLegendaryValueLabel(this.legendaryEffect.value)}updateLegendaryValueLabel(t){this.displayedValue="",null!==this.legendaryEffect&&null!==t&&(this.displayedValue=this.legendaryEffect.effects.filter(n=>n.possibleCraftedValues.length>1).map(n=>{const a=n.effect.percent?"%":"";return(0,l.AWe)(n,t)+a}).join(" / "))}hasLegendaryValues(){return null!==this.legendaryEffect&&this.legendaryEffect.effects.filter(t=>t.possibleCraftedValues.length>1).length>0}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.legendaryEffect&&null!==n&&this.updateLegendaryValueLabel(n)}removeLegendaryEffect(){null!==this.form&&this.form.patchValue({id:null})}addLegendaryEffect(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({id:t.value,value:100})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-edit-legendary-effect"]],inputs:{base:"base",heroClass:"heroClass",legendaryEffect:"legendaryEffect",form:"form",reinforcment:"reinforcment"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","id"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input",4,"ngIf"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"],["color","primary","formControlName","value",3,"min","max","step","input"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Legendary effect :"),e.qZA(),e.YNc(3,fi,4,0,"div",2),e.qZA(),e.YNc(4,vi,15,4,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.legendaryEffect),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.legendaryEffect))},dependencies:[d.sg,d.O5,b.lW,T.Hw,_.KE,_.hX,Z.gD,I.ey,F.pH,s.JJ,s.JL,s.sg,s.u]}),i})();function bi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addReaperEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Oi(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function xi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Reaper Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Oi,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSliderValue(a))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeReaperEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",5)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let yi=(()=>{class i{constructor(t){this.itemFormService=t,this.reaperEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getReaperBuffOptions(),null!==this.reaperEnchantment&&this.updateReaperEnchantmentValueLabel(this.reaperEnchantment.effect.value)}updateReaperEnchantmentValueLabel(t){this.displayedValue="",null!==this.reaperEnchantment&&null!==t&&(this.displayedValue="+"+(0,l.BeF)(this.reaperEnchantment.craftableValues[t],0))}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.reaperEnchantment&&null!==n&&this.updateReaperEnchantmentValueLabel(n)}removeReaperEnchantment(){null!==this.form&&this.form.patchValue({smith:null})}addReaperEnchantment(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({smith:t.value,value:5})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-edit-buff-reaper"]],inputs:{reaperEnchantment:"reaperEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","form-add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"form-add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","smith"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Reaper Enchantment :"),e.qZA(),e.YNc(3,bi,4,0,"div",2),e.qZA(),e.YNc(4,xi,15,6,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.reaperEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.reaperEnchantment))},dependencies:[d.sg,d.O5,b.lW,T.Hw,_.KE,_.hX,Z.gD,I.ey,F.pH,s.JJ,s.JL,s.sg,s.u]}),i})();function Pi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addSkillEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Si(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function ki(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Skill Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Si,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSliderValue(a))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeSkillEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",2)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let Ti=(()=>{class i{constructor(t){this.itemFormService=t,this.heroClass=l.iHO.Huntress,this.skillEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getSkillBuffOptions(this.heroClass),null!==this.skillEnchantment&&this.updateSkillEnchantmentValueLabel(this.skillEnchantment.effect.value)}updateSkillEnchantmentValueLabel(t){this.displayedValue="",null!==this.skillEnchantment&&null!==t&&(this.displayedValue="+"+(0,l.BeF)(this.skillEnchantment.craftableValues[t],0))}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.skillEnchantment&&null!==n&&this.updateSkillEnchantmentValueLabel(n)}removeSkillEnchantment(){null!==this.form&&this.form.patchValue({skill:null})}addSkillEnchantment(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({skill:t.value,value:2})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-edit-buff-skill"]],inputs:{heroClass:"heroClass",skillEnchantment:"skillEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","skill"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Skill Enchantment :"),e.qZA(),e.YNc(3,Pi,4,0,"div",2),e.qZA(),e.YNc(4,ki,15,6,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.skillEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.skillEnchantment))},dependencies:[d.sg,d.O5,b.lW,T.Hw,_.KE,_.hX,Z.gD,I.ey,F.pH,s.JJ,s.JL,s.sg,s.u]}),i})();function wi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.addAttributeEnchantment())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Ai(i,o){if(1&i&&(e.TgZ(0,"mat-option",16),e._UZ(1,"span",17),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Q6J("innerHTML",t.label,e.oJD)}}function Zi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7)(2,"mat-form-field",8)(3,"mat-label"),e._uU(4,"Attribute Enchantment"),e.qZA(),e.TgZ(5,"mat-select",9),e.YNc(6,Ai,2,2,"mat-option",10),e.qZA()()(),e.TgZ(7,"div",11)(8,"mat-slider",12),e.NdJ("input",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSliderValue(a))}),e.qZA()(),e.TgZ(9,"div",13)(10,"div",14),e._uU(11),e.qZA(),e.TgZ(12,"button",15),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.removeAttributeEnchantment())}),e.TgZ(13,"mat-icon"),e._uU(14,"delete"),e.qZA()()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngForOf",t.options),e.xp6(2),e.Q6J("min",1)("max",3)("step",1),e.xp6(3),e.hij(" ",t.displayedValue," ")}}let Ii=(()=>{class i{constructor(t){this.itemFormService=t,this.attributeEnchantment=null,this.form=null,this.options=[],this.displayedValue=""}ngOnChanges(){this.options=this.itemFormService.getAttributeBuffOptions(),null!==this.attributeEnchantment&&this.updateAttributeEnchantmentValueLabel(this.attributeEnchantment.effect.value)}updateAttributeEnchantmentValueLabel(t){this.displayedValue="",null!==this.attributeEnchantment&&null!==t&&(this.displayedValue="+"+(0,l.BeF)(this.attributeEnchantment.craftableValues[t],0))}updateSliderValue(t){this.displayedValue="";const n=t.value;null!==this.attributeEnchantment&&null!==n&&this.updateAttributeEnchantmentValueLabel(n)}removeAttributeEnchantment(){null!==this.form&&this.form.patchValue({attribute:null})}addAttributeEnchantment(){const t=this.options[0];null!==this.form&&t&&this.form.patchValue({attribute:t.value,value:3})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-edit-buff-attribute"]],inputs:{attributeEnchantment:"attributeEnchantment",form:"form"},features:[e.TTD],decls:5,vars:2,consts:[[1,"stat-info"],[1,"label"],["class","add",4,"ngIf"],["class","stat-line",3,"formGroup",4,"ngIf"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[1,"stat-line",3,"formGroup"],[1,"select"],["appearance","outline",1,"no-error-padding"],["formControlName","attribute"],[3,"value",4,"ngFor","ngForOf"],[1,"slider"],["color","primary","formControlName","value",3,"min","max","step","input"],[1,"additional"],[1,"value"],["mat-icon-button","","color","primary","type","button",3,"click"],[3,"value"],[3,"innerHTML"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2,"Attribute Enchantment :"),e.qZA(),e.YNc(3,wi,4,0,"div",2),e.qZA(),e.YNc(4,Zi,15,6,"div",3)),2&t&&(e.xp6(3),e.Q6J("ngIf",null!==n.form&&null===n.attributeEnchantment),e.xp6(1),e.Q6J("ngIf",null!==n.form&&null!==n.attributeEnchantment))},dependencies:[d.sg,d.O5,b.lW,T.Hw,_.KE,_.hX,Z.gD,I.ey,F.pH,s.JJ,s.JL,s.sg,s.u]}),i})();function Ei(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.addBasicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Li(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw(3);return e.KtG(r.removeAffix(a))}),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,r=e.oxw(3);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(a))("removable",!1)}}function qi(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Li,1,5,"app-item-edit-stat",24),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.isBasicStat(t))}}function Ji(i,o){if(1&i&&(e.ynx(0),e.YNc(1,qi,2,1,"ng-container",14),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.getAffixControls())}}function Ni(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.addMagicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Ui(i,o){if(1&i&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Magic Stats : "),e.qZA(),e.YNc(3,Ni,4,0,"div",11),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.hasBasicStats()&&!t.hasMaximumMagicStats())}}function Ri(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeAffix(a))}),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,r=e.oxw(2);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(a))("removable",!r.hasRareStats()&&!r.hasEpicStats())}}function Bi(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ri,1,5,"app-item-edit-stat",24),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isMagicStat(t))}}function Fi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.addRareAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Hi(i,o){if(1&i&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Rare Stats : "),e.qZA(),e.YNc(3,Fi,4,0,"div",11),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.hasMagicStats()&&!t.hasMaximumRareStats())}}function Qi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeAffix(a))}),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,r=e.oxw(2);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(a))("removable",!r.hasEpicStats())}}function Yi(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Qi,1,5,"app-item-edit-stat",24),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isRareStat(t))}}function Gi(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",22)(1,"button",23),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.addEpicAffix())}),e.TgZ(2,"mat-icon"),e._uU(3,"add"),e.qZA()()()}}function Vi(i,o){if(1&i&&(e.TgZ(0,"div",9)(1,"div",10),e._uU(2," Epic Stats : "),e.qZA(),e.YNc(3,Gi,4,0,"div",11),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.hasRareStats()&&!t.hasMaximumEpicStats())}}function Di(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-item-edit-stat",25),e.NdJ("remove",function(){e.CHM(t);const a=e.oxw().index,r=e.oxw(2);return e.KtG(r.removeAffix(a))}),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,r=e.oxw(2);e.Q6J("form",n)("base",r.item.base)("alreadyUsedStats",r.alreadyUsedStats)("affix",r.getAffix(a))("removable",!0)}}function ji(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Di,1,5,"app-item-edit-stat",24),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.isEpicStat(t))}}function Ki(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(1,"mat-dialog-content")(2,"div",2),e._UZ(3,"app-item-view",3),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"mat-form-field",6)(7,"mat-label"),e._uU(8,"Item level"),e.qZA(),e._UZ(9,"input",7),e.TgZ(10,"mat-error"),e._uU(11),e.qZA()(),e.TgZ(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Item reinforcment"),e.qZA(),e._UZ(15,"input",8),e.TgZ(16,"mat-error"),e._uU(17,"Reinforcment must be >= 0"),e.qZA()()(),e.TgZ(18,"div",9)(19,"div",10),e._uU(20," Base Stats : "),e.qZA(),e.YNc(21,Ei,4,0,"div",11),e.qZA(),e.YNc(22,Ji,2,1,"ng-container",12),e.YNc(23,Ui,4,1,"div",13),e.YNc(24,Bi,2,1,"ng-container",14),e.YNc(25,Hi,4,1,"div",13),e.YNc(26,Yi,2,1,"ng-container",14),e.YNc(27,Vi,4,1,"div",13),e.YNc(28,ji,2,1,"ng-container",14),e._UZ(29,"app-item-edit-legendary-effect",15)(30,"app-item-edit-buff-reaper",16)(31,"app-item-edit-buff-skill",17)(32,"app-item-edit-buff-attribute",18),e.qZA()(),e.TgZ(33,"mat-dialog-actions")(34,"button",19),e._uU(35,"Cancel"),e.qZA(),e.TgZ(36,"button",20),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.reset())}),e._uU(37,"Reset"),e.qZA(),e.TgZ(38,"button",21),e._uU(39,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(3),e.Q6J("item",t.item)("details",!0),e.xp6(8),e.hij("Level must be between 1 and ",t.MAX_ITEM_LEVEL,""),e.xp6(10),e.Q6J("ngIf",!t.hasMaximumBasicStats()),e.xp6(1),e.Q6J("ngIf",t.hasBasicStats()),e.xp6(1),e.Q6J("ngIf",t.hasBasicStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("ngIf",t.hasMagicStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("ngIf",t.hasRareStats()),e.xp6(1),e.Q6J("ngForOf",t.getAffixControls()),e.xp6(1),e.Q6J("base",t.item.base)("reinforcment",t.item.reinforcment)("heroClass",t.item.heroClass)("legendaryEffect",t.item.legendaryEffect)("form",t.getLegendaryEffectForm()),e.xp6(1),e.Q6J("reaperEnchantment",t.item.reaperEnchantment)("form",t.getReaperEnchantmentForm()),e.xp6(1),e.Q6J("heroClass",t.item.heroClass)("skillEnchantment",t.item.skillEnchantment)("form",t.getSkillEnchantmentForm()),e.xp6(1),e.Q6J("attributeEnchantment",t.item.attributeEnchantment)("form",t.getAttributeEnchantmentForm())}}let Xi=(()=>{class i{constructor(t,n,a,r,c,m,u,g,f){this.dialogRef=t,this.slormancerCharacterUpdaterService=n,this.slormancerItemService=a,this.slormancerDataService=r,this.slormancerAffixService=c,this.slormancerLegendaryEffectService=m,this.formOptionsService=u,this.buildStorageService=g,this.MAX_ITEM_LEVEL=l.Sb7,this.maxBasicStats=0,this.alreadyUsedStats=[],this.originalItem=f.item,this.maxLevel=f.maxLevel,this.item=this.slormancerItemService.getEquipableItemClone(this.originalItem),this.character=f.character,this.reset()}reset(){Object.assign(this.item,this.slormancerItemService.getEquipableItemClone(this.originalItem)),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.item)}updatePreview(t){const n=this.item;if(t.valid){const a=t.value;if(n.level=a.level,n.reinforcment=a.reinforcment,n.affixes.forEach((c,m)=>{const u=t.get("affixes."+m);if(null!==u){const g=u.get("purity").value,f=u.get("value").value,v=u.get("stat").value,S=u.get("rarity").value;if(c.craftedEffect.effect.stat!==v){const w=this.slormancerAffixService.getAffixFromStat(v,n.level,n.reinforcment,S,f);null!==w&&(n.affixes[m]=w,c=w)}c.craftedEffect.craftedValue=f,c.pure=g}}),null!==a.legendaryEffect){const c=a.legendaryEffect.id,m=a.legendaryEffect.value;null===c?n.legendaryEffect=null:null===n.legendaryEffect||n.legendaryEffect.id!==c?n.legendaryEffect=this.slormancerLegendaryEffectService.getLegendaryEffectById(c,m,n.reinforcment,n.heroClass):n.legendaryEffect.value=m}if(null!==a.reaper){const c=a.reaper.smith,m=a.reaper.value;null===c?n.reaperEnchantment=null:null===n.reaperEnchantment||n.reaperEnchantment.craftedReaperSmith!==c?n.reaperEnchantment=this.slormancerItemService.getReaperEnchantment(c,m):n.reaperEnchantment.craftedValue=m}if(null!==a.skill){const c=a.skill.skill,m=a.skill.value;null===c?n.skillEnchantment=null:null===n.skillEnchantment||n.skillEnchantment.craftedSkill!==c?n.skillEnchantment=this.slormancerItemService.getSkillEnchantment(c,m):n.skillEnchantment.craftedValue=m}if(null!==a.attribute){const c=a.attribute.attribute,m=a.attribute.value;null===c?n.attributeEnchantment=null:null===n.attributeEnchantment||n.attributeEnchantment.craftedAttribute!==c?n.attributeEnchantment=this.slormancerItemService.getAttributeEnchantment(c,m):n.attributeEnchantment.craftedValue=m}this.alreadyUsedStats=n.affixes.map(c=>c.craftedEffect.effect.stat),this.slormancerItemService.updateEquipableItemModel(n);const r=this.buildStorageService.getBuild();this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==r?r.configuration:l.g5j,!1,n),this.slormancerItemService.updateEquipableItemView(n)}}affixToForm(t){return new s.cw({rarity:new s.NI(t.rarity),value:new s.NI(t.craftedEffect.craftedValue),purity:new s.NI(t.pure),stat:new s.NI(t.craftedEffect.effect.stat)})}legendaryEffectToForm(t){return new s.cw({id:new s.NI(null===t?null:t.id),value:new s.NI(null===t?100:t.value)})}buildForm(){let t=null;const n=new s.cw({level:new s.NI(this.item.level,[s.kI.required,s.kI.min(1),s.kI.max(this.MAX_ITEM_LEVEL),s.kI.pattern(/^[0-9]+$/)]),reinforcment:new s.NI(this.item.reinforcment,[s.kI.required,s.kI.min(0),s.kI.pattern(/^[0-9]+$/)]),affixes:new s.Oe(this.item.affixes.map(a=>this.affixToForm(a))),legendaryEffect:this.legendaryEffectToForm(this.item.legendaryEffect),reaper:new s.cw({smith:new s.NI(null===this.item.reaperEnchantment?null:this.item.reaperEnchantment.craftedReaperSmith),value:new s.NI(null===this.item.reaperEnchantment?5:this.item.reaperEnchantment.craftedValue)}),skill:new s.cw({skill:new s.NI(null===this.item.skillEnchantment?null:this.item.skillEnchantment.craftedSkill),value:new s.NI(null===this.item.skillEnchantment?2:this.item.skillEnchantment.craftedValue)}),attribute:new s.cw({attribute:new s.NI(null===this.item.attributeEnchantment?null:this.item.attributeEnchantment.craftedAttribute),value:new s.NI(null===this.item.attributeEnchantment?2:this.item.attributeEnchantment.craftedValue)})});return n.valueChanges.subscribe(()=>{this.updatePreview(n)}),this.updatePreview(n),this.maxBasicStats=this.slormancerDataService.getBaseMaxBasicStat(this.item.base),t=n,t}getAffixControls(){const t=this.form.get("affixes");return null!==t?t.controls:[]}isBasicStat(t){const n=t.get("rarity");return null!==n&&n.value===l.uqS.Normal}hasBasicStats(){return this.getAffixControls().filter(t=>this.isBasicStat(t)).length>0}hasMaximumBasicStats(){return this.getAffixControls().filter(t=>this.isBasicStat(t)).length>=this.maxBasicStats}isMagicStat(t){const n=t.get("rarity");return null!==n&&n.value===l.uqS.Magic}hasMagicStats(){return this.getAffixControls().filter(t=>this.isMagicStat(t)).length>0}hasMaximumMagicStats(){return this.getAffixControls().filter(t=>this.isMagicStat(t)).length>=l.aHw}isRareStat(t){const n=t.get("rarity");return null!==n&&n.value===l.uqS.Rare}hasRareStats(){return this.getAffixControls().filter(t=>this.isRareStat(t)).length>0}hasMaximumRareStats(){return this.getAffixControls().filter(t=>this.isRareStat(t)).length>=l.bm}isEpicStat(t){const n=t.get("rarity");return null!==n&&n.value===l.uqS.Epic}hasEpicStats(){return this.getAffixControls().filter(t=>this.isEpicStat(t)).length>0}hasMaximumEpicStats(){return this.getAffixControls().filter(t=>this.isEpicStat(t)).length>=l.hcO}getAffix(t){return null===this.item?null:(0,l.lA$)(this.item.affixes[t])}removeAffix(t){const n=this.form.get("affixes");null!==n&&(n.removeAt(t),this.item.affixes.splice(t,1),this.updatePreview(this.form))}addAffix(t){const n=this.form.get("affixes"),r=this.formOptionsService.getStatsOptions(this.item.base,t).filter(c=>-1===this.alreadyUsedStats.indexOf(c.value))[0];if(r&&null!==n){const c=this.slormancerAffixService.getAffixFromStat(r.value,this.item.level,this.item.reinforcment,t,1e3);null!==c&&(this.item.affixes.push(c),n.push(this.affixToForm(c)),this.updatePreview(this.form))}}addBasicAffix(){this.addAffix(l.uqS.Normal)}addMagicAffix(){this.addAffix(l.uqS.Magic)}addRareAffix(){this.addAffix(l.uqS.Rare)}addEpicAffix(){this.addAffix(l.uqS.Epic)}getLegendaryEffectForm(){return null===this.form?null:this.form.get("legendaryEffect")}getReaperEnchantmentForm(){return null===this.form?null:this.form.get("reaper")}getSkillEnchantmentForm(){return null===this.form?null:this.form.get("skill")}getAttributeEnchantmentForm(){return null===this.form?null:this.form.get("attribute")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(l.Pdp),e.Y36(l.SgH),e.Y36(l.ogB),e.Y36(l.lRX),e.Y36(l.ArO),e.Y36(L),e.Y36(C),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],[1,"preview"],[3,"item","details"],[1,"form"],[1,"form-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["matInput","","type","number","step","1","formControlName","reinforcment"],[1,"form-info"],[1,"label"],["class","add",4,"ngIf"],[4,"ngIf"],["class","form-info",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"base","reinforcment","heroClass","legendaryEffect","form"],[3,"reaperEnchantment","form"],[3,"heroClass","skillEnchantment","form"],[3,"attributeEnchantment","form"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"],[1,"add"],["mat-icon-button","","type","button","color","primary",3,"click"],[3,"form","base","alreadyUsedStats","affix","removable","remove",4,"ngIf"],[3,"form","base","alreadyUsedStats","affix","removable","remove"]],template:function(t,n){1&t&&e.YNc(0,Ki,40,24,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.item)},dependencies:[d.sg,d.O5,b.lW,T.Hw,p.ZT,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,$,_i,Mi,yi,Ti,Ii],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1;overflow:auto}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:370px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 992px){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]{align-items:stretch}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-line[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex-basis:auto}}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;min-height:40px}"]}),i})(),zi=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-remove-confirm-modal"]],decls:7,vars:2,consts:[["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary",3,"mat-dialog-close"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content"),e._uU(1," Are you sure you want to remove this item ?\n"),e.qZA(),e.TgZ(2,"mat-dialog-actions")(3,"button",0),e._uU(4,"Cancel"),e.qZA(),e.TgZ(5,"button",1),e._uU(6,"Remove"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("mat-dialog-close",!0))},dependencies:[b.lW,p.ZT,p.xY,p.H8]}),i})();function $i(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"img",4)(2,"img",4),e.BQk()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("src",t.item.itemIconBackground,e.LSH),e.xp6(1),e.Q6J("src",t.item.icon,e.LSH)}}function Wi(i,o){if(1&i&&e._UZ(0,"img",4),2&i){const t=e.oxw();e.MGl("src","assets/img/icon/item/",t.base,"/empty.png",e.LSH)}}function ea(i,o){if(1&i&&e._UZ(0,"app-item-view",10),2&i){const t=e.oxw(2);e.Q6J("item",t.item)("details",!1)}}function ta(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.equip())}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_back"),e.qZA(),e._uU(3,"Equip item"),e.qZA()}}function na(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.unequip())}),e.TgZ(1,"mat-icon"),e._uU(2,"arrow_forward"),e.qZA(),e._uU(3,"Unequip item"),e.qZA()}}function ia(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"add"),e.qZA(),e._uU(3,"Create item"),e.qZA()}}function aa(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,"(Left slot)"),e.qZA())}function oa(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,"(Right slot)"),e.qZA())}function ra(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(3);return e.KtG(c.compareWithSlot(r))}),e.TgZ(1,"mat-icon"),e._uU(2,"compare_arrows"),e.qZA(),e._uU(3,"Compare "),e.YNc(4,aa,2,0,"span",2),e.YNc(5,oa,2,0,"span",2),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.Q6J("ngIf",t===n.GearSlot.LeftRing),e.xp6(1),e.Q6J("ngIf",t===n.GearSlot.RightRing)}}function la(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.edit())}),e.TgZ(1,"mat-icon"),e._uU(2,"edit"),e.qZA(),e._uU(3,"Edit item"),e.qZA()}}function ca(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.take())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_cut"),e.qZA(),e._uU(3,"Move item"),e.qZA()}}function sa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.copy())}),e.TgZ(1,"mat-icon"),e._uU(2,"content_copy"),e.qZA(),e._uU(3,"Copy item"),e.qZA()}}function ma(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.remove())}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA(),e._uU(3,"Remove item"),e.qZA()}}function da(i,o){if(1&i&&(e.YNc(0,ta,4,0,"button",11),e.YNc(1,na,4,0,"button",11),e.YNc(2,ia,4,0,"button",11),e.YNc(3,ra,6,2,"button",12),e.YNc(4,la,4,0,"button",11),e.YNc(5,ca,4,0,"button",11),e.YNc(6,sa,4,0,"button",11),e.YNc(7,ma,4,0,"button",11)),2&i){const t=e.oxw(2);e.Q6J("ngIf",null!==t.item&&null===t.base),e.xp6(1),e.Q6J("ngIf",null!==t.item&&null!==t.base),e.xp6(1),e.Q6J("ngIf",null===t.item),e.xp6(1),e.Q6J("ngForOf",t.comparableGearSlots),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item),e.xp6(1),e.Q6J("ngIf",null!==t.item)}}function ua(i,o){if(1&i&&(e.ynx(0),e.YNc(1,ea,1,2,"ng-template",5),e._UZ(2,"div",6),e.TgZ(3,"mat-menu",7,8),e.YNc(5,da,8,8,"ng-template",9),e.qZA(),e.BQk()),2&i){const t=e.MAs(4),n=e.oxw(),a=e.MAs(1);e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",!n.isDragging&&n.isMouseOver)("cdkConnectedOverlayOrigin",a),e.xp6(1),e.Q6J("matMenuTriggerFor",t),e.xp6(1),e.Q6J("overlapTrigger",!0)}}let pe=(()=>{class i extends O.B{constructor(t,n,a,r,c,m){super(),this.dialog=t,this.itemMoveService=n,this.searchService=a,this.slormancerCharacterBuilderService=r,this.slormancerItemService=c,this.buildStorageService=m,this.GearSlot=l.SHB,this.character=null,this.item=null,this.base=null,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.isDragging=!1,this.isMouseOver=!1,this.isItemCompatible=!1,this.isDraggedItem=!1,this.hiddenBySearch=!1,this.comparableGearSlots=[],this.itemMoveService.draggingItem.pipe((0,M.R)(this.unsubscribe)).subscribe(u=>{this.isDragging=u,this.isDraggedItem=this.itemMoveService.isHoldItem(this.item),this.isItemCompatible=this.itemMoveService.isDragItemCompatible(this.item,this.base)}),this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onMouseOver(){this.isMouseOver=!0}onMouseLeave(){this.isMouseOver=!1}onMouseDown(t){return 0===t.button&&!this.readonly&&this.take(),!1}onMouseUp(t){return 0===t.button&&!this.readonly&&(this.isDragging?this.itemMoveService.swap(this.item,this.base,(n,a)=>this.moveCallback(n,a)):this.edit()),!1}onMouseContextMenu(){return this.itemMoveService.releaseHoldItem(),this.menu&&!this.readonly&&(this.updateComparableSlots(),this.menu.openMenu()),!1}ngOnInit(){}ngOnChanges(){this.updateSearch()}isMenuOpen(){return null!=this.menu&&this.menu.menuOpen}updateComparableSlots(){this.comparableGearSlots=[];const t=this.character,n=this.item;null!==t&&null!==n&&null===this.base&&(this.comparableGearSlots=l.PLi.filter(a=>{const r=t.gear[a];return null!==r&&r.base===n.base}))}updateSearch(){this.hiddenBySearch=null!==this.item&&this.searchService.hasSearch()&&!this.searchService.itemMatchSearch(this.item)}moveCallback(t,n){t&&this.changed.emit(n),this.isDraggedItem=!1,this.isItemCompatible=!1}getItemEditModalData(t,n){const a=this.slormancerCharacterBuilderService.getCharacterClone(t),r=l.PLi.find(u=>t.gear[u]===n),c=r?a.gear[r]:null;return{character:a,item:null!==c?c:this.slormancerItemService.getEquipableItemClone(n),maxLevel:a.level}}edit(t=this.item){const n=this.character;if(null!==n)if(null===t)null!==this.base?this.edit(this.slormancerItemService.getEmptyEquipableItem(this.base,n.heroClass,n.level)):this.dialog.open(li).afterClosed().subscribe(a=>{null!=a&&this.edit(this.slormancerItemService.getEmptyEquipableItem(a,n.heroClass,n.level))});else{const a=this.getItemEditModalData(n,t);this.dialog.open(Xi,{data:a,width:"80vw",maxWidth:"1000px"}).afterClosed().subscribe(r=>{void 0!==r&&this.changed.emit(r)})}}take(){null!==this.item&&this.itemMoveService.hold(this.item,this.base,(t,n)=>this.moveCallback(t,n))}copy(){if(null!==this.item){const t=this.slormancerItemService.getEquipableItemClone(this.item);this.itemMoveService.hold(t,t.base)}}remove(){this.dialog.open(zi).afterClosed().subscribe(t=>{!0===t&&this.changed.emit(null)})}equip(){null!==this.item&&this.itemMoveService.equip(this.item,(t,n)=>this.moveCallback(t,n))}unequip(){null!==this.item&&this.itemMoveService.moveToStash(this.item,(t,n)=>this.moveCallback(t,n))}compareWithSlot(t){if(null!==this.item&&null!==this.character){const n=this.character.gear[t],a=this.buildStorageService.getBuild();null!==n&&null!==a&&null!==a.configuration&&this.dialog.open(oi,{data:{character:this.character,slot:t,config:a.configuration,left:n,right:this.item}})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.uw),e.Y36(N),e.Y36(q.o),e.Y36(l.oYj),e.Y36(l.SgH),e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,5),2&t){let a;e.iGM(a=e.CRH())&&(n.menu=a.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onMouseOver()})("mouseleave",function(){return n.onMouseLeave()})("mousedown",function(r){return n.onMouseDown(r)})("mouseup",function(r){return n.onMouseUp(r)})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{character:"character",item:"item",base:"base",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:5,vars:15,consts:[["cdkOverlayOrigin","",1,"item"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"src",4,"ngIf"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"matMenuTriggerFor"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],[3,"item","details"],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,$i,3,2,"ng-container",2),e.YNc(3,Wi,1,1,"img",3),e.YNc(4,ua,6,4,"ng-container",2),e.qZA()),2&t&&(e.ekj("readonly",n.readonly)("forced-base-compatible",n.isItemCompatible&&null!==n.base)("drop-compatible",!n.isDraggedItem&&n.isMouseOver&&n.isDragging&&n.isItemCompatible)("drop-incompatible",!n.isDraggedItem&&n.isMouseOver&&n.isDragging&&!n.isItemCompatible)("is-being-dragged",n.isDraggedItem&&n.isDragging)("hidden-search",n.hiddenBySearch),e.xp6(2),e.Q6J("ngIf",null!==n.item),e.xp6(1),e.Q6J("ngIf",null===n.item&&null!==n.base),e.xp6(1),e.Q6J("ngIf",n.isMouseOver||n.isMenuOpen()))},dependencies:[d.sg,d.O5,T.Hw,x.VK,x.OP,x.p6,x.KA,P.pI,P.xu,$],styles:["[_nghost-%COMP%]{width:56px;min-width:56px;height:56px;min-height:56px}.item[_ngcontent-%COMP%]{width:56px;min-width:56px;min-height:56px;border:4px solid black;position:relative;background-color:#131313}.item[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.item.forced-base-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2b3}.item.drop-compatible[_ngcontent-%COMP%]{border-color:#b7ffd2}.item.drop-incompatible[_ngcontent-%COMP%]{border-color:#f44336}.item.is-being-dragged[_ngcontent-%COMP%]{opacity:.3}.item.hidden-search[_ngcontent-%COMP%]{opacity:.2}.item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.item[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:0;right:0}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),i})();var ge=h(9762);function pa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-reaper-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Reaper level (base)"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()(),e.TgZ(13,"mat-form-field",7)(14,"mat-label"),e._uU(15,"Reaper kills (base)"),e.qZA(),e._UZ(16,"input",9),e.TgZ(17,"mat-error"),e._uU(18,"Kills must be >= 0"),e.qZA()()(),e.TgZ(19,"div",6)(20,"mat-form-field",7)(21,"mat-label"),e._uU(22,"Reaper level (primordial)"),e.qZA(),e._UZ(23,"input",10),e.TgZ(24,"mat-error"),e._uU(25),e.qZA()(),e.TgZ(26,"mat-form-field",7)(27,"mat-label"),e._uU(28,"Reaper kills (primordial)"),e.qZA(),e._UZ(29,"input",11),e.TgZ(30,"mat-error"),e._uU(31,"Kills must be >= 0"),e.qZA()()(),e.TgZ(32,"div",6)(33,"mat-form-field",7)(34,"mat-label"),e._uU(35,"Reaper base affinity"),e.qZA(),e._UZ(36,"input",12),e.TgZ(37,"mat-error"),e._uU(38),e.qZA()(),e.TgZ(39,"mat-checkbox",13),e._uU(40,"Primordial"),e.qZA()(),e.TgZ(41,"div",6),e._UZ(42,"app-search-select",14),e.qZA()()(),e.TgZ(43,"mat-dialog-actions")(44,"button",15),e._uU(45,"Cancel"),e.qZA(),e.TgZ(46,"button",16),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.reset())}),e._uU(47,"Reset"),e.qZA(),e.TgZ(48,"button",17),e._uU(49,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("reaper",t.reaper),e.xp6(8),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(13),e.hij("Level must be between 1 and ",t.reaper.maxLevel,""),e.xp6(13),e.hij("Base affinity must be between 1 and ",t.MAX_REAPER_AFFINITY_BASE,""),e.xp6(4),e.Q6J("control",t.getReaperControl())("options",t.options)("noErrorPadding",!0)}}let ga=(()=>{class i{constructor(t,n,a,r,c,m,u){this.dialogRef=t,this.slormancerReaperService=n,this.slormancerRuneService=a,this.slormancerCharacterUpdaterService=r,this.formOptionsService=c,this.buildStorageService=m,this.MAX_REAPER_AFFINITY_BASE=l.DxO,this.options=[],this.originalReaper=this.slormancerReaperService.getReaperClone(u.reaper),this.character=u.character,this.reaper=u.reaper,this.reset()}reset(){this.reaper=Object.assign(this.reaper,this.originalReaper),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.reaper)}getReaperControl(){return this.form.get("reaper")}updatePreview(t){if(t.valid){const n=t.value;if(n.reaper===this.reaper.id)this.reaper.id=n.reaper,this.reaper.primordial=n.primordial,this.reaper.baseInfo.level=n.baseLevel,this.reaper.primordialInfo.level=n.primordialLevel,this.reaper.baseInfo.kills=n.baseKills,this.reaper.primordialInfo.kills=n.primordialKills,this.reaper.baseAffinity=n.affinity;else{const r=this.slormancerReaperService.getReaperById(n.reaper,this.reaper.weaponClass,n.primordial,n.baseLevel,n.primordialLevel,n.baseKills,n.primordialKills,this.reaper.baseAffinity,this.reaper.bonusAffinity);null!==r&&Object.assign(this.reaper,r)}const a=this.buildStorageService.getBuild();this.slormancerReaperService.updateReaperModel(this.reaper),null!==this.character.runes.effect&&this.slormancerRuneService.updateRuneModel(this.character.runes.effect,this.reaper.id),this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==a?a.configuration:l.g5j,!1),this.slormancerReaperService.updateReaperView(this.reaper),this.options=this.formOptionsService.getReaperOptions(this.reaper.weaponClass,this.reaper.primordial),n.baseLevel!==this.reaper.baseInfo.level&&t.patchValue({baseLevel:this.reaper.baseInfo.level},{emitEvent:!1}),n.primordialLevel!==this.reaper.primordialInfo.level&&t.patchValue({primordialLevel:this.reaper.primordialInfo.level},{emitEvent:!1})}}getReaperMaxLevelValidator(){return t=>s.kI.max(this.reaper.maxLevel)(t)}buildForm(){const t=new s.cw({baseLevel:new s.NI(this.reaper.baseInfo.level,[s.kI.required,s.kI.min(1),this.getReaperMaxLevelValidator()]),baseKills:new s.NI(this.reaper.baseInfo.kills,[s.kI.required,s.kI.min(0)]),primordialLevel:new s.NI(this.reaper.primordialInfo.level,[s.kI.required,s.kI.min(1),this.getReaperMaxLevelValidator()]),primordialKills:new s.NI(this.reaper.primordialInfo.kills,[s.kI.required,s.kI.min(0)]),primordial:new s.NI(this.reaper.primordial,s.kI.required),affinity:new s.NI(this.reaper.baseAffinity,[s.kI.required,s.kI.min(0),s.kI.max(l.DxO)]),reaper:new s.NI(this.reaper.id,s.kI.required)});return t.valueChanges.subscribe(()=>{this.updatePreview(t)}),this.updatePreview(t),t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(l.IxD),e.Y36(l._VP),e.Y36(l.Pdp),e.Y36(L),e.Y36(C),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reaper-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"reaper"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","baseLevel"],["matInput","","type","number","step","1","formControlName","baseKills"],["matInput","","type","number","step","1","formControlName","primordialLevel"],["matInput","","type","number","step","1","formControlName","primordialKills"],["matInput","","type","number","step","1","formControlName","affinity"],["color","primary","formControlName","primordial"],["label","Reaper base",3,"control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,pa,50,8,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.reaper)},dependencies:[d.O5,b.lW,p.ZT,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,V.oG,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,ge.b,D],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex-basis:auto}}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{padding:8px 0}"]}),i})();function _a(i,o){if(1&i&&e._UZ(0,"app-reaper-view",7),2&i){const t=e.oxw(2);e.Q6J("reaper",t.character.reaper)}}function fa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.edit())}),e._UZ(1,"div",2,3)(3,"div",4),e.ynx(4),e._UZ(5,"img",5),e.YNc(6,_a,1,1,"ng-template",6),e.BQk(),e.qZA()}if(2&i){const t=e.MAs(2),n=e.oxw();e.ekj("readonly",n.readonly)("hidden-search",n.hiddenBySearch),e.xp6(5),e.ekj("primordial-effect",n.character.reaper.primordial),e.Q6J("src",n.character.reaper.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}let _e=(()=>{class i extends O.B{constructor(t,n,a,r){super(),this.dialog=t,this.slormancerCharacterBuilderService=n,this.searchService=a,this.itemMoveService=r,this.character=null,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1,this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}ngOnChanges(){this.updateSearch()}updateSearch(){this.hiddenBySearch=null!==this.character&&this.searchService.hasSearch()&&!this.searchService.reaperMatchSearch(this.character.reaper)}edit(){if(null!==this.character&&!this.readonly){const t=this.slormancerCharacterBuilderService.getCharacterClone(this.character);this.dialog.open(ga,{data:{reaper:t.reaper,character:t}}).afterClosed().subscribe(a=>{a&&this.changed.emit(a)})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.uw),e.Y36(l.oYj),e.Y36(q.o),e.Y36(N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-reaper-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:1,vars:1,consts:[["class","reaper",3,"readonly","hidden-search","click",4,"ngIf"],[1,"reaper",3,"click"],["cdkOverlayOrigin","",1,"overlay-position"],["trigger","cdkOverlayOrigin"],[1,"inner-slot"],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"reaper"]],template:function(t,n){1&t&&e.YNc(0,fa,7,9,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.O5,P.pI,P.xu,ge.b],styles:[".reaper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-width:124px;min-height:124px;position:relative}.reaper[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.reaper.hidden-search[_ngcontent-%COMP%]{opacity:.2}.reaper[_ngcontent-%COMP%]   .overlay-position[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0}.reaper[_ngcontent-%COMP%]   .inner-slot[_ngcontent-%COMP%]{width:80px;height:80px;background-color:#1e1e1e;border:3px solid rgb(60,60,60)}.reaper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;margin-top:-12.5%;margin-left:-12.5%;image-rendering:pixelated;transform:scale(4)}.reaper-level[_ngcontent-%COMP%]{color:#fff;text-align:center;text-transform:uppercase}app-reaper-view[_ngcontent-%COMP%]{width:350px}"]}),i})();function ha(i,o){if(1&i&&e._UZ(0,"div",15),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.genresLabel,e.oJD)}}function Ca(i,o){if(1&i&&(e.TgZ(0,"mat-icon",19),e._uU(1,"info_outline"),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("matTooltip",t.skill.cooldownDetailsLabel)}}function va(i,o){if(1&i&&(e.TgZ(0,"div",16),e._UZ(1,"span",17),e.YNc(2,Ca,2,1,"mat-icon",18),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("innerHTML",t.skill.cooldownLabel,e.oJD),e.xp6(1),e.Q6J("ngIf",null!==t.skill.cooldownDetailsLabel)}}function Ma(i,o){if(1&i&&e._UZ(0,"div",20),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.skill.costLabel,e.oJD)}}function ba(i,o){if(1&i&&(e.TgZ(0,"span",21),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" + ",t.skill.bonusLevel,"")}}function Oa(i,o){if(1&i&&(e.TgZ(0,"div"),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5),e._UZ(6,"img",6),e.qZA()(),e.TgZ(7,"div",7),e.YNc(8,ha,1,1,"div",8),e.YNc(9,va,3,2,"div",9),e.YNc(10,Ma,1,1,"div",10),e.qZA()(),e._UZ(11,"div",11)(12,"div",12),e.TgZ(13,"div",13),e._UZ(14,"img",6),e.YNc(15,ba,2,1,"span",14),e.qZA()()()),2&i){const t=e.oxw();e.Gre("skill slormancer-tooltip ",t.skill.damageTypes.length>0?t.skill.damageTypes[0]:"",""),e.xp6(1),e.Q6J("innerHTML",t.skill.nameLabel,e.oJD),e.xp6(5),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH),e.xp6(2),e.Q6J("ngIf",null!==t.skill.genresLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.cooldownLabel),e.xp6(1),e.Q6J("ngIf",null!==t.skill.costLabel),e.xp6(2),e.Q6J("innerHTML",t.skill.description,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",t.skill.levelIcon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",t.skill.bonusLevel>0)}}let fe=(()=>{class i{constructor(){this.skill=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skill-view"]],inputs:{skill:"skill"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box",3,"innerHTML"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[3,"src"],[1,"data"],["class","genre",3,"innerHTML",4,"ngIf"],["class","cooldown",4,"ngIf"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[1,"bottom-level"],["class","bonus",4,"ngIf"],[1,"genre",3,"innerHTML"],[1,"cooldown"],[3,"innerHTML"],[3,"matTooltip",4,"ngIf"],[3,"matTooltip"],[1,"cost",3,"innerHTML"],[1,"bonus"]],template:function(t,n){1&t&&e.YNc(0,Oa,16,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.skill)},dependencies:[d.O5,T.Hw,E.gM],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-grow:1;text-transform:uppercase;height:100%;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .cooldown[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px;display:inline}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}"]}),i})();function xa(i,o){if(1&i&&e._UZ(0,"app-skill-view",9),2&i){const t=e.oxw(2);e.Q6J("skill",t.skill)}}function ya(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,xa,1,1,"ng-template",8),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(1);e.xp6(1),e.Q6J("src","assets/img/icon/"+(t.support?t.skill.iconLarge:t.skill.icon)+".png",e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function Pa(i,o){if(1&i&&(e.TgZ(0,"div",18),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.specializationName)}}function Sa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.updateSkill(r))}),e.TgZ(1,"div",12),e._UZ(2,"img",13),e.TgZ(3,"div",14)(4,"div",15),e._uU(5),e.qZA(),e.YNc(6,Pa,2,1,"div",16),e.TgZ(7,"div",17),e._uU(8),e.qZA()()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("selected",n.isSelectedSkill(t)),e.xp6(1),e.ekj("support",n.support),e.Q6J("src","assets/img/icon/"+(n.support?t.iconLarge:t.icon)+".png",e.LSH),e.xp6(3),e.Oqu(t.name),e.xp6(1),e.Q6J("ngIf",null!==t.specializationName),e.xp6(2),e.lnq("",n.MASTERY_LABEL,": ",t.level," / ",n.SKILL_MAX_MASTERY,"")}}function ka(i,o){if(1&i&&e.YNc(0,Sa,9,10,"button",10),2&i){const t=e.oxw();e.Q6J("ngForOf",t.getAvailableSkills())}}let he=(()=>{class i extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerTranslateService=n,this.SKILL_MAX_MASTERY=l.DA7,this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.skill=null,this.support=!1,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){}getAvailableSkills(){const t=this.buildStorageService.getLayer();let n=[];if(null!==t&&null!==t.character){const a=this.support?l.Wak.Support:l.Wak.Active;n=t.character.skills.map(r=>r.skill).filter(r=>a===r.type)}return n}isSelectedSkill(t){const n=this.buildStorageService.getLayer();return null!==n&&null!==n.character&&(n.character.primarySkill===t||n.character.secondarySkill===t||n.character.supportSkill===t)}updateSkill(t){this.skill!==t&&this.changed.emit(t)}openMenu(){return null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l.n6D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skill-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let a;e.iGM(a=e.CRH())&&(n.menu=a.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{skill:"skill",support:"support",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:6,consts:[["cdkOverlayOrigin","",1,"skill",3,"contextmenu","click"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above",1,"skill-menu"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"skill"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill",3,"src"],[1,"description"],[1,"name"],["class","specialization",4,"ngIf"],[1,"mastery"],[1,"specialization"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.NdJ("contextmenu",function(){return n.openMenu()})("click",function(){return n.openMenu()}),e.YNc(2,ya,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,ka,1,1,"ng-template",6),e.qZA()()),2&t){const a=e.MAs(5);e.ekj("support",n.support)("readonly",n.readonly),e.xp6(2),e.Q6J("ngIf",null!==n.skill),e.xp6(1),e.Q6J("matMenuTriggerFor",a)}},dependencies:[d.sg,d.O5,x.VK,x.OP,x.p6,x.KA,P.pI,P.xu,fe],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){position:absolute;width:100%;height:100%}.skill[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:uppercase}.skill[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;top:-8px;left:0}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .mastery[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .skill-menu-entry.selected[_ngcontent-%COMP%]   .specialization[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),i})();function Ta(i,o){if(1&i&&e._UZ(0,"app-ancestral-legacy-view",11),2&i){const t=e.oxw(3);e.Q6J("ancestralLegacy",t.activable)("hideNextRank",!0)}}function wa(i,o){if(1&i&&e._UZ(0,"app-activable-view",12),2&i){const t=e.oxw(3);e.Q6J("activable",t.activable)}}function Aa(i,o){if(1&i&&(e.YNc(0,Ta,1,2,"app-ancestral-legacy-view",9),e.YNc(1,wa,1,1,"app-activable-view",10)),2&i){const t=e.oxw(2);e.Q6J("ngIf",t.isAncestralLegacy(t.activable)),e.xp6(1),e.Q6J("ngIf",t.isActivable(t.activable))}}function Za(i,o){if(1&i&&(e.ynx(0),e._UZ(1,"img",7),e.YNc(2,Aa,2,2,"ng-template",8),e.BQk()),2&i){const t=e.oxw(),n=e.MAs(1);e.xp6(1),e.Q6J("src",t.activable.icon,e.LSH),e.xp6(1),e.Q6J("cdkConnectedOverlayOpen",t.showOverlay)("cdkConnectedOverlayOrigin",n)}}function Ia(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.updateActivable(r))}),e.TgZ(1,"div",14),e._UZ(2,"img",19),e.TgZ(3,"div",16)(4,"div",20),e._uU(5),e.qZA()()()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.ekj("selected",n.isSelectedActivable(t)),e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(3),e.Oqu(t.name)}}function Ea(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.updateActivable(null))}),e.TgZ(1,"div",14),e._UZ(2,"div",15),e.TgZ(3,"div",16)(4,"div",17),e._uU(5,"Remove activable"),e.qZA()()()(),e.YNc(6,Ia,6,4,"button",18)}if(2&i){const t=e.oxw();e.xp6(6),e.Q6J("ngForOf",t.getAvailableActivables())}}let Ce=(()=>{class i extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.itemMoveService=n,this.activable=null,this.readonly=!1,this.changed=new e.vpe,this.menu=null,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}onMouseClick(){return this.itemMoveService.releaseHoldItem(),null!==this.menu&&!this.readonly&&this.menu.openMenu(),!1}ngOnInit(){}isAncestralLegacy(t){return void 0!==t.element}isActivable(t){return void 0===t.element}getAvailableActivables(){let t=[];const n=this.buildStorageService.getLayer();if(null!==n){const a=[n.character.gear.amulet,n.character.gear.belt,n.character.gear.body,n.character.gear.boot,n.character.gear.bracer,n.character.gear.cape,n.character.gear.glove,n.character.gear.helm,n.character.gear.ring_l,n.character.gear.ring_r,n.character.gear.shoulder].map(u=>null!==u&&null!==u.legendaryEffect?u.legendaryEffect.activable:null).filter(l.BXh).sort((u,g)=>-(0,l.quX)(u.level,g.level)).filter((u,g,f)=>(0,l.mrA)(u,g,f,(v,S)=>v.id===S.id)),r=null===n.character.reaper?[]:n.character.reaper.activables;t=[...a,...[n.character.runes.activation,n.character.runes.effect,n.character.runes.enhancement].map(u=>null===u?null:u.activable).filter(l.BXh),...r,...n.character.ancestralLegacies.activeAncestralLegacies.map(u=>n.character.ancestralLegacies.ancestralLegacies[u]).filter(l.BXh).filter(u=>u.isActivable)]}return t}isSelectedActivable(t){const n=this.buildStorageService.getLayer();return null!==n&&(n.character.activable1===t||n.character.activable2===t||n.character.activable3===t||n.character.activable4===t)}updateActivable(t){this.activable!==t&&this.changed.emit(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-activable-slot"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let a;e.iGM(a=e.CRH())&&(n.menu=a.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})("click",function(){return n.onMouseClick()})},inputs:{activable:"activable",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj],decls:7,vars:2,consts:[["cdkOverlayOrigin","",1,"skill"],["trigger","cdkOverlayOrigin"],[4,"ngIf"],[3,"matMenuTriggerFor"],["yPosition","above"],["menu","matMenu"],["matMenuContent",""],[3,"src"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ancestralLegacy","hideNextRank",4,"ngIf"],[3,"activable",4,"ngIf"],[3,"ancestralLegacy","hideNextRank"],[3,"activable"],["mat-menu-item","",3,"click"],[1,"skill-menu-entry"],[1,"skill"],[1,"description"],[1,"subtitle"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],[1,"skill",3,"src"],[1,"name"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0,1),e.YNc(2,Za,3,3,"ng-container",2),e._UZ(3,"div",3),e.TgZ(4,"mat-menu",4,5),e.YNc(6,Ea,7,1,"ng-template",6),e.qZA()()),2&t){const a=e.MAs(5);e.xp6(2),e.Q6J("ngIf",null!==n.activable),e.xp6(1),e.Q6J("matMenuTriggerFor",a)}},dependencies:[d.sg,d.O5,x.VK,x.OP,x.p6,x.KA,P.pI,P.xu,ue.K,X],styles:["[_nghost-%COMP%]{min-width:42px;height:42px;min-height:42px;display:block;overflow:hidden}.skill[_ngcontent-%COMP%]{width:42px;min-width:42px;height:42px;min-height:42px;border:4px solid black;position:relative;background-color:#131313}.skill.support[_ngcontent-%COMP%]{width:84px;min-width:84px}.skill[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%}.skill-menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}.skill-menu-entry[_ngcontent-%COMP%]   .skill-icon[_ngcontent-%COMP%]{border:4px solid #353535}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{line-height:normal;font-weight:700;text-transform:uppercase}.skill-menu-entry[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{line-height:normal}.skill-menu-entry.selected[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{border-color:#edd371;line-height:0}.skill-menu-entry.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:#edd371}app-item-view[_ngcontent-%COMP%]{width:350px}"]}),i})();function La(i,o){1&i&&e._UZ(0,"img",8)}function qa(i,o){1&i&&e._UZ(0,"img",8)}function Ja(i,o){1&i&&e._UZ(0,"img",8)}function Na(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"app-skill-slot",4),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updatePrimarySkill(a))}),e.qZA()(),e.YNc(4,La,1,0,"img",5),e.qZA(),e.TgZ(5,"div",2)(6,"div",3)(7,"app-skill-slot",4),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSecondarySkill(a))}),e.qZA()(),e.YNc(8,qa,1,0,"img",5),e.qZA(),e.TgZ(9,"div",2)(10,"div",3)(11,"app-skill-slot",6),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateSupportSkill(a))}),e.qZA()(),e.YNc(12,Ja,1,0,"img",5),e.qZA(),e.TgZ(13,"div",2)(14,"div",3)(15,"app-activable-slot",7),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable1(a))}),e.qZA()()(),e.TgZ(16,"div",2)(17,"div",3)(18,"app-activable-slot",7),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable2(a))}),e.qZA()()(),e.TgZ(19,"div",2)(20,"div",3)(21,"app-activable-slot",7),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable3(a))}),e.qZA()()(),e.TgZ(22,"div",2)(23,"div",3)(24,"app-activable-slot",7),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateActivable4(a))}),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("skill",t.character.primarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.primarySkill&&t.character.primarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.secondarySkill),e.xp6(1),e.Q6J("ngIf",null!==t.character.secondarySkill&&t.character.secondarySkill.locked),e.xp6(3),e.Q6J("skill",t.character.supportSkill)("support",!0),e.xp6(1),e.Q6J("ngIf",null!==t.character.supportSkill&&t.character.supportSkill.locked),e.xp6(3),e.Q6J("activable",t.character.activable1),e.xp6(3),e.Q6J("activable",t.character.activable2),e.xp6(3),e.Q6J("activable",t.character.activable3),e.xp6(3),e.Q6J("activable",t.character.activable4)}}let Ua=(()=>{class i extends O.B{constructor(t,n){super(),this.buildStorageService=t,this.slormancerCharacterModifierService=n,this.character=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.character=null!==t&&null!==t.character?t.character:null)}updatePrimarySkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t),this.buildStorageService.saveLayer())}updateSecondarySkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t),this.buildStorageService.saveLayer())}updateSupportSkill(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t),this.buildStorageService.saveLayer())}updateActivable1(t){null!==this.character&&this.character.activable1!==t&&(null!==t&&(this.character.activable2===t?this.character.activable2=this.character.activable1:this.character.activable3===t?this.character.activable3=this.character.activable1:this.character.activable4===t&&(this.character.activable4=this.character.activable1)),this.character.activable1=t,this.buildStorageService.saveLayer())}updateActivable2(t){null!==this.character&&this.character.activable2!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable2:this.character.activable3===t?this.character.activable3=this.character.activable2:this.character.activable4===t&&(this.character.activable4=this.character.activable2)),this.character.activable2=t,this.buildStorageService.saveLayer())}updateActivable3(t){null!==this.character&&this.character.activable3!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable3:this.character.activable2===t?this.character.activable2=this.character.activable3:this.character.activable4===t&&(this.character.activable4=this.character.activable3)),this.character.activable3=t,this.buildStorageService.saveLayer())}updateActivable4(t){null!==this.character&&this.character.activable4!==t&&(null!==t&&(this.character.activable1===t?this.character.activable1=this.character.activable4:this.character.activable3===t?this.character.activable3=this.character.activable4:this.character.activable2===t&&(this.character.activable2=this.character.activable4)),this.character.activable4=t,this.buildStorageService.saveLayer())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l.Y5A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skill-bar"]],features:[e.qOj],decls:1,vars:1,consts:[["class","skill-bar",4,"ngIf"],[1,"skill-bar"],[1,"skill-slot"],[1,"skill-slot-border"],[3,"skill","changed"],["class","locked","src","assets/img/icon//locked.png",4,"ngIf"],[3,"skill","support","changed"],[3,"activable","changed"],["src","assets/img/icon//locked.png",1,"locked"]],template:function(t,n){1&t&&e.YNc(0,Na,25,11,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.O5,he,Ce],styles:[".skill-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:4px;border:3px solid rgb(60,60,60);padding:4px}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]{position:relative}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   .skill-slot-border[_ngcontent-%COMP%]{border:3px solid rgb(60,60,60)}.skill-bar[_ngcontent-%COMP%]   .skill-slot[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;pointer-events:none}"]}),i})();const Ra=["animation"];let Ba=(()=>{class i{constructor(){this.heroClass=null,this.suffix="",this.flipAnimation=!1,this.animation=null}mouseMoved(t){if(null!==this.animation){const r=this.animation.nativeElement.getBoundingClientRect().left+this.animation.nativeElement.clientWidth/2<t.clientX;this.flipAnimation!==r&&(this.flipAnimation=r)}}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-character-animation"]],viewQuery:function(t,n){if(1&t&&e.Gf(Ra,5),2&t){let a;e.iGM(a=e.CRH())&&(n.animation=a.first)}},hostBindings:function(t,n){1&t&&e.NdJ("mousemove",function(r){return n.mouseMoved(r)},!1,e.Jf7)},inputs:{heroClass:"heroClass",suffix:"suffix"},decls:6,vars:10,consts:[[1,"character-animation"],["animation",""],[1,"idle-1",3,"src"],[1,"idle-2",3,"src"],[1,"idle-3",3,"src"],[1,"idle-4",3,"src"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e._UZ(2,"img",2)(3,"img",3)(4,"img",4)(5,"img",5),e.qZA()),2&t&&(e.ekj("flip",n.flipAnimation),e.xp6(2),e.hYB("src","assets/img/character/idle/",n.heroClass,"/0",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/1",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/2",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH),e.xp6(1),e.hYB("src","assets/img/character/idle/",n.heroClass,"/3",n.suffix?"_"+n.suffix:n.suffix,".png",e.LSH))},styles:[".character-animation[_ngcontent-%COMP%]{position:relative;height:144px;width:88px}.character-animation.flip[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scaleX(-1)}.character-animation[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;image-rendering:pixelated;animation-duration:1s;animation-iteration-count:infinite;animation-timing-function:linear}.character-animation[_ngcontent-%COMP%]   img.idle-1[_ngcontent-%COMP%]{animation-name:idle-1}.character-animation[_ngcontent-%COMP%]   img.idle-2[_ngcontent-%COMP%]{animation-name:idle-2}.character-animation[_ngcontent-%COMP%]   img.idle-3[_ngcontent-%COMP%]{animation-name:idle-3}.character-animation[_ngcontent-%COMP%]   img.idle-4[_ngcontent-%COMP%]{animation-name:idle-4}@keyframes idle-1{0%{opacity:1}25%{opacity:1}26%{opacity:0}99%{opacity:0}to{opacity:1}}@keyframes idle-2{0%{opacity:0}24%{opacity:0}25%{opacity:1}50%{opacity:1}51%{opacity:0}to{opacity:0}}@keyframes idle-3{0%{opacity:0}49%{opacity:0}50%{opacity:1}75%{opacity:1}76%{opacity:0}to{opacity:0}}@keyframes idle-4{0%{opacity:1}1%{opacity:0}74%{opacity:0}75%{opacity:1}to{opacity:1}}"]}),i})();function Fa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(1,"h2",2),e._uU(2,"Choose your hero level"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Hero level"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(9),e.hij("Level must be between 1 and ",t.MAX_HERO_LEVEL,""),e.xp6(2),e.Q6J("mat-dialog-close",null)}}let Ha=(()=>{class i{constructor(t,n){this.dialogRef=t,this.MAX_HERO_LEVEL=l.AR4,this.form=new s.cw({level:new s.NI(n.level,[s.kI.min(1),s.kI.max(l.AR4)])})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.level)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-character-level-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Fa,15,3,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,b.lW,p.ZT,p.uh,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px}"]}),i})();function Qa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e.TgZ(1,"h2",2),e._uU(2,"Choose the new item reinforcment"),e.qZA(),e.TgZ(3,"mat-dialog-content")(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Reinforcment"),e.qZA(),e._UZ(7,"input",4),e.TgZ(8,"mat-error"),e._uU(9,"Reinforcment must be positive"),e.qZA()()(),e.TgZ(10,"mat-dialog-actions")(11,"button",5),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",6),e._uU(14,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("mat-dialog-close",null)}}let Ya=(()=>{class i{constructor(t,n){this.dialogRef=t,this.MAX_HERO_LEVEL=l.AR4,this.form=new s.cw({reinforcment:new s.NI(n.reinforcment,[s.kI.min(0)])})}submit(){this.form.markAllAsTouched(),this.form.valid&&this.dialogRef.close(this.form.value.reinforcment)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-item-reinforcment-edit-modal"]],decls:1,vars:1,consts:[[3,"formGroup","submit",4,"ngIf"],[3,"formGroup","submit"],["mat-dialog-title",""],["appearance","outline"],["matInput","","type","number","step","1","formControlName","reinforcment"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,Qa,15,2,"form",0),2&t&&e.Q6J("ngIf",null!==n.form)},dependencies:[d.O5,b.lW,p.ZT,p.uh,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u],styles:["mat-dialog-content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),i})();function Ga(i,o){if(1&i&&(e.TgZ(0,"mat-option",9),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(t.label)}}function Va(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"p",10),e.NdJ("click",function(){const r=e.CHM(t).index,c=e.oxw();return e.KtG(c.removeStat(r))}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit,n=o.index;e.xp6(1),e.AsE("#",n+1," : ",t.label,"")}}let Da=(()=>{class i{constructor(t,n,a,r,c,m){this.dialogRef=t,this.slormancerItemService=a,this.slormancerDataService=r,this.slormancerAffixService=c,this.formOptionsService=m,this.AFFIX_OPTIONS=[],this.RARITY_OPTIONS=this.formOptionsService.getAllRaritiesOptions().filter(g=>g.value!==l.uqS.Legendary),this.selectedAffixes=[],this.items=n.items;const u=new s.NI;this.form=new s.cw({rarity:new s.NI(l.uqS.Epic,s.kI.required),affix:u}),u.valueChanges.subscribe(g=>{const f=this.AFFIX_OPTIONS.find(v=>v.value===g);void 0!==f&&(this.selectedAffixes.push(f),this.updateOptions(),u.setValue(null))}),this.updateOptions()}updateOptions(){this.AFFIX_OPTIONS=this.formOptionsService.getAllStatsoptions().filter(t=>!this.selectedAffixes.includes(t))}applyStatsToItem(t){const n=this.form.value.rarity,a=l.nte.filter(g=>l.nte.indexOf(g)<=l.nte.indexOf(n)),r={[l.uqS.Normal]:this.slormancerDataService.getBaseMaxBasicStat(t.base),[l.uqS.Magic]:1,[l.uqS.Rare]:1,[l.uqS.Epic]:3,[l.uqS.Legendary]:0},c={[l.uqS.Normal]:this.formOptionsService.getStatsOptions(t.base,l.uqS.Normal),[l.uqS.Magic]:this.formOptionsService.getStatsOptions(t.base,l.uqS.Magic),[l.uqS.Rare]:this.formOptionsService.getStatsOptions(t.base,l.uqS.Rare),[l.uqS.Epic]:this.formOptionsService.getStatsOptions(t.base,l.uqS.Epic),[l.uqS.Legendary]:[]};t.affixes=[];for(const g of this.selectedAffixes)for(const f of a){const v=t.affixes.filter(w=>w.rarity===f).length<r[f],S=c[f];if(v&&S.includes(g)){const w=this.slormancerAffixService.getAffixFromStat(g.value,t.level,t.reinforcment,f);if(null!==w){t.affixes.push(w);break}}}const m=Math.max(...t.affixes.map(g=>l.nte.indexOf(g.rarity))),u=l.nte.filter(g=>g===l.uqS.Normal||l.nte.indexOf(g)<m);for(const g of u){let f=!1;for(;!f&&t.affixes.filter(v=>v.rarity===g).length<r[g];){const v=c[g].find(S=>void 0===t.affixes.find(w=>w.craftedEffect.effect.stat===S.value));if(f=!0,void 0!==v){const S=this.slormancerAffixService.getAffixFromStat(v.value,t.level,t.reinforcment,g);null!==S&&(t.affixes.push(S),f=!1)}}}this.slormancerItemService.updateEquipableItemModel(t),this.slormancerItemService.updateEquipableItemView(t)}removeStat(t){this.selectedAffixes.splice(t,1),this.updateOptions()}getAffixControl(){return this.form.get("affix")}submit(){if(this.form.markAllAsTouched(),this.selectedAffixes.length>0&&this.form.valid){for(const t of this.items)this.applyStatsToItem(t);this.dialogRef.close(!0)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(p.WI),e.Y36(l.SgH),e.Y36(l.ogB),e.Y36(l.lRX),e.Y36(L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-optimize-items-affixes-modal"]],decls:21,vars:10,consts:[["mat-dialog-title",""],["id","form",3,"formGroup","submit"],["appearance","outline","color","primary",1,"no-error-padding"],["formControlName","rarity"],[3,"value",4,"ngFor","ngForOf"],["class","stat",3,"click",4,"ngFor","ngForOf"],[3,"label","control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","submit","color","primary","form","form",3,"disabled"],[3,"value"],[1,"stat",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1,"Choose the affixes you want for your items"),e.qZA(),e.TgZ(2,"mat-dialog-content")(3,"form",1),e.NdJ("submit",function(){return n.submit()}),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"p"),e._uU(7,"Items will lose their affixes before being updated."),e.qZA(),e.TgZ(8,"mat-form-field",2)(9,"mat-label"),e._uU(10,"Highest rarity to allow"),e.qZA(),e.TgZ(11,"mat-select",3),e.YNc(12,Ga,2,2,"mat-option",4),e.qZA()(),e._UZ(13,"p"),e.YNc(14,Va,2,2,"p",5),e._UZ(15,"app-search-select",6),e.qZA()(),e.TgZ(16,"mat-dialog-actions")(17,"button",7),e._uU(18,"Cancel"),e.qZA(),e.TgZ(19,"button",8),e._uU(20,"Apply"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("formGroup",n.form),e.xp6(2),e.hij("Each affix below will be applied in order to the ",n.items.length>1?n.items.length+" selected items":"selected item"," (at maximum crafting value) using the first available affix slot."),e.xp6(7),e.Q6J("ngForOf",n.RARITY_OPTIONS),e.xp6(2),e.Q6J("ngForOf",n.selectedAffixes),e.xp6(1),e.Q6J("label",n.selectedAffixes.length>0?"Add another affix":"Choose an affix")("control",n.getAffixControl())("options",n.AFFIX_OPTIONS)("noErrorPadding",!0),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(2),e.Q6J("disabled",0===n.selectedAffixes.length||!n.form.valid))},dependencies:[d.sg,b.lW,p.ZT,p.uh,p.xY,p.H8,_.KE,_.hX,Z.gD,I.ey,s._Y,s.JJ,s.JL,s.sg,s.u,D],styles:[".stat[_ngcontent-%COMP%]{cursor:pointer;padding-left:4px}@media (max-width: 768px){.stat[_ngcontent-%COMP%]{padding-left:0}}.stat[_ngcontent-%COMP%]:hover{opacity:.6}mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:200px}@media (max-width: 768px){mat-form-field[_ngcontent-%COMP%], app-search-select[_ngcontent-%COMP%]{width:100%}}"]}),i})();function ja(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.optimizeReaperEnchantments())}),e._uU(1,"Optimize items for Reaper"),e.qZA()}}function Ka(i,o){if(1&i&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Attribute"),e.qZA()),2&i){e.oxw(2);const t=e.MAs(6);e.Q6J("matMenuTriggerFor",t)}}function Xa(i,o){if(1&i&&(e.TgZ(0,"button",11),e._uU(1,"Optimize items for Skill"),e.qZA()),2&i){e.oxw(2);const t=e.MAs(9);e.Q6J("matMenuTriggerFor",t)}}function za(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.optimizeItemsAffixes())}),e._uU(1,"Optimise items affixes"),e.qZA()}}function $a(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.maximizeItemsLevel())}),e._uU(1,"Maximize items level"),e.qZA()}}function Wa(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.changeReinforcmentLevel())}),e._uU(1,"Change items reinforcment level"),e.qZA()}}function eo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.editCharacterLevel())}),e._uU(1,"Change hero level"),e.qZA(),e.YNc(2,ja,2,0,"button",9),e.YNc(3,Ka,2,1,"button",10),e.YNc(4,Xa,2,1,"button",10),e.YNc(5,za,2,0,"button",9),e.YNc(6,$a,2,0,"button",9),e.YNc(7,Wa,2,0,"button",9)}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",null!==t.character&&t.canOptimizeReaperEnchantements(t.character)&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems()),e.xp6(1),e.Q6J("ngIf",null!==t.character&&t.hasItems())}}function to(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.optimizeAttributeEnchantments(r))}),e._UZ(1,"img",13)(2,"div",14),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("src",t.icon,e.LSH),e.xp6(1),e.Q6J("innerHTML",t.attributeName,e.oJD)}}function no(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.optimizeSkillEnchantments(r))}),e._UZ(1,"img",15)(2,"div",14),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("src","assets/img/icon/"+t.icon+".png",e.LSH),e.xp6(1),e.Q6J("innerHTML",t.name,e.oJD)}}let io=(()=>{class i extends O.B{constructor(t,n,a,r){super(),this.buildStorageService=t,this.dialog=n,this.messageService=a,this.slormancerItemService=r,this.character=null,this.menu=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.character=null===t?null:t.character)}openCharacterSettings(){return null!==this.menu&&this.menu.openMenu(),!1}editCharacterLevel(){null!==this.character&&this.dialog.open(Ha,{data:{level:this.character.level}}).afterClosed().subscribe(t=>{t&&null!==this.character&&(this.character.level=t,this.buildStorageService.saveLayer())})}getGearItems(){let t=[];const n=this.character;return null!==n&&(t=l.PLi.map(a=>n.gear[a]).filter(l.BXh)),t}hasItems(){return this.getGearItems().length>0}canOptimizeReaperEnchantements(t){return null!==t.reaper&&t.reaper.smith.id!==l.Q1_.ReapersmithBrotherhood}optimizeReaperEnchantments(){if(null!==this.character){const t=this.slormancerItemService.getReaperEnchantment(this.character.reaper.smith.id,5);let n="";this.getGearItems().forEach(a=>{a.reaperEnchantment=this.slormancerItemService.getReaperEnchantmentClone(t),this.slormancerItemService.updateEquipableItemModel(a),this.slormancerItemService.updateEquipableItemView(a),n=a.reaperEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+n+'"> '+this.character.reaper.smith.name)}}getTraits(){let t=[];const n=this.character;return null!==n&&(t=l.AFD.map(a=>n.attributes.allocated[a])),t}optimizeAttributeEnchantments(t){if(null!==this.character&&null!==this.character.reaper){const n=this.slormancerItemService.getAttributeEnchantment(t.attribute,3);let a="";this.getGearItems().forEach(r=>{r.attributeEnchantment=this.slormancerItemService.getAttributeEnchantmentClone(n),this.slormancerItemService.updateEquipableItemModel(r),this.slormancerItemService.updateEquipableItemView(r),a=r.attributeEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+a+'"> '+t.attributeName)}}getSkills(){let t=[];const n=this.character;return null!==n&&(t=n.skills.map(a=>a.skill)),t}optimizeSkillEnchantments(t){if(null!==this.character){const n=this.slormancerItemService.getSkillEnchantment(t.id,2);let a="";this.getGearItems().forEach(r=>{r.skillEnchantment=this.slormancerItemService.getSkillEnchantmentClone(n),this.slormancerItemService.updateEquipableItemModel(r),this.slormancerItemService.updateEquipableItemView(r),a=r.skillEnchantment.icon}),this.buildStorageService.saveLayer(),this.messageService.message('All equipped items optimized for <img src="'+a+'"> '+t.name)}}maximizeItemsLevel(){if(null!==this.character){const t=this.character.level;this.getGearItems().forEach(n=>{n.level=t,this.slormancerItemService.updateEquipableItemModel(n),this.slormancerItemService.updateEquipableItemView(n)}),this.buildStorageService.saveLayer(),this.messageService.message("All equipped items level raised to "+t)}}changeReinforcmentLevel(){if(null!==this.character){const t=Math.max(...this.getGearItems().map(n=>n.reinforcment));this.dialog.open(Ya,{data:{reinforcment:t}}).afterClosed().subscribe(n=>{"number"==typeof n&&(this.getGearItems().forEach(a=>{a.reinforcment=n,this.slormancerItemService.updateEquipableItemModel(a),this.slormancerItemService.updateEquipableItemView(a)}),this.buildStorageService.saveLayer(),this.messageService.message("All equipped items reinforcment raised to "+n))})}}optimizeItemsAffixes(){if(null!==this.character){const t={items:this.getGearItems()};this.dialog.open(Da,{data:t}).afterClosed().subscribe(n=>{n&&(this.buildStorageService.saveLayer(),this.messageService.message("All equipped items have been updated"))})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(p.uw),e.Y36(J.e),e.Y36(l.SgH))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-character-settings-menu"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let a;e.iGM(a=e.CRH())&&(n.menu=a.first)}},features:[e.qOj],decls:11,vars:4,consts:[[3,"matMenuTriggerFor","contextmenu"],["color","primary","xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["color","primary"],["attributes","matMenu"],["mat-menu-item","","color","primary","class","menu-entry",3,"click",4,"ngFor","ngForOf"],["skills","matMenu"],["mat-menu-item","","color","primary",3,"click"],["mat-menu-item","","color","primary",3,"click",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor",4,"ngIf"],["mat-menu-item","","color","primary",3,"matMenuTriggerFor"],["mat-menu-item","","color","primary",1,"menu-entry",3,"click"],[3,"src"],[3,"innerHTML"],[1,"skill-icon",3,"src"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return n.openCharacterSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,eo,8,6,"ng-template",3),e.TgZ(5,"mat-menu",4,5),e.YNc(7,to,3,2,"button",6),e.qZA(),e.TgZ(8,"mat-menu",4,7),e.YNc(10,no,3,2,"button",6),e.qZA()()),2&t){const a=e.MAs(3);e.Q6J("matMenuTriggerFor",a),e.xp6(2),e.Q6J("overlapTrigger",!0),e.xp6(5),e.Q6J("ngForOf",n.getTraits()),e.xp6(3),e.Q6J("ngForOf",n.getSkills())}},dependencies:[d.sg,d.O5,T.Hw,x.VK,x.OP,x.p6,x.KA],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#353535}.menu-entry[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:8px}"]}),i})();function ao(i,o){if(1&i&&(e.TgZ(0,"div",1)(1,"div",2),e._UZ(2,"div",3)(3,"div",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"div",9)(9,"div",10),e._UZ(10,"img",11),e.qZA()()()(),e.TgZ(11,"div",12)(12,"div",13)(13,"div",14),e._uU(14),e.qZA(),e._UZ(15,"div",15),e.qZA(),e.TgZ(16,"div",16)(17,"div",14),e._uU(18),e.qZA(),e._UZ(19,"div",15),e.qZA()()(),e.TgZ(20,"div",17),e._UZ(21,"img",11),e.qZA()()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("innerHTML",t.ultimatum.title,e.oJD),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.levelLabel,e.oJD),e.xp6(7),e.MGl("src","assets/img/icon/",t.ultimatum.icon,".png",e.LSH),e.xp6(4),e.Oqu(t.ultimatum.bonusTitle),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.bonusLabel,e.oJD),e.xp6(3),e.Oqu(t.ultimatum.malusTitle),e.xp6(1),e.Q6J("innerHTML",t.ultimatum.malusLabel,e.oJD),e.xp6(2),e.MGl("src","assets/img/icon/",t.ultimatum.levelIcon,".png",e.LSH)}}let ve=(()=>{class i{constructor(){this.ultimatum=null}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ultimatum-view"]],inputs:{ultimatum:"ultimatum"},decls:1,vars:1,consts:[["class","ultimatum slormancer-tooltip",4,"ngIf"],[1,"ultimatum","slormancer-tooltip"],[1,"head","inner-box"],[1,"title",3,"innerHTML"],[1,"level",3,"innerHTML"],[1,"content","inner-box"],[1,"data"],[1,"visual"],[1,"background"],[1,"inner-background"],[1,"ultimatum"],[3,"src"],[1,"info"],[1,"bonus"],[1,"title"],[3,"innerHTML"],[1,"malus"],[1,"bottom-level"]],template:function(t,n){1&t&&e.YNc(0,ao,22,8,"div",0),2&t&&e.Q6J("ngIf",null!==n.ultimatum)},dependencies:[d.O5],styles:[".ultimatum[_ngcontent-%COMP%]{width:350px}.ultimatum[_ngcontent-%COMP%]  .value, .ultimatum[_ngcontent-%COMP%]  .rank .current{color:#ce4607}.ultimatum[_ngcontent-%COMP%]  .range, .ultimatum[_ngcontent-%COMP%]  .range .value, .ultimatum[_ngcontent-%COMP%]  .details, .ultimatum[_ngcontent-%COMP%]  .details .value, .ultimatum[_ngcontent-%COMP%]  .formula, .ultimatum[_ngcontent-%COMP%]  .formula .value{color:#686868}.ultimatum[_ngcontent-%COMP%]  .affixes .range, .ultimatum[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]{text-align:center;text-transform:uppercase}.ultimatum[_ngcontent-%COMP%]   .head[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{font-size:80%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:20px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{width:0;height:0}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);width:72px;height:72px;image-rendering:pixelated}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.ultimatum[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:105%}"]}),i})();function oo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("submit",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.submit())}),e._UZ(1,"input",2),e.TgZ(2,"mat-dialog-content")(3,"div",3),e._UZ(4,"app-ultimatum-view",4),e.qZA(),e.TgZ(5,"div",5)(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),e._uU(9,"Ultimatum level"),e.qZA(),e._UZ(10,"input",8),e.TgZ(11,"mat-error"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",6),e._UZ(14,"app-search-select",9),e.qZA()()(),e.TgZ(15,"mat-dialog-actions")(16,"button",10),e._uU(17,"Cancel"),e.qZA(),e.TgZ(18,"button",11),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.reset())}),e._uU(19,"Reset"),e.qZA(),e.TgZ(20,"button",12),e._uU(21,"Apply"),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ultimatum",t.ultimatum),e.xp6(8),e.hij("Level must be between 1 and ",t.ULTIMATUM_MAX_LEVEL,""),e.xp6(2),e.Q6J("control",t.getTypeControl())("options",t.options)("noErrorPadding",!0)}}let ro=(()=>{class i{constructor(t,n,a,r){this.dialogRef=t,this.slormancerUltimatumService=n,this.formOptionsService=a,this.ULTIMATUM_MAX_LEVEL=l.cKY,this.options=[],this.originalUltimatum=null===r.ultimatum?this.slormancerUltimatumService.getUltimatum(l.RI7.AdamantAbundance,1):this.slormancerUltimatumService.getUltimatumClone(r.ultimatum),this.options=this.formOptionsService.getUltimatumOptions(),this.reset()}reset(){this.ultimatum=this.slormancerUltimatumService.getUltimatumClone(this.originalUltimatum),this.form=this.buildForm()}submit(){this.form.valid&&this.dialogRef.close(this.ultimatum)}updatePreview(t){if(t.valid){const n=t.value;this.ultimatum=this.slormancerUltimatumService.getUltimatum(n.type,n.level)}}getTypeControl(){return this.form.get("type")}buildForm(){const t=new s.cw({level:new s.NI(this.ultimatum.level,[s.kI.required,s.kI.min(1),s.kI.max(l.cKY)]),type:new s.NI(this.ultimatum.type,[s.kI.required])});return t.valueChanges.subscribe(()=>{this.updatePreview(t)}),this.updatePreview(t),t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(l.hrN),e.Y36(L),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ultimatum-edit-modal"]],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","submit",4,"ngIf"],["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"preview"],[3,"ultimatum"],[1,"form"],[1,"stat-line"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","level"],["label","Ultimatum type",3,"control","options","noErrorPadding"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&e.YNc(0,oo,22,6,"form",0),2&t&&e.Q6J("ngIf",null!==n.form&&null!==n.ultimatum)},dependencies:[d.O5,b.lW,p.ZT,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,ve,D],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{max-width:350px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{display:none;visibility:hidden}}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1;width:240px}"]}),i})();function lo(i,o){1&i&&e._UZ(0,"img",8)}function co(i,o){if(1&i&&e._UZ(0,"app-ultimatum-view",10),2&i){const t=e.oxw(3);e.Q6J("ultimatum",t.ultimatum)}}function so(i,o){if(1&i&&e.YNc(0,co,1,1,"ng-template",9),2&i){e.oxw(2);const t=e.MAs(1);e.Q6J("cdkConnectedOverlayOpen",!0)("cdkConnectedOverlayOrigin",t)}}function mo(i,o){if(1&i&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.YNc(2,lo,1,0,"img",6),e.YNc(3,so,1,2,null,7),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.ekj("disabled",t.ultimatum.locked),e.MGl("src","assets/img/icon/",t.ultimatum.icon,".png",e.LSH),e.xp6(1),e.Q6J("ngIf",t.ultimatum.locked),e.xp6(1),e.Q6J("ngIf",t.overlay&&t.showOverlay)}}let uo=(()=>{class i extends O.B{constructor(t,n,a){super(),this.dialog=t,this.itemMoveService=n,this.searchService=a,this.ultimatum=null,this.overlay=!0,this.readonly=!1,this.changed=new e.vpe,this.showOverlay=!1,this.hiddenBySearch=!1,this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(()=>this.updateSearch())}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}onMouseContextMenu(){return this.readonly||this.itemMoveService.releaseHoldItem(),!1}ngOnChanges(){this.updateSearch()}updateSearch(){this.hiddenBySearch=null!==this.ultimatum&&this.searchService.hasSearch()&&!this.searchService.ultimatumMatchSearch(this.ultimatum)}edit(){this.readonly||this.dialog.open(ro,{data:{ultimatum:this.ultimatum}}).afterClosed().subscribe(n=>{n&&this.changed.emit(n)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.uw),e.Y36(N),e.Y36(q.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-ultimatum-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})("contextmenu",function(){return n.onMouseContextMenu()})},inputs:{ultimatum:"ultimatum",overlay:"overlay",readonly:"readonly"},outputs:{changed:"changed"},features:[e.qOj,e.TTD],decls:4,vars:5,consts:[["cdkOverlayOrigin","",1,"background",3,"click"],["trigger","cdkOverlayOrigin"],[1,"inner-background"],["class","ultimatum",4,"ngIf"],[1,"ultimatum"],[1,"icon",3,"src"],["class","locked","src","assets/img/icon/locked.png",4,"ngIf"],[4,"ngIf"],["src","assets/img/icon/locked.png",1,"locked"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"ultimatum"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0,1),e.NdJ("click",function(){return!n.readonly&&n.edit()}),e.TgZ(2,"div",2),e.YNc(3,mo,4,5,"div",3),e.qZA()()),2&t&&(e.ekj("readonly",n.readonly)("hidden-search",n.hiddenBySearch),e.xp6(3),e.Q6J("ngIf",null!==n.ultimatum))},dependencies:[d.O5,P.pI,P.xu,ve],styles:[".background[_ngcontent-%COMP%]{border:3px solid black;background-color:#3c3c3c;border-radius:10%;padding:3px;width:60px;height:70px}.background[_ngcontent-%COMP%]:not(.readonly){cursor:pointer}.background.hidden-search[_ngcontent-%COMP%]{opacity:.2}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;border:3px solid black;background-color:#471712;border-radius:10%;width:100%;height:100%}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]{position:relative;width:0;height:0}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(-50%,-50%);image-rendering:pixelated;position:absolute}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked){width:72px;height:72px}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:not(.locked).disabled{opacity:.5}.background[_ngcontent-%COMP%]   .inner-background[_ngcontent-%COMP%]   .ultimatum[_ngcontent-%COMP%]   img.locked[_ngcontent-%COMP%]{position:absolute;width:60px;height:60px}"]}),i})();function po(i,o){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.TgZ(2,"mat-icon",27),e._uU(3,"info_outline"),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.character.importVersion," ")}}function go(i,o){if(1&i&&(e.TgZ(0,"div",28)(1,"mat-icon",29),e._uU(2,"info_outline"),e.qZA()()),2&i){const t=o.$implicit;e.xp6(1),e.s9C("matTooltip",t)}}function _o(i,o){1&i&&e._UZ(0,"app-character-settings-menu")}function fo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"app-item-slot",3),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Helm,a))}),e.qZA(),e.TgZ(3,"app-item-slot",4),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Amulet,a))}),e.qZA()(),e.TgZ(4,"div",5)(5,"div",6)(6,"app-item-slot",7),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Shoulder,a))}),e.qZA(),e.TgZ(7,"app-item-slot",8),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Bracer,a))}),e.qZA(),e.TgZ(8,"app-item-slot",9),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Glove,a))}),e.qZA()(),e.TgZ(9,"div",10)(10,"div",11),e.YNc(11,po,4,1,"div",12),e.YNc(12,go,3,1,"div",13),e.YNc(13,_o,1,0,"app-character-settings-menu",14),e.qZA(),e._UZ(14,"app-character-animation",15),e.qZA(),e.TgZ(15,"div",16)(16,"app-item-slot",17),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Body,a))}),e.qZA(),e.TgZ(17,"app-item-slot",18),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Cape,a))}),e.qZA(),e.TgZ(18,"app-item-slot",19),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Belt,a))}),e.qZA()()(),e.TgZ(19,"div",20),e._UZ(20,"div",21),e.TgZ(21,"app-item-slot",22),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.LeftRing,a))}),e.qZA(),e.TgZ(22,"app-item-slot",23),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.Boot,a))}),e.qZA(),e.TgZ(23,"app-item-slot",24),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateItem(r.gearSlot.RightRing,a))}),e.qZA(),e.TgZ(24,"app-ultimatum-slot",25),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateUltimatum(a))}),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Helm)("item",t.character.gear[t.gearSlot.Helm])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Amulet)("item",t.character.gear[t.gearSlot.Amulet])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Shoulder)("item",t.character.gear[t.gearSlot.Shoulder])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Bracer)("item",t.character.gear[t.gearSlot.Bracer])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Glove)("item",t.character.gear[t.gearSlot.Glove])("character",t.character),e.xp6(3),e.Q6J("ngIf",null!==t.character.importVersion&&t.character.version!==t.character.importVersion),e.xp6(1),e.Q6J("ngForOf",t.character.issues),e.xp6(1),e.Q6J("ngIf",!t.readonly),e.xp6(1),e.Q6J("heroClass",t.character.heroClass),e.xp6(2),e.Q6J("readonly",t.readonly)("base",t.bases.Body)("item",t.character.gear[t.gearSlot.Body])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Cape)("item",t.character.gear[t.gearSlot.Cape])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Belt)("item",t.character.gear[t.gearSlot.Belt])("character",t.character),e.xp6(3),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.LeftRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Boot)("item",t.character.gear[t.gearSlot.Boot])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("base",t.bases.Ring)("item",t.character.gear[t.gearSlot.RightRing])("character",t.character),e.xp6(1),e.Q6J("readonly",t.readonly)("ultimatum",t.character.ultimatum)}}let Me=(()=>{class i{constructor(){this.gearSlot=l.SHB,this.bases=l.JNB,this.character=null,this.readonly=!1,this.changed=new e.vpe}updateItem(t,n){null!==this.character&&(this.character.gear[t]=n,this.changed.emit(this.character))}updateUltimatum(t){null!==this.character&&(this.character.ultimatum=t,this.changed.emit(this.character))}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-character-equipment"]],inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["class","equipment",4,"ngIf"],[1,"equipment"],[1,"top-equipment"],[1,"helm",3,"readonly","base","item","character","changed"],[1,"amulet",3,"readonly","base","item","character","changed"],[1,"center-equipment"],[1,"left-equipment"],[1,"shoulder",3,"readonly","base","item","character","changed"],[1,"bracer",3,"readonly","base","item","character","changed"],[1,"glove",3,"readonly","base","item","character","changed"],[1,"character-preview"],[1,"preview-header"],["class","original-version",4,"ngIf"],["class","issue",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"heroClass"],[1,"right-equipment"],[1,"body",3,"readonly","base","item","character","changed"],[1,"cape",3,"readonly","base","item","character","changed"],[1,"belt",3,"readonly","base","item","character","changed"],[1,"bottom-equipment"],[1,"empty"],[1,"ring_l",3,"readonly","base","item","character","changed"],[1,"boot",3,"readonly","base","item","character","changed"],[1,"ring_r",3,"readonly","base","item","character","changed"],[3,"readonly","ultimatum","changed"],[1,"original-version"],["matTooltip","This build has been made for an older version of the game"],[1,"issue"],[3,"matTooltip"]],template:function(t,n){1&t&&e.YNc(0,fo,25,50,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,T.Hw,E.gM,pe,Ba,io,uo],styles:[".equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;justify-content:space-between;min-height:380px}.equipment[_ngcontent-%COMP%]   .top-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:20px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .left-equipment[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .right-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;flex-grow:1}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]{width:150px;height:200px;border:3px solid rgb(60,60,60);padding:8px;background-color:#000;display:flex;flex-direction:column;align-items:center;justify-content:space-between}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;justify-content:space-between;gap:4px;width:100%}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .issue[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:top;gap:4px;color:#ce4607}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .original-version[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   .issue[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:14px;width:14px;font-size:14px;line-height:14px}.equipment[_ngcontent-%COMP%]   .center-equipment[_ngcontent-%COMP%]   .character-preview[_ngcontent-%COMP%]   .preview-header[_ngcontent-%COMP%]   app-character-settings-menu[_ngcontent-%COMP%]{margin-left:auto}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:16px;flex-grow:1;overflow:hidden}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_l[_ngcontent-%COMP%], .equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .ring_r[_ngcontent-%COMP%]{margin-bottom:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .boot[_ngcontent-%COMP%]{margin-top:20px}.equipment[_ngcontent-%COMP%]   .bottom-equipment[_ngcontent-%COMP%]   .empty[_ngcontent-%COMP%]{width:56px}"]}),i})();var be=h(4890);let ho=(()=>{class i{constructor(t,n,a,r,c){this.dialogRef=t,this.slormancerRuneService=n,this.slormancerCharacterUpdaterService=a,this.buildStorageService=r,this.MAX_REAPER_AFFINITY_BASE=l.DxO,this.form=new s.cw({activationId:new s.NI(null),activationLevel:new s.NI(1,[s.kI.required,s.kI.min(1),s.kI.max(15)]),effectId:new s.NI(null),effectLevel:new s.NI(1,[s.kI.required,s.kI.min(1),s.kI.max(15)]),enhancementId:new s.NI(null),enhancementLevel:new s.NI(1,[s.kI.required,s.kI.min(1),s.kI.max(15)])}),this.originalRunes=this.slormancerRuneService.getRunesCombinationClone(c.character.runes),this.character=c.character,this.runes=this.slormancerRuneService.getRunes(this.character.heroClass,1,this.character.reaper.id),this.form.valueChanges.subscribe(()=>{this.updatePreview()}),this.reset()}reset(){this.character.runes=Object.assign({},this.originalRunes),this.form.reset({activationId:null===this.character.runes.activation?null:this.character.runes.activation.id,activationLevel:null===this.character.runes.activation?1:this.character.runes.activation.level,effectId:null===this.character.runes.effect?null:this.character.runes.effect.id,effectLevel:null===this.character.runes.effect?1:this.character.runes.effect.level,enhancementId:null===this.character.runes.enhancement?null:this.character.runes.enhancement.id,enhancementLevel:null===this.character.runes.enhancement?1:this.character.runes.enhancement.level})}submit(){this.form.valid&&this.dialogRef.close(this.character.runes)}getRune(t){return(0,l.lA$)(this.runes[t])}isSelected(t){const n=this.form.value;return n.activationId===t||n.effectId===t||n.enhancementId===t}selectRune(t){null!==t&&(t.type===l.evb.Activation?this.form.patchValue({activationId:this.form.value.activationId===t.id?null:t.id}):t.type===l.evb.Effect?this.form.patchValue({effectId:this.form.value.effectId===t.id?null:t.id}):t.type===l.evb.Enhancement&&this.form.patchValue({enhancementId:this.form.value.enhancementId===t.id?null:t.id}))}updatePreview(){if(this.form.valid){const t=this.form.value;this.character.runes={activation:null,effect:null,enhancement:null},this.character.runes.activation=null!==t.activationId?this.slormancerRuneService.getRuneById(t.activationId,this.character.heroClass,t.activationLevel,this.character.reaper.id):null,this.character.runes.effect=null!==t.effectId?this.slormancerRuneService.getRuneById(t.effectId,this.character.heroClass,t.effectLevel,this.character.reaper.id):null,this.character.runes.enhancement=null!==t.enhancementId?this.slormancerRuneService.getRuneById(t.enhancementId,this.character.heroClass,t.enhancementLevel,this.character.reaper.id):null;for(const a of this.runes)a.type===l.evb.Activation&&(a.level=t.activationLevel),a.type===l.evb.Effect&&(a.level=t.effectLevel),a.type===l.evb.Enhancement&&(a.level=t.enhancementLevel),this.slormancerRuneService.updateRuneModel(a,this.character.reaper.id);const n=this.buildStorageService.getBuild();this.slormancerRuneService.updateRunesModel(this.character.runes,this.character.reaper.id),this.slormancerCharacterUpdaterService.updateCharacter(this.character,null!==n?n.configuration:l.g5j,!1,null,this.runes),this.slormancerRuneService.updateRunesView(this.character.runes);for(const a of this.runes)this.slormancerRuneService.updateRuneView(a)}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.so),e.Y36(l._VP),e.Y36(l.Pdp),e.Y36(C),e.Y36(p.WI))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-runes-edit-modal"]],decls:73,vars:60,consts:[["autocomplete","off",3,"formGroup","submit"],["autocomplete","false","name","hidden","type","text",2,"display","none"],[1,"runes"],[1,"rune-line"],[3,"rune","selected","click"],[1,"separator"],[1,"form"],[1,"stat-line"],[3,"rune"],["appearance","outline"],["matInput","","type","number","step","1","formControlName","activationLevel"],["matInput","","type","number","step","1","formControlName","effectLevel"],["matInput","","type","number","step","1","formControlName","enhancementLevel"],["mat-flat-button","","type","button","color","primary",3,"mat-dialog-close"],["mat-flat-button","","type","button","color","primary",3,"click"],["mat-flat-button","","type","submit","color","primary"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("submit",function(){return n.submit()}),e._UZ(1,"input",1),e.TgZ(2,"mat-dialog-content")(3,"div",2)(4,"div",3)(5,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(0))}),e.qZA(),e.TgZ(6,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(1))}),e.qZA(),e.TgZ(7,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(2))}),e.qZA()(),e.TgZ(8,"div",3)(9,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(3))}),e.qZA(),e.TgZ(10,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(4))}),e.qZA(),e.TgZ(11,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(5))}),e.qZA(),e.TgZ(12,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(6))}),e.qZA()(),e._UZ(13,"div",5),e.TgZ(14,"div",3)(15,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(7))}),e.qZA(),e.TgZ(16,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(8))}),e.qZA(),e.TgZ(17,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(9))}),e.qZA(),e.TgZ(18,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(10))}),e.qZA(),e.TgZ(19,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(11))}),e.qZA()(),e.TgZ(20,"div",3)(21,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(12))}),e.qZA(),e.TgZ(22,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(13))}),e.qZA(),e.TgZ(23,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(14))}),e.qZA(),e.TgZ(24,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(15))}),e.qZA()(),e.TgZ(25,"div",3)(26,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(16))}),e.qZA(),e.TgZ(27,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(17))}),e.qZA(),e.TgZ(28,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(18))}),e.qZA(),e.TgZ(29,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(19))}),e.qZA(),e.TgZ(30,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(20))}),e.qZA()(),e._UZ(31,"div",5),e.TgZ(32,"div",3)(33,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(21))}),e.qZA(),e.TgZ(34,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(22))}),e.qZA(),e.TgZ(35,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(23))}),e.qZA(),e.TgZ(36,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(24))}),e.qZA()(),e.TgZ(37,"div",3)(38,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(25))}),e.qZA(),e.TgZ(39,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(26))}),e.qZA(),e.TgZ(40,"app-rune-slot",4),e.NdJ("click",function(){return n.selectRune(n.getRune(27))}),e.qZA()()(),e.TgZ(41,"div",6)(42,"div",7),e._UZ(43,"app-rune-slot",8),e.TgZ(44,"mat-form-field",9)(45,"mat-label"),e._uU(46,"Activation rune level"),e.qZA(),e._UZ(47,"input",10),e.TgZ(48,"mat-error"),e._uU(49,"Rune level must be between 1 and 15"),e.qZA()()(),e.TgZ(50,"div",7),e._UZ(51,"app-rune-slot",8),e.TgZ(52,"mat-form-field",9)(53,"mat-label"),e._uU(54,"Effect rune level"),e.qZA(),e._UZ(55,"input",11),e.TgZ(56,"mat-error"),e._uU(57,"Rune level must be between 1 and 15"),e.qZA()()(),e.TgZ(58,"div",7),e._UZ(59,"app-rune-slot",8),e.TgZ(60,"mat-form-field",9)(61,"mat-label"),e._uU(62,"Enhancement rune level"),e.qZA(),e._UZ(63,"input",12),e.TgZ(64,"mat-error"),e._uU(65,"Rune level must be between 1 and 15"),e.qZA()()()()(),e.TgZ(66,"mat-dialog-actions")(67,"button",13),e._uU(68,"Cancel"),e.qZA(),e.TgZ(69,"button",14),e.NdJ("click",function(){return n.reset()}),e._uU(70,"Reset"),e.qZA(),e.TgZ(71,"button",15),e._uU(72,"Apply"),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("rune",n.getRune(0))("selected",n.isSelected(0)),e.xp6(1),e.Q6J("rune",n.getRune(1))("selected",n.isSelected(1)),e.xp6(1),e.Q6J("rune",n.getRune(2))("selected",n.isSelected(2)),e.xp6(2),e.Q6J("rune",n.getRune(3))("selected",n.isSelected(3)),e.xp6(1),e.Q6J("rune",n.getRune(4))("selected",n.isSelected(4)),e.xp6(1),e.Q6J("rune",n.getRune(5))("selected",n.isSelected(5)),e.xp6(1),e.Q6J("rune",n.getRune(6))("selected",n.isSelected(6)),e.xp6(3),e.Q6J("rune",n.getRune(7))("selected",n.isSelected(7)),e.xp6(1),e.Q6J("rune",n.getRune(8))("selected",n.isSelected(8)),e.xp6(1),e.Q6J("rune",n.getRune(9))("selected",n.isSelected(9)),e.xp6(1),e.Q6J("rune",n.getRune(10))("selected",n.isSelected(10)),e.xp6(1),e.Q6J("rune",n.getRune(11))("selected",n.isSelected(11)),e.xp6(2),e.Q6J("rune",n.getRune(12))("selected",n.isSelected(12)),e.xp6(1),e.Q6J("rune",n.getRune(13))("selected",n.isSelected(13)),e.xp6(1),e.Q6J("rune",n.getRune(14))("selected",n.isSelected(14)),e.xp6(1),e.Q6J("rune",n.getRune(15))("selected",n.isSelected(15)),e.xp6(2),e.Q6J("rune",n.getRune(16))("selected",n.isSelected(16)),e.xp6(1),e.Q6J("rune",n.getRune(17))("selected",n.isSelected(17)),e.xp6(1),e.Q6J("rune",n.getRune(18))("selected",n.isSelected(18)),e.xp6(1),e.Q6J("rune",n.getRune(19))("selected",n.isSelected(19)),e.xp6(1),e.Q6J("rune",n.getRune(20))("selected",n.isSelected(20)),e.xp6(3),e.Q6J("rune",n.getRune(21))("selected",n.isSelected(21)),e.xp6(1),e.Q6J("rune",n.getRune(22))("selected",n.isSelected(22)),e.xp6(1),e.Q6J("rune",n.getRune(23))("selected",n.isSelected(23)),e.xp6(1),e.Q6J("rune",n.getRune(24))("selected",n.isSelected(24)),e.xp6(2),e.Q6J("rune",n.getRune(25))("selected",n.isSelected(25)),e.xp6(1),e.Q6J("rune",n.getRune(26))("selected",n.isSelected(26)),e.xp6(1),e.Q6J("rune",n.getRune(27))("selected",n.isSelected(27)),e.xp6(3),e.Q6J("rune",n.character.runes.activation),e.xp6(8),e.Q6J("rune",n.character.runes.effect),e.xp6(8),e.Q6J("rune",n.character.runes.enhancement))},dependencies:[b.lW,p.ZT,p.xY,p.H8,_.TO,_.KE,_.hX,A.Nt,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u,be.G],styles:["mat-dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:40px;flex-grow:1}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{flex-direction:column}}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]   .rune-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:8px}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]   .rune-line[_ngcontent-%COMP%]   app-rune-slot[_ngcontent-%COMP%]{cursor:pointer}mat-dialog-content[_ngcontent-%COMP%]   .runes[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{background-color:#686868;margin:12px 30px;height:4px}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{padding:8px 0;display:flex;flex-direction:column;align-items:stretch;flex-grow:1}mat-dialog-content[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .stat-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:12px}"]}),i})();function Co(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.edit())}),e._UZ(1,"app-rune-slot",2)(2,"app-rune-slot",2)(3,"app-rune-slot",2),e.qZA()}if(2&i){const t=e.oxw();e.ekj("readonly",t.readonly),e.xp6(1),e.Q6J("showLevel",!1)("rune",t.character.runes.activation),e.xp6(1),e.Q6J("showLevel",!1)("rune",t.character.runes.effect),e.xp6(1),e.Q6J("showLevel",!1)("rune",t.character.runes.enhancement)}}let Oe=(()=>{class i{constructor(t,n){this.dialog=t,this.slormancerCharacterBuilderService=n,this.character=null,this.readonly=!1,this.changed=new e.vpe}edit(){if(null!==this.character&&!this.readonly){const n={character:this.slormancerCharacterBuilderService.getCharacterClone(this.character)};this.dialog.open(ho,{data:n}).afterClosed().subscribe(a=>{a&&this.changed.emit(a)})}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(p.uw),e.Y36(l.oYj))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-runes-slot"]],inputs:{character:"character",readonly:"readonly"},outputs:{changed:"changed"},decls:1,vars:1,consts:[["class","runes",3,"readonly","click",4,"ngIf"],[1,"runes",3,"click"],[3,"showLevel","rune"]],template:function(t,n){1&t&&e.YNc(0,Co,4,8,"div",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.O5,be.G],styles:[".runes[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;gap:16px}.runes[_ngcontent-%COMP%]::not(.readonly){cursor:pointer}"]}),i})();function vo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.dragInItemsGroup(a.character.inventory))})("mouseleave",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.dragOutItemsGroup())})("mouseup",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.dragDrop(a.character.inventory))}),e._uU(1,"Bag"),e.qZA()}if(2&i){const t=e.oxw(2);e.ekj("drag-on",t.isDragging&&t.itemGroupBeingDraggedOn===t.character.inventory)("drag-possible",t.itemGroupDragDropPossible)("drag-impossible",!t.itemGroupDragDropPossible)}}function Mo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(a){const c=e.CHM(t).index,m=e.oxw(2);return e.KtG(m.updateIventoryItem(c,a))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("item",t)("character",n.character)}}function bo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",11),e.NdJ("mouseenter",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dragInItemsGroup(a))})("mouseleave",function(){e.CHM(t);const a=e.oxw(3);return e.KtG(a.dragOutItemsGroup())})("mouseup",function(){e.CHM(t);const a=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dragDrop(a))}),e._uU(1),e.qZA()}if(2&i){const t=e.oxw(),n=t.$implicit,a=t.index,r=e.oxw(2);e.ekj("drag-on",r.isDragging&&r.itemGroupBeingDraggedOn===n)("drag-possible",r.itemGroupDragDropPossible)("drag-impossible",!r.itemGroupDragDropPossible),e.xp6(1),e.hij("Stash ",a+1,"")}}function Oo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-item-slot",12),e.NdJ("changed",function(a){const c=e.CHM(t).index,m=e.oxw().index,u=e.oxw(2);return e.KtG(u.updateSharedInventoryItem(m,c,a))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(3);e.Q6J("item",t)("character",n.character)}}function xo(i,o){if(1&i&&(e.TgZ(0,"mat-tab"),e.YNc(1,bo,2,7,"ng-template",7),e.TgZ(2,"div",13),e.YNc(3,Oo,1,2,"app-item-slot",9),e.qZA()()),2&i){const t=o.$implicit;e.xp6(3),e.Q6J("ngForOf",t)}}function yo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-content")(5,"app-character-equipment",2),e.NdJ("changed",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.gearChanged())}),e.qZA(),e.TgZ(6,"div",3)(7,"app-reaper-slot",2),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateReaper(a))}),e.qZA(),e.TgZ(8,"app-runes-slot",2),e.NdJ("changed",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.updateRunes(a))}),e.qZA()(),e.TgZ(9,"div",4),e._UZ(10,"app-skill-bar"),e.qZA()()(),e.TgZ(11,"mat-card",5)(12,"mat-card-content")(13,"mat-tab-group",6)(14,"mat-tab"),e.YNc(15,vo,2,6,"ng-template",7),e.TgZ(16,"div",8),e.YNc(17,Mo,1,2,"app-item-slot",9),e.qZA()(),e.YNc(18,xo,4,1,"mat-tab",10),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Oqu(t.character.fullName),e.xp6(2),e.Q6J("character",t.character),e.xp6(2),e.Q6J("character",t.character),e.xp6(1),e.Q6J("character",t.character),e.xp6(9),e.Q6J("ngForOf",t.character.inventory),e.xp6(1),e.Q6J("ngForOf",t.character.sharedInventory)}}let Po=(()=>{class i extends O.B{constructor(t,n,a){super(),this.buildStorageService=t,this.slormancerRuneService=n,this.itemMoveService=a,this.character=null,this.isDragging=!1,this.itemGroupBeingDraggedOn=null,this.itemGroupDragDropPossible=!1,this.itemMoveService.draggingItem.pipe((0,M.R)(this.unsubscribe)).subscribe(r=>this.isDragging=r)}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.character=null===t?null:t.character)}dragInItemsGroup(t){this.isDragging&&(this.itemGroupDragDropPossible=void 0!==t.find(n=>null===n),this.itemGroupBeingDraggedOn=t)}dragOutItemsGroup(){this.itemGroupBeingDraggedOn=null}dragDrop(t){this.itemMoveService.moveDraggedItemToItemGroup(t)}gearChanged(){this.buildStorageService.saveLayer()}updateReaper(t){null!==this.character&&(this.character.reaper=t,null!==this.character.runes.effect&&(this.slormancerRuneService.updateRuneModel(this.character.runes.effect,t.id),this.slormancerRuneService.updateRuneView(this.character.runes.effect)),this.buildStorageService.saveLayer())}updateRunes(t){null!==this.character&&(this.character.runes=t,this.buildStorageService.saveLayer())}updateIventoryItem(t,n){null!==this.character&&(this.character.inventory[t]=n,this.buildStorageService.saveLayer())}updateSharedInventoryItem(t,n,a){if(null!==this.character){const r=this.character.sharedInventory[t];r&&(r[n]=a,this.buildStorageService.saveBuild())}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l._VP),e.Y36(N))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-inventory"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"gear"],[3,"character","changed"],[1,"weapon"],[1,"skills"],[1,"inventory"],["animationDuration","0ms","color","primary","direction","vertical"],["mat-tab-label",""],[1,"items","bag"],[3,"item","character","changed",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"items-group-label",3,"mouseenter","mouseleave","mouseup"],[3,"item","character","changed"],[1,"items","stash"]],template:function(t,n){1&t&&e.YNc(0,yo,19,6,"main",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,B.SP,B.uD,B.uX,y.a8,y.dn,pe,_e,Ua,Me,Oe],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{min-width:450px;max-width:450px;width:450px;height:760px;flex-grow:1;overflow:hidden}@media (max-width: 768px){main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:16px;margin:4px 20px 20px;padding:12px;background-color:#161412;border:3px solid rgb(60,60,60)}main[_ngcontent-%COMP%]   .gear[_ngcontent-%COMP%]   .skills[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]{flex-grow:1;max-height:760px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   mat-tab-group[_ngcontent-%COMP%]{height:100%}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;flex-grow:1;border:3px solid transparent}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-possible[_ngcontent-%COMP%]{border-color:#b7ffd2}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items-group-label.drag-on.drag-impossible[_ngcontent-%COMP%]{border-color:#f44336}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{margin-left:8px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.bag[_ngcontent-%COMP%]{max-width:512px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items.stash[_ngcontent-%COMP%]{max-width:320px}main[_ngcontent-%COMP%]   .inventory[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]   app-item-slot[_ngcontent-%COMP%]{display:block;float:left;margin:2px}"]}),i})();function So(i,o){if(1&i&&e._UZ(0,"div",18),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.upgrade.genresLabel,e.oJD)}}function ko(i,o){if(1&i&&e._UZ(0,"div",19),2&i){const t=e.oxw(2);e.Q6J("innerHTML",t.upgrade.costLabel,e.oJD)}}function To(i,o){if(1&i&&(e.TgZ(0,"div")(1,"div",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e._UZ(7,"div",6)(8,"img",7),e.qZA()(),e.TgZ(9,"div",8)(10,"div",9),e._uU(11),e.qZA(),e.TgZ(12,"div",10),e._uU(13),e.qZA(),e.YNc(14,So,1,1,"div",11),e.TgZ(15,"div",12),e._uU(16),e.TgZ(17,"span",13),e._uU(18),e.qZA(),e._uU(19),e.qZA(),e.YNc(20,ko,1,1,"div",14),e.qZA()(),e._UZ(21,"div",15)(22,"div",16)(23,"app-mechanics-view",17),e.qZA()()),2&i){const t=e.oxw();e.Gre("skill slormancer-tooltip ",t.upgrade.damageTypes.length>0?t.upgrade.damageTypes[0]:"",""),e.xp6(2),e.AsE("",t.getTypeLabel(t.upgrade.type),": ",t.upgrade.name,""),e.xp6(6),e.Q6J("src",t.upgrade.icon,e.LSH),e.xp6(3),e.AsE("",t.MASTERY_LABEL," ",t.upgrade.masteryRequired,""),e.xp6(2),e.Oqu(t.getTypeLabel(t.upgrade.type)),e.xp6(1),e.Q6J("ngIf",null!==t.upgrade.genresLabel),e.xp6(2),e.hij("",t.RANK_LABEL,": "),e.xp6(2),e.Oqu(t.upgrade.rank),e.xp6(1),e.hij("/",t.upgrade.maxRank,""),e.xp6(1),e.Q6J("ngIf",null!==t.upgrade.costLabel),e.xp6(2),e.Q6J("innerHTML",t.upgrade.description,e.oJD),e.xp6(1),e.Q6J("classMechanics",t.upgrade.relatedClassMechanics)("mechanics",t.upgrade.relatedMechanics)("buffs",t.upgrade.relatedBuffs)}}let xe=(()=>{class i{constructor(t){this.slormancerTranslateService=t,this.RANK_LABEL=this.slormancerTranslateService.translate("tt_rank"),this.MASTERY_LABEL=this.slormancerTranslateService.translate("tt_mastery"),this.upgrade=null,this.mouseOverElement=null}getTypeLabel(t){return this.slormancerTranslateService.translate("tt_"+t)}showMechanicOverlay(t){this.mouseOverElement=t}hideMechanicOverlay(){this.mouseOverElement=null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.n6D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skill-upgrade-view"]],inputs:{upgrade:"upgrade"},decls:1,vars:1,consts:[[3,"class",4,"ngIf"],[1,"head","inner-box"],[1,"content","inner-box"],[1,"info"],[1,"visual"],[1,"icon"],[1,"icon-border"],[3,"src"],[1,"data"],[1,"mastery"],[1,"type"],["class","genre",3,"innerHTML",4,"ngIf"],[1,"rank"],[1,"current"],["class","cost",3,"innerHTML",4,"ngIf"],[1,"separator"],[1,"description",3,"innerHTML"],[3,"classMechanics","mechanics","buffs"],[1,"genre",3,"innerHTML"],[1,"cost",3,"innerHTML"]],template:function(t,n){1&t&&e.YNc(0,To,24,18,"div",0),2&t&&e.Q6J("ngIf",null!==n.upgrade)},dependencies:[d.O5,ce],styles:[".skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#fff;max-width:400px}.skill[_ngcontent-%COMP%]   .inner-box[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]:before{border-color:primary-color(400)}.skill[_ngcontent-%COMP%]  .value, .skill[_ngcontent-%COMP%]  .rank .current, .skill[_ngcontent-%COMP%]  .head{color:#ce4607}.skill[_ngcontent-%COMP%]  .mag .value{color:#bb1fe2}.skill[_ngcontent-%COMP%]  .range, .skill[_ngcontent-%COMP%]  .range .value, .skill[_ngcontent-%COMP%]  .details, .skill[_ngcontent-%COMP%]  .details .value, .skill[_ngcontent-%COMP%]  .formula, .skill[_ngcontent-%COMP%]  .formula .value{color:#686868}.skill[_ngcontent-%COMP%]  .affixes .range, .skill[_ngcontent-%COMP%]  .affixes .value{word-break:keep-all;white-space:nowrap}.skill[_ngcontent-%COMP%]  .life{color:#257539}.skill[_ngcontent-%COMP%]  .value.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value, .skill.mag[_ngcontent-%COMP%]  .rank .current, .skill.mag[_ngcontent-%COMP%]  .head{color:#bb1fe2}.skill.mag[_ngcontent-%COMP%]  .value.mana, .skill.mag[_ngcontent-%COMP%]  .rank .current.mana, .skill.mag[_ngcontent-%COMP%]  .head.mana{color:#3397dd}.skill.mag[_ngcontent-%COMP%]  .value.life, .skill.mag[_ngcontent-%COMP%]  .rank .current.life, .skill.mag[_ngcontent-%COMP%]  .head.life{color:#257539}.skill[_ngcontent-%COMP%]   .head.head[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.head[_ngcontent-%COMP%]{text-align:center;padding:10px 50px;text-transform:uppercase;font-size:17px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column;gap:20px;padding:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:10px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]{display:flex;align-items:center}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{border:3px solid rgb(190,135,31);min-width:60px;min-height:60px;width:60px;height:60px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .visual[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black;image-rendering:pixelated;width:54px;height:54px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-transform:uppercase;height:100%;flex-grow:1;padding:5px 0;gap:5px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]   .data[_ngcontent-%COMP%]   .genre[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{height:5px;background-color:#3c3931;margin:0 45px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#3155bc}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]{display:flex;flex-direction:row}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]{min-width:8px;padding-right:8px}.skill[_ngcontent-%COMP%]   .head.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .content.content[_ngcontent-%COMP%]   .next-rank[_ngcontent-%COMP%]   .rank-value[_ngcontent-%COMP%]   .bullet[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:inline-block;background-color:#ce4607;height:6px;width:6px;border:1px solid black;border-radius:6px;margin:auto}"]}),i})();function wo(i,o){if(1&i&&e._UZ(0,"app-skill-upgrade-view",8),2&i){const t=e.oxw(3);e.Q6J("upgrade",t.upgrade)}}function Ao(i,o){if(1&i&&e.YNc(0,wo,1,1,"ng-template",7),2&i){e.oxw();const t=e.MAs(1),n=e.oxw();e.Q6J("cdkConnectedOverlayOpen",n.showOverlay)("cdkConnectedOverlayOrigin",t)}}function Zo(i,o){if(1&i&&(e.TgZ(0,"div",1,2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5),e._uU(5),e.qZA(),e.YNc(6,Ao,1,2,null,6),e.qZA()),2&i){const t=e.oxw();e.ekj("hidden-search",t.hiddenBySearch)("passive",t.isPassive(t.upgrade))("readonly",t.readonly),e.xp6(2),e.ekj("equipped",t.equipped),e.xp6(1),e.Q6J("src",t.upgrade.icon,e.LSH),e.xp6(1),e.ekj("max",t.upgrade.rank===t.upgrade.maxRank),e.xp6(1),e.Oqu(t.upgrade.rank===t.upgrade.maxRank?"Max":t.upgrade.rank),e.xp6(1),e.Q6J("ngIf",t.showOverlay&&t.overlay)}}let ye=(()=>{class i extends O.B{constructor(t){super(),this.searchService=t,this.upgrade=null,this.selected=!1,this.equipped=!1,this.overlay=!1,this.readonly=!1,this.hiddenBySearch=!1,this.showOverlay=!1}onOver(){this.showOverlay=!0}onLeave(){this.showOverlay=!1}ngOnInit(){this.searchService.searchChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>this.hiddenBySearch=null!==t&&null!==this.upgrade&&!this.searchService.upgradeMatchSearch(this.upgrade))}isPassive(t){return t.type===l.Wak.Passive}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.o))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-upgrade-slot"]],hostBindings:function(t,n){1&t&&e.NdJ("mouseenter",function(){return n.onOver()})("mouseleave",function(){return n.onLeave()})},inputs:{upgrade:"upgrade",selected:"selected",equipped:"equipped",overlay:"overlay",readonly:"readonly"},features:[e.qOj],decls:1,vars:1,consts:[["class","upgrade","cdkOverlayOrigin","",3,"hidden-search","passive","readonly",4,"ngIf"],["cdkOverlayOrigin","",1,"upgrade"],["trigger","cdkOverlayOrigin"],[1,"equipped-border"],[1,"skill-icon",3,"src"],[1,"rank"],[4,"ngIf"],["cdkConnectedOverlay","",3,"cdkConnectedOverlayOpen","cdkConnectedOverlayOrigin"],[3,"upgrade"]],template:function(t,n){1&t&&e.YNc(0,Zo,7,13,"div",0),2&t&&e.Q6J("ngIf",null!==n.upgrade)},dependencies:[d.O5,P.pI,P.xu,xe],styles:[".upgrade[_ngcontent-%COMP%]{background-color:#101010;position:relative;z-index:1}.upgrade.hidden-search[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{opacity:.2}.upgrade.passive[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%], .upgrade.passive[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.upgrade[_ngcontent-%COMP%]   .rank[_ngcontent-%COMP%]{position:absolute;background-color:#202020;padding:0 2px;bottom:0;right:0;font-size:10px;border-radius:4px}.upgrade[_ngcontent-%COMP%]   .rank.max[_ngcontent-%COMP%]{color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{width:46px;height:46px;position:relative;border:3px solid black;padding:2px;background-color:#202020}.upgrade[_ngcontent-%COMP%]   .equipped-border.equipped[_ngcontent-%COMP%]{background-color:#edd371}.upgrade[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border:3px solid black}.upgrade[_ngcontent-%COMP%]:not(.readonly)   .equipped-border[_ngcontent-%COMP%]{cursor:pointer}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]{padding:0;border-width:4px;width:44px;height:44px}.upgrade.readonly[_ngcontent-%COMP%]   .equipped-border[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-width:0}"]}),i})();function Io(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.maximize(a.selectedSkill))}),e._uU(1," Maximize skill and support ranks "),e.qZA()}}function Eo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.equipSupport(a.selectedSkill))}),e._uU(1," Equip as Support skill "),e.qZA()}}function Lo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.equipPrimary(a.selectedSkill))}),e._uU(1," Equip as Primary skill "),e.qZA()}}function qo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw(2);return e.KtG(a.equipSecondary(a.selectedSkill))}),e._uU(1," Equip as Secondary skill "),e.qZA()}}function Jo(i,o){if(1&i&&(e.YNc(0,Io,2,0,"button",4),e.YNc(1,Eo,2,0,"button",4),e.YNc(2,Lo,2,0,"button",4),e.YNc(3,qo,2,0,"button",4)),2&i){const t=e.oxw();e.Q6J("ngIf",null!==t.selectedSkill),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSupportSkill(t.selectedSkill)&&t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedPrimarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill&&!t.isEquippedSecondarySkill(t.selectedSkill)&&!t.isSupport(t.selectedSkill))}}let No=(()=>{class i extends O.B{constructor(t,n,a,r){super(),this.buildStorageService=t,this.messageService=n,this.slormancerSkillService=a,this.slormancerCharacterModifierService=r,this.selectedSkill=null,this.menu=null}ngOnInit(){}openSettings(){return null!==this.menu&&this.menu.openMenu(),!1}isSupport(t){return t.skill.type===l.Wak.Support}maximize(t){if(null!==this.buildStorageService.getLayer()){t.skill.baseLevel=t.skill.maxLevel,this.slormancerSkillService.updateSkillModel(t.skill);for(const a of t.upgrades)a.baseRank=a.maxRank,this.slormancerSkillService.updateUpgradeModel(a);this.buildStorageService.saveLayer(),this.messageService.message('Skill and upgrades set to max rank for <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name)}}equipSupport(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setSupportSkill(n.character,t.skill)&&(this.messageService.message('Skill equipped as support : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.buildStorageService.saveLayer())}equipPrimary(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setPrimarySkill(n.character,t.skill)&&(this.messageService.message('Skill equipped as primary : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.buildStorageService.saveLayer())}equipSecondary(t){const n=this.buildStorageService.getLayer();null!==n&&this.slormancerCharacterModifierService.setSecondarySkill(n.character,t.skill)&&(this.messageService.message('Skill equipped as secondary : <img src="assets/img/icon/'+t.skill.icon+'.png"/> '+t.skill.name),this.buildStorageService.saveLayer())}isEquippedSupportSkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.supportSkill===t.skill}isEquippedPrimarySkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.primarySkill===t.skill}isEquippedSecondarySkill(t){const n=this.buildStorageService.getLayer();return null!==n&&n.character.secondarySkill===t.skill}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(J.e),e.Y36(l.AR$),e.Y36(l.Y5A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings-skills"]],viewQuery:function(t,n){if(1&t&&e.Gf(x.p6,7),2&t){let a;e.iGM(a=e.CRH())&&(n.menu=a.first)}},inputs:{selectedSkill:"selectedSkill"},features:[e.qOj],decls:5,vars:2,consts:[[3,"matMenuTriggerFor","contextmenu"],["xPosition","after",3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"click",4,"ngIf"],["mat-menu-item","",3,"click"]],template:function(t,n){if(1&t&&(e.TgZ(0,"mat-icon",0),e.NdJ("contextmenu",function(){return n.openSettings()}),e._uU(1,"settings"),e.qZA(),e.TgZ(2,"mat-menu",1,2),e.YNc(4,Jo,4,4,"ng-template",3),e.qZA()),2&t){const a=e.MAs(3);e.Q6J("matMenuTriggerFor",a),e.xp6(2),e.Q6J("overlapTrigger",!0)}},dependencies:[d.O5,T.Hw,x.VK,x.OP,x.p6,x.KA],styles:["mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:#505050}"]}),i})();function Uo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"img",5),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.incrementSkill(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.decrementSkill(r))}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.ekj("selected",n.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",n.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.iconLarge+".png",e.LSH)}}function Ro(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4)(1,"img",6),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.incrementSkill(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.decrementSkill(r))}),e.qZA()()}if(2&i){const t=o.$implicit,n=e.oxw(2);e.ekj("selected",n.isSkillSelected(t)),e.xp6(1),e.ekj("equipped",n.isSkillEquipped(t)),e.Q6J("src","assets/img/icon/"+t.skill.icon+".png",e.LSH)}}function Bo(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"app-upgrade-slot",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.incrementUpgrade(r))})("contextmenu",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.decrementUpgrade(r))}),e.qZA()}if(2&i){const t=o.$implicit,n=e.oxw(4);e.Q6J("upgrade",t)("equipped",n.isUpgradeEquipped(t))}}function Fo(i,o){if(1&i&&(e.TgZ(0,"div",16)(1,"div",17),e._uU(2),e.qZA(),e.TgZ(3,"div",18),e.YNc(4,Bo,1,2,"app-upgrade-slot",19),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(2),e.hij(" ",t," "),e.xp6(2),e.Q6J("ngForOf",n.getLineUpgrades(t))}}function Ho(i,o){if(1&i&&(e.TgZ(0,"div",7)(1,"div",8),e._UZ(2,"app-settings-skills",9)(3,"app-skill-view",10),e.qZA(),e.TgZ(4,"div",11)(5,"div",12),e.YNc(6,Fo,5,2,"div",13),e.qZA()(),e.TgZ(7,"div",14),e._UZ(8,"app-skill-upgrade-view",15),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(2),e.Q6J("selectedSkill",t.selectedSkill),e.xp6(1),e.Q6J("skill",t.selectedSkill.skill),e.xp6(3),e.Q6J("ngForOf",t.selectedSkillLines),e.xp6(2),e.Q6J("upgrade",t.selectedUpgrade)}}function Qo(i,o){if(1&i&&(e.TgZ(0,"mat-card")(1,"mat-card-content")(2,"div",1),e.YNc(3,Uo,2,5,"div",2),e.YNc(4,Ro,2,5,"div",2),e.qZA(),e.YNc(5,Ho,9,4,"div",3),e.qZA()()),2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",t.getSupportSkills(t.character)),e.xp6(1),e.Q6J("ngForOf",t.getActiveSkills(t.character)),e.xp6(1),e.Q6J("ngIf",null!==t.selectedSkill)}}let Yo=(()=>{class i extends O.B{constructor(t,n,a){super(),this.buildStorageService=t,this.slormancerSkillService=n,this.slormancerCharacterModifierService=a,this.character=null,this.selectedSkill=null,this.selectedUpgrade=null,this.selectedSkillLines=[]}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.character=null===t?null:t.character,this.updateSelectedSkill()})}updateSelectedSkill(){const t=this.character,n=this.selectedSkill;let a=null;null===t?a=null:null===n?a=(0,l.lA$)(null!==t.supportSkill?t.skills.find(r=>r.skill===t.supportSkill):t.skills[0]):(a=(0,l.lA$)(t.skills.find(r=>r.skill.id===n.skill.id)),null===a&&(a=(0,l.lA$)(t.skills[0]))),this.selectSkill(a)}getSupportSkills(t){return t.skills.filter(n=>n.skill.type===l.Wak.Support)}getActiveSkills(t){return t.skills.filter(n=>n.skill.type===l.Wak.Active)}isSkillEquipped(t){return null!==this.character&&(this.character.primarySkill===t.skill||this.character.secondarySkill===t.skill||this.character.supportSkill===t.skill)}isEquippedSupportSkill(t){return null!==this.character&&this.character.supportSkill===t.skill}isEquippedPrimarySkill(t){return null!==this.character&&this.character.primarySkill===t.skill}isEquippedSecondarySkill(t){return null!==this.character&&this.character.secondarySkill===t.skill}isSkillSelected(t){return this.selectedSkill===t}selectSkill(t){this.selectedSkill!==t&&(this.selectedSkill=t,this.selectedSkillLines=null===t?[]:t.upgrades.map(n=>n.line).filter(l.mrA).sort(),this.selectedUpgrade=null===t?null:(0,l.lA$)(t.upgrades[0]))}incrementSkill(t){return this.selectedSkill===t?t.skill.baseLevel<t.skill.maxLevel&&(t.skill.baseLevel++,this.slormancerSkillService.updateSkillModel(t.skill),this.buildStorageService.saveLayer()):this.selectSkill(t),!1}decrementSkill(t){return this.selectedSkill===t?t.skill.baseLevel>1&&(t.skill.baseLevel--,this.slormancerSkillService.updateSkillModel(t.skill),this.buildStorageService.saveLayer()):this.selectSkill(t),!1}getLineUpgrades(t){let n=[];return null!==this.selectedSkill&&(n=this.selectedSkill.upgrades.filter(a=>a.line===t).sort((a,r)=>(0,l.quX)(a.order,r.order))),n}isUpgradeEquipped(t){let n=!1;return null!==this.selectedSkill&&(n=void 0!==this.selectedSkill.selectedUpgrades.find(a=>t.id===a)),n}incrementUpgrade(t){if(null!==this.selectedSkill&&null!==this.character){let n=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,n=!0),this.isUpgradeEquipped(t)?!n&&t.baseRank<t.maxRank&&(t.baseRank++,this.slormancerSkillService.updateUpgradeModel(t),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),0===t.baseRank&&(t.baseRank=1,this.slormancerSkillService.updateUpgradeModel(t)),this.buildStorageService.saveLayer())}return!1}decrementUpgrade(t){if(null!==this.selectedSkill&&null!==this.character){let n=!1;this.selectedUpgrade!==t&&(this.selectedUpgrade=t,n=!0),this.isUpgradeEquipped(t)?!n&&t.baseRank>1&&(t.baseRank--,this.slormancerSkillService.updateUpgradeModel(t),this.buildStorageService.saveLayer()):(this.slormancerCharacterModifierService.selectUpgrade(this.character,t),this.buildStorageService.saveLayer())}return!1}isSupport(t){return t.skill.type===l.Wak.Support}equipSupport(t){null!==this.character&&(this.slormancerCharacterModifierService.setSupportSkill(this.character,t.skill),this.buildStorageService.saveLayer())}equipPrimary(t){null!==this.character&&(this.slormancerCharacterModifierService.setPrimarySkill(this.character,t.skill),this.buildStorageService.saveLayer())}equipSecondary(t){null!==this.character&&(this.slormancerCharacterModifierService.setSecondarySkill(this.character,t.skill),this.buildStorageService.saveLayer())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C),e.Y36(l.AR$),e.Y36(l.Y5A))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-skills"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"skills"],["class","skill-option",3,"selected",4,"ngFor","ngForOf"],["class","skill",4,"ngIf"],[1,"skill-option"],[1,"skill-icon","support",3,"src","click","contextmenu"],[1,"skill-icon",3,"src","click","contextmenu"],[1,"skill"],[1,"selected-skill"],[3,"selectedSkill"],[3,"skill"],[1,"slormancer-tooltip","upgrades"],[1,"inner-box"],["class","line",4,"ngFor","ngForOf"],[1,"selected-upgrade"],[3,"upgrade"],[1,"line"],[1,"number"],[1,"line-upgrades"],[3,"upgrade","equipped","click","contextmenu",4,"ngFor","ngForOf"],[3,"upgrade","equipped","click","contextmenu"]],template:function(t,n){1&t&&e.YNc(0,Qo,6,3,"mat-card",0),2&t&&e.Q6J("ngIf",null!==n.character)},dependencies:[d.sg,d.O5,y.a8,y.dn,fe,xe,ye,No],styles:['[_nghost-%COMP%]{flex-grow:1}mat-card[_ngcontent-%COMP%]{height:100%}.skills[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:8px;height:60px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]{transition:padding-top .1s linear;padding-top:0}.skills[_ngcontent-%COMP%]   .skill-option.selected[_ngcontent-%COMP%]{padding-top:8px}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-color:#353535;cursor:pointer}.skills[_ngcontent-%COMP%]   .skill-option[_ngcontent-%COMP%]   img.equipped[_ngcontent-%COMP%]{border-color:#edd371}.skill[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;gap:20px;flex-grow:20px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]{position:relative;min-width:350px;width:350px}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-view[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-skill-upgrade-view[_ngcontent-%COMP%]{flex-grow:1}.skill[_ngcontent-%COMP%]   .selected-upgrade[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%], .skill[_ngcontent-%COMP%]   .selected-skill[_ngcontent-%COMP%]   app-settings-skills[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;z-index:1}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:12px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:relative;width:28px;height:28px;border:2px solid black;border-radius:17px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .number[_ngcontent-%COMP%]:before{content:" ";position:absolute;inset:0;border:2px solid #202020;border-radius:15px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;gap:12px;position:relative;padding-left:20px}.skill[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%] > .inner-box[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .line-upgrades[_ngcontent-%COMP%]:before{content:" ";position:absolute;left:-2px;right:1px;height:2px;width:100%;background-color:#202020;border:2px solid black;border-left:0;border-right:0}']}),i})();function Go(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function Vo(i,o){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function Do(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function jo(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Do,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function Ko(i,o){if(1&i&&(e.ynx(0),e.YNc(1,jo,10,4,"div",13),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function Xo(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function zo(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Xo,10,3,"div",13),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",!t.extra)}}function $o(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," ")}}function Wo(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,Go,2,0,"span",2),e.qZA(),e.YNc(9,Vo,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,Ko,2,1,"ng-container",12),e.YNc(15,zo,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,$o,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlat(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function er(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function tr(i,o){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function nr(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function ir(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,nr,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function ar(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Percent"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,"%")," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function or(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," ")}}function rr(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,er,2,0,"span",2),e.qZA(),e.YNc(9,tr,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,ir,10,4,"div",15),e.YNc(15,ar,10,3,"div",15),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Percent (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,or,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Percent values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.percent),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxPercent),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalPercent(t.mergedStat),"%",!0)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function lr(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function cr(i,o){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function sr(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,"%",!0)," ")}}function mr(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,sr,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,"%",!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function dr(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Multiplier"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=o.$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",t.value,"% "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function ur(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,lr,2,0,"span",2),e.qZA(),e.YNc(9,cr,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,mr,10,4,"div",15),e.YNc(15,dr,10,3,"div",15),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Multiplier values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.multiplier),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.maxMultiplier)}}function pr(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," (min)"),e.qZA())}function gr(i,o){1&i&&(e.TgZ(0,"div",7),e._uU(1," Value"),e.TgZ(2,"span"),e._uU(3," (max)"),e.qZA()())}function _r(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,n=e.oxw(3);e.xp6(1),e.hij(" ",n.maxValueToString(t.value,n.mergedStat.suffix,!0)," ")}}function fr(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,_r,2,1,"div",8),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(4),e.hij(" ",n.minValueToString(t.value,n.mergedStat.suffix,!0)," "),e.xp6(1),e.Q6J("ngIf",n.mergedStat.allowMinMax),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function hr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,fr,10,4,"div",13),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function Cr(i,o){if(1&i&&(e.TgZ(0,"div",14)(1,"div",6),e._uU(2,"Flat"),e.qZA(),e._UZ(3,"div",7),e.TgZ(4,"div",7),e._uU(5),e.qZA(),e.TgZ(6,"div",9),e._uU(7),e.qZA(),e.TgZ(8,"div",10),e._uU(9),e.qZA()()),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.xp6(5),e.hij(" +",n.valueToString(t.value,n.mergedStat.suffix)," "),e.xp6(2),e.hij(" ",n.getSource(t.source)," "),e.xp6(2),e.hij(" ",n.getSourceName(t.source)," ")}}function vr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Cr,10,3,"div",13),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t.extra)}}function Mr(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," ")}}function br(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"h3",3),e._uU(2),e.qZA(),e.TgZ(3,"div",11)(4,"div",6),e._uU(5,"Type"),e.qZA(),e.TgZ(6,"div",7),e._uU(7," Value"),e.YNc(8,pr,2,0,"span",2),e.qZA(),e.YNc(9,gr,4,0,"div",8),e.TgZ(10,"div",9),e._uU(11," Source "),e.qZA(),e.TgZ(12,"div",10),e._uU(13," Source name "),e.qZA()(),e.YNc(14,hr,2,1,"ng-container",12),e.YNc(15,vr,2,1,"ng-container",12),e.TgZ(16,"div",5)(17,"div",6),e._uU(18,"Flat (Total)"),e.qZA(),e.TgZ(19,"div",7),e._uU(20),e.qZA(),e.YNc(21,Mr,2,1,"div",8),e._UZ(22,"div",9)(23,"div",10),e.qZA(),e.BQk()),2&i){const t=e.oxw(2);e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Flat extra values"),e.xp6(6),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(5),e.Q6J("ngForOf",t.mergedStat.values.flat),e.xp6(1),e.Q6J("ngForOf",t.mergedStat.values.max),e.xp6(5),e.hij(" ",t.minValueToString(t.getTotalFlatExtra(t.mergedStat),t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Or(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1," (Min)"),e.qZA())}function xr(i,o){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula"),e.YNc(3,Or,2,0,"span",2),e.qZA(),e.TgZ(4,"div",16),e._uU(5),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("ngIf",t.totalHasMinMax(t.mergedStat)),e.xp6(2),e.hij(" ",t.getMinFormula(t.mergedStat)," ")}}function yr(i,o){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Formula (Max)"),e.qZA(),e.TgZ(3,"div",16),e._uU(4),e.qZA()()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.getMaxFormula(t.mergedStat)," ")}}function Pr(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.total,t.mergedStat.suffix)," ")}}function Sr(i,o){if(1&i&&(e.TgZ(0,"div",7),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.hij(" ",t.maxValueToString(t.mergedStat.totalDisplayed,t.mergedStat.suffix)," ")}}function kr(i,o){if(1&i&&(e.TgZ(0,"div",5)(1,"div",6),e._uU(2,"Total (shown in stats)"),e.qZA(),e.TgZ(3,"div",7),e._uU(4),e.qZA(),e.YNc(5,Sr,2,1,"div",8),e._UZ(6,"div",9)(7,"div",10),e.qZA()),2&i){const t=e.oxw(2);e.xp6(4),e.hij(" ",t.minValueToString(t.mergedStat.totalDisplayed,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax)}}function Tr(i,o){if(1&i&&(e.TgZ(0,"div",1),e.YNc(1,Wo,24,7,"ng-container",2),e.YNc(2,rr,24,7,"ng-container",2),e.YNc(3,ur,16,5,"ng-container",2),e.YNc(4,br,24,7,"ng-container",2),e.TgZ(5,"h3",3),e._uU(6),e.qZA(),e.YNc(7,xr,6,2,"div",4),e.YNc(8,yr,5,1,"div",4),e.TgZ(9,"div",5)(10,"div",6),e._uU(11,"Total"),e.qZA(),e.TgZ(12,"div",7),e._uU(13),e.qZA(),e.YNc(14,Pr,2,1,"div",8),e._UZ(15,"div",9)(16,"div",10),e.qZA(),e.YNc(17,kr,8,2,"div",4),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.hasFlatValues(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.percent.length>0||t.mergedStat.values.maxPercent.length>0),e.xp6(1),e.Q6J("ngIf",t.mergedStat.values.multiplier.length>0||t.mergedStat.values.maxMultiplier.length>0),e.xp6(1),e.Q6J("ngIf",t.hasFlatExtraValues(t.mergedStat)),e.xp6(2),e.hij("",t.translate(t.mergedStat.stat)," - Total"),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)),e.xp6(1),e.Q6J("ngIf",t.showFormula(t.mergedStat)&&t.totalHasMinMax(t.mergedStat)),e.xp6(5),e.hij(" ",t.minValueToString(t.mergedStat.total,t.mergedStat.suffix)," "),e.xp6(1),e.Q6J("ngIf",t.mergedStat.allowMinMax),e.xp6(3),e.Q6J("ngIf",t.hasDisplayPrecision(t.mergedStat))}}let wr=(()=>{class i{constructor(t,n){this.slormancerTranslateService=t,this.slormancerStatUpdaterService=n,this.mergedStat=null,this.percent=!1}translate(t){return this.slormancerTranslateService.translate(t)}getSource(t){let n="";return"synergy"in t?n="Synergy":"character"in t?n="Character":"skill"in t?n="Skill":"upgrade"in t?n="Upgrade":"item"in t?n="Item":"ancestralLegacy"in t?n="Ancestral Legacy":"attribute"in t?n="Attribute":"reaper"in t?n="Reaper":"activable"in t?n="Activable":"mechanic"in t?n="Mechanic":"classMechanic"in t?n="Class Mechanic":"ultimatum"in t?n="Ultimatum":"rune"in t&&(n="Rune"),n}getSourceName(t){let n="";return"synergy"in t?n=t.synergy:"skill"in t?n=t.skill.nameLabel:"upgrade"in t?n=t.upgrade.name:"item"in t?n=t.item.name:"ancestralLegacy"in t?n=t.ancestralLegacy.name:"attribute"in t?n=t.attribute.attributeName:"reaper"in t?n=t.reaper.name:"activable"in t?n=t.activable.name:"mechanic"in t?n=t.mechanic.name:"classMechanic"in t?n=t.classMechanic.name:"ultimatum"in t?n=t.ultimatum.title:"rune"in t&&(n=t.rune.name),n}valueToString(t,n){return"number"==typeof t?(0,l.NMM)(t,5)+n:(0,l.NMM)(t.min,5)+n+"-"+(0,l.NMM)(t.max,5)+n}minValueToString(t,n,a=!1){const r=(0,l.NMM)("number"==typeof t?t:t.min,5);return(r>=0&&a?"+":"")+r+n}maxValueToString(t,n,a=!1){const r=(0,l.NMM)("number"==typeof t?t:t.max,5);return(r>=0&&a?"+":"")+r+n}getTotalFlat(t){return this.slormancerStatUpdaterService.getTotalFlat(t)}getTotalFlatExtra(t){return this.slormancerStatUpdaterService.getTotalFlatExtra(t)}getTotalPercent(t){const n=this.slormancerStatUpdaterService.addNumberValues(t.values.percent.map(r=>r.value)),a=n+this.slormancerStatUpdaterService.addNumberValues(t.values.maxPercent.map(r=>r.value));return n!==a?{min:n,max:a}:n}getTotalFlatPercent(t){const n=this.slormancerStatUpdaterService.getTotalFlatAndPercent(t);return this.valueToString(n,t.suffix)}getTotal(t){const n=this.slormancerStatUpdaterService.getTotal(t);return this.valueToString(n,t.suffix)}hasFlatValues(t){return t.values.flat.filter(n=>!n.extra).length>0||t.values.max.filter(n=>!n.extra).length>0}hasFlatExtraValues(t){return t.values.flat.filter(n=>n.extra).length>0||t.values.max.filter(n=>n.extra).length>0}hasPercentValues(t){return t.values.percent.length>0||t.values.maxPercent.length>0}hasMultiplierValues(t){return t.values.multiplier.length>0||t.values.maxMultiplier.length>0}showFormula(t){return(t.values.flat.filter(u=>!u.extra).length>0||t.values.max.filter(u=>!u.extra).length>0?1:0)+(t.values.percent.length>0||t.values.maxPercent.length>0?1:0)+(t.values.multiplier.length>0||t.values.maxMultiplier.length>0?1:0)+(t.values.flat.filter(u=>u.extra).length>0||t.values.max.filter(u=>u.extra).length>0?1:0)+(this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?1:0)>=2}totalHasMinMax(t){return"number"!=typeof t.total}getMinFormula(t){let n=this.slormancerStatUpdaterService.getTotal(t),a=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),c=t.values.multiplier.map(g=>g.value),m=this.slormancerStatUpdaterService.getTotalFlatExtra(t);a="number"==typeof a?a:a.min,r="number"==typeof r?r:r.min,m="number"==typeof m?m:m.min;let u=(0,l.NMM)("number"==typeof n?n:n.min,5)+" = ";return this.slormancerStatUpdaterService.hasDiminishingResult(t.stat)?u+="(1 - "+[a,r,...c].filter(g=>0!==g).map(g=>Math.max(0,100-g)/100).join(" * ")+") * 100":(u+="round( "+this.valueToString(a,t.suffix)+[r,...c].filter(g=>0!==g).map(g=>" * "+(g+100)/100).join("")+" )",0!==m&&(u+=m>0?" + "+m:" - "+Math.abs(m))),u}getMaxFormula(t){let n=this.slormancerStatUpdaterService.getTotal(t),a=this.slormancerStatUpdaterService.getTotalFlat(t),r=this.slormancerStatUpdaterService.getTotalPercent(t),c=this.slormancerStatUpdaterService.getTotalFlatExtra(t);const m=t.values.multiplier.map(g=>g.value);a="number"==typeof a?a:a.max,r="number"==typeof r?r:r.max,c="number"==typeof c?c:c.max;let u=(0,l.NMM)("number"==typeof n?n:n.max,5)+" = ";return u+="round( "+this.valueToString(a,t.suffix)+[r,...m].filter(g=>0!==g).map(g=>" * "+(g+100)/100).join("")+" )",0!==c&&(u+=c>0?" + "+c:" - "+Math.abs(c)),u}hasDisplayPrecision(t){return t.totalDisplayed!==t.total}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(l.n6D),e.Y36(l.Cfl))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-merged-stat-view"]],inputs:{mergedStat:"mergedStat",percent:"percent"},decls:1,vars:1,consts:[["class","merged-stat",4,"ngIf"],[1,"merged-stat"],[4,"ngIf"],[1,"section"],["class","line total",4,"ngIf"],[1,"line","total"],[1,"label"],[1,"value"],["class","value",4,"ngIf"],[1,"source"],[1,"source-name"],[1,"line","head"],[4,"ngFor","ngForOf"],["class","line data",4,"ngIf"],[1,"line","data"],["class","line data",4,"ngFor","ngForOf"],[1,"formula"]],template:function(t,n){1&t&&e.YNc(0,Tr,18,10,"div",0),2&t&&e.Q6J("ngIf",null!==n.mergedStat)},dependencies:[d.sg,d.O5],styles:[".merged-stat[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]:not(.data){padding:8px 0}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-grow:2;flex-basis:0;max-width:150px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-grow:3;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-grow:6;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){.merged-stat[_ngcontent-%COMP%]   .line[_ngcontent-%COMP%]   .formula[_ngcontent-%COMP%]{flex-basis:auto}}}.merged-stat[_ngcontent-%COMP%]   .line.data[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.merged-stat[_ngcontent-%COMP%]   .line.head[_ngcontent-%COMP%]{text-transform:uppercase}"]}),i})();function Ar(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"main")(1,"mat-card",1)(2,"mat-card-content")(3,"app-main-stats",2),e.NdJ("selected",function(a){e.CHM(t);const r=e.oxw();return e.KtG(r.selectMergedStat(a))}),e.qZA()()(),e.TgZ(4,"mat-card")(5,"mat-card-content"),e._UZ(6,"app-merged-stat-view",3),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("stats",t.stats),e.xp6(3),e.Q6J("mergedStat",t.selectedMergedStat)}}const Zr=[{path:"",component:dt,children:[{path:"inventory",component:Po},{path:"skills",component:Yo},{path:"ancestral-legacies",component:It},{path:"attributes",component:Wt},{path:"stats",component:(()=>{class i extends O.B{constructor(t){super(),this.buildStorageService=t,this.stats=null,this.selectedMergedStat=null}ngOnInit(){this.buildStorageService.layerChanged.pipe((0,M.R)(this.unsubscribe)).subscribe(t=>{this.stats=null===t?null:t.character.stats})}selectMergedStat(t){this.selectedMergedStat=t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(C))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-stats"]],features:[e.qOj],decls:1,vars:1,consts:[[4,"ngIf"],[1,"stats"],[3,"stats","selected"],[3,"mergedStat"]],template:function(t,n){1&t&&e.YNc(0,Ar,7,2,"main",0),2&t&&e.Q6J("ngIf",null!==n.stats)},dependencies:[d.O5,y.a8,y.dn,z,wr],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:300px}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{max-width:unset}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{flex-basis:auto}}}"]}),i})()},{path:"config",component:Fn},{path:"compare",component:Mn},{path:"calcs",component:cn},{path:"**",redirectTo:"inventory"}]}];let Ir=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[k.Bz.forChild(Zr),k.Bz]}),i})(),Pe=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,H.m,Ir]}),i})();const Er=[{path:"",component:(()=>{class i{constructor(t){this.router=t,this.created=new e.vpe}redirectToBuild(){this.router.navigate(["slorm-planner","build"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-first-build"]],decls:4,vars:0,consts:[[3,"created"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"mat-card")(2,"mat-card-content")(3,"app-create-build",0),e.NdJ("created",function(){return n.redirectToBuild()}),e.qZA()()()())},dependencies:[y.a8,y.dn,re],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px;padding:20px;width:380px}@media (max-width: 374px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{width:100%;text-align:center;margin-top:0}@media (max-width: 768px){main[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{width:auto;padding:0}}"]}),i})()}];let Lr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[k.Bz.forChild(Er),k.Bz]}),i})(),Se=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,H.m,Lr,P.U8]}),i})();function qr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showSummary=!a.showSummary)}),e._uU(1,"Show Stats"),e.qZA()}}function Jr(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.showSummary=!a.showSummary)}),e._uU(1,"Show Summary"),e.qZA()}}function Nr(i,o){if(1&i&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Ur(i,o){if(1&i&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Rr(i,o){if(1&i&&(e.TgZ(0,"div",39),e._UZ(1,"app-upgrade-slot",40),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("upgrade",t)("readonly",!0)("overlay",!0)("equipped",!1)("selected",!1)}}function Br(i,o){if(1&i&&(e.TgZ(0,"div",33),e._UZ(1,"app-ancestral-legacy-slot",41),e.qZA()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ancestralLegacy",t)("readonly",!0)("overlay",!0)}}function Fr(i,o){if(1&i&&e._UZ(0,"app-attribute-line",43),2&i){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("short",!0)("readonly",!0)("iconShift",!0)("attribute",n.character.attributes.allocated[t])("remainingPoints",n.character.attributes.remainingPoints)}}function Hr(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Fr,1,5,"app-attribute-line",42),e.BQk()),2&i){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",n.showAttribute(t))}}function Qr(i,o){if(1&i&&(e.TgZ(0,"mat-card",9)(1,"mat-card-content")(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13),e._uU(6),e.qZA(),e._UZ(7,"img",14),e.qZA(),e.TgZ(8,"div",12)(9,"div",13),e._uU(10),e.qZA(),e._UZ(11,"img",15),e.qZA()(),e.TgZ(12,"div",16)(13,"div",12)(14,"div",13),e._uU(15),e.qZA(),e._UZ(16,"img",17),e.qZA(),e.TgZ(17,"div",12)(18,"div",13),e._uU(19),e.qZA(),e._UZ(20,"img",18),e.qZA()(),e.TgZ(21,"div",19)(22,"div",12)(23,"div",13),e._uU(24),e.qZA(),e._UZ(25,"img",20),e.qZA(),e.TgZ(26,"div",12)(27,"div",13),e._uU(28),e.qZA(),e._UZ(29,"img",21),e.qZA(),e.TgZ(30,"div",12)(31,"div",13),e._uU(32),e.qZA(),e._UZ(33,"img",22),e.qZA()()(),e.TgZ(34,"div",23)(35,"h4"),e._uU(36,"Support Skill"),e.qZA(),e.TgZ(37,"div",24)(38,"div",25),e._UZ(39,"app-skill-slot",26),e.qZA(),e.TgZ(40,"div",27),e.YNc(41,Nr,2,5,"div",28),e.qZA()()(),e.TgZ(42,"div",23)(43,"h4"),e._uU(44,"Primary Skill"),e.qZA(),e.TgZ(45,"div",24)(46,"div",25),e._UZ(47,"app-skill-slot",29),e.qZA(),e.TgZ(48,"div",27),e.YNc(49,Ur,2,5,"div",28),e.qZA()()(),e.TgZ(50,"div",23)(51,"h4"),e._uU(52,"Secondary Skill"),e.qZA(),e.TgZ(53,"div",24)(54,"div",25),e._UZ(55,"app-skill-slot",29),e.qZA(),e.TgZ(56,"div",27),e.YNc(57,Rr,2,5,"div",28),e.qZA()()(),e.TgZ(58,"div",30)(59,"div",31)(60,"h4"),e._uU(61,"Activables"),e.qZA(),e.TgZ(62,"div",32)(63,"div",33),e._UZ(64,"app-activable-slot",34),e.qZA(),e.TgZ(65,"div",33),e._UZ(66,"app-activable-slot",34),e.qZA(),e.TgZ(67,"div",33),e._UZ(68,"app-activable-slot",34),e.qZA(),e.TgZ(69,"div",33),e._UZ(70,"app-activable-slot",34),e.qZA()()(),e.TgZ(71,"div",35)(72,"h4"),e._uU(73,"Ancestral Legacies"),e.qZA(),e.TgZ(74,"div",32),e.YNc(75,Br,2,3,"div",36),e.qZA()()(),e.TgZ(76,"div",37),e.YNc(77,Hr,2,1,"ng-container",38),e.qZA()()()),2&i){const t=e.oxw();e.xp6(5),e.Q6J("matTooltip",t.PHYSICAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(t.getPhysicalDamages()),e.xp6(3),e.Q6J("matTooltip",t.ELEMENTAL_DAMAGE_LABEL),e.xp6(1),e.Oqu(t.getElementalDamages()),e.xp6(4),e.Q6J("matTooltip",t.MAX_LIFE_LABEL),e.xp6(1),e.Oqu(t.getMaximumLife()),e.xp6(3),e.Q6J("matTooltip",t.MAX_MANA_LABEL),e.xp6(1),e.Oqu(t.getMaximumMana()),e.xp6(4),e.Q6J("matTooltip",t.MAX_ARMOR_LABEL),e.xp6(1),e.Oqu(t.getArmor()),e.xp6(3),e.Q6J("matTooltip",t.MAX_ELEMENTAL_RESISTANCE_LABEL),e.xp6(1),e.Oqu(t.getElementalResistance()),e.xp6(3),e.Q6J("matTooltip",t.MAX_DODGE_LABEL),e.xp6(1),e.Oqu(t.getDodge()),e.xp6(7),e.Q6J("readonly",!0)("skill",t.character.supportSkill)("support",!0),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.supportSkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",t.character.primarySkill),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.primarySkill)),e.xp6(6),e.Q6J("readonly",!0)("skill",t.character.secondarySkill),e.xp6(2),e.Q6J("ngForOf",t.getSkillUpgrades(t.character.secondarySkill)),e.xp6(7),e.Q6J("activable",t.character.activable1)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable2)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable3)("readonly",!0),e.xp6(2),e.Q6J("activable",t.character.activable4)("readonly",!0),e.xp6(5),e.Q6J("ngForOf",t.getAncestralLegacies()),e.xp6(2),e.Q6J("ngForOf",t.ALL_ATTRIBUTES)}}function Yr(i,o){if(1&i&&(e.TgZ(0,"mat-card",44)(1,"mat-card-content"),e._UZ(2,"app-main-stats",45),e.qZA()()),2&i){const t=e.oxw();e.xp6(2),e.Q6J("stats",t.character.stats)}}let Gr=(()=>{class i{constructor(t,n,a,r,c,m,u){this.router=n,this.buildStorageService=a,this.buildService=r,this.slormancerCharacterUpdaterService=c,this.slormancerDpsService=m,this.slormancerTranslateService=u,this.PHYSICAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_physical_damage"),this.ELEMENTAL_DAMAGE_LABEL=this.slormancerTranslateService.translate("tt_elemental_damage"),this.MAX_LIFE_LABEL=this.slormancerTranslateService.translate("max_health"),this.MAX_MANA_LABEL=this.slormancerTranslateService.translate("max_mana"),this.MAX_ARMOR_LABEL=this.slormancerTranslateService.translate("armor"),this.MAX_DODGE_LABEL=this.slormancerTranslateService.translate("dodge"),this.MAX_ELEMENTAL_RESISTANCE_LABEL=this.slormancerTranslateService.translate("elemental_resist"),this.ALL_ATTRIBUTES=l.AFD,this.showSummary=!0,this.combatBuffControl=new s.NI(!1),this.character=t.snapshot.data.character,this.combatBuffControl.valueChanges.subscribe(()=>this.updateConfiguration()),this.updateConfiguration()}updateConfiguration(){let t=Object.assign({},this.combatBuffControl.value?l.m2A:l.g5j);const n=[this.character.primarySkill,this.character.secondarySkill,this.character.activable1,this.character.activable2,this.character.activable3,this.character.activable4].filter(l.BXh).map(a=>"manaCost"in a?a.manaCost:a.cost).filter(l.BXh);t.minimum_unreserved_mana=Math.max(...n,0),this.slormancerCharacterUpdaterService.updateCharacter(this.character,t)}getStat(t){let n=0;const a=this.character.stats.find(r=>r.stat===t);return a&&(n=a.total),n}valueToString(t){return"number"==typeof t?t.toString():t.min+"-"+t.max}getPhysicalDamages(){const t=this.getStat("critical_chance"),n=this.getStat("critical_damage"),a=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),c=this.getStat("physical_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(c,t,a,n,r)))}getElementalDamages(){const t=this.getStat("critical_chance"),n=this.getStat("critical_damage"),a=this.getStat("ancestral_chance"),r=this.getStat("ancestral_damage"),c=this.getStat("elemental_damage");return this.valueToString(Math.round(this.slormancerDpsService.getAverageHitDamage(c,t,a,n,r)))}getMaximumLife(){return this.valueToString(this.getStat("max_health"))}getMaximumMana(){return this.valueToString(this.getStat("max_mana"))}getArmor(){return this.valueToString(this.getStat("armor"))}getDodge(){return this.valueToString(this.getStat("dodge"))}getElementalResistance(){return this.valueToString(this.getStat("elemental_resist"))}getSkillUpgrades(t){let n=[];const a=this.character.skills.find(r=>r.skill===t);return a&&(n=a.upgrades.filter(r=>a.selectedUpgrades.includes(r.id))),n}getAncestralLegacies(){return this.character.ancestralLegacies.ancestralLegacies.filter(t=>this.character.ancestralLegacies.activeAncestralLegacies.includes(t.id))}showAttribute(t){return this.character.attributes.allocated[t].rank>0}import(){const t=this.buildService.createBuildWithCharacter("Imported build","Imported layer",this.character);this.buildStorageService.addBuild(t),this.router.navigate(["slorm-planner","build"])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(k.gz),e.Y36(k.F0),e.Y36(C),e.Y36(U),e.Y36(l.Pdp),e.Y36(l.vHF),e.Y36(l.n6D))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-view-character"]],decls:18,vars:12,consts:[[1,"equipment"],[3,"character","readonly"],[1,"weapon"],[3,"readonly","character"],["color","primary",3,"formControl"],["color","primary","mat-flat-button","",3,"click"],["color","primary","mat-flat-button","",3,"click",4,"ngIf"],["class","summary",4,"ngIf"],["class","stats",4,"ngIf"],[1,"summary"],[1,"stats-summary"],[1,"damages"],[1,"cell"],[1,"value",3,"matTooltip"],["src","assets/img/icon/stat/physical.png"],["src","assets/img/icon/stat/magical.png"],[1,"ressources"],["src","assets/img/icon/stat/life.png"],["src","assets/img/icon/stat/mana.png"],[1,"defenses"],["src","assets/img/icon/stat/armor.png"],["src","assets/img/icon/stat/elemental_resistance.png"],["src","assets/img/icon/stat/dodge.png"],[1,"skill-info"],[1,"skill-line"],[1,"skill"],[3,"readonly","skill","support"],[1,"upgrades"],["class","upgrade",4,"ngFor","ngForOf"],[3,"readonly","skill"],[1,"activables-ancestral-legacies"],[1,"activables"],[1,"slots"],[1,"slot"],[3,"activable","readonly"],[1,"ancestral-legacies"],["class","slot",4,"ngFor","ngForOf"],[1,"attributes"],[4,"ngFor","ngForOf"],[1,"upgrade"],[3,"upgrade","readonly","overlay","equipped","selected"],[3,"ancestralLegacy","readonly","overlay"],[3,"short","readonly","iconShift","attribute","remainingPoints",4,"ngIf"],[3,"short","readonly","iconShift","attribute","remainingPoints"],[1,"stats"],[3,"stats"]],template:function(t,n){1&t&&(e.TgZ(0,"main")(1,"mat-card",0)(2,"mat-card-content")(3,"h3"),e._uU(4),e.qZA(),e._UZ(5,"app-character-equipment",1),e.TgZ(6,"div",2),e._UZ(7,"app-reaper-slot",3)(8,"app-runes-slot",1),e.qZA()(),e.TgZ(9,"mat-card-actions")(10,"mat-checkbox",4),e._uU(11,"Activate combat buffs"),e.qZA(),e.TgZ(12,"button",5),e.NdJ("click",function(){return n.import()}),e._uU(13,"Import"),e.qZA(),e.YNc(14,qr,2,0,"button",6),e.YNc(15,Jr,2,0,"button",6),e.qZA()(),e.YNc(16,Qr,78,34,"mat-card",7),e.YNc(17,Yr,3,1,"mat-card",8),e.qZA()),2&t&&(e.xp6(4),e.Oqu(n.character.fullName),e.xp6(1),e.Q6J("character",n.character)("readonly",!0),e.xp6(2),e.Q6J("readonly",!0)("character",n.character),e.xp6(1),e.Q6J("character",n.character)("readonly",!0),e.xp6(2),e.Q6J("formControl",n.combatBuffControl),e.xp6(4),e.Q6J("ngIf",n.showSummary),e.xp6(1),e.Q6J("ngIf",!n.showSummary),e.xp6(1),e.Q6J("ngIf",n.showSummary),e.xp6(1),e.Q6J("ngIf",!n.showSummary))},dependencies:[d.sg,d.O5,b.lW,y.a8,y.dn,y.hq,V.oG,E.gM,s.JJ,s.oH,_e,Ce,he,Me,ye,se,me,z,Oe],styles:["main[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:center;gap:20px;padding:20px;overflow-x:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]{flex-direction:column}}@media (max-width: 374px){main[_ngcontent-%COMP%]{padding-left:0;padding-right:0}}@media (max-width: 768px){main[_ngcontent-%COMP%]{height:auto}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{min-width:490px;max-width:490px;width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]{width:auto;min-width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:4px}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   .weapon[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:48px;margin:4px 20px 20px;padding:12px;background-color:#161412;border:3px solid rgb(60,60,60)}main[_ngcontent-%COMP%]   .equipment[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{margin-right:auto}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:490px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]{width:auto;max-width:initial}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:20px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-weight:400}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;font-size:large}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:4px;flex-grow:1;flex-basis:0;border-radius:16px;border:4px solid black;background-color:#202020;height:56px;padding:8px}@media not all and (-webkit-min-device-pixel-ratio: 0),not all and (min-resolution: .001dpcm){@supports (-webkit-appearance: none){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{flex-basis:auto}}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .damages[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .defenses[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .stats-summary[_ngcontent-%COMP%]   .ressources[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{flex-grow:1;text-align:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between;gap:16px;min-height:60px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .skill[_ngcontent-%COMP%]{width:80px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]{flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .skill-line[_ngcontent-%COMP%]   .upgrades[_ngcontent-%COMP%]   .upgrade[_ngcontent-%COMP%]{padding:4px;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;gap:16px}@media (max-width: 768px){main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]{flex-direction:column}}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .activables[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch;gap:8px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px;display:block;float:left}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]{min-height:60px;flex-grow:1}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .activables-ancestral-legacies[_ngcontent-%COMP%]   .slots[_ngcontent-%COMP%]   .slot[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]{padding:4px}main[_ngcontent-%COMP%]   .summary[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%], main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .attributes[_ngcontent-%COMP%]   app-attribute-line[_ngcontent-%COMP%]{float:left}main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:725px;padding-right:16px;overflow:auto}@media (max-width: 768px){main[_ngcontent-%COMP%]   .stats[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{height:auto}}"]}),i})(),ke=(()=>{class i{constructor(t,n,a){this.importExportService=t,this.messageService=n,this.router=a}back(){this.router.navigateByUrl("/")}resolve(t){return new Promise(n=>{const a=(0,l.lA$)(t.params.key);if(null!==a){const r=this.importExportService.import(a);null!==r.character?n(r.character):(this.messageService.error("Failed to load shared character"),this.back())}else this.back()})}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(G),e.LFG(J.e),e.LFG(k.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const Vr=[{path:"build/:key",component:Gr,resolve:{character:ke}}];let Dr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[ke],imports:[k.Bz.forChild(Vr),k.Bz]}),i})(),Te=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,H.m,Dr,P.U8]}),i})(),we=(()=>{class i{constructor(t,n){this.buildStorageService=t,this.router=n}canActivate(){return 0!==this.buildStorageService.getBuilds().length||(this.router.navigate(["slorm-planner","create"]),!1)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C),e.LFG(k.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})(),Ae=(()=>{class i{constructor(t,n){this.buildStorageService=t,this.router=n}canActivate(){return!(this.buildStorageService.getBuilds().length>0&&(this.router.navigate(["slorm-planner","build"]),1))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(C),e.LFG(k.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i})();const jr=[{path:"build",canActivate:[we],loadChildren:()=>Pe},{path:"view",loadChildren:()=>Te},{path:"create",canActivate:[Ae],loadChildren:()=>Se},{path:"**",pathMatch:"full",redirectTo:"build"}];let Kr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[we,Ae],imports:[k.Bz.forChild(jr),k.Bz]}),i})(),Xr=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,H.m,Kr,Pe,Te,Se]}),i})()}}]);